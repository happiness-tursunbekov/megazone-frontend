"use strict";var Ex=Object.defineProperty,Vx=Object.defineProperties;var Lx=Object.getOwnPropertyDescriptors;var Hc=Object.getOwnPropertySymbols;var cf=Object.prototype.hasOwnProperty,df=Object.prototype.propertyIsEnumerable;var lf=(t,e,r)=>e in t?Ex(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,X=(t,e)=>{for(var r in e||(e={}))cf.call(e,r)&&lf(t,r,e[r]);if(Hc)for(var r of Hc(e))df.call(e,r)&&lf(t,r,e[r]);return t},de=(t,e)=>Vx(t,Lx(e));var Gc=(t,e)=>{var r={};for(var a in t)cf.call(t,a)&&e.indexOf(a)<0&&(r[a]=t[a]);if(t!=null&&Hc)for(var a of Hc(t))e.indexOf(a)<0&&df.call(t,a)&&(r[a]=t[a]);return r};Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var u=require("vue"),y=require("vue/server-renderer"),Tn=require("vuex"),La=require("vue-router"),Fx=require("vue3-snotify"),Nx=require("@vue/server-renderer"),zx=require("axios"),Vp=require("vue3-carousel"),Dx=require("viewerjs"),Ox=require("vue3-select");function Fd(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}var Bx=Fd(Fx),Es=Fd(zx),Ux=Fd(Dx),Ob=Fd(Ox),$m="/assets/logo.d5e5057a.png",wl={baseURL:"http://localhost:8000",siteName:"Megazone",lang:"en",slogan:"Online mall"},Bb={storeShow:"api/stores/:slug",stores:"api/stores",categoriesTree:"api/categories/tree",category:"api/categories/:id",products:"api/products",authUser:"api/auth/user",storeCategory:"api/stores/:storeId/categories/:categoryId",storeCategoryBrandModels:"api/stores/:storeId/categories/:categoryId/brand-models",storeProducts:"api/stores/:storeId/products",storeProductCreate:"api/stores/:storeId/products/create",storeProduct:"api/stores/:storeId/products/:productId",storeProductRelated:"api/stores/:storeId/products/:productId/related",storeProductReviews:"api/stores/:storeId/products/:productId/reviews",storeProductReview:"api/stores/:storeId/products/:productId/reviews/:reviewId",storeProductReviewReaction:"api/stores/:storeId/products/:productId/reviews/:reviewId/reaction",storeSettingsCategories:"api/stores/:storeId/settings/categories",storeSettingsCategoriesSort:"api/stores/:storeId/settings/categories/sort",storeSettingsCategory:"api/stores/:storeId/settings/categories/:categoryId",storeSettingsCategoriesEdit:"api/stores/:storeId/settings/categories/:categoryId/edit",storeSettingsCategoriesFields:"api/stores/:storeId/settings/categories/:categoryId/fields",storeSettingsCategoriesGroups:"api/stores/:storeId/settings/categories/:categoryId/groups",fields:"api/fields",storeCreate:"api/stores/create",storeEdit:"api/stores/:storeId/edit",storeSocialMedia:"api/stores/:storeId/social-media",home:"api/home",search:"api/search",authGoogle:"api/auth/google",authLogin:"api/auth/login",authRegister:"api/auth/register"},_x={home:"\u0413\u043B\u0430\u0432\u043D\u0430\u044F",stores:"\u041C\u0430\u0433\u0430\u0437\u0438\u043D\u044B",categories:"\u041A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438",selectASize:"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0440\u0430\u0437\u043C\u0435\u0440",size:"\u0420\u0430\u0437\u043C\u0435\u0440",color:"\u0426\u0432\u0435\u0442",qty:"\u041A\u043E\u043B-\u0432\u043E",addToCart:"\u0412 \u043A\u043E\u0440\u0437\u0438\u043D\u0443",addToWishlist:"\u0412 \u0441\u043F\u0438\u0441\u043E\u043A \u0436\u0435\u043B\u0430\u043D\u0438\u0439",addToCompare:"\u041A \u0441\u0440\u0430\u0432\u043D\u0435\u043D\u0438\u044E",helpful:"\u041F\u043E\u043B\u0435\u0437\u043D\u043E",unhelpful:"\u0411\u0435\u0441\u043F\u043E\u043B\u0435\u0437\u043D\u043E",reviews:"\u041E\u0442\u0437\u044B\u0432\u044B",description:"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435",properties:"\u0421\u0432\u043E\u0439\u0441\u0442\u0432\u0430",category:"\u041A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044F",share:"\u041F\u043E\u0434\u0435\u043B\u0438\u0442\u044C\u0441\u044F",reviewCount:"\u041E\u0442\u0437\u044B\u0432(\u043E\u0432)",addReview:"\u041E\u0441\u0442\u0430\u0432\u0438\u0442\u044C \u043E\u0442\u0437\u044B\u0432",review:"\u041E\u0442\u0437\u044B\u0432",yourName:"\u0412\u0430\u0448\u0435 \u0438\u043C\u044F",evaluation:"\u041E\u0446\u0435\u043D\u043A\u0430",save:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",cancel:"\u041E\u0442\u043C\u0435\u043D\u0430",requiresAuthentication:"\u041D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u043E \u0432\u043E\u0439\u0442\u0438 \u0432 \u0441\u0432\u043E\u044E \u0443\u0447\u0435\u0442\u043D\u0443\u044E \u0437\u0430\u043F\u0438\u0441\u044C \u0438\u043B\u0438 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043E\u0432\u0430\u0442\u0441\u044F",settings:"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438",add:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C",edit:"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C",adding:"\u0414\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0438\u0435",editing:"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435",name:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435",parentId:"\u0420\u043E\u0434\u0438\u0442\u0435\u043B\u044C\u0441\u043A\u0430\u044F \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044F",categoryId:"\u041A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044F",matchCategoryId:"\u0421\u043E\u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044E\u0449\u0430\u044F \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044F \u0432 \u0440\u0435\u0435\u0441\u0442\u0440\u0435",categoryAdding:"\u0414\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438",categoryEditing:"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438",select:"\u0412\u044B\u0431\u0440\u0430\u0442\u044C",selectCategory:"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044E",hasColor:"\u0418\u043C\u0435\u0435\u0442\u0441\u044F \u0446\u0432\u0435\u0442",hasSize:"\u0418\u043C\u0435\u0435\u0442\u0441\u044F \u0440\u0430\u0437\u043C\u0435\u0440",active:"\u0410\u043A\u0442\u0438\u0432\u043D\u044B\u0439",saveSuccessMsg:"\u0423\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u043E",selectSizeField:"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043F\u043E\u043B\u0435 \u0440\u0430\u0437\u043C\u0435\u0440\u0430",products:"\u0422\u043E\u0432\u0430\u0440\u044B",delete:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C",deleteConfirmMsg:"\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B, \u0447\u0442\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043B\u0438\u0442\u044C?",deleteCatWithInnerConfirmMsg:"\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B, \u0447\u0442\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043B\u0438\u0442\u044C \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044E \u0432\u043C\u0435\u0441\u0442\u0435 \u0441 \u0435\u0435 \u0434\u043E\u0447\u0435\u0440\u043D\u0438\u043C\u0438 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044F\u043C\u0438?",deleting:"\u0423\u0434\u0430\u043B\u0435\u043D\u0438\u0435",yes:"\u0414\u0430",no:"\u041D\u0435\u0442",confirming:"\u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u0435",warning:"\u041F\u0440\u0435\u0434\u0443\u043F\u0440\u0435\u0436\u0434\u0435\u043D\u0438\u0435",deleteSuccessMsg:"\u0423\u0441\u043F\u0435\u0448\u043D\u043E \u0443\u0434\u0430\u043B\u0435\u043D\u043E.",addStore:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043C\u0430\u0433\u0430\u0437\u0438\u043D",addingStore:"\u0414\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u043C\u0430\u0433\u0430\u0437\u0438\u043D\u0430",address:"\u0410\u0434\u0440\u0435\u0441",myLocation:"\u041C\u043E\u0435 \u043C\u0435\u0441\u0442\u043E\u043F\u043E\u043B\u043E\u0436\u0435\u043D\u0438\u0435",slug:"\u0421\u0441\u044B\u043B\u043A\u0430",slogan:"\u0421\u043B\u043E\u0433\u0430\u043D",storeTypeIds:"\u0422\u0438\u043F",icon:"\u0418\u043A\u043E\u043D\u043A\u0430",coverImage:"\u0424\u043E\u043D\u043E\u0432\u043E\u0435 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435",about:"\u041E \u043C\u0430\u0433\u0430\u0437\u0438\u043D\u0435",letters:"\u0411\u0443\u043A\u0432\u044B",digits:"\u0426\u0438\u0444\u0440\u044B",symbols:"\u0421\u0438\u043C\u0432\u043E\u043B\u044B",and:"\u0438",only:"\u0422\u043E\u043B\u044C\u043A\u043E",latinLetters:"\u041B\u0430\u0442\u0438\u043D\u0441\u043A\u0438\u0435 \u0431\u0443\u043A\u0432\u044B",createSuccessMsg:"\u0423\u0441\u043F\u0435\u0448\u043D\u043E \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u043E",fields:"\u041F\u043E\u043B\u044F",fieldsSettings:"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u043F\u043E\u043B\u0435\u0439",addField:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043F\u043E\u043B\u0435",addGroup:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0433\u0440\u0443\u043F\u043F\u0443",addingField:"\u0414\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u043F\u043E\u043B\u044F",addingGroup:"\u0414\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u0433\u0440\u0443\u043F\u043F\u044B",allCategories:"\u0412\u0441\u0435 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438",signOut:"\u0412\u044B\u0439\u0442\u0438"},Wx={home:"Home",stores:"Stores",categories:"Categories",selectASize:"Select size",size:"Size",color:"Color",qty:"Quantity",addToCart:"Add to Cart",addToWishlist:"Add to Wishlist",addToCompare:"To compare",helpful:"Helpful",unhelpful:"Useless",reviews:"Reviews",description:"Description",properties:"Properties",category:"Category",share:"Share",reviewCount:"Review(s)",addReview:"Give feedback",review:"Review",yourName:"your name",evaluation:"evaluation",save:"Save",cancel:"Cancel",requiresAuthentication:"You must sign in to your account or register",settings:"Settings",add:"Add",edit:"Edit",adding:"Add",editing:"Editing",name:"Name",parentId:"Parent Category",categoryId:"Category",matchCategoryId:"The corresponding category in the registry",categoryAdding:"Adding a category",categoryEditing:"Category Editing",select:"Select",selectCategory:"Select a category",hasColor:"There is a color",hasSize:"Size available",active:"Active",saveSuccessMsg:"Saved Successfully",selectSizeField:"Select a size field",products:"Products",delete:"delete",deleteConfirmMsg:"Are you sure you want to delete?",deleteCatWithInnerConfirmMsg:"Are you sure you want to delete the category along with its child categories?",deleting:"Deleting",yes:"Yes",no:"No",confirming:"Confirmation",warning:"Warning",deleteSuccessMsg:"Deleted successfully.",addStore:"Add Store",addingStore:"Adding a store",address:"Address",myLocation:"My location",slug:"Link",slogan:"slogan",storeTypeIds:"Type",icon:"icon",coverImage:"background image",about:"About store",letters:"Letters",digits:"numbers",symbols:"Symbols",and:"and",only:"Only",latinLetters:"Latin letters",createSuccessMsg:"Successfully added",fields:"Fields",fieldsSettings:"Field settings",addField:"Add field",addGroup:"Add Group",addingField:"Adding a field",addingGroup:"Adding a group",allCategories:"All categories",signOut:"Sign out",editingStore:"Editing the store",editStore:"Edit store",addProduct:"Add Product",myStore:"My Store",addon:"Addon",fieldWarning:"Don't forget to click 'Save' button before close this modal, otherwise changes will not be saved",type:"Type",appearanceOnFiltering:"Appearance on filtering",options:"Options",isRequiredField:"Is required field",brand:"Brand",seriesOrModel:"Series or Model",model:"Model",brandAndModel:"Brand and Model",price:"Price",selectCurrency:"Select Currency",title:"Title",selectACategory:"Select a category",chooseAtLeastOneFileMsg:"Please, choose at least one file.",details:"Details",addedToCartSuccessfullyMsg:"Product successfully added to cart!",addedToWishlistSuccessfullyMsg:"Product added to wishlist!",cart:"Shopping cart",checkout:"Checkout",freeShipping:"Free Shipping",standard:"Standard",express:"Express",wishlist:"Wishlist",editSocialMediaLinks:"Edit social media links",linkToYourWebsite:"Link to your website",linkToYourFacebookPage:"Link to your page on Facebook",yourInstagramAccountUsername:"Your account username on Instagram",linkToYourTwitterPage:"Link to your page on Twitter",filter:"Filter",clear:"Clear",clean:"Clean",location:"Location",everywhere:"Everywhere",userNotFound:"User not found",userNotFoundMsg:"User with email <b>:email</b> not found in the system. Do you want to signup?",passwordsDidntMatchMsg:"Passwords didn't match!"};let Wn=null;var qx={install:(t,e)=>{Es.default.defaults.baseURL=t.config.globalProperties.$config.baseURL,Es.default.ssrData={},Es.default.interceptors.request.use(function(r){return t.config.globalProperties.$pace.start(),r},function(r){return t.config.globalProperties.$pace.finish(),Promise.reject(r)}),Es.default.interceptors.response.use(function(r){return t.config.globalProperties.$pace.finish(),r},function(r){if(t.config.globalProperties.$pace.finish(),r.response.status===422)for(let a in r.response.data.errors)for(let n of r.response.data.errors[a])t.config.globalProperties.$snotify.error(n);return Promise.reject(r)}),t.config.globalProperties.axios=Es.default,Wn=Es.default,Wn.defaults.headers.common.Localization=Hn().$current}};function _a(){return{getUri(t){return Wn.getUri(t)},request(t){return Wn.request(t)},get(t,e){const r=t+(e&&e.params?JSON.stringify(e.params):"");return Wn.get(t,e).then(a=>(Wn.ssrData[r]={headers:a.headers,data:a.data},a))},delete(t,e){return Wn.delete(t,e)},head(t,e){return Wn.head(t,e)},options(t,e){return Wn.options(t,e)},post(t,e,r){return Wn.post(t,e,r)},put(t,e,r){return Wn.put(t,e,r)},patch(t,e,r){return Wn.patch(t,e,r)},setToken(t){Wn.defaults.headers.common.Authorization=`Bearer ${t}`},setLocalization(t){Wn.defaults.headers.common.Localization=t}}}async function jx(t){await t.config.globalProperties.$store.dispatch("fetchUser")}const Sl={ru:_x,en:Wx};let ls=null,ym=null,Zc=null;var Hx={install(t,e){ls=u.reactive({$current:t.config.globalProperties.$cookie.getItem("lang")||wl.lang,$setLang(r){t.config.globalProperties.$cookie.setItem("lang",r,1/0,"/"),_a().setLocalization(r),this.app=Sl[r]||Sl.ru,this.$current=r},app:{},list:Object.keys(Sl)}),ls.app=Sl[ls.$current]||Sl.ru,ym=u.reactive({value:wl.siteName,setTitle(r){this.value=r?r+" - "+wl.siteName:wl.siteName}}),Zc=u.reactive({wishlist:[],subtotalPrice:0,items:[],totalQty:0,shippingType:"freeShipping",shippingTypes:{freeShipping:0,standard:10,express:20},addItem(r,a,n,i,o){n=n||1;const s=this.items.filter(l=>l.product.id===a.id);this.items.length===0||s.length===0?this.items.push({product:{id:a.id,title:a.title,files:a.files},store:{id:r.id,name:r.name,slug:r.slug},qty:n,size:i||null,color:o||null,price:a.price,currencyType:a.currencyType}):s[0].qty+=n,t.config.globalProperties.$snotify.success(ls.app.addedToCartSuccessfullyMsg),this.updateTotal()},removeItem(r){this.items.splice(r,1),this.updateTotal()},updateTotal(){try{this.totalQty=this.items.reduce((r,a)=>r+a.qty,0),this.subtotalPrice=this.items.reduce((r,a)=>r+a.price*a.qty,0),this.saveToLocalStorage()}catch{this.clear()}},clear(){this.items=[],this.totalQty=0,this.subtotalPrice=0,window.localStorage.removeItem("cart")},saveToLocalStorage(){window.localStorage.setItem("cart",JSON.stringify({shippingType:this.shippingType,items:this.items}))},addToWishlist(r,a){this.wishlist.filter(n=>n.product.id===r.id).length===0&&(this.wishlist.push({product:r,store:a}),window.localStorage.setItem("wishlist",JSON.stringify(this.wishlist))),t.config.globalProperties.$snotify.success(ls.app.addedToWishlistSuccessfullyMsg)},removeFromWishlist(r){this.wishlist.splice(r,1),window.localStorage.setItem("wishlist",JSON.stringify(this.wishlist))}}),u.watch(()=>Zc.shippingType,()=>{Zc.saveToLocalStorage()}),t.config.globalProperties.$title=ym,t.config.globalProperties.$lang=ls,t.config.globalProperties.$urls=Bb,t.config.globalProperties.$config=wl,t.config.globalProperties.$cart=Zc,t.config.globalProperties.$modal=u.reactive({active:!1,count:0,show(){this.count++,this.active=!0},hide(){this.count--,this.count<1&&(this.count=0,this.active=!1)}}),t.config.globalProperties.$snotify}};function ti(){return Bb}function Hn(){return ls}function Dl(t){ym.setTitle(t)}const Gm={__ssrInlineRender:!0,setup(t){const e=u.defineAsyncComponent(()=>Promise.resolve().then(function(){return pw})),r=u.defineAsyncComponent(()=>Promise.resolve().then(function(){return mw})),a=u.defineAsyncComponent(()=>Promise.resolve().then(function(){return fw}));u.defineAsyncComponent(()=>Promise.resolve().then(function(){return bw})),u.defineAsyncComponent(()=>Promise.resolve().then(function(){return vw}));const n=u.defineAsyncComponent(()=>Promise.resolve().then(function(){return Cw})),i=u.computed(()=>Tn.useStore().getters.user),o=Hn();return(s,l,c,d)=>{const p=u.resolveComponent("router-link");l(`<header${y.ssrRenderAttrs(u.mergeProps({class:"header header-10 header-intro-clearance"},d))}><div class="header-top"><div class="container-fluid"><div class="header-left"><a href="tel:+1 (646) 239 5971"><i class="icon-phone"></i>Call: +1 (646) 239 5971</a></div><div class="header-right"><ul class="top-menu"><li><a href="#">Links</a><ul class="top-menu-ul">`),s.$store.getters.user.id?(l(`<li><div class="header-dropdown"><a href="#">${y.ssrInterpolate(u.unref(o).app.myStore)}</a><div class="header-menu"><ul class="top-menu-ul"><!--[-->`),y.ssrRenderList(u.unref(i).stores,m=>{l("<li>"),l(y.ssrRenderComponent(p,{to:{name:"stores.show",params:{store:m.slug}}},{default:u.withCtx((h,f,g,b)=>{if(f)f(`<i class="icon icon-shopping-cart"${b}></i> ${y.ssrInterpolate(m.name)}`);else return[u.createVNode("i",{class:"icon icon-shopping-cart"}),u.createTextVNode(" "+u.toDisplayString(m.name),1)]}),_:2},c)),l("</li>")}),l("<!--]--><li>"),l(y.ssrRenderComponent(p,{to:{name:"stores.create"}},{default:u.withCtx((m,h,f,g)=>{if(h)h(`<i class="la la-plus"${g}></i>${y.ssrInterpolate(s.$lang.app.addStore)}`);else return[u.createVNode("i",{class:"la la-plus"}),u.createTextVNode(u.toDisplayString(s.$lang.app.addStore),1)]}),_:1},c)),l("</li></ul></div></div></li>")):l("<!---->"),l(`<li><div class="header-dropdown"><a href="#">${y.ssrInterpolate(u.unref(o).$current)}</a><div class="header-menu"><ul class="top-menu-ul"><!--[-->`),y.ssrRenderList(u.unref(o).list,m=>{l(`<li><a href="#">${y.ssrInterpolate(m)}</a></li>`)}),l("<!--]--></ul></div></div></li>"),l(y.ssrRenderComponent(u.unref(n),null,null,c)),l('</ul></li></ul></div></div></div><div class="header-middle"><div class="container-fluid"><div class="col-md-4 col-lg-3 col-xl-3 col-xxl-2">'),l(y.ssrRenderComponent(p,{to:{name:"home"},class:"logo",style:{"max-width":"100%"}},{default:u.withCtx((m,h,f,g)=>{if(h)h(`<img${y.ssrRenderAttr("src",$m)} alt="Megazone Logo"${g}>`);else return[u.createVNode("img",{src:$m,alt:"Megazone Logo"})]}),_:1},c)),l('</div><div class="col-md-4 col-lg-6 col-xl-6 col-xxl-8">'),l(y.ssrRenderComponent(u.unref(r),null,null,c)),l('</div><div class="header-right"><div class="header-dropdown-link">'),l(y.ssrRenderComponent(p,{to:{name:"cart.wishlist"},class:"wishlist-link"},{default:u.withCtx((m,h,f,g)=>{if(h)h(`<i class="icon-heart-o"${g}></i><span class="wishlist-count"${g}>${y.ssrInterpolate(s.$cart.wishlist.length)}</span><span class="wishlist-txt"${g}>Wishlist</span>`);else return[u.createVNode("i",{class:"icon-heart-o"}),u.createVNode("span",{class:"wishlist-count"},u.toDisplayString(s.$cart.wishlist.length),1),u.createVNode("span",{class:"wishlist-txt"},"Wishlist")]}),_:1},c)),l(y.ssrRenderComponent(u.unref(a),null,null,c)),l('</div></div></div></div><div class="header-bottom"><div class="container-fluid"><div class="row w-100"><div class="col-auto col-lg-3 col-xl-3 col-xxl-2">'),l(y.ssrRenderComponent(u.unref(e),null,null,c)),l(`</div><div class="col col-lg-6 col-xl-6 col-xxl-8 header-center"><nav class="main-nav"><ul class="menu sf-arrows"><li class="${y.ssrRenderClass({active:s.$route.name==="home"})}">`),l(y.ssrRenderComponent(p,{to:{name:"home"},class:"sf-with"},{default:u.withCtx((m,h,f,g)=>{if(h)h(`${y.ssrInterpolate(u.unref(o).app.home)}`);else return[u.createTextVNode(u.toDisplayString(u.unref(o).app.home),1)]}),_:1},c)),l(`</li><li class="${y.ssrRenderClass({active:s.$route.name.includes("stores.")})}">`),l(y.ssrRenderComponent(p,{to:{name:"stores.index"},class:"sf-with"},{default:u.withCtx((m,h,f,g)=>{if(h)h(`<i class="icon icon-shopping-cart"${g}></i> ${y.ssrInterpolate(u.unref(o).app.stores)}`);else return[u.createVNode("i",{class:"icon icon-shopping-cart"}),u.createTextVNode(" "+u.toDisplayString(u.unref(o).app.stores),1)]}),_:1},c)),l('</li></ul></nav></div><div class="col col-lg-3 col-xl-3 col-xxl-2 header-right"><i class="la la-lightbulb-o"></i><p>Clearance Up to 30% Off</p></div></div></div></div></header>')}}},uf=Gm.setup;Gm.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/components/layouts/SiteHeader.vue"),uf?uf(t,e):void 0};var Gx="/assets/payments.ff17602b.png",br=(t,e)=>{const r=t.__vccOpts||t;for(const[a,n]of e)r[a]=n;return r};const Zm={name:"SiteFooter"};function Zx(t,e,r,a,n,i,o,s){const l=u.resolveComponent("router-link");e(`<footer${y.ssrRenderAttrs(u.mergeProps({class:"footer footer-2"},a))}><div class="cta cta-horizontal cta-horizontal-box bg-primary"><div class="container"><div class="row align-items-center"><div class="col-lg-5"><h3 class="cta-title text-white">Join Our Newsletter</h3><p class="cta-desc text-white">Subcribe to get information about products and coupons</p></div><div class="col-lg-7"><form action="#"><div class="input-group"><input type="email" class="form-control form-control-white" placeholder="Enter your Email Address" aria-label="Email Adress" required=""><div class="input-group-append"><button class="btn btn-outline-white-2" type="submit"><span>Subscribe</span><i class="icon-long-arrow-right"></i></button></div></div></form></div></div></div></div><div class="icon-boxes-container-fluid"><div class="container-fluid"><div class="row"><div class="col-sm-6 col-lg-3"><div class="icon-box icon-box-side"><span class="icon-box-icon"><i class="icon-rocket"></i></span><div class="icon-box-content"><h3 class="icon-box-title">Free Shipping</h3><p>Orders $50 or more</p></div></div></div><div class="col-sm-6 col-lg-3"><div class="icon-box icon-box-side"><span class="icon-box-icon"><i class="icon-rotate-left"></i></span><div class="icon-box-content"><h3 class="icon-box-title">Free Returns</h3><p>Within 30 days</p></div></div></div><div class="col-sm-6 col-lg-3"><div class="icon-box icon-box-side"><span class="icon-box-icon"><i class="icon-info-circle"></i></span><div class="icon-box-content"><h3 class="icon-box-title">Get 20% Off 1 Item</h3><p>When you sign up</p></div></div></div><div class="col-sm-6 col-lg-3"><div class="icon-box icon-box-side"><span class="icon-box-icon"><i class="icon-life-ring"></i></span><div class="icon-box-content"><h3 class="icon-box-title">We Support</h3><p>24/7 amazing services</p></div></div></div></div></div></div><div class="footer-middle border-0"><div class="container-fluid"><div class="row"><div class="col-sm-12 col-lg-6"><div class="widget widget-about"><img${y.ssrRenderAttr("src",$m)} class="footer-logo" alt="Footer Logo" width="105" height="25"><p>Online mall </p><div class="widget-about-info"><div class="row"><div class="col-sm-6 col-md-4"><span class="widget-about-title">Got Question? Call us 24/7</span><a href="tel:+16462395971">+1 (646) 2395 971</a></div><div class="col-sm-6 col-md-8"><span class="widget-about-title">Payment Method</span><figure class="footer-payments"><img${y.ssrRenderAttr("src",Gx)} alt="Payment methods" width="272" height="20"></figure></div></div></div></div></div><div class="col-sm-4 col-lg-2"><div class="widget"><h4 class="widget-title">My Account</h4><ul class="widget-list">`),t.$store.getters.user.id?e(`<li>${y.ssrInterpolate(t.$store.getters.user.name)}</li>`):e('<li><a href="#">Sign In / Sign Up</a></li>'),e("<li>"),e(y.ssrRenderComponent(l,{to:{name:"cart.index"}},{default:u.withCtx((c,d,p,m)=>{if(d)d("View Cart");else return[u.createTextVNode("View Cart")]}),_:1},r)),e("</li><li>"),e(y.ssrRenderComponent(l,{to:{name:"cart.wishlist"}},{default:u.withCtx((c,d,p,m)=>{if(d)d("My Wishlist");else return[u.createTextVNode("My Wishlist")]}),_:1},r)),e('</li></ul></div></div></div></div></div><div class="footer-bottom"><div class="container-fluid"><p class="footer-copyright">Copyright \xA9 2023 Megazone. All Rights Reserved.</p><ul class="footer-menu"><li><a href="#">Terms Of Use</a></li><li><a href="#">Privacy Policy</a></li></ul><div class="social-icons social-icons-color"><span class="social-label">Social Media</span><a href="#" class="social-icon social-facebook" title="Facebook" target="_blank"><i class="icon-facebook-f"></i></a><a href="#" class="social-icon social-twitter" title="Twitter" target="_blank"><i class="icon-twitter"></i></a><a href="#" class="social-icon social-instagram" title="Instagram" target="_blank"><i class="icon-instagram"></i></a><a href="#" class="social-icon social-youtube" title="Youtube" target="_blank"><i class="icon-youtube"></i></a><a href="#" class="social-icon social-pinterest" title="Pinterest" target="_blank"><i class="icon-pinterest"></i></a></div></div></div></footer>')}const pf=Zm.setup;Zm.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/components/layouts/SiteFooter.vue"),pf?pf(t,e):void 0};var Yx=br(Zm,[["ssrRender",Zx]]);const Ym={name:"pace",data(){return{progress:!1,timer:null,timerActive:null,active:!1}},computed:{count(){return this.$pace.count}},watch:{"$pace.progress"(t){t?(this.active=!0,this.progress=t,this.timerActive&&(clearTimeout(this.timerActive),this.timerActive=null),this.timer&&(clearTimeout(this.timer),this.timer=null)):this.timer=setTimeout(()=>{this.progress=t,this.timerActive=setTimeout(()=>{this.active=!1},200)},400)}}};function Xx(t,e,r,a,n,i,o,s){o.active?e(`<div${y.ssrRenderAttrs(u.mergeProps({class:[{active:o.progress},"vue-progress"]},a))} data-v-14e7e42e><div class="item loading-6" data-v-14e7e42e><svg viewBox="25 25 50 50" data-v-14e7e42e><circle cx="50" cy="50" r="20" data-v-14e7e42e></circle></svg></div></div>`):e("<!---->")}const mf=Ym.setup;Ym.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/components/partials/Pace.vue"),mf?mf(t,e):void 0};var Kx=br(Ym,[["ssrRender",Xx],["__scopeId","data-v-14e7e42e"]]);const Ln={__ssrInlineRender:!0,props:{title:String,breadcrumbs:Array,isStore:Boolean},setup(t){const e=t;return e.title&&Dl(e.title),u.watch(()=>e.title,r=>{Dl(r)}),(r,a,n,i)=>{const o=u.resolveComponent("router-link");a("<!--[-->"),t.title&&!t.isStore?a(`<div${y.ssrRenderAttrs(u.mergeProps({class:"page-header text-center",style:{backgroundImage:"url(http://localhost:8000/storage/default-images/page-header-bg.jpg)"}},i))}><div class="container-fluid"><h1 class="page-title">${y.ssrInterpolate(t.title)}</h1></div></div>`):a("<!---->"),a('<nav class="breadcrumb-nav mb-3">'),t.breadcrumbs&&t.breadcrumbs.length>0?(a('<div class="container-fluid"><ol class="breadcrumb"><!--[-->'),y.ssrRenderList(t.breadcrumbs,(s,l)=>{a(`<li class="${y.ssrRenderClass([{active:!s.route},"breadcrumb-item"])}">`),s.route?a(y.ssrRenderComponent(o,{to:s.route},{default:u.withCtx((c,d,p,m)=>{if(d)d(`${y.ssrInterpolate(s.label)}`);else return[u.createTextVNode(u.toDisplayString(s.label),1)]}),_:2},n)):a(`<span>${y.ssrInterpolate(s.label)}</span>`),a("</li>")}),a("<!--]--></ol></div>")):a("<!---->"),a("</nav><!--]-->")}}},hf=Ln.setup;Ln.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/components/header/Headings.vue"),hf?hf(t,e):void 0};const Xm={components:{Headings:Ln,Pace:Kx,SiteFooter:Yx,SiteHeader:Gm},mounted(){this.$refs.body.classList.remove("ignore-transition")},watch:{$route(t,e){},"$lang.$current"(){this.$store.dispatch("fetchCategoriesTree",!0),this.$route.name.includes("stores.")&&this.$store.dispatch("fetchStore")}}};function Jx(t,e,r,a,n,i,o,s){const l=u.resolveComponent("vue-snotify"),c=u.resolveComponent("pace"),d=u.resolveComponent("site-header"),p=u.resolveComponent("router-view"),m=u.resolveComponent("site-footer");e(`<div${y.ssrRenderAttrs(u.mergeProps({class:"body ignore-transition",ref:"body",style:t.$modal.active?"overflow-x: hidden":""},a))}>`),y.ssrRenderSuspense(e,{default:()=>{e('<div class="page-wrapper">'),e(y.ssrRenderComponent(l,null,null,r)),e(y.ssrRenderComponent(c,null,null,r)),e(y.ssrRenderComponent(d,null,null,r)),e('<main class="main">'),e(y.ssrRenderComponent(p,{key:t.$route.name+"."+(t.$route.params.id||"")},null,r)),e("</main>"),e(y.ssrRenderComponent(m,null,null,r)),e("</div>")},_:1}),e("</div>")}const gf=Xm.setup;Xm.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/App.vue"),gf?gf(t,e):void 0};var Qx=br(Xm,[["ssrRender",Jx]]);function tw(){return La.createRouter({history:La.createMemoryHistory(),routes:[{path:"/",name:"home",component:()=>Promise.resolve().then(function(){return Lw})},{path:"/!about",name:"about",component:()=>Promise.resolve().then(function(){return zw})},{path:"/!auth/google",name:"auth.google",component:()=>Promise.resolve().then(function(){return Bw})},{path:"/!search/:type/:query",name:"search",component:()=>Promise.resolve().then(function(){return qw})},{path:"/!cart",name:"cart.index",component:()=>Promise.resolve().then(function(){return Gw})},{path:"/!cart/checkout",name:"cart.checkout",component:()=>Promise.resolve().then(function(){return Kw})},{path:"/!cart/wishlist",name:"cart.wishlist",component:()=>Promise.resolve().then(function(){return tS})},{path:"/!products/:id",name:"products.show",component:()=>Promise.resolve().then(function(){return aS})},{path:"/!categories",name:"categories.index",component:()=>Promise.resolve().then(function(){return oS})},{path:"/!categories/:id",name:"categories.show",component:()=>Promise.resolve().then(function(){return cS})},{path:"/!stores",name:"stores.index",component:()=>Promise.resolve().then(function(){return dS})},{path:"/!stores/create",name:"stores.create",component:()=>Promise.resolve().then(function(){return hS})},{path:"/:store",component:()=>Promise.resolve().then(function(){return yS}),children:[{path:"/:store",name:"stores.show",component:()=>Promise.resolve().then(function(){return wS})},{path:"edit",name:"stores.edit",component:()=>Promise.resolve().then(function(){return SS})},{path:"categories/:id",name:"stores.categories.show",component:()=>Promise.resolve().then(function(){return CS})},{path:"products/:id",name:"stores.products.show",component:()=>Promise.resolve().then(function(){return PS})},{path:"products/create",name:"stores.products.create",component:()=>Promise.resolve().then(function(){return ZT})},{path:"settings",name:"stores.settings.index",component:()=>Promise.resolve().then(function(){return KT})},{path:"settings/categories/:id",name:"stores.settings.categories.show",component:()=>Promise.resolve().then(function(){return tM})},{path:"settings/categories",name:"stores.settings.categories.index",component:()=>Promise.resolve().then(function(){return gM})}]}]})}let bm=null;var ew={install:(t,e)=>{bm={getItem:r=>e.cookie&&decodeURIComponent(e.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(r).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null,setItem:function(r,a,n,i,o,s){if(i=i||"/",!r||/^(?:expires|max\-age|path|domain|secure)$/i.test(r))return!1;let l="";if(n)switch(n.constructor){case Number:l=n===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+n;break;case String:l="; expires="+n;break;case Date:l="; expires="+n.toUTCString();break}return document.cookie=encodeURIComponent(r)+"="+encodeURIComponent(a)+l+(o?"; domain="+o:"")+(i?"; path="+i||"/":"")+(s?"; secure":"")+"; SameSite=Lax",!0},removeItem:function(r,a,n){return!r||!this.hasItem(r)?!1:(e.res.clearCookie(r),!0)},hasItem:function(r){return new RegExp("(?:^|;\\s*)"+encodeURIComponent(r).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(e.cookie)},keys:function(){let r=e.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/);for(let a=0;a<r.length;a++)r[a]=decodeURIComponent(r[a]);return r}},t.config.globalProperties.$cookie=bm}};function rw(){return bm}function aw(){return Tn.createStore({state(){return{user:{},categoriesTree:[],store:{slug:"",categories:[]},authModal:!1}},mutations:{setUser(t,e){t.user=e},SET_CATEGORIES_TREE(t,e){t.categoriesTree=e},SET_STORE(t,e){t.store=e},SET_AUTH_MODAL(t,e){t.authModal=e}},actions:{setUser({commit:t},e){t("setUser",e.user),e.token&&_a().setToken(e.token)},async fetchUser({commit:t},e){const r=_a(),a=rw();if(e=e||a.getItem("token"),e){r.setToken(e);try{const{data:n}=await r.get(ti().authUser);t("setUser",n)}catch{a.removeItem("token"),t("setUser",{})}}},resetUser({commit:t}){t("setUser",{})},async fetchCategoriesTree({commit:t,state:e},r){try{if(e.categoriesTree.length===0||r){const{data:a}=await _a().get(ti().categoriesTree);t("SET_CATEGORIES_TREE",a)}}catch{t("SET_CATEGORIES_TREE",[])}},async fetchStore({commit:t,state:e},r){try{if(e.store.slug!==r||!r){const{data:a}=await _a().get(ti().storeShow.replace(":slug",r||e.store.slug));return t("SET_STORE",a),a}else return e.store}catch{return t("SET_STORE",{}),{}}},setStore({commit:t,state:e},r){return t("SET_STORE",r),r},showAuthModal({commit:t}){t("SET_AUTH_MODAL",!0)},hideAuthModal({commit:t}){t("SET_AUTH_MODAL",!1)}},getters:{user:t=>t.user,categoriesTree:t=>t.categoriesTree,store:t=>t.store,authModal:t=>t.authModal,isStoreAdmin:t=>t.store.id&&t.user.stores&&t.user.stores.length>0&&t.user.stores.filter(e=>e.id===t.store.id).length>0}})}var nw={install(t,e){function r(a,n,i){const o=n[i];return o?()=>{const s=r(a,n,i+1);o(de(X({},a),{next:s}))}:a.next}t.config.globalProperties.$router.beforeEach((a,n,i)=>{if(!a.meta||!a.meta.middleware)return i();const o=a.meta.middleware,s={to:a,from:n,next:i,store:t.config.globalProperties.$store};return o[0](de(X({},s),{next:r(s,o,1)}))})}},iw={install(t,e){t.config.globalProperties.$pace=u.reactive({progress:!1,count:0,start(){this.count++,this.progress=!0},finish(){this.count--,this.count<1&&(this.count=0,this.progress=!1)}})}};async function ow(t,e,r){const a=u.createSSRApp(Qx),n=aw(),i=tw();return a.use(ew,{cookie:t,req:e,res:r}),a.use(Bx.default),a.use(Hx),a.use(n),a.use(iw),a.use(qx),await jx(a),a.use(i),a.use(nw),{app:a,router:i}}async function sw(t,e,r,a,n){const{app:i,router:o}=await ow(r,a,n);await o.push(t),await o.isReady();const s={},l=await Nx.renderToString(i,s),c=i.config.globalProperties.$title.value,d=i.config.globalProperties.axios.ssrData,p=lw(s.modules,e);return[l,p,c,d]}function lw(t,e){let r="";const a=new Set;return t.forEach(n=>{const i=e[n];i&&i.forEach(o=>{a.has(o)||(a.add(o),r+=cw(o))})}),r}function cw(t){return t.endsWith(".js")?`<link rel="modulepreload" crossorigin href="${t}">`:t.endsWith(".css")?`<link rel="stylesheet" href="${t}">`:t.endsWith(".woff")?` <link rel="preload" href="${t}" as="font" type="font/woff" crossorigin>`:t.endsWith(".woff2")?` <link rel="preload" href="${t}" as="font" type="font/woff2" crossorigin>`:t.endsWith(".gif")?` <link rel="preload" href="${t}" as="image" type="image/gif">`:t.endsWith(".jpg")||t.endsWith(".jpeg")?` <link rel="preload" href="${t}" as="image" type="image/jpeg">`:t.endsWith(".png")?` <link rel="preload" href="${t}" as="image" type="image/png">`:""}var dw="/assets/banner-1.e6174445.jpg";const Km={__ssrInlineRender:!0,async setup(t){let e,r;const a=Tn.useStore();[e,r]=u.withAsyncContext(()=>a.dispatch("fetchCategoriesTree")),await e,r();const n=Hn();return(i,o,s,l)=>{const c=u.resolveComponent("router-link");o(`<div${y.ssrRenderAttrs(u.mergeProps({class:"dropdown category-dropdown","data-visible":"true"},l))} data-v-7060008c><a href="javascript:void(0)" class="dropdown-toggle" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true" data-display="static" title="Browse Categories" data-v-7060008c>${y.ssrInterpolate(u.unref(n).app.categories)}</a><div class="${y.ssrRenderClass([{show:i.$route.name==="home"},"dropdown-menu"])}" data-v-7060008c><nav class="side-nav" data-v-7060008c><ul class="menu-vertical sf-arrows" data-v-7060008c><!--[-->`),y.ssrRenderList(u.unref(a).getters.categoriesTree,d=>{o('<li class="megamenu-container-fluid" data-v-7060008c>'),o(y.ssrRenderComponent(c,{class:"sf-with-ul",to:{name:"categories.show",params:{id:d.id}}},{default:u.withCtx((p,m,h,f)=>{if(m)m(`${y.ssrInterpolate(d.name)}`);else return[u.createTextVNode(u.toDisplayString(d.name),1)]}),_:2},s)),o('<div class="megamenu" data-v-7060008c><div class="row no-gutters" data-v-7060008c><div class="col-md-8" data-v-7060008c><div class="menu-col" data-v-7060008c><div class="row" data-v-7060008c><!--[-->'),y.ssrRenderList(d.children,p=>{o('<div class="col-md-4" data-v-7060008c><div class="menu-title" data-v-7060008c>'),o(y.ssrRenderComponent(c,{to:{name:"categories.show",params:{id:p.id}}},{default:u.withCtx((m,h,f,g)=>{if(h)h(`${y.ssrInterpolate(p.name)}`);else return[u.createTextVNode(u.toDisplayString(p.name),1)]}),_:2},s)),o("</div><ul data-v-7060008c><!--[-->"),y.ssrRenderList(p.children,m=>{o("<li data-v-7060008c>"),o(y.ssrRenderComponent(c,{to:{name:"categories.show",params:{id:m.id}}},{default:u.withCtx((h,f,g,b)=>{if(f)f(`${y.ssrInterpolate(m.name)}`);else return[u.createTextVNode(u.toDisplayString(m.name),1)]}),_:2},s)),o("</li>")}),o("<!--]--></ul></div>")}),o(`<!--]--></div></div></div><div class="col-md-4" data-v-7060008c><div class="banner banner-overlay" data-v-7060008c><a href="category.html" class="banner banner-menu" data-v-7060008c><img${y.ssrRenderAttr("src",dw)} alt="Banner" data-v-7060008c></a></div></div></div></div></li>`)}),o("<!--]--></ul></nav></div></div>")}}},ff=Km.setup;Km.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/components/header/CategoriesMenu.vue"),ff?ff(t,e):void 0};var uw=br(Km,[["__scopeId","data-v-7060008c"]]),pw=Object.freeze(Object.defineProperty({__proto__:null,default:uw},Symbol.toStringTag,{value:"Module"}));const Jm={__ssrInlineRender:!0,async setup(t){let e,r;const a=Tn.useStore();[e,r]=u.withAsyncContext(()=>a.dispatch("fetchCategoriesTree")),await e,r();const n=a.getters.categoriesTree,i=Hn();La.useRouter();const o=u.reactive({query:"",type:"everywhere"});return(s,l,c,d)=>{l(`<div${y.ssrRenderAttrs(u.mergeProps({class:"header-search header-search-extended header-search-visible header-search-no-radius d-lg-block"},d))}><a href="#" class="search-toggle" role="button"><i class="icon-search"></i></a><form><div class="header-search-wrapper search-wrapper-wide"><div class="select-custom"><select id="cat"><option value="everywhere">${y.ssrInterpolate(u.unref(i).app.everywhere)}</option><option value="stores">\u{1F6D2} ${y.ssrInterpolate(u.unref(i).app.stores)}</option><!--[-->`),y.ssrRenderList(u.unref(n),p=>{l(`<option${y.ssrRenderAttr("value",p.id)}>${y.ssrInterpolate(p.name)}</option>`)}),l(`<!--]--></select></div><label for="q" class="sr-only">Search</label><input${y.ssrRenderAttr("value",u.unref(o).query)} type="search" class="form-control" name="q" id="q" placeholder="Search ..."${y.ssrIncludeBooleanAttr(!s.$route.name.includes("stores.index"))?" required":""}><button class="btn btn-primary text-center d-inline-block" type="submit"><i class="icon-search"></i></button></div></form></div>`)}}},$f=Jm.setup;Jm.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/components/header/Search.vue"),$f?$f(t,e):void 0};var mw=Object.freeze(Object.defineProperty({__proto__:null,default:Jm},Symbol.toStringTag,{value:"Module"}));const Qm={name:"Cart",mounted(){}};function hw(t,e,r,a,n,i,o,s){const l=u.resolveComponent("router-link");e(`<div${y.ssrRenderAttrs(u.mergeProps({class:"dropdown cart-dropdown"},a))}><a href="#" class="dropdown-toggle" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" data-display="static"><i class="icon-shopping-cart"></i><span class="cart-count">${y.ssrInterpolate(t.$cart.totalQty)}</span><span class="cart-txt">Cart</span></a><div class="dropdown-menu dropdown-menu-right"><div class="dropdown-cart-products"><!--[-->`),y.ssrRenderList(t.$cart.items,(c,d)=>{e('<div class="product"><div class="product-cart-details"><h4 class="product-title">'),e(y.ssrRenderComponent(l,{to:{name:"stores.products.show",params:{store:c.store.slug,id:c.product.id}}},{default:u.withCtx((p,m,h,f)=>{if(m)m(`${y.ssrInterpolate(c.product.title)}`);else return[u.createTextVNode(u.toDisplayString(c.product.title),1)]}),_:2},r)),e(`</h4><span class="cart-product-info"><span class="cart-product-qty">${y.ssrInterpolate(c.qty)}</span>x $${y.ssrInterpolate(c.price)}</span></div><figure class="product-image-container-fluid">`),e(y.ssrRenderComponent(l,{to:{name:"stores.products.show",params:{store:c.store.slug,id:c.product.id}},class:"product-image"},{default:u.withCtx((p,m,h,f)=>{if(m)m(`<img${y.ssrRenderAttr("src",c.product.files[0].path)} alt="product" style="${y.ssrRenderStyle({width:"64px"})}"${f}>`);else return[u.createVNode("img",{src:c.product.files[0].path,alt:"product",style:{width:"64px"}},null,8,["src"])]}),_:2},r)),e('</figure><a href="#" class="btn-remove" title="Remove Product"><i class="icon-close"></i></a></div>')}),e(`<!--]--></div><div class="dropdown-cart-total"><span>Subtotal</span><span class="cart-total-price">$${y.ssrInterpolate(t.$cart.subtotalPrice)}</span></div><div><div class="summary-shipping"> Shipping: </div><!--[-->`),y.ssrRenderList(t.$cart.shippingTypes,(c,d)=>{e(`<div><div class="custom-control custom-radio"><input${y.ssrIncludeBooleanAttr(y.ssrLooseEqual(t.$cart.shippingType,d))?" checked":""}${y.ssrRenderAttr("value",d)} type="radio"${y.ssrRenderAttr("id",d+"widget")} name="shipping-widget" class="custom-control-input"><label class="custom-control-label"${y.ssrRenderAttr("for",d+"widget")}>${y.ssrInterpolate(t.$lang.app[d])}($${y.ssrInterpolate(c)})</label></div></div>`)}),e('<!--]--></div><div class="dropdown-cart-action">'),e(y.ssrRenderComponent(l,{to:{name:"cart.index"},class:"btn btn-primary"},{default:u.withCtx((c,d,p,m)=>{if(d)d("View Cart");else return[u.createTextVNode("View Cart")]}),_:1},r)),e(y.ssrRenderComponent(l,{to:{name:"cart.checkout"},class:"btn btn-outline-primary-2"},{default:u.withCtx((c,d,p,m)=>{if(d)d(`<span${m}>Checkout</span><i class="icon-long-arrow-right"${m}></i>`);else return[u.createVNode("span",null,"Checkout"),u.createVNode("i",{class:"icon-long-arrow-right"})]}),_:1},r)),e("</div></div></div>")}const yf=Qm.setup;Qm.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/components/header/Cart.vue"),yf?yf(t,e):void 0};var gw=br(Qm,[["ssrRender",hw]]),fw=Object.freeze(Object.defineProperty({__proto__:null,default:gw},Symbol.toStringTag,{value:"Module"}));const th={name:"Compare"};function $w(t,e,r,a,n,i,o,s){e(`<div${y.ssrRenderAttrs(u.mergeProps({class:"dropdown compare-dropdown"},a))}><a href="#" class="dropdown-toggle" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" data-display="static" title="Compare Products" aria-label="Compare Products"><i class="icon-random"></i><span class="compare-txt">Compare</span></a><div class="dropdown-menu dropdown-menu-right"><ul class="compare-products"><li class="compare-product"><a href="#" class="btn-remove" title="Remove Product"><i class="icon-close"></i></a><h4 class="compare-product-title"><a href="product.html">Blue Night Dress</a></h4></li><li class="compare-product"><a href="#" class="btn-remove" title="Remove Product"><i class="icon-close"></i></a><h4 class="compare-product-title"><a href="product.html">White Long Skirt</a></h4></li></ul><div class="compare-actions"><a href="#" class="action-link">Clear All</a><a href="#" class="btn btn-outline-primary-2"><span>Compare</span><i class="icon-long-arrow-right"></i></a></div></div></div>`)}const bf=th.setup;th.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/components/header/Compare.vue"),bf?bf(t,e):void 0};var yw=br(th,[["ssrRender",$w]]),bw=Object.freeze(Object.defineProperty({__proto__:null,default:yw},Symbol.toStringTag,{value:"Module"}));const eh={__ssrInlineRender:!0,setup(t){return(e,r,a,n)=>{}}},vf=eh.setup;eh.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/components/header/menu/Stores.vue"),vf?vf(t,e):void 0};var vw=Object.freeze(Object.defineProperty({__proto__:null,default:eh},Symbol.toStringTag,{value:"Module"}));const rh={name:"Modal",props:{modelValue:Boolean,modalTitle:String,modalDescription:String,cancelButtonLabel:String,okButtonLabel:String,disableBackdropClose:Boolean},created(){this.modelValue?this.$modal.show():this.$modal.hide()},watch:{modelValue(t){t?this.$modal.show():this.$modal.hide()}},methods:{modalBackDrop(t){!this.disableBackdropClose&&t.target.classList.contains("modal")&&this.$emit("update:modelValue",!1)},close(){this.$emit("update:modelValue",!1),this.$emit("close")}}};function xw(t,e,r,a,n,i,o,s){n.modelValue?(e(`<div${y.ssrRenderAttrs(a)} data-v-360e9fda><div class="back-drop" data-v-360e9fda></div><div class="modal fade show" style="${y.ssrRenderStyle({display:"inline-block"})}" data-v-360e9fda><div class="modal-dialog modal-dialog-centered" data-v-360e9fda><div class="modal-content" data-v-360e9fda><button type="button" class="modal-close" data-v-360e9fda><span aria-hidden="true" data-v-360e9fda><i class="icon-close" data-v-360e9fda></i></span></button>`),n.modalTitle?(e(`<div class="modal-header" data-v-360e9fda><h4 class="modal-title" data-v-360e9fda>${y.ssrInterpolate(n.modalTitle)}`),n.modalDescription?e(`<small class="title-desc" data-v-360e9fda><br data-v-360e9fda>${y.ssrInterpolate(n.modalDescription)}</small>`):e("<!---->"),e("</h4></div>")):e("<!---->"),e('<div class="modal-body" data-v-360e9fda>'),y.ssrRenderSlot(t.$slots,"default",{},null,e,r),e("</div>"),n.cancelButtonLabel||n.okButtonLabel?(e('<div class="modal-footer" data-v-360e9fda>'),n.okButtonLabel?e(`<button type="button" class="btn btn-primary" data-v-360e9fda>${y.ssrInterpolate(n.okButtonLabel)}</button>`):e("<!---->"),n.cancelButtonLabel?e(`<button type="button" class="btn btn-outline-primary" data-v-360e9fda>${y.ssrInterpolate(n.cancelButtonLabel)}</button>`):e("<!---->"),e("</div>")):e("<!---->"),e("</div></div></div></div>")):e("<!---->")}const xf=rh.setup;rh.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/components/partials/Modal.vue"),xf?xf(t,e):void 0};var Ci=br(rh,[["ssrRender",xw],["__scopeId","data-v-360e9fda"]]);const ah={name:"Auth",components:{Modal:Ci},data(){return{modal:this.authModal,tabs:{signIn:{active:!0,form:{username:"",password:"",rememberMe:!1}},signUp:{active:!1,form:{username:"",password:"",name:"",lastName:"",confirmPassword:""}}}}},computed:{user(){return this.$store.getters.user},authModal(){return this.$store.getters.authModal}},watch:{authModal(t){this.modal=t},modal(t){this.$store.dispatch(t?"showAuthModal":"hideAuthModal")}},methods:{selectTab(t){this.tabs.signIn.active=t==="signIn",this.tabs.signUp.active=t==="signUp"},signIn(){this.axios.post(this.$urls.authLogin,this.tabs.signIn.form).then(t=>{this.$cookie.setItem("token",t.data.token,1/0),this.$store.dispatch("setUser",t.data)})},signOut(){this.axios.get("api/auth/logout"),this.$cookie.removeItem("token"),this.$store.dispatch("resetUser")},signInWithGoogle(t){return this.axios.get(this.$urls.authGoogle).then(e=>{location.href=e.data+"&state="+(t?"up":"in")})},signUp(){return this.tabs.signUp.form.password!==this.tabs.signUp.form.confirmPassword?(this.$snotify.error(this.$lang.app.passwordsDidntMatchMsg),!1):this.axios.post(this.$urls.authRegister,this.tabs.signUp.form).then(t=>{this.$cookie.setItem("token",t.data.token,1/0),this.$store.dispatch("setUser",t.data)})}}};function ww(t,e,r,a,n,i,o,s){const l=u.resolveComponent("modal");e(`<li${y.ssrRenderAttrs(u.mergeProps({class:"login"},a))}>`),s.user.id?e(`<div><i class="icon-user"></i>${y.ssrInterpolate(s.user.name)} | <a href="#">${y.ssrInterpolate(t.$lang.app.signOut)}</a></div>`):(e('<div><a href="#">Sign in / Sign up</a>'),e(y.ssrRenderComponent(l,{modelValue:o.modal,"onUpdate:modelValue":c=>o.modal=c},{default:u.withCtx((c,d,p,m)=>{if(d)d(`<div class="form-box"${m}><div class="form-tab"${m}><ul class="nav nav-pills nav-fill nav-border-anim" role="tablist"${m}><li class="nav-item"${m}><a class="${y.ssrRenderClass([{active:o.tabs.signIn.active},"nav-link"])}" id="signin-tab" data-toggle="tab" href="#signin" role="tab" aria-controls="signin" aria-selected="true"${m}>Sign In</a></li><li class="nav-item"${m}><a class="${y.ssrRenderClass([{active:o.tabs.signUp.active},"nav-link"])}" id="register-tab" data-toggle="tab" href="#register" role="tab" aria-controls="register" aria-selected="false"${m}>Register</a></li></ul><div class="tab-content" id="tab-content-5"${m}><div class="${y.ssrRenderClass([{"active show":o.tabs.signIn.active},"tab-pane fade"])}" id="signin" role="tabpanel" aria-labelledby="signin-tab"${m}><form${m}><div class="form-group"${m}><label for="singin-email"${m}>Email *</label><input${y.ssrRenderAttr("value",o.tabs.signIn.form.username)} type="text" class="form-control" id="singin-email" name="singin-email" required=""${m}></div><div class="form-group"${m}><label for="singin-password"${m}>Password *</label><input${y.ssrRenderAttr("value",o.tabs.signIn.form.password)} type="password" class="form-control" id="singin-password" name="singin-password" required=""${m}></div><div class="form-footer"${m}><button type="submit" class="btn btn-outline-primary-2"${m}><span${m}>LOG IN</span><i class="icon-long-arrow-right"${m}></i></button><div class="custom-control custom-checkbox"${m}><input type="checkbox" class="custom-control-input" id="signin-remember"${m}><label class="custom-control-label" for="signin-remember"${m}>Remember Me</label></div><a href="#" class="forgot-link"${m}>Forgot Your Password?</a></div></form><div class="form-choice"${m}><p class="text-center"${m}>or sign in with</p><div class="row"${m}><div class="col-sm-12"${m}><a href="#" class="btn btn-login btn-g"${m}><i class="icon-google"${m}></i> Google account </a></div></div></div></div><div class="${y.ssrRenderClass([{"active show":o.tabs.signUp.active},"tab-pane fade"])}" id="register" role="tabpanel" aria-labelledby="register-tab"${m}><form action="#"${m}><div class="form-group"${m}><label for="register-name"${m}>First name *</label><input${y.ssrRenderAttr("value",o.tabs.signUp.form.name)} type="text" class="form-control" id="register-name" name="register-name" required=""${m}></div><div class="form-group"${m}><label for="register-surname"${m}>Last name *</label><input${y.ssrRenderAttr("value",o.tabs.signUp.form.lastName)} type="text" class="form-control" id="register-surname" name="register-surname" required=""${m}></div><div class="form-group"${m}><label for="register-email"${m}>Email *</label><input${y.ssrRenderAttr("value",o.tabs.signUp.form.username)} type="email" class="form-control" id="register-email" name="register-email" required=""${m}></div><div class="form-group"${m}><label for="register-password"${m}>Password *</label><input${y.ssrRenderAttr("value",o.tabs.signUp.form.password)} type="password" class="form-control" id="register-password" name="register-password" required=""${m}></div><div class="form-group"${m}><label for="register-confirm-password"${m}>Confirm password *</label><input${y.ssrRenderAttr("value",o.tabs.signUp.form.confirmPassword)} type="password" class="form-control" id="register-confirm-password" name="register-confirm-password" required=""${m}></div><div class="form-footer"${m}><button type="submit" class="btn btn-outline-primary-2"${m}><span${m}>SIGN UP</span><i class="icon-long-arrow-right"${m}></i></button><div class="custom-control custom-checkbox"${m}><input type="checkbox" class="custom-control-input" id="register-policy" required=""${m}><label class="custom-control-label" for="register-policy"${m}>I agree to the <a href="#"${m}>privacy policy</a> *</label></div></div></form><div class="form-choice"${m}><p class="text-center"${m}>or sign up with</p><div class="row"${m}><div class="col-sm-12"${m}><a href="#" class="btn btn-login btn-g"${m}><i class="icon-google"${m}></i> Google account </a></div></div></div></div></div></div></div>`);else return[u.createVNode("div",{class:"form-box"},[u.createVNode("div",{class:"form-tab"},[u.createVNode("ul",{class:"nav nav-pills nav-fill nav-border-anim",role:"tablist"},[u.createVNode("li",{class:"nav-item"},[u.createVNode("a",{onClick:u.withModifiers(h=>s.selectTab("signIn"),["prevent"]),class:[{active:o.tabs.signIn.active},"nav-link"],id:"signin-tab","data-toggle":"tab",href:"#signin",role:"tab","aria-controls":"signin","aria-selected":"true"},"Sign In",10,["onClick"])]),u.createVNode("li",{class:"nav-item"},[u.createVNode("a",{onClick:u.withModifiers(h=>s.selectTab("signUp"),["prevent"]),class:[{active:o.tabs.signUp.active},"nav-link"],id:"register-tab","data-toggle":"tab",href:"#register",role:"tab","aria-controls":"register","aria-selected":"false"},"Register",10,["onClick"])])]),u.createVNode("div",{class:"tab-content",id:"tab-content-5"},[u.createVNode("div",{class:[{"active show":o.tabs.signIn.active},"tab-pane fade"],id:"signin",role:"tabpanel","aria-labelledby":"signin-tab"},[u.createVNode("form",{onSubmit:u.withModifiers(s.signIn,["prevent"])},[u.createVNode("div",{class:"form-group"},[u.createVNode("label",{for:"singin-email"},"Email *"),u.withDirectives(u.createVNode("input",{"onUpdate:modelValue":h=>o.tabs.signIn.form.username=h,type:"text",class:"form-control",id:"singin-email",name:"singin-email",required:""},null,8,["onUpdate:modelValue"]),[[u.vModelText,o.tabs.signIn.form.username]])]),u.createVNode("div",{class:"form-group"},[u.createVNode("label",{for:"singin-password"},"Password *"),u.withDirectives(u.createVNode("input",{"onUpdate:modelValue":h=>o.tabs.signIn.form.password=h,type:"password",class:"form-control",id:"singin-password",name:"singin-password",required:""},null,8,["onUpdate:modelValue"]),[[u.vModelText,o.tabs.signIn.form.password]])]),u.createVNode("div",{class:"form-footer"},[u.createVNode("button",{type:"submit",class:"btn btn-outline-primary-2"},[u.createVNode("span",null,"LOG IN"),u.createVNode("i",{class:"icon-long-arrow-right"})]),u.createVNode("div",{class:"custom-control custom-checkbox"},[u.createVNode("input",{type:"checkbox",class:"custom-control-input",id:"signin-remember"}),u.createVNode("label",{class:"custom-control-label",for:"signin-remember"},"Remember Me")]),u.createVNode("a",{href:"#",class:"forgot-link"},"Forgot Your Password?")])],40,["onSubmit"]),u.createVNode("div",{class:"form-choice"},[u.createVNode("p",{class:"text-center"},"or sign in with"),u.createVNode("div",{class:"row"},[u.createVNode("div",{class:"col-sm-12"},[u.createVNode("a",{onClick:u.withModifiers(h=>s.signInWithGoogle(),["prevent"]),href:"#",class:"btn btn-login btn-g"},[u.createVNode("i",{class:"icon-google"}),u.createTextVNode(" Google account ")],8,["onClick"])])])])],2),u.createVNode("div",{class:[{"active show":o.tabs.signUp.active},"tab-pane fade"],id:"register",role:"tabpanel","aria-labelledby":"register-tab"},[u.createVNode("form",{onSubmit:u.withModifiers(s.signUp,["prevent"]),action:"#"},[u.createVNode("div",{class:"form-group"},[u.createVNode("label",{for:"register-name"},"First name *"),u.withDirectives(u.createVNode("input",{"onUpdate:modelValue":h=>o.tabs.signUp.form.name=h,type:"text",class:"form-control",id:"register-name",name:"register-name",required:""},null,8,["onUpdate:modelValue"]),[[u.vModelText,o.tabs.signUp.form.name]])]),u.createVNode("div",{class:"form-group"},[u.createVNode("label",{for:"register-surname"},"Last name *"),u.withDirectives(u.createVNode("input",{"onUpdate:modelValue":h=>o.tabs.signUp.form.lastName=h,type:"text",class:"form-control",id:"register-surname",name:"register-surname",required:""},null,8,["onUpdate:modelValue"]),[[u.vModelText,o.tabs.signUp.form.lastName]])]),u.createVNode("div",{class:"form-group"},[u.createVNode("label",{for:"register-email"},"Email *"),u.withDirectives(u.createVNode("input",{"onUpdate:modelValue":h=>o.tabs.signUp.form.username=h,type:"email",class:"form-control",id:"register-email",name:"register-email",required:""},null,8,["onUpdate:modelValue"]),[[u.vModelText,o.tabs.signUp.form.username]])]),u.createVNode("div",{class:"form-group"},[u.createVNode("label",{for:"register-password"},"Password *"),u.withDirectives(u.createVNode("input",{"onUpdate:modelValue":h=>o.tabs.signUp.form.password=h,type:"password",class:"form-control",id:"register-password",name:"register-password",required:""},null,8,["onUpdate:modelValue"]),[[u.vModelText,o.tabs.signUp.form.password]])]),u.createVNode("div",{class:"form-group"},[u.createVNode("label",{for:"register-confirm-password"},"Confirm password *"),u.withDirectives(u.createVNode("input",{"onUpdate:modelValue":h=>o.tabs.signUp.form.confirmPassword=h,type:"password",class:"form-control",id:"register-confirm-password",name:"register-confirm-password",required:""},null,8,["onUpdate:modelValue"]),[[u.vModelText,o.tabs.signUp.form.confirmPassword]])]),u.createVNode("div",{class:"form-footer"},[u.createVNode("button",{type:"submit",class:"btn btn-outline-primary-2"},[u.createVNode("span",null,"SIGN UP"),u.createVNode("i",{class:"icon-long-arrow-right"})]),u.createVNode("div",{class:"custom-control custom-checkbox"},[u.createVNode("input",{type:"checkbox",class:"custom-control-input",id:"register-policy",required:""}),u.createVNode("label",{class:"custom-control-label",for:"register-policy"},[u.createTextVNode("I agree to the "),u.createVNode("a",{href:"#"},"privacy policy"),u.createTextVNode(" *")])])])],40,["onSubmit"]),u.createVNode("div",{class:"form-choice"},[u.createVNode("p",{class:"text-center"},"or sign up with"),u.createVNode("div",{class:"row"},[u.createVNode("div",{class:"col-sm-12"},[u.createVNode("a",{onClick:u.withModifiers(h=>s.signInWithGoogle(!0),["prevent"]),href:"#",class:"btn btn-login btn-g"},[u.createVNode("i",{class:"icon-google"}),u.createTextVNode(" Google account ")],8,["onClick"])])])])],2)])])])]}),_:1},r)),e("</div>")),e("</li>")}const wf=ah.setup;ah.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/components/header/Auth.vue"),wf?wf(t,e):void 0};var Sw=br(ah,[["ssrRender",ww]]),Cw=Object.freeze(Object.defineProperty({__proto__:null,default:Sw},Symbol.toStringTag,{value:"Module"}));const nh={name:"LargeCarousel",components:{Carousel:Vp.Carousel,Slide:Vp.Slide,Navigation:Vp.Navigation},props:{type:String}};function kw(t,e,r,a,n,i,o,s){const l=u.resolveComponent("carousel"),c=u.resolveComponent("slide"),d=u.resolveComponent("navigation");e(`<div${y.ssrRenderAttrs(u.mergeProps({class:"intro-slider"},a))}>`),e(y.ssrRenderComponent(l,{autoplay:5e3,"wrap-around":"","pause-autoplay-on-hover":""},{addons:u.withCtx((p,m,h,f)=>{if(m)m(y.ssrRenderComponent(d,null,null,h,f));else return[u.createVNode(d)]}),default:u.withCtx((p,m,h,f)=>{if(m)m(y.ssrRenderComponent(c,{key:0},{default:u.withCtx((g,b,w,v)=>{if(b)b(`<div class="${y.ssrRenderClass("w-100 "+n.type)}" style="${y.ssrRenderStyle({backgroundImage:"url(http://localhost:8000/storage/advertisements/November2023/slide-1.png)"})}"${v}><div class="${y.ssrRenderClass([{"p-5":!n.type},"container-fluid intro-content"])}"${v}><div class="row"${v}><div class="col-auto offset-lg-1 intro-col"${v}><h3 class="intro-subtitle"${v}>Trade-In Offer</h3><h1 class="intro-title"${v}>MacBook Air <br${v}>Latest Model <span${v}><sup class="font-weight-light"${v}>from</sup><span class="text-primary"${v}>$999<sup${v}>,99</sup></span></span></h1><a href="category.html" class="btn btn-outline-primary-2"${v}><span${v}>Shop Now</span><i class="icon-long-arrow-right"${v}></i></a></div></div></div></div>`);else return[u.createVNode("div",{class:"w-100 "+n.type,style:{backgroundImage:"url(http://localhost:8000/storage/advertisements/November2023/slide-1.png)"}},[u.createVNode("div",{class:["container-fluid intro-content",{"p-5":!n.type}]},[u.createVNode("div",{class:"row"},[u.createVNode("div",{class:"col-auto offset-lg-1 intro-col"},[u.createVNode("h3",{class:"intro-subtitle"},"Trade-In Offer"),u.createVNode("h1",{class:"intro-title"},[u.createTextVNode("MacBook Air "),u.createVNode("br"),u.createTextVNode("Latest Model "),u.createVNode("span",null,[u.createVNode("sup",{class:"font-weight-light"},"from"),u.createVNode("span",{class:"text-primary"},[u.createTextVNode("$999"),u.createVNode("sup",null,",99")])])]),u.createVNode("a",{href:"category.html",class:"btn btn-outline-primary-2"},[u.createVNode("span",null,"Shop Now"),u.createVNode("i",{class:"icon-long-arrow-right"})])])])],2)],6)]}),_:1},h,f)),m(y.ssrRenderComponent(c,{key:1},{default:u.withCtx((g,b,w,v)=>{if(b)b(`<div class="${y.ssrRenderClass(["w-100 "+n.type,"w-100"])}" style="${y.ssrRenderStyle({backgroundImage:"url(http://localhost:8000/storage/advertisements/November2023/slide-2.jpg)"})}"${v}><div class="${y.ssrRenderClass([{"p-5":!n.type},"container-fluid intro-content"])}"${v}><div class="row"${v}><div class="col-auto offset-lg-1 intro-col"${v}><h3 class="intro-subtitle"${v}>Trevel &amp; Outdoor</h3><h1 class="intro-title"${v}>Original Outdoor <br${v}>Beanbag <span${v}><sup class="font-weight-light line-through"${v}>$89,99</sup><span class="text-primary"${v}>$29<sup${v}>,99</sup></span></span></h1><a href="category.html" class="btn btn-outline-primary-2"${v}><span${v}>Shop Now</span><i class="icon-long-arrow-right"${v}></i></a></div></div></div></div>`);else return[u.createVNode("div",{class:["w-100 "+n.type,"w-100"],style:{backgroundImage:"url(http://localhost:8000/storage/advertisements/November2023/slide-2.jpg)"}},[u.createVNode("div",{class:["container-fluid intro-content",{"p-5":!n.type}]},[u.createVNode("div",{class:"row"},[u.createVNode("div",{class:"col-auto offset-lg-1 intro-col"},[u.createVNode("h3",{class:"intro-subtitle"},"Trevel & Outdoor"),u.createVNode("h1",{class:"intro-title"},[u.createTextVNode("Original Outdoor "),u.createVNode("br"),u.createTextVNode("Beanbag "),u.createVNode("span",null,[u.createVNode("sup",{class:"font-weight-light line-through"},"$89,99"),u.createVNode("span",{class:"text-primary"},[u.createTextVNode("$29"),u.createVNode("sup",null,",99")])])]),u.createVNode("a",{href:"category.html",class:"btn btn-outline-primary-2"},[u.createVNode("span",null,"Shop Now"),u.createVNode("i",{class:"icon-long-arrow-right"})])])])],2)],6)]}),_:1},h,f)),m(y.ssrRenderComponent(c,{key:2},{default:u.withCtx((g,b,w,v)=>{if(b)b(`<div class="${y.ssrRenderClass(["w-100 "+n.type,"w-100"])}" style="${y.ssrRenderStyle({backgroundImage:"url(http://localhost:8000/storage/advertisements/November2023/slide-3.jpg)"})}"${v}><div class="${y.ssrRenderClass([{"p-5":!n.type},"container-fluid intro-content"])}"${v}><div class="row"${v}><div class="col-auto offset-lg-1 intro-col"${v}><h3 class="intro-subtitle"${v}>Fashion Promotions</h3><h1 class="intro-title"${v}>Tan Suede <br${v}>Biker Jacket <span${v}><sup class="font-weight-light line-through"${v}>$240,00</sup><span class="text-primary"${v}>$180<sup${v}>,99</sup></span></span></h1><a href="category.html" class="btn btn-outline-primary-2"${v}><span${v}>Shop Now</span><i class="icon-long-arrow-right"${v}></i></a></div></div></div></div>`);else return[u.createVNode("div",{class:["w-100 "+n.type,"w-100"],style:{backgroundImage:"url(http://localhost:8000/storage/advertisements/November2023/slide-3.jpg)"}},[u.createVNode("div",{class:["container-fluid intro-content",{"p-5":!n.type}]},[u.createVNode("div",{class:"row"},[u.createVNode("div",{class:"col-auto offset-lg-1 intro-col"},[u.createVNode("h3",{class:"intro-subtitle"},"Fashion Promotions"),u.createVNode("h1",{class:"intro-title"},[u.createTextVNode("Tan Suede "),u.createVNode("br"),u.createTextVNode("Biker Jacket "),u.createVNode("span",null,[u.createVNode("sup",{class:"font-weight-light line-through"},"$240,00"),u.createVNode("span",{class:"text-primary"},[u.createTextVNode("$180"),u.createVNode("sup",null,",99")])])]),u.createVNode("a",{href:"category.html",class:"btn btn-outline-primary-2"},[u.createVNode("span",null,"Shop Now"),u.createVNode("i",{class:"icon-long-arrow-right"})])])])],2)],6)]}),_:1},h,f));else return[(u.openBlock(),u.createBlock(c,{key:0},{default:u.withCtx(()=>[u.createVNode("div",{class:"w-100 "+n.type,style:{backgroundImage:"url(http://localhost:8000/storage/advertisements/November2023/slide-1.png)"}},[u.createVNode("div",{class:["container-fluid intro-content",{"p-5":!n.type}]},[u.createVNode("div",{class:"row"},[u.createVNode("div",{class:"col-auto offset-lg-1 intro-col"},[u.createVNode("h3",{class:"intro-subtitle"},"Trade-In Offer"),u.createVNode("h1",{class:"intro-title"},[u.createTextVNode("MacBook Air "),u.createVNode("br"),u.createTextVNode("Latest Model "),u.createVNode("span",null,[u.createVNode("sup",{class:"font-weight-light"},"from"),u.createVNode("span",{class:"text-primary"},[u.createTextVNode("$999"),u.createVNode("sup",null,",99")])])]),u.createVNode("a",{href:"category.html",class:"btn btn-outline-primary-2"},[u.createVNode("span",null,"Shop Now"),u.createVNode("i",{class:"icon-long-arrow-right"})])])])],2)],6)]),_:1})),(u.openBlock(),u.createBlock(c,{key:1},{default:u.withCtx(()=>[u.createVNode("div",{class:["w-100 "+n.type,"w-100"],style:{backgroundImage:"url(http://localhost:8000/storage/advertisements/November2023/slide-2.jpg)"}},[u.createVNode("div",{class:["container-fluid intro-content",{"p-5":!n.type}]},[u.createVNode("div",{class:"row"},[u.createVNode("div",{class:"col-auto offset-lg-1 intro-col"},[u.createVNode("h3",{class:"intro-subtitle"},"Trevel & Outdoor"),u.createVNode("h1",{class:"intro-title"},[u.createTextVNode("Original Outdoor "),u.createVNode("br"),u.createTextVNode("Beanbag "),u.createVNode("span",null,[u.createVNode("sup",{class:"font-weight-light line-through"},"$89,99"),u.createVNode("span",{class:"text-primary"},[u.createTextVNode("$29"),u.createVNode("sup",null,",99")])])]),u.createVNode("a",{href:"category.html",class:"btn btn-outline-primary-2"},[u.createVNode("span",null,"Shop Now"),u.createVNode("i",{class:"icon-long-arrow-right"})])])])],2)],6)]),_:1})),(u.openBlock(),u.createBlock(c,{key:2},{default:u.withCtx(()=>[u.createVNode("div",{class:["w-100 "+n.type,"w-100"],style:{backgroundImage:"url(http://localhost:8000/storage/advertisements/November2023/slide-3.jpg)"}},[u.createVNode("div",{class:["container-fluid intro-content",{"p-5":!n.type}]},[u.createVNode("div",{class:"row"},[u.createVNode("div",{class:"col-auto offset-lg-1 intro-col"},[u.createVNode("h3",{class:"intro-subtitle"},"Fashion Promotions"),u.createVNode("h1",{class:"intro-title"},[u.createTextVNode("Tan Suede "),u.createVNode("br"),u.createTextVNode("Biker Jacket "),u.createVNode("span",null,[u.createVNode("sup",{class:"font-weight-light line-through"},"$240,00"),u.createVNode("span",{class:"text-primary"},[u.createTextVNode("$180"),u.createVNode("sup",null,",99")])])]),u.createVNode("a",{href:"category.html",class:"btn btn-outline-primary-2"},[u.createVNode("span",null,"Shop Now"),u.createVNode("i",{class:"icon-long-arrow-right"})])])])],2)],6)]),_:1}))]}),_:1},r)),e("</div>")}const Sf=nh.setup;nh.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/components/partials/LargeCarousel.vue"),Sf?Sf(t,e):void 0};var Ub=br(nh,[["ssrRender",kw]]);const ih={__ssrInlineRender:!0,props:{item:Object},setup(t){return(e,r,a,n)=>{const i=u.resolveComponent("router-link");r(`<div${y.ssrRenderAttrs(u.mergeProps({class:"product"},n))} data-v-e8aa7da0><figure class="product-media" data-v-e8aa7da0>`),t.item.sale?r(`<span class="product-label label-sale" data-v-e8aa7da0>-${y.ssrInterpolate(t.item.sale)}%</span>`):r("<!---->"),t.item.new?r('<span class="product-label label-new" data-v-e8aa7da0>New</span>'):r("<!---->"),r(y.ssrRenderComponent(i,{to:{name:"stores.products.show",params:{id:t.item.id,store:t.item.store.slug}}},{default:u.withCtx((o,s,l,c)=>{if(s)s(`<img${y.ssrRenderAttr("src",t.item.files[0].path)} alt="Product image" class="product-image" data-v-e8aa7da0${c}>`);else return[u.createVNode("img",{src:t.item.files[0].path,alt:"Product image",class:"product-image"},null,8,["src"])]}),_:1},a)),r('<div class="product-action-vertical" data-v-e8aa7da0><a href="#" class="btn-product-icon btn-wishlist btn-expandable" data-v-e8aa7da0><span data-v-e8aa7da0>add to wishlist</span></a></div><div class="product-action" data-v-e8aa7da0><a href="#" class="btn-product btn-cart" title="Add to cart" data-v-e8aa7da0><span data-v-e8aa7da0>add to cart</span></a></div></figure><div class="product-body" data-v-e8aa7da0><div class="product-cat" data-v-e8aa7da0>'),t.item.category.matchCategory?r(y.ssrRenderComponent(i,{to:{name:"categories.show",params:{id:t.item.category.matchCategory.id}}},{default:u.withCtx((o,s,l,c)=>{if(s)s(`${y.ssrInterpolate(t.item.category.matchCategory.name)}`);else return[u.createTextVNode(u.toDisplayString(t.item.category.matchCategory.name),1)]}),_:1},a)):r(y.ssrRenderComponent(i,{to:{name:"stores.categories.show",params:{id:t.item.category.id,store:t.item.store.slug}}},{default:u.withCtx((o,s,l,c)=>{if(s)s(`${y.ssrInterpolate(t.item.category.name)}`);else return[u.createTextVNode(u.toDisplayString(t.item.category.name),1)]}),_:1},a)),r('</div><h3 class="product-title" data-v-e8aa7da0>'),r(y.ssrRenderComponent(i,{to:{name:"stores.products.show",params:{id:t.item.id,store:t.item.store.slug}}},{default:u.withCtx((o,s,l,c)=>{if(s)s(`${y.ssrInterpolate(t.item.title)}`);else return[u.createTextVNode(u.toDisplayString(t.item.title),1)]}),_:1},a)),r(`</h3><div class="product-price" data-v-e8aa7da0><span class="new-price" data-v-e8aa7da0>$${y.ssrInterpolate(t.item.price)}</span>`),t.item.sale?r(`<span class="old-price" data-v-e8aa7da0>Was $${y.ssrInterpolate(t.item.oldPrice)}</span>`):r("<!---->"),r("</div>"),t.item.numberOfReviews>0?r(`<div class="ratings-container" data-v-e8aa7da0><div class="ratings" data-v-e8aa7da0><div class="ratings-val" style="${y.ssrRenderStyle({width:t.item.rating*100/5+"%"})}" data-v-e8aa7da0></div></div><span class="ratings-text" data-v-e8aa7da0>( ${y.ssrInterpolate(t.item.numberOfReviews)} Review(s) )</span></div>`):r("<!---->"),t.item.colors.length>1?(r('<div class="product-nav product-nav-dots" data-v-e8aa7da0><!--[-->'),y.ssrRenderList(t.item.colors,o=>{r(`<a href="#" style="${y.ssrRenderStyle({background:o.addition})}" data-v-e8aa7da0><span class="sr-only" data-v-e8aa7da0>${y.ssrInterpolate(o.title)}</span></a>`)}),r("<!--]--></div>")):r("<!---->"),r("</div></div>")}}},Cf=ih.setup;ih.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/components/partials/Product.vue"),Cf?Cf(t,e):void 0};var xd=br(ih,[["__scopeId","data-v-e8aa7da0"]]);const oh={name:"Category",props:{item:Object}};function Rw(t,e,r,a,n,i,o,s){const l=u.resolveComponent("router-link");e(y.ssrRenderComponent(l,u.mergeProps({to:{name:"categories.show",params:{id:n.item.id}},class:"cat-block"},a),{default:u.withCtx((c,d,p,m)=>{if(d)d(`<figure${m}><span${m}><img${y.ssrRenderAttr("src",n.item.icon.path)} alt="Category image" style="${y.ssrRenderStyle({"max-width":"100%","max-height":"100px"})}"${m}></span></figure><h3 class="cat-block-title"${m}>${y.ssrInterpolate(n.item.name)}</h3>`);else return[u.createVNode("figure",null,[u.createVNode("span",null,[u.createVNode("img",{src:n.item.icon.path,alt:"Category image",style:{"max-width":"100%","max-height":"100px"}},null,8,["src"])])]),u.createVNode("h3",{class:"cat-block-title"},u.toDisplayString(n.item.name),1)]}),_:1},r))}const kf=oh.setup;oh.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/components/partials/Category.vue"),kf?kf(t,e):void 0};var _b=br(oh,[["ssrRender",Rw]]),Tw="/assets/banner-1.bb1eb290.jpg",Mw="/assets/banner-3.d7829625.jpg",Pw="/assets/banner-2.1ba698f1.jpg",Iw="/assets/banner-4.f76b5538.jpg",Aw="/assets/banner-5.9dda8293.png";const sh={components:{Category:_b,Product:xd,LargeCarousel:Ub},async setup(){const t=await _a().get(ti().home);return{popularCategories:t.data.popularCategories,newProducts:t.data.newProducts,categoryNewProducts:t.data.categoryNewProducts}},created(){Dl(this.$config.slogan)}};function Ew(t,e,r,a,n,i,o,s){const l=u.resolveComponent("large-carousel"),c=u.resolveComponent("category"),d=u.resolveComponent("product");e('<!--[--><div class="container-fluid" data-v-1f044f80><div class="intro-slider-container offset-lg-3 offset-xxl-2" data-v-1f044f80>'),e(y.ssrRenderComponent(l,{type:"intro-slide"},null,r)),e('</div></div><div class="mb-4" data-v-1f044f80></div><div class="container-fluid" data-v-1f044f80><h2 class="title text-center mb-2" data-v-1f044f80>Explore Popular Categories</h2><div class="cat-blocks-container-fluid" data-v-1f044f80><div class="row" data-v-1f044f80><!--[-->'),y.ssrRenderList(i.popularCategories,(p,m)=>{e('<div class="col-6 col-sm-4 col-lg-2" data-v-1f044f80>'),e(y.ssrRenderComponent(c,{item:p},null,r)),e("</div>")}),e(`<!--]--></div></div></div><div class="mb-2" data-v-1f044f80></div><div class="container-fluid" data-v-1f044f80><div class="row" data-v-1f044f80><div class="col-sm-6 col-lg-3" data-v-1f044f80><div class="banner banner-overlay" data-v-1f044f80><a href="#" data-v-1f044f80><img${y.ssrRenderAttr("src",Tw)} alt="Banner" data-v-1f044f80></a><div class="banner-content" data-v-1f044f80><h4 class="banner-subtitle text-white" data-v-1f044f80><a href="#" data-v-1f044f80>Weekend Sale</a></h4><h3 class="banner-title text-white" data-v-1f044f80><a href="#" data-v-1f044f80>Lighting <br data-v-1f044f80>&amp; Accessories <br data-v-1f044f80><span data-v-1f044f80>25% off</span></a></h3><a href="#" class="banner-link" data-v-1f044f80>Shop Now <i class="icon-long-arrow-right" data-v-1f044f80></i></a></div></div></div><div class="col-sm-6 col-lg-3 order-lg-last" data-v-1f044f80><div class="banner banner-overlay" data-v-1f044f80><a href="#" data-v-1f044f80><img${y.ssrRenderAttr("src",Mw)} alt="Banner" data-v-1f044f80></a><div class="banner-content" data-v-1f044f80><h4 class="banner-subtitle text-white" data-v-1f044f80><a href="#" data-v-1f044f80>Smart Offer</a></h4><h3 class="banner-title text-white" data-v-1f044f80><a href="#" data-v-1f044f80>Anniversary <br data-v-1f044f80>Special <br data-v-1f044f80><span data-v-1f044f80>15% off</span></a></h3><a href="#" class="banner-link" data-v-1f044f80>Shop Now <i class="icon-long-arrow-right" data-v-1f044f80></i></a></div></div></div><div class="col-lg-6" data-v-1f044f80><div class="banner banner-overlay" data-v-1f044f80><a href="#" data-v-1f044f80><img${y.ssrRenderAttr("src",Pw)} alt="Banner" data-v-1f044f80></a><div class="banner-content" data-v-1f044f80><h4 class="banner-subtitle text-white d-none d-sm-block" data-v-1f044f80><a href="#" data-v-1f044f80>Amazing Value</a></h4><h3 class="banner-title text-white" data-v-1f044f80><a href="#" data-v-1f044f80>Clothes Trending <br data-v-1f044f80>Spring Collection 2019 <br data-v-1f044f80><span data-v-1f044f80>from $12,99</span></a></h3><a href="#" class="banner-link" data-v-1f044f80>Discover Now <i class="icon-long-arrow-right" data-v-1f044f80></i></a></div></div></div></div></div><div class="mb-3" data-v-1f044f80></div><div class="bg-light pt-3 pb-5" data-v-1f044f80><div class="container-fluid electronics" data-v-1f044f80><div class="heading heading-flex heading-border mb-3" data-v-1f044f80><div class="heading-left" data-v-1f044f80><h2 class="title" data-v-1f044f80>Hot Deals Products</h2></div></div><div class="tab-content" data-v-1f044f80><div class="row" data-v-1f044f80><!--[-->`),y.ssrRenderList(i.newProducts,(p,m)=>{e('<div class="col-md-2" data-v-1f044f80>'),e(y.ssrRenderComponent(d,{item:p},null,r)),e("</div>")}),e(`<!--]--></div></div></div></div><div class="mb-3" data-v-1f044f80></div><div class="container-fluid" data-v-1f044f80><div class="row" data-v-1f044f80><div class="col-lg-6" data-v-1f044f80><div class="banner banner-overlay banner-overlay-light" data-v-1f044f80><a href="#" data-v-1f044f80><img${y.ssrRenderAttr("src",Iw)} alt="Banner" data-v-1f044f80></a><div class="banner-content" data-v-1f044f80><h4 class="banner-subtitle d-none d-sm-block" data-v-1f044f80><a href="#" data-v-1f044f80>Spring Sale is Coming</a></h4><h3 class="banner-title" data-v-1f044f80><a href="#" data-v-1f044f80>All Smart Watches <br data-v-1f044f80>Discount <br data-v-1f044f80><span class="text-primary" data-v-1f044f80>15% off</span></a></h3><a href="#" class="banner-link banner-link-dark" data-v-1f044f80>Discover Now <i class="icon-long-arrow-right" data-v-1f044f80></i></a></div></div></div><div class="col-lg-6" data-v-1f044f80><div class="banner banner-overlay" data-v-1f044f80><a href="#" data-v-1f044f80><img${y.ssrRenderAttr("src",Aw)} alt="Banner" data-v-1f044f80></a><div class="banner-content" data-v-1f044f80><h4 class="banner-subtitle text-white d-none d-sm-block" data-v-1f044f80><a href="#" data-v-1f044f80>Amazing Value</a></h4><h3 class="banner-title text-white" data-v-1f044f80><a href="#" data-v-1f044f80>Headphones Trending <br data-v-1f044f80>JBL Harman <br data-v-1f044f80><span data-v-1f044f80>from $59,99</span></a></h3><a href="#" class="banner-link" data-v-1f044f80>Discover Now <i class="icon-long-arrow-right" data-v-1f044f80></i></a></div></div></div></div></div><div class="mb-3" data-v-1f044f80></div><!--[-->`),y.ssrRenderList(i.categoryNewProducts,(p,m)=>{e("<!--[-->"),p.products.length>0?(e(`<div class="bg-light pt-3 pb-5" data-v-1f044f80><div class="container-fluid electronics" data-v-1f044f80><div class="heading heading-flex heading-border mb-3" data-v-1f044f80><div class="heading-left" data-v-1f044f80><h2 class="title" data-v-1f044f80>${y.ssrInterpolate(p.name)}</h2></div></div><div class="tab-content" data-v-1f044f80><div class="row" data-v-1f044f80><!--[-->`),y.ssrRenderList(p.products,(h,f)=>{e('<div class="col-md-2" data-v-1f044f80>'),e(y.ssrRenderComponent(d,{item:h},null,r)),e("</div>")}),e("<!--]--></div></div></div></div>")):e("<!---->"),e("<!--]-->")}),e('<!--]--><div class="mb-3" data-v-1f044f80></div><!--]-->')}const Rf=sh.setup;sh.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/pages/Home.vue"),Rf?Rf(t,e):void 0};var Vw=br(sh,[["ssrRender",Ew],["__scopeId","data-v-1f044f80"]]),Lw=Object.freeze(Object.defineProperty({__proto__:null,default:Vw},Symbol.toStringTag,{value:"Module"}));const lh={async setup(){const t=Tn.useStore(),{data:e}=await _a().get("http://127.0.0.1:8000/api/test",{params:{id:La.useRoute().params.id}});return{product:e,store:t}}};function Fw(t,e,r,a,n,i,o,s){e(`<!--[--><h1 data-v-02b305c2>${y.ssrInterpolate(i.product.title)}</h1><h1 data-v-02b305c2>${y.ssrInterpolate(i.store.getters.user)}</h1><!--]-->`)}const Tf=lh.setup;lh.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/pages/About.vue"),Tf?Tf(t,e):void 0};var Nw=br(lh,[["ssrRender",Fw],["__scopeId","data-v-02b305c2"]]),zw=Object.freeze(Object.defineProperty({__proto__:null,default:Nw},Symbol.toStringTag,{value:"Module"}));const ch={name:"Google",components:{Modal:Ci},data(){return{info:null,modal:!1}},mounted(){this.info=this.parseQuery(this.$route.fullPath.split("#")[1]),this.info.access_token&&this.signIn(this.info.access_token,this.info.state==="up")},methods:{parseQuery(t){let e={},r=t.split("&");for(let a=0;a<r.length;a++){let n=r[a].split("=");e[decodeURIComponent(n[0])]=decodeURIComponent(n[1]||"")}return e},signIn(t,e){return this.axios.post(this.$urls.authGoogle,{token:t,action:e?"signup":void 0}).then(r=>{r.data.code==="user_not_found"?(this.info.email=r.data.email,this.modal=!0):(this.$cookie.setItem("token",r.data.token,1/0),this.$store.dispatch("setUser",r.data),this.$router.push({name:"home"}))})}}};function Dw(t,e,r,a,n,i,o,s){const l=u.resolveComponent("modal");e(`<div${y.ssrRenderAttrs(u.mergeProps({class:"container"},a))}><h2>Authorizing by Google account</h2>`),e(y.ssrRenderComponent(l,{modelValue:o.modal,"onUpdate:modelValue":c=>o.modal=c,"modal-title":t.$lang.app.userNotFound,"cancel-button-label":t.$lang.app.no,"ok-button-label":t.$lang.app.yes},{default:u.withCtx((c,d,p,m)=>{if(d)d(`<div class="p-3"${m}>${t.$lang.app.userNotFoundMsg.replace(":email",o.info.email)}</div>`);else return[u.createVNode("div",{class:"p-3",innerHTML:t.$lang.app.userNotFoundMsg.replace(":email",o.info.email)},null,8,["innerHTML"])]}),_:1},r)),e("</div>")}const Mf=ch.setup;ch.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/pages/auth/Google.vue"),Mf?Mf(t,e):void 0};var Ow=br(ch,[["ssrRender",Dw]]),Bw=Object.freeze(Object.defineProperty({__proto__:null,default:Ow},Symbol.toStringTag,{value:"Module"}));const dh={name:"StoreItem",props:{item:Object}};function Uw(t,e,r,a,n,i,o,s){const l=u.resolveComponent("router-link");e(`<div${y.ssrRenderAttrs(u.mergeProps({class:"banner banner-cat banner-badge"},a))}>`),e(y.ssrRenderComponent(l,{to:{name:"stores.show",params:{store:n.item.slug}}},{default:u.withCtx((c,d,p,m)=>{if(d)d(`<div style="${y.ssrRenderStyle({height:"250px"})}"${m}><img${y.ssrRenderAttr("src",n.item.cover.path)} alt="Cover" class="h-100" style="${y.ssrRenderStyle({filter:"blur(3px)"})}"${m}></div>`);else return[u.createVNode("div",{style:{height:"250px"}},[u.createVNode("img",{src:n.item.cover.path,alt:"Cover",class:"h-100",style:{filter:"blur(3px)"}},null,8,["src"])])]}),_:1},r)),e(y.ssrRenderComponent(l,{to:{name:"stores.show",params:{store:n.item.slug}},class:"banner-link"},{default:u.withCtx((c,d,p,m)=>{if(d)d(`<img${y.ssrRenderAttr("src",n.item.icon.path)} alt="Icon"${m}><h3 class="banner-title"${m}>${y.ssrInterpolate(n.item.name)}</h3><span class="banner-link-text"${m}>Shop Now</span>`);else return[u.createVNode("img",{src:n.item.icon.path,alt:"Icon"},null,8,["src"]),u.createVNode("h3",{class:"banner-title"},u.toDisplayString(n.item.name),1),u.createVNode("span",{class:"banner-link-text"},"Shop Now")]}),_:1},r)),e("</div>")}const Pf=dh.setup;dh.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/components/partials/StoreItem.vue"),Pf?Pf(t,e):void 0};var Wb=br(dh,[["ssrRender",Uw]]);const uh={name:"Search",components:{Category:_b,StoreItem:Wb,Product:xd,Headings:Ln},data(){return{products:[],categories:[],stores:[],meta:{}}},computed:{params(){return this.$route.params}},watch:{"params.query"(t){t&&this.fetchResult()},"params.type"(t){t&&this.fetchResult()}},mounted(){this.fetchResult()},methods:{fetchResult(){return this.axios.get(this.$urls.search,{params:{query:this.$route.params.query,categoryId:this.$route.params.type!=="everywhere"?this.$route.params.type:""}}).then(t=>{this.products=t.data.data,this.meta=t.data.meta,this.categories=t.data.categories,this.stores=t.data.stores})}}};function _w(t,e,r,a,n,i,o,s){const l=u.resolveComponent("headings"),c=u.resolveComponent("category"),d=u.resolveComponent("store-item"),p=u.resolveComponent("product");e("<!--[-->"),e(y.ssrRenderComponent(l,{title:"Results for: "+t.$route.params.query.toString()},null,r)),e('<div class="container-fluid">'),o.categories.length>0?(e(`<!--[--><h2 class="title title-border">${y.ssrInterpolate(t.$lang.app.categories)}</h2><div class="row"><!--[-->`),y.ssrRenderList(o.categories,m=>{e('<div class="col-6 col-md-4 col-xl-3 col-xxl-2">'),e(y.ssrRenderComponent(c,{item:m},null,r)),e("</div>")}),e('<!--]--></div><div class="mb-3"></div><!--]-->')):e("<!---->"),o.stores.length>0?(e(`<!--[--><h2 class="title title-border">${y.ssrInterpolate(t.$lang.app.stores)}</h2><div class="row"><!--[-->`),y.ssrRenderList(o.stores,m=>{e('<div class="col-6 col-md-4 col-xl-3 col-xxl-2">'),e(y.ssrRenderComponent(d,{item:m},null,r)),e("</div>")}),e('<!--]--></div><div class="mb-3"></div><!--]-->')):e("<!---->"),e(`<h2 class="title title-border">${y.ssrInterpolate(t.$lang.app.products)}</h2><div class="row"><!--[-->`),y.ssrRenderList(o.products,m=>{e('<div class="col-6 col-md-4 col-xl-3 col-xxl-2">'),e(y.ssrRenderComponent(p,{item:m},null,r)),e("</div>")}),e("<!--]-->"),o.products.length===0?e(`<div class="col-12"> Your search - <b>${y.ssrInterpolate(s.params.query)}</b> - did not match any item. </div>`):e("<!---->"),e('</div><div class="mb-3"></div></div><!--]-->')}const If=uh.setup;uh.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/pages/Search.vue"),If?If(t,e):void 0};var Ww=br(uh,[["ssrRender",_w]]),qw=Object.freeze(Object.defineProperty({__proto__:null,default:Ww},Symbol.toStringTag,{value:"Module"}));const ph={name:"Index",components:{Headings:Ln},computed:{cart(){return this.$cart}}};function jw(t,e,r,a,n,i,o,s){const l=u.resolveComponent("headings"),c=u.resolveComponent("router-link");e("<!--[-->"),e(y.ssrRenderComponent(l,{title:t.$lang.app.cart},null,r)),e('<div class="cart"><div class="container-fluid"><div class="row"><div class="col-lg-9"><table class="table table-cart table-mobile"><thead><tr><th>Product</th><th>Store</th><th>Price</th><th>Quantity</th><th>Total</th><th></th></tr></thead><tbody><!--[-->'),y.ssrRenderList(s.cart.items,(d,p)=>{e('<tr><td class="product-col"><div class="product"><figure class="product-media">'),e(y.ssrRenderComponent(c,{to:{name:"stores.products.show",params:{store:d.store.slug,id:d.product.id}}},{default:u.withCtx((m,h,f,g)=>{if(h)h(`<img${y.ssrRenderAttr("src",d.product.files[0].path)} alt="Product image" style="${y.ssrRenderStyle({width:"64px"})}"${g}>`);else return[u.createVNode("img",{src:d.product.files[0].path,alt:"Product image",style:{width:"64px"}},null,8,["src"])]}),_:2},r)),e('</figure><h3 class="product-title">'),e(y.ssrRenderComponent(c,{to:{name:"stores.products.show",params:{store:d.store.slug,id:d.product.id}}},{default:u.withCtx((m,h,f,g)=>{if(h)h(`${y.ssrInterpolate(d.product.title)}`);else return[u.createTextVNode(u.toDisplayString(d.product.title),1)]}),_:2},r)),e('</h3></div></td><td class="price-col">'),e(y.ssrRenderComponent(c,{to:{name:"stores.show",params:{store:d.store.slug}}},{default:u.withCtx((m,h,f,g)=>{if(h)h(`${y.ssrInterpolate(d.store.name)}`);else return[u.createTextVNode(u.toDisplayString(d.store.name),1)]}),_:2},r)),e(`</td><td class="price-col">$${y.ssrInterpolate(d.price)}</td><td class="quantity-col"><div class="cart-product-quantity"><input type="number" class="form-control"${y.ssrRenderAttr("value",d.qty)} min="1" step="1" required></div></td><td class="total-col">$${y.ssrInterpolate(d.price*d.qty)}</td><td class="remove-col"><button class="btn-remove"><i class="icon-close"></i></button></td></tr>`)}),e(`<!--]--></tbody></table></div><aside class="col-lg-3"><div class="summary summary-cart"><h3 class="summary-title">Cart Total</h3><table class="table table-summary"><tbody><tr class="summary-subtotal"><td>Subtotal:</td><td>$${y.ssrInterpolate(s.cart.subtotalPrice)}</td></tr><tr class="summary-shipping"><td>Shipping:</td><td>\xA0</td></tr><!--[-->`),y.ssrRenderList(s.cart.shippingTypes,(d,p)=>{e(`<tr class="summary-shipping-row"><td><div class="custom-control custom-radio"><input${y.ssrIncludeBooleanAttr(y.ssrLooseEqual(s.cart.shippingType,p))?" checked":""}${y.ssrRenderAttr("value",p)} type="radio"${y.ssrRenderAttr("id",p)} name="shipping" class="custom-control-input"><label class="custom-control-label"${y.ssrRenderAttr("for",p)}>${y.ssrInterpolate(t.$lang.app[p])}</label></div></td><td>$${y.ssrInterpolate(d)}</td></tr>`)}),e(`<!--]--><tr class="summary-total"><td>Total:</td><td>$${y.ssrInterpolate(s.cart.subtotalPrice+s.cart.shippingTypes[s.cart.shippingType])}</td></tr></tbody></table>`),e(y.ssrRenderComponent(c,{to:{name:"cart.checkout"},class:"btn btn-outline-primary-2 btn-order btn-block"},{default:u.withCtx((d,p,m,h)=>{if(p)p("PROCEED TO CHECKOUT");else return[u.createTextVNode("PROCEED TO CHECKOUT")]}),_:1},r)),e("</div></aside></div></div></div><!--]-->")}const Af=ph.setup;ph.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/pages/cart/Index.vue"),Af?Af(t,e):void 0};var Hw=br(ph,[["ssrRender",jw]]),Gw=Object.freeze(Object.defineProperty({__proto__:null,default:Hw},Symbol.toStringTag,{value:"Module"})),Zw="/assets/payments-summary.dbd3a349.png";const mh={name:"Checkout",components:{Headings:Ln},computed:{cart(){return this.$cart}}};function Yw(t,e,r,a,n,i,o,s){const l=u.resolveComponent("headings"),c=u.resolveComponent("router-link");e("<!--[-->"),e(y.ssrRenderComponent(l,{title:t.$lang.app.checkout},null,r)),e('<div class="checkout"><div class="container-fluid"><form action="#"><div class="row"><div class="col-lg-9"><h2 class="checkout-title">Billing Details</h2><div class="row"><div class="col-sm-6"><label>First Name *</label><input type="text" class="form-control" required></div><div class="col-sm-6"><label>Last Name *</label><input type="text" class="form-control" required></div></div><label>Company Name (Optional)</label><input type="text" class="form-control"><label>Country *</label><input type="text" class="form-control" required><label>Street address *</label><input type="text" class="form-control" placeholder="House number and Street name" required><input type="text" class="form-control" placeholder="Appartments, suite, unit etc ..." required><div class="row"><div class="col-sm-6"><label>Town / City *</label><input type="text" class="form-control" required></div><div class="col-sm-6"><label>State / County *</label><input type="text" class="form-control" required></div></div><div class="row"><div class="col-sm-6"><label>Postcode / ZIP *</label><input type="text" class="form-control" required></div><div class="col-sm-6"><label>Phone *</label><input type="tel" class="form-control" required></div></div><label>Email address *</label><input type="email" class="form-control" required><div class="custom-control custom-checkbox"><input type="checkbox" class="custom-control-input" id="checkout-create-acc"><label class="custom-control-label" for="checkout-create-acc">Create an account?</label></div><div class="custom-control custom-checkbox"><input type="checkbox" class="custom-control-input" id="checkout-diff-address"><label class="custom-control-label" for="checkout-diff-address">Ship to a different address?</label></div><label>Order notes (optional)</label><textarea class="form-control" cols="30" rows="4" placeholder="Notes about your order, e.g. special notes for delivery"></textarea></div><aside class="col-lg-3"><div class="summary"><h3 class="summary-title">Your Order</h3><table class="table table-summary"><thead><tr><th>Product</th><th>Total</th></tr></thead><tbody><!--[-->'),y.ssrRenderList(s.cart.items,(d,p)=>{e("<tr><td>"),e(y.ssrRenderComponent(c,{to:{name:"stores.products.show",params:{store:d.store.slug,id:d.product.id}}},{default:u.withCtx((m,h,f,g)=>{if(h)h(`${y.ssrInterpolate(d.qty)} x ${y.ssrInterpolate(d.product.title)}`);else return[u.createTextVNode(u.toDisplayString(d.qty)+" x "+u.toDisplayString(d.product.title),1)]}),_:2},r)),e(`</td><td>$${y.ssrInterpolate(d.qty*d.price)}</td></tr>`)}),e(`<!--]--><tr class="summary-subtotal"><td>Subtotal:</td><td>$${y.ssrInterpolate(s.cart.subtotalPrice)}</td></tr><tr><td>Shipping:</td><td>${y.ssrInterpolate(t.$lang.app[s.cart.shippingType])}($${y.ssrInterpolate(s.cart.shippingTypes[s.cart.shippingType])})</td></tr><tr class="summary-total"><td>Total:</td><td>$${y.ssrInterpolate(s.cart.subtotalPrice+s.cart.shippingTypes[s.cart.shippingType])}</td></tr></tbody></table><div class="accordion-summary" id="accordion-payment"><div class="card"><div class="card-header" id="heading-1"><h2 class="card-title"><a role="button" data-toggle="collapse" href="#collapse-1" aria-expanded="true" aria-controls="collapse-1"> Direct bank transfer </a></h2></div><div id="collapse-1" class="collapse show" aria-labelledby="heading-1" data-parent="#accordion-payment"><div class="card-body"> Make your payment directly into our bank account. Please use your Order ID as the payment reference. Your order will not be shipped until the funds have cleared in our account. </div></div></div><div class="card"><div class="card-header" id="heading-2"><h2 class="card-title"><a class="collapsed" role="button" data-toggle="collapse" href="#collapse-2" aria-expanded="false" aria-controls="collapse-2"> Check payments </a></h2></div><div id="collapse-2" class="collapse" aria-labelledby="heading-2" data-parent="#accordion-payment"><div class="card-body"> Ipsum dolor sit amet, consectetuer adipiscing elit. Donec odio. Quisque volutpat mattis eros. Nullam malesuada erat ut turpis. </div></div></div><div class="card"><div class="card-header" id="heading-3"><h2 class="card-title"><a class="collapsed" role="button" data-toggle="collapse" href="#collapse-3" aria-expanded="false" aria-controls="collapse-3"> Cash on delivery </a></h2></div><div id="collapse-3" class="collapse" aria-labelledby="heading-3" data-parent="#accordion-payment"><div class="card-body">Quisque volutpat mattis eros. Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Donec odio. Quisque volutpat mattis eros. </div></div></div><div class="card"><div class="card-header" id="heading-4"><h2 class="card-title"><a class="collapsed" role="button" data-toggle="collapse" href="#collapse-4" aria-expanded="false" aria-controls="collapse-4"> PayPal <small class="float-right paypal-link">What is PayPal?</small></a></h2></div><div id="collapse-4" class="collapse" aria-labelledby="heading-4" data-parent="#accordion-payment"><div class="card-body"> Nullam malesuada erat ut turpis. Suspendisse urna nibh, viverra non, semper suscipit, posuere a, pede. Donec nec justo eget felis facilisis fermentum. </div></div></div><div class="card"><div class="card-header" id="heading-5"><h2 class="card-title"><a class="collapsed" role="button" data-toggle="collapse" href="#collapse-5" aria-expanded="false" aria-controls="collapse-5"> Credit Card (Stripe) <img${y.ssrRenderAttr("src",Zw)} alt="payments cards"></a></h2></div><div id="collapse-5" class="collapse" aria-labelledby="heading-5" data-parent="#accordion-payment"><div class="card-body"> Donec nec justo eget felis facilisis fermentum.Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Donec odio. Quisque volutpat mattis eros. Lorem ipsum dolor sit ame. </div></div></div></div><button type="submit" class="btn btn-outline-primary-2 btn-order btn-block"><span class="btn-text">Place Order</span><span class="btn-hover-text">Proceed to Checkout</span></button></div></aside></div></form></div></div><!--]-->`)}const Ef=mh.setup;mh.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/pages/cart/Checkout.vue"),Ef?Ef(t,e):void 0};var Xw=br(mh,[["ssrRender",Yw]]),Kw=Object.freeze(Object.defineProperty({__proto__:null,default:Xw},Symbol.toStringTag,{value:"Module"}));const hh={name:"Wishlist",components:{Headings:Ln},computed:{wishlist(){return this.$cart.wishlist}}};function Jw(t,e,r,a,n,i,o,s){const l=u.resolveComponent("headings"),c=u.resolveComponent("router-link");e("<!--[-->"),e(y.ssrRenderComponent(l,{title:t.$lang.app.wishlist},null,r)),e('<div class="container-fluid"><table class="table table-wishlist table-mobile"><thead><tr><th>Product</th><th>Price</th><th>Stock Status</th><th></th><th></th></tr></thead><tbody><!--[-->'),y.ssrRenderList(s.wishlist,(d,p)=>{e(`<tr><td class="product-col"><div class="product"><figure class="product-media"><a href="#"><img${y.ssrRenderAttr("src",d.product.files[0].path)} style="${y.ssrRenderStyle({width:"64px"})}" alt="Product image"></a></figure><h3 class="product-title">`),e(y.ssrRenderComponent(c,{to:{name:"stores.products.show",params:{store:d.store.slug,id:d.product.id}},href:"#"},{default:u.withCtx((m,h,f,g)=>{if(h)h(`${y.ssrInterpolate(d.product.title)}`);else return[u.createTextVNode(u.toDisplayString(d.product.title),1)]}),_:2},r)),e(`</h3></div></td><td class="price-col">$${y.ssrInterpolate(d.product.price)}</td><td class="stock-col"><span class="in-stock">In stock</span></td><td class="action-col"><div class="dropdown"><button class="btn btn-block btn-outline-primary-2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="icon-list-alt"></i>Select Options </button><div class="dropdown-menu"><a class="dropdown-item" href="#">First option</a><a class="dropdown-item" href="#">Another option</a><a class="dropdown-item" href="#">The best option</a></div></div></td><td class="remove-col"><button class="btn-remove"><i class="icon-close"></i></button></td></tr>`)}),e("<!--]--></tbody></table></div><!--]-->")}const Vf=hh.setup;hh.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/pages/cart/Wishlist.vue"),Vf?Vf(t,e):void 0};var Qw=br(hh,[["ssrRender",Jw]]),tS=Object.freeze(Object.defineProperty({__proto__:null,default:Qw},Symbol.toStringTag,{value:"Module"}));const gh=u.defineComponent({name:"Show",async setup(t,e){const{data:r}=await _a().get("http://127.0.0.1:8000/api/test",{params:{id:La.useRoute().params.id}});return{product:r}}});function eS(t,e,r,a,n,i,o,s){e(`<div${y.ssrRenderAttrs(a)}>${y.ssrInterpolate(t.product.id)}</div>`)}const Lf=gh.setup;gh.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/pages/products/Show.vue"),Lf?Lf(t,e):void 0};var rS=br(gh,[["ssrRender",eS]]),aS=Object.freeze(Object.defineProperty({__proto__:null,default:rS},Symbol.toStringTag,{value:"Module"}));const fh={name:"Index"};function nS(t,e,r,a,n,i,o,s){e(`<h1${y.ssrRenderAttrs(a)}>categories</h1>`)}const Ff=fh.setup;fh.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/pages/categories/Index.vue"),Ff?Ff(t,e):void 0};var iS=br(fh,[["ssrRender",nS]]),oS=Object.freeze(Object.defineProperty({__proto__:null,default:iS},Symbol.toStringTag,{value:"Module"}));const $h={name:"StoreCategoryTree",props:{categories:Array,parentId:Number},data(){return{category:this.modelValue}}};function sS(t,e,r,a,n,i,o,s){const l=u.resolveComponent("router-link"),c=u.resolveComponent("store-category-tree",!0);e("<!--[-->"),y.ssrRenderList(n.categories,(d,p)=>{e(`<div class="${y.ssrRenderClass([{"child-el":n.parentId},"position-relative pt-1"])}" data-v-8f96b82e><div class="input-group input-group-el" data-v-8f96b82e><div class="input-group-prepend" data-v-8f96b82e>`),d.children.length>0?(e('<button class="btn btn-arrow btn-light" type="button" data-v-8f96b82e>'),d.open?e('<i class="la la-angle-down" data-v-8f96b82e></i>'):e('<i class="la la-angle-right" data-v-8f96b82e></i>'),e("</button>")):e("<!---->"),e("</div>"),e(y.ssrRenderComponent(l,{to:{name:"stores.categories.show",params:{id:d.id}},class:"btn form-control-plaintext btn-light text-left"},{default:u.withCtx((m,h,f,g)=>{if(h)h(`${y.ssrInterpolate(d.name)}`);else return[u.createTextVNode(u.toDisplayString(d.name),1)]}),_:2},r)),e("</div>"),d.children.length>0&&d.open?(e('<div class="child" data-v-8f96b82e>'),e(y.ssrRenderComponent(c,{categories:d.children,"onUpdate:categories":m=>d.children=m,"parent-id":d.id},null,r)),e("</div>")):e("<!---->"),e("</div>")}),e("<!--]-->")}const Nf=$h.setup;$h.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/components/stores/StoreCategoryTree.vue"),Nf?Nf(t,e):void 0};var qb=br($h,[["ssrRender",sS],["__scopeId","data-v-8f96b82e"]]);const Nd={__ssrInlineRender:!0,props:{category:Object,query:Object},emits:["change"],setup(t,{emit:e}){const r=t,a=u.reactive(r.query);return(n,i,o,s)=>{i(`<form${y.ssrRenderAttrs(u.mergeProps({class:"sidebar sidebar-shop"},s))}><div class="widget widget-clean"><label>Filters:</label><a href="#" class="sidebar-filter-clear">Clean All</a></div>`),t.category.children.length>0?(i(`<div class="widget widget-collapsible"><h3 class="widget-title"><a data-toggle="collapse" href="#widget-1" role="button" aria-expanded="true" aria-controls="widget-1">${y.ssrInterpolate(t.category.name)}</a></h3><div class="collapse show" id="widget-1"><div class="widget-body widget-categories">`),i(y.ssrRenderComponent(qb,{categories:t.category.children},null,o)),i("</div></div></div>")):i("<!---->"),t.category.sizes.length>0?(i('<div class="widget widget-collapsible"><h3 class="widget-title"><a data-toggle="collapse" href="#widget-2" role="button" aria-expanded="true" aria-controls="widget-2"> Size </a></h3><div class="collapse show" id="widget-2"><div class="widget-body"><div class="filter-items"><!--[-->'),y.ssrRenderList(t.category.sizes,l=>{i(`<div class="filter-item"><div class="custom-control custom-checkbox"><input${y.ssrIncludeBooleanAttr(Array.isArray(u.unref(a).sizeIds)?y.ssrLooseContain(u.unref(a).sizeIds,l.id):u.unref(a).sizeIds)?" checked":""} type="checkbox" class="custom-control-input"${y.ssrRenderAttr("value",l.id)}${y.ssrRenderAttr("id","size-"+l.id)}><label class="custom-control-label"${y.ssrRenderAttr("for","size-"+l.id)}>${y.ssrInterpolate(l.title)}</label></div></div>`)}),i("<!--]--></div></div></div></div>")):i("<!---->"),t.category.colors.length>0?(i('<div class="widget widget-collapsible"><h3 class="widget-title"><a data-toggle="collapse" href="#widget-3" role="button" aria-expanded="true" aria-controls="widget-3"> Colour </a></h3><div class="collapse show" id="widget-3"><div class="widget-body"><div class="filter-colors"><!--[-->'),y.ssrRenderList(t.category.colors,l=>{i(`<a href="#" class="${y.ssrRenderClass({selected:l.id===u.unref(a).colorId})}" style="${y.ssrRenderStyle(`background: ${l.addition};`)}"><span class="sr-only">${y.ssrInterpolate(l.title)}</span></a>`)}),i("<!--]--></div></div></div></div>")):i("<!---->"),t.category.brands.length>0?(i('<div class="widget widget-collapsible"><h3 class="widget-title"><a data-toggle="collapse" href="#widget-4" role="button" aria-expanded="true" aria-controls="widget-4"> Brand </a></h3><div class="collapse show" id="widget-4"><div class="widget-body"><div class="filter-items"><!--[-->'),y.ssrRenderList(t.category.brands,l=>{i(`<div class="filter-item"><div class="custom-control custom-checkbox"><input${y.ssrIncludeBooleanAttr(Array.isArray(u.unref(a).brandIds)?y.ssrLooseContain(u.unref(a).brandIds,l.id):u.unref(a).brandIds)?" checked":""} type="checkbox" class="custom-control-input"${y.ssrRenderAttr("value",l.id)}${y.ssrRenderAttr("id","brand-"+l.id)}><label class="custom-control-label"${y.ssrRenderAttr("for","brand-"+l.id)}>${y.ssrInterpolate(l.name)}</label></div></div>`)}),i("<!--]--></div></div></div></div>")):i("<!---->"),i(`<div class="widget widget-collapsible"><h3 class="widget-title"><a data-toggle="collapse" href="#widget-5" role="button" aria-expanded="true" aria-controls="widget-5"> Price </a></h3><div class="collapse show" id="widget-5"><div class="widget-body"><div class="filter-price"><div class="row"><div class="col"><div class="form-group"><label class="form-label">From</label><input${y.ssrRenderAttr("value",u.unref(a).priceFrom)} type="number" class="form-control" min="0"></div></div><div class="col"><div class="form-group"><label class="form-label">To</label><input${y.ssrRenderAttr("value",u.unref(a).priceTo)} type="number" class="form-control" min="1"></div></div></div></div><div class="text-right w-100"><button type="submit" class="btn btn-primary"><i class="icon icon-search"></i> ${y.ssrInterpolate(n.$lang.app.filter)}</button><button type="button" class="btn btn-light">${y.ssrInterpolate(n.$lang.app.clean)}</button></div></div></div></div></form>`)}}},zf=Nd.setup;Nd.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/components/partials/filter/StoreCategoryFilter.vue"),zf?zf(t,e):void 0};const yh={props:{modelValue:[Number,String],pagination:Object,disableAutoScroll:Boolean,limit:Number,query:Object,toolbox:Boolean},emits:["update:modelValue","change"],methods:{toPage(t){this.$emit("update:modelValue",t),this.$emit("change",de(X({},this.query),{page:t})),this.disableAutoScroll||window.scrollTo(0,0)},getMiddlePage(t,e){return Math.floor((e-t)/2+t)}}};function lS(t,e,r,a,n,i,o,s){e("<!--[-->"),n.toolbox?e(`<div${y.ssrRenderAttrs(u.mergeProps({class:"toolbox"},a))}><div class="toolbox-left"><div class="toolbox-info"> Showing <span>${y.ssrInterpolate(n.pagination.from)} - ${y.ssrInterpolate(n.pagination.to)} of ${y.ssrInterpolate(n.pagination.total)}</span> Products </div></div><div class="toolbox-right"><div class="toolbox-sort"><label>Sort by:</label><div class="select-custom"><select name="sortby" id="sortby" class="form-control"><option value="popularity" selected="selected">Most Popular</option><option value="rating">Most Rated</option><option value="date">Date</option></select></div></div><div class="toolbox-layout"><a href="category-list.html" class="btn-layout"><svg width="16" height="10"><rect x="0" y="0" width="4" height="4"></rect><rect x="6" y="0" width="10" height="4"></rect><rect x="0" y="6" width="4" height="4"></rect><rect x="6" y="6" width="10" height="4"></rect></svg></a><a href="category-2cols.html" class="btn-layout"><svg width="10" height="10"><rect x="0" y="0" width="4" height="4"></rect><rect x="6" y="0" width="4" height="4"></rect><rect x="0" y="6" width="4" height="4"></rect><rect x="6" y="6" width="4" height="4"></rect></svg></a><a href="category.html" class="btn-layout"><svg width="16" height="10"><rect x="0" y="0" width="4" height="4"></rect><rect x="6" y="0" width="4" height="4"></rect><rect x="12" y="0" width="4" height="4"></rect><rect x="0" y="6" width="4" height="4"></rect><rect x="6" y="6" width="4" height="4"></rect><rect x="12" y="6" width="4" height="4"></rect></svg></a><a href="category-4cols.html" class="btn-layout active"><svg width="22" height="10"><rect x="0" y="0" width="4" height="4"></rect><rect x="6" y="0" width="4" height="4"></rect><rect x="12" y="0" width="4" height="4"></rect><rect x="18" y="0" width="4" height="4"></rect><rect x="0" y="6" width="4" height="4"></rect><rect x="6" y="6" width="4" height="4"></rect><rect x="12" y="6" width="4" height="4"></rect><rect x="18" y="6" width="4" height="4"></rect></svg></a></div></div></div>`):e("<!---->"),y.ssrRenderSlot(t.$slots,"default",{},null,e,r),n.pagination.lastPage>1?(e(`<nav${y.ssrRenderAttrs(u.mergeProps({"aria-label":"Page navigation"},a))}><ul class="pagination">`),n.pagination.currentPage>1?e('<li class="page-item disabled"><a class="page-link page-link-prev" href="#"><span aria-hidden="true"><i class="icon-long-arrow-left"></i></span></a></li>'):e("<!---->"),n.pagination.currentPage>2?e('<li class="page-item"><a class="page-link" href="#">1</a></li>'):e("<!---->"),n.pagination.currentPage>3?e('<li class="page-item"><a class="page-link" href="#">2</a></li>'):e("<!---->"),n.pagination.currentPage>1?e(`<li class="page-item"><a class="page-link" href="#">${y.ssrInterpolate(n.pagination.currentPage-1)}</a></li>`):e("<!---->"),e(`<li class="page-item active" aria-current="page"><a class="page-link" type="button">${y.ssrInterpolate(n.pagination.currentPage)}</a></li>`),n.pagination.lastPage!==n.pagination.currentPage?e(`<li class="page-item"><a class="page-link" href="#">${y.ssrInterpolate(n.pagination.currentPage+1)}</a></li>`):e("<!---->"),n.pagination.lastPage-n.pagination.currentPage>2?e('<li class="page-item"><a class="page-link" href="#">123</a></li>'):e("<!---->"),n.pagination.lastPage-n.pagination.currentPage>1?e('<li class="page-item"><a class="page-link" href="#">2</a></li>'):e("<!---->"),e(`<li class="page-item-total">\u0438\u0437 ${y.ssrInterpolate(n.pagination.lastPage)}</li><li class="page-item"><a class="page-link page-link-next" href="#" aria-label="Next"><span aria-hidden="true"><i class="icon-long-arrow-right"></i></span></a></li></ul></nav>`)):e("<!---->"),e("<!--]-->")}const Df=yh.setup;yh.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/components/partials/Pagination.vue"),Df?Df(t,e):void 0};var bh=br(yh,[["ssrRender",lS]]);const vh={__ssrInlineRender:!0,async setup(t){let e,r;const a=La.useRoute(),n=La.useRouter(),i=([e,r]=u.withAsyncContext(()=>_a().get(ti().category.replace(":id",a.params.id))),e=await e,r(),e).data,o=[{label:Hn().app.home,route:{name:"home"}},...i.parents.length>0?i.parents.map(c=>({label:c.name,route:{name:"categories.show",params:{id:c.id}}})):[],{label:i.name}],s=u.reactive({data:[],meta:{},query:{categoryId:a.params.id,categories:a.query.categories||[],sortBy:a.query.sortBy||"",page:a.query.page||"",colorId:a.query.colorId||"",sizeIds:a.query.sizeIds||[],brandIds:a.query.brandIds||[],priceFrom:a.query.priceFrom||"",priceTo:a.query.priceTo||""}}),l=async c=>{s.query=X(X({},s.query),c);const d=await _a().get(ti().products,{params:s.query});for(let p in c)c[p]||delete c[p];delete c.categoryId,n.push({query:c}).catch(()=>{}),s.data=d.data.data,s.meta=d.data.meta};return[e,r]=u.withAsyncContext(()=>l(s.query)),await e,r(),(c,d,p,m)=>{d("<!--[-->"),d(y.ssrRenderComponent(Ln,{breadcrumbs:o,title:u.unref(i).name},null,p)),d('<div class="container-fluid"><div class="row"><div class="col-lg-3">'),d(y.ssrRenderComponent(Nd,{category:u.unref(i),query:u.unref(s).query},null,p)),d('</div><div class="col-lg-9">'),d(y.ssrRenderComponent(bh,{pagination:u.unref(s).meta,query:u.unref(s).query},{default:u.withCtx((h,f,g,b)=>{if(f)f(`<div class="products mb-3"${b}><div class="row"${b}><!--[-->`),y.ssrRenderList(u.unref(s).data,w=>{f(`<div class="col-6 col-md-4 col-xl-3 col-xxl-2"${b}>`),f(y.ssrRenderComponent(xd,{item:w},null,g,b)),f("</div>")}),f("<!--]--></div></div>");else return[u.createVNode("div",{class:"products mb-3"},[u.createVNode("div",{class:"row"},[(u.openBlock(!0),u.createBlock(u.Fragment,null,u.renderList(u.unref(s).data,w=>(u.openBlock(),u.createBlock("div",{key:w.id,class:"col-6 col-md-4 col-xl-3 col-xxl-2"},[u.createVNode(xd,{item:w},null,8,["item"])]))),128))])])]}),_:1},p)),d("</div></div></div><!--]-->")}}},Of=vh.setup;vh.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/pages/categories/Show.vue"),Of?Of(t,e):void 0};var cS=Object.freeze(Object.defineProperty({__proto__:null,default:vh},Symbol.toStringTag,{value:"Module"}));const xh={__ssrInlineRender:!0,async setup(t){let e,r;Dl(Hn().app.stores);const a=_a(),n=ti(),i=La.useRoute(),o=u.reactive({data:[],meta:{}});u.watch(()=>i.query.q,()=>{s()});const s=async()=>{await a.get(n.stores,{params:{query:i.query.q||void 0}}).then(l=>{o.data=l.data.data,o.meta=l.data.meta})};return[e,r]=u.withAsyncContext(()=>s()),await e,r(),(l,c,d,p)=>{c("<!--[-->"),c(y.ssrRenderComponent(Ln,{title:l.$lang.app.stores+(l.$route.query.q?": "+l.$route.query.q:"")},null,d)),c('<div class="categories-page"><div class="container-fluid"><div class="row"><!--[-->'),y.ssrRenderList(u.unref(o).data,(m,h)=>{c('<div class="col-2">'),c(y.ssrRenderComponent(Wb,{item:m},null,d)),c("</div>")}),c('<!--]--></div></div><div class="mb-3"></div></div><!--]-->')}}},Bf=xh.setup;xh.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/pages/stores/Index.vue"),Bf?Bf(t,e):void 0};var dS=Object.freeze(Object.defineProperty({__proto__:null,default:xh},Symbol.toStringTag,{value:"Module"}));const wh={props:{modelValue:[String,null]},data(){return{val:""}},watch:{val(t){this.$emit("update:modelValue",t)},modelValue(t){this.val=t}},created(){this.val=this.modelValue}};function uS(t,e,r,a,n,i,o,s){e(`<textarea${y.ssrRenderAttrs(u.mergeProps({id:"editor",class:"form-control"},a),"textarea")}>${y.ssrInterpolate(o.val)}</textarea>`)}const Uf=wh.setup;wh.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/components/partials/Editor.vue"),Uf?Uf(t,e):void 0};var Sh=br(wh,[["ssrRender",uS]]);const Ch={name:"AddressSelect",props:{lat:Number,lng:Number,fullPath:String,required:Boolean},data(){return{marker:null,map:null,form:{lat:null,lng:null,fullPath:""}}},watch:{"form.fullPath"(t){this.$emit("update:fullPath",t)},"form.lat"(t){this.$emit("update:lat",t)},"form.lng"(t){this.$emit("update:lng",t)},fullPath(t){this.form.fullPath=t},lat(t){this.form.lat=t},lng(t){this.form.lng=t}},async created(){},methods:{myLocation(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(t=>{const e=t.coords.latitude,r=t.coords.longitude;this.map.setView([e,r],17),this.setMarker(e,r)})},setMarker(t,e){this.form.lat=t,this.form.lng=e,this.marker?this.marker.setLatLng([t,e]):this.marker=L.marker([t,e]).addTo(this.map),this.axios.get(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${t}&lon=${e}&zoom=18&addressdetails=1&accept-language=${this.$lang.$current}`).then(r=>{this.form.fullPath=r.data.display_name})}}};function pS(t,e,r,a,n,i,o,s){e(`<!--[--><div id="map"><div class="leaflet-control-zoom leaflet-bar leaflet-control" style="${y.ssrRenderStyle({position:"absolute",top:"100px",left:"10px"})}"><a${y.ssrRenderAttr("title",t.$lang.app.myLocation)} class="leaflet-control-zoom-in" href="#" title="Zoom in" role="button"><i style="${y.ssrRenderStyle({"font-size":"20px"})}" class="icon icon-map-marker"></i></a></div></div><input${y.ssrRenderAttr("value",o.form.fullPath)} type="text" class="form-control mt-1"${y.ssrRenderAttr("placeholder",t.$lang.app.address)}${y.ssrIncludeBooleanAttr(n.required)?" required":""}><!--]-->`)}const _f=Ch.setup;Ch.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/components/partials/AddressSelect.vue"),_f?_f(t,e):void 0};var jb=br(Ch,[["ssrRender",pS]]);const kh={name:"FileSelect",props:{modelValue:String},methods:{selectFile(t){if(t.target.files[0]){let e=new FileReader;e.readAsDataURL(t.target.files[0]),e.onload=()=>{this.$emit("update:modelValue",e.result)},e.onerror=r=>{console.log("Error: ",r)}}},viewImage(){const t=new Ux.default(this.$refs.img,{inline:!1,viewed(){t.zoomTo(1)}});t.show()}}};function mS(t,e,r,a,n,i,o,s){e('<!--[--><input type="file" class="form-control">'),n.modelValue?e(`<img${y.ssrRenderAttrs(u.mergeProps({ref:"img",src:n.modelValue,alt:"img",width:"100"},a))}>`):e("<!---->"),e("<!--]-->")}const Wf=kh.setup;kh.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/components/partials/FileSelect.vue"),Wf?Wf(t,e):void 0};var wd=br(kh,[["ssrRender",mS]]);const Rh={__ssrInlineRender:!0,setup(t){Tn.useStore();const e=Hn(),r=_a(),a=ti();La.useRouter();const n=u.reactive({types:[]}),i=u.reactive({name:"",slug:"",slogan:"",storeTypeIds:[],icon:"",cover:"",address:{lat:null,lng:null,fullPath:""},about:""}),o=[{label:e.app.stores,route:{name:"stores.index"}},{label:e.app.addStore}];return r.get(a.storeCreate).then(s=>{n.types=s.data.types}),(s,l,c,d)=>{const p=u.resolveComponent("router-link");l("<!--[-->"),l(y.ssrRenderComponent(Ln,{title:u.unref(e).app.addingStore,breadcrumbs:o},null,c)),l(`<div class="container"><form><div class="row"><div class="col"><div class="form-group"><label class="form-label">${y.ssrInterpolate(u.unref(e).app.name)} <span class="required">*</span></label><input${y.ssrRenderAttr("value",u.unref(i).name)} type="text" class="form-control" required></div><div class="form-group"><label class="form-label">${y.ssrInterpolate(u.unref(e).app.slug)} <span class="required">*</span></label><div class="input-group"><div class="input-group-prepend"><button class="btn btn-light" disabled>www.megazone.kg/</button></div><input${y.ssrRenderAttr("value",u.unref(i).slug)} type="text" class="form-control" pattern="^[a-zA-Z0-9_\\.\\-]*$" required></div><span class="badge badge-warning">${y.ssrInterpolate(u.unref(e).app.only)} ${y.ssrInterpolate(u.unref(e).app.latinLetters.toLowerCase())}, ${y.ssrInterpolate(u.unref(e).app.digits.toLowerCase())} ${y.ssrInterpolate(u.unref(e).app.and)} .-_ ${y.ssrInterpolate(u.unref(e).app.symbols.toLowerCase())}</span></div><div class="form-group"><label class="form-label">${y.ssrInterpolate(u.unref(e).app.slogan)}</label><input${y.ssrRenderAttr("value",u.unref(i).slogan)} type="text" class="form-control"></div><div class="form-group"><label class="form-label">${y.ssrInterpolate(u.unref(e).app.storeTypeIds)} <span class="required">*</span></label><select class="form-control" multiple required><option disabled value="">-- ${y.ssrInterpolate(u.unref(e).app.select)} --</option><!--[-->`),y.ssrRenderList(u.unref(n).types,m=>{l(`<option${y.ssrRenderAttr("value",m.id)}>${y.ssrInterpolate(m.title)}</option>`)}),l(`<!--]--></select></div><div class="form-group"><label class="form-label">${y.ssrInterpolate(u.unref(e).app.icon)}</label>`),l(y.ssrRenderComponent(wd,{modelValue:u.unref(i).icon,"onUpdate:modelValue":m=>u.unref(i).icon=m},null,c)),l(`</div><div class="form-group"><label class="form-label">${y.ssrInterpolate(u.unref(e).app.coverImage)}</label>`),l(y.ssrRenderComponent(wd,{modelValue:u.unref(i).cover,"onUpdate:modelValue":m=>u.unref(i).cover=m},null,c)),l(`</div><div class="form-group"><label class="form-label">${y.ssrInterpolate(u.unref(e).app.address)} <span class="required">*</span></label>`),l(y.ssrRenderComponent(jb,{"full-path":u.unref(i).address.fullPath,"onUpdate:full-path":m=>u.unref(i).address.fullPath=m,lat:u.unref(i).address.lat,"onUpdate:lat":m=>u.unref(i).address.lat=m,lng:u.unref(i).address.lng,"onUpdate:lng":m=>u.unref(i).address.lng=m,required:""},null,c)),l(`</div></div><div class="col"><div class="form-group"><label class="form-label">${y.ssrInterpolate(u.unref(e).app.about)}</label>`),l(y.ssrRenderComponent(Sh,{modelValue:u.unref(i).about,"onUpdate:modelValue":m=>u.unref(i).about=m},null,c)),l(`</div></div></div><div class="mb-2"><button type="submit" class="btn btn-primary">${y.ssrInterpolate(u.unref(e).app.save)}</button>`),l(y.ssrRenderComponent(p,{to:{name:"stores.index"},class:"btn btn-light"},{default:u.withCtx((m,h,f,g)=>{if(h)h(`${y.ssrInterpolate(u.unref(e).app.cancel)}`);else return[u.createTextVNode(u.toDisplayString(u.unref(e).app.cancel),1)]}),_:1},c)),l("</div></form></div><!--]-->")}}},qf=Rh.setup;Rh.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/pages/stores/Create.vue"),qf?qf(t,e):void 0};var hS=Object.freeze(Object.defineProperty({__proto__:null,default:Rh},Symbol.toStringTag,{value:"Module"}));const Th={name:"SocialMedia",components:{Modal:Ci},computed:{storeItem(){return this.$store.getters.store}},data(){return{modal:!1,form:{instagram:"",facebook:"",website:"",twitter:""}}},watch:{modal(t){t&&(this.form.website=this.storeItem.website,this.form.facebook=this.storeItem.facebook,this.form.instagram=this.storeItem.instagram,this.form.twitter=this.storeItem.twitter)}},methods:{save(){return this.axios.post(this.$urls.storeSocialMedia.replace(":storeId",this.storeItem.id),this.form).then(()=>{this.storeItem.website=this.form.website,this.storeItem.facebook=this.form.facebook,this.storeItem.instagram=this.form.instagram,this.storeItem.twitter=this.form.twitter,this.modal=!1,this.$snotify.success(this.$lang.app.saveSuccessMsg)})}}};function gS(t,e,r,a,n,i,o,s){const l=u.resolveComponent("modal");e(`<div${y.ssrRenderAttrs(u.mergeProps({class:"social-icons social-icons-colored justify-content-end",style:{height:"100%","vertical-align":"middle"}},a))}>`),e(y.ssrRenderComponent(l,{modelValue:o.modal,"onUpdate:modelValue":c=>o.modal=c,"modal-title":t.$lang.app.editSocialMediaLinks},{default:u.withCtx((c,d,p,m)=>{if(d)d(`<form class="p-3"${m}><div class="form-group"${m}><label class="form-label"${m}>${y.ssrInterpolate(t.$lang.app.linkToYourWebsite)}</label><div class="input-group"${m}><div class="input-group-prepend"${m}><div class="input-group-text"${m}> \u{1F310} </div></div><input${y.ssrRenderAttr("value",o.form.website)} type="text" class="form-control" placeholder="ex: https://www.example.com"${m}></div></div><div class="form-group"${m}><label class="form-label"${m}>${y.ssrInterpolate(t.$lang.app.yourInstagramAccountUsername)}</label><div class="input-group"${m}><div class="input-group-prepend"${m}><div class="input-group-text"${m}><i class="icon icon-instagram"${m}></i></div></div><input${y.ssrRenderAttr("value",o.form.instagram)} type="text" class="form-control"${m}></div></div><div class="form-group"${m}><label class="form-label"${m}>${y.ssrInterpolate(t.$lang.app.linkToYourFacebookPage)}</label><div class="input-group"${m}><div class="input-group-prepend"${m}><div class="input-group-text"${m}><i class="icon icon-facebook-f"${m}></i></div></div><input${y.ssrRenderAttr("value",o.form.facebook)} type="text" class="form-control"${m}></div></div><div class="form-group"${m}><label class="form-label"${m}>${y.ssrInterpolate(t.$lang.app.linkToYourTwitterPage)}</label><div class="input-group"${m}><div class="input-group-prepend"${m}><div class="input-group-text"${m}><i class="icon icon-twitter"${m}></i></div></div><input${y.ssrRenderAttr("value",o.form.twitter)} type="text" class="form-control"${m}></div></div><div class="text-right w-100"${m}><button type="submit" class="btn btn-success"${m}>${y.ssrInterpolate(t.$lang.app.save)}</button><button type="button" class="btn btn-light"${m}>${y.ssrInterpolate(t.$lang.app.cancel)}</button></div></form>`);else return[u.createVNode("form",{class:"p-3",onSubmit:u.withModifiers(s.save,["prevent"])},[u.createVNode("div",{class:"form-group"},[u.createVNode("label",{class:"form-label"},u.toDisplayString(t.$lang.app.linkToYourWebsite),1),u.createVNode("div",{class:"input-group"},[u.createVNode("div",{class:"input-group-prepend"},[u.createVNode("div",{class:"input-group-text"}," \u{1F310} ")]),u.withDirectives(u.createVNode("input",{"onUpdate:modelValue":h=>o.form.website=h,type:"text",class:"form-control",placeholder:"ex: https://www.example.com"},null,8,["onUpdate:modelValue"]),[[u.vModelText,o.form.website]])])]),u.createVNode("div",{class:"form-group"},[u.createVNode("label",{class:"form-label"},u.toDisplayString(t.$lang.app.yourInstagramAccountUsername),1),u.createVNode("div",{class:"input-group"},[u.createVNode("div",{class:"input-group-prepend"},[u.createVNode("div",{class:"input-group-text"},[u.createVNode("i",{class:"icon icon-instagram"})])]),u.withDirectives(u.createVNode("input",{"onUpdate:modelValue":h=>o.form.instagram=h,type:"text",class:"form-control"},null,8,["onUpdate:modelValue"]),[[u.vModelText,o.form.instagram]])])]),u.createVNode("div",{class:"form-group"},[u.createVNode("label",{class:"form-label"},u.toDisplayString(t.$lang.app.linkToYourFacebookPage),1),u.createVNode("div",{class:"input-group"},[u.createVNode("div",{class:"input-group-prepend"},[u.createVNode("div",{class:"input-group-text"},[u.createVNode("i",{class:"icon icon-facebook-f"})])]),u.withDirectives(u.createVNode("input",{"onUpdate:modelValue":h=>o.form.facebook=h,type:"text",class:"form-control"},null,8,["onUpdate:modelValue"]),[[u.vModelText,o.form.facebook]])])]),u.createVNode("div",{class:"form-group"},[u.createVNode("label",{class:"form-label"},u.toDisplayString(t.$lang.app.linkToYourTwitterPage),1),u.createVNode("div",{class:"input-group"},[u.createVNode("div",{class:"input-group-prepend"},[u.createVNode("div",{class:"input-group-text"},[u.createVNode("i",{class:"icon icon-twitter"})])]),u.withDirectives(u.createVNode("input",{"onUpdate:modelValue":h=>o.form.twitter=h,type:"text",class:"form-control"},null,8,["onUpdate:modelValue"]),[[u.vModelText,o.form.twitter]])])]),u.createVNode("div",{class:"text-right w-100"},[u.createVNode("button",{type:"submit",class:"btn btn-success"},u.toDisplayString(t.$lang.app.save),1),u.createVNode("button",{type:"button",onClick:h=>o.modal=!1,class:"btn btn-light"},u.toDisplayString(t.$lang.app.cancel),9,["onClick"])])],40,["onSubmit"])]}),_:1},r)),t.$store.getters.isStoreAdmin?e(`<a href="#" class="social-icon"${y.ssrRenderAttr("title",t.$lang.app.edit)}><i class="icon-edit"></i></a>`):e("<!---->"),s.storeItem.website?e(`<a${y.ssrRenderAttr("href",s.storeItem.website)} class="social-icon" title="Website" target="_blank">\u{1F310}</a>`):e("<!---->"),s.storeItem.instagram?e(`<a${y.ssrRenderAttr("href","https://www.instagram.com/"+s.storeItem.instagram)} class="social-icon social-instagram" title="Instagram" target="_blank"><i class="icon-instagram"></i></a>`):e("<!---->"),s.storeItem.facebook?e(`<a${y.ssrRenderAttr("href",s.storeItem.facebook)} class="social-icon social-facebook" title="Facebook" target="_blank"><i class="icon-facebook-f"></i></a>`):e("<!---->"),s.storeItem.twitter?e(`<a${y.ssrRenderAttr("href",s.storeItem.twitter)} class="social-icon social-twitter" title="Twitter" target="_blank"><i class="icon-twitter"></i></a>`):e("<!---->"),e("</div>")}const jf=Th.setup;Th.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/components/stores/SocialMedia.vue"),jf?jf(t,e):void 0};var fS=br(Th,[["ssrRender",gS]]);const Mh={__ssrInlineRender:!0,async setup(t){let e,r;const a=Tn.useStore(),n=Hn(),i=La.useRoute();[e,r]=u.withAsyncContext(()=>a.dispatch("fetchStore",La.useRoute().params.store)),await e,r();const o=u.computed(()=>a.getters.store),s=u.reactive({address:!1});return(l,c,d,p)=>{const m=u.resolveComponent("router-link"),h=u.resolveComponent("router-view");c("<!--[-->"),u.unref(o).name?c(`<div${y.ssrRenderAttrs(u.mergeProps({class:"container-fluid"},p))} data-v-2f69bc86><div class="store-header text-center" style="${y.ssrRenderStyle({backgroundImage:"url('"+u.unref(o).cover.path+"')"})}" data-v-2f69bc86></div></div>`):c("<!---->"),c(`<div style="${y.ssrRenderStyle({"border-bottom":"0.1rem solid rgba(235, 235, 235, 0.55)"})}" data-v-2f69bc86><div class="container-fluid" data-v-2f69bc86><div class="row" data-v-2f69bc86><div class="col" data-v-2f69bc86><div class="social-icons justify-content-start" style="${y.ssrRenderStyle({height:"100%","vertical-align":"middle"})}" data-v-2f69bc86><a href="#" class="social-icon"${y.ssrRenderAttr("title",l.$lang.app.location)} data-v-2f69bc86><i class="icon-map-marker" data-v-2f69bc86></i></a>`),u.unref(a).getters.isStoreAdmin?(c("<!--[-->"),c(y.ssrRenderComponent(m,{to:{name:"stores.products.create",params:{store:u.unref(o).slug}},class:"btn btn-outline-success",title:u.unref(n).app.addProduct},{default:u.withCtx((f,g,b,w)=>{if(g)g(`<i class="icon-plus" data-v-2f69bc86${w}></i>${y.ssrInterpolate(u.unref(n).app.addProduct)}`);else return[u.createVNode("i",{class:"icon-plus"}),u.createTextVNode(u.toDisplayString(u.unref(n).app.addProduct),1)]}),_:1},d)),c(y.ssrRenderComponent(m,{to:{name:"stores.edit",params:{store:u.unref(o).slug}},class:"btn btn-outline-primary",title:u.unref(n).app.edit},{default:u.withCtx((f,g,b,w)=>{if(g)g(`<i class="icon-edit" data-v-2f69bc86${w}></i> Edit store`);else return[u.createVNode("i",{class:"icon-edit"}),u.createTextVNode(" Edit store")]}),_:1},d)),c("<!--]-->")):c("<!---->"),c(`</div></div><div class="col" data-v-2f69bc86><div class="store-title" data-v-2f69bc86><div style="${y.ssrRenderStyle({"margin-bottom":"0"})}" data-v-2f69bc86><img alt="logo" class="store-icon"${y.ssrRenderAttr("src",u.unref(o).icon.path)} data-v-2f69bc86><div style="${y.ssrRenderStyle({display:"inline-block"})}" data-v-2f69bc86><h3 style="${y.ssrRenderStyle({"margin-bottom":"0","text-align":"left"})}" data-v-2f69bc86>${y.ssrInterpolate(u.unref(o).name)}</h3><span data-v-2f69bc86>${y.ssrInterpolate(u.unref(o).slogan)}</span></div></div></div></div><div class="col" data-v-2f69bc86>`),c(y.ssrRenderComponent(fS,null,null,d)),c("</div></div></div></div>"),c(y.ssrRenderComponent(Ci,{modelValue:u.unref(s).address,"onUpdate:modelValue":f=>u.unref(s).address=f},{default:u.withCtx((f,g,b,w)=>{if(g)g(`<div class="p-3" data-v-2f69bc86${w}>${y.ssrInterpolate(u.unref(o).address.fullPath)}</div>`);else return[u.createVNode("div",{class:"p-3"},u.toDisplayString(u.unref(o).address.fullPath),1)]}),_:1},d)),c(y.ssrRenderComponent(h,{key:u.unref(i).name+"."+(u.unref(i).params.id||"")+"."+u.unref(n).$current},null,d)),c("<!--]-->")}}},Hf=Mh.setup;Mh.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/components/layouts/Store.vue"),Hf?Hf(t,e):void 0};var $S=br(Mh,[["__scopeId","data-v-2f69bc86"]]),yS=Object.freeze(Object.defineProperty({__proto__:null,default:$S},Symbol.toStringTag,{value:"Module"})),bS="/assets/banner-6.0000ea95.jpg";const Ph={name:"StoreCategories",components:{StoreCategoryTree:qb},computed:{categories(){return this.$store.getters.store.categories},slug(){return this.$store.getters.store.slug}},data(){return{open:null}}};function vS(t,e,r,a,n,i,o,s){const l=u.resolveComponent("router-link"),c=u.resolveComponent("store-category-tree");e(`<div${y.ssrRenderAttrs(u.mergeProps({class:"widget widget-categories"},a))}><h3 class="widget-title">${y.ssrInterpolate(t.$lang.app.categories)} `),t.$store.getters.isStoreAdmin?e(y.ssrRenderComponent(l,{to:{name:"stores.settings.categories.index",params:{store:s.slug}},title:t.$lang.app.settings},{default:u.withCtx((d,p,m,h)=>{if(p)p(`<i class="icon-cog"${h}></i>`);else return[u.createVNode("i",{class:"icon-cog"})]}),_:1},r)):e("<!---->"),e('</h3><div class="widget-body">'),e(y.ssrRenderComponent(c,{categories:s.categories,"onUpdate:categories":d=>s.categories=d},null,r)),e("</div></div>")}const Gf=Ph.setup;Ph.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/components/stores/StoreCategories.vue"),Gf?Gf(t,e):void 0};var xS=br(Ph,[["ssrRender",vS]]);const Hb={name:"Color"},Zf=Hb.setup;Hb.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/components/partials/filter/Color.vue"),Zf?Zf(t,e):void 0};const Gb={name:"CustomerRating"},Yf=Gb.setup;Gb.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/components/partials/filter/CustomerRating.vue"),Yf?Yf(t,e):void 0};const Zb={name:"Price"},Xf=Zb.setup;Zb.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/components/partials/filter/Price.vue"),Xf?Xf(t,e):void 0};const Yb={name:"Brand"},Kf=Yb.setup;Yb.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/components/partials/filter/Brand.vue"),Kf?Kf(t,e):void 0};const Ih={__ssrInlineRender:!0,props:{item:Object},setup(t){return(e,r,a,n)=>{const i=u.resolveComponent("router-link");r(`<div${y.ssrRenderAttrs(u.mergeProps({class:"product"},n))} data-v-1a0ebaea><figure class="product-media" data-v-1a0ebaea>`),t.item.sale?r(`<span class="product-label label-sale" data-v-1a0ebaea>-${y.ssrInterpolate(t.item.sale)}%</span>`):r("<!---->"),t.item.new?r('<span class="product-label label-new" data-v-1a0ebaea>New</span>'):r("<!---->"),r(y.ssrRenderComponent(i,{to:{name:"stores.products.show",params:{id:t.item.id}}},{default:u.withCtx((o,s,l,c)=>{if(s)s(`<img${y.ssrRenderAttr("src",t.item.files[0].path)} alt="Product image" class="product-image" data-v-1a0ebaea${c}>`);else return[u.createVNode("img",{src:t.item.files[0].path,alt:"Product image",class:"product-image"},null,8,["src"])]}),_:1},a)),r('<div class="product-action-vertical" data-v-1a0ebaea><a href="#" class="btn-product-icon btn-wishlist btn-expandable" data-v-1a0ebaea><span data-v-1a0ebaea>add to wishlist</span></a></div><div class="product-action" data-v-1a0ebaea><a href="#" class="btn-product btn-cart" title="Add to cart" data-v-1a0ebaea><span data-v-1a0ebaea>add to cart</span></a></div></figure><div class="product-body" data-v-1a0ebaea><div class="product-cat" data-v-1a0ebaea>'),r(y.ssrRenderComponent(i,{to:{name:"stores.categories.show",params:{id:t.item.category.id}}},{default:u.withCtx((o,s,l,c)=>{if(s)s(`${y.ssrInterpolate(t.item.category.name)}`);else return[u.createTextVNode(u.toDisplayString(t.item.category.name),1)]}),_:1},a)),r('</div><h3 class="product-title" data-v-1a0ebaea>'),r(y.ssrRenderComponent(i,{to:{name:"stores.products.show",params:{id:t.item.id}}},{default:u.withCtx((o,s,l,c)=>{if(s)s(`${y.ssrInterpolate(t.item.title)}`);else return[u.createTextVNode(u.toDisplayString(t.item.title),1)]}),_:1},a)),r(`</h3><div class="product-price" data-v-1a0ebaea><span class="new-price" data-v-1a0ebaea>$${y.ssrInterpolate(t.item.price)}</span>`),t.item.sale?r(`<span class="old-price" data-v-1a0ebaea>Was $${y.ssrInterpolate(t.item.oldPrice)}</span>`):r("<!---->"),r("</div>"),t.item.numberOfReviews>0?r(`<div class="ratings-container" data-v-1a0ebaea><div class="ratings" data-v-1a0ebaea><div class="ratings-val" style="${y.ssrRenderStyle({width:t.item.rating*100/5+"%"})}" data-v-1a0ebaea></div></div><span class="ratings-text" data-v-1a0ebaea>( ${y.ssrInterpolate(t.item.numberOfReviews)} Review(s) )</span></div>`):r("<!---->"),t.item.colors.length>1?(r('<div class="product-nav product-nav-dots" data-v-1a0ebaea><!--[-->'),y.ssrRenderList(t.item.colors,o=>{r(`<a href="#" style="${y.ssrRenderStyle({background:o.addition})}" data-v-1a0ebaea><span class="sr-only" data-v-1a0ebaea>${y.ssrInterpolate(o.title)}</span></a>`)}),r("<!--]--></div>")):r("<!---->"),r("</div></div>")}}},Jf=Ih.setup;Ih.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/components/stores/Product.vue"),Jf?Jf(t,e):void 0};var vm=br(Ih,[["__scopeId","data-v-1a0ebaea"]]);const Ah={__ssrInlineRender:!0,async setup(t){let e,r;const a=_a();La.useRoute(),Tn.useStore();const n=([e,r]=u.withAsyncContext(()=>Tn.useStore().dispatch("fetchStore",La.useRoute().params.store)),e=await e,r(),e),i=u.reactive({data:[],meta:{}}),o=async()=>{const s=await a.get(ti().storeProducts.replace(":storeId",n.id));i.data=s.data.data,i.meta=s.data.meta};return Dl(n.name),[e,r]=u.withAsyncContext(()=>o()),await e,r(),(s,l,c,d)=>{l('<!--[--><div class="mb-3"></div><div class="container-fluid"><div class="row"><div class="col-lg-9 col-xl-4-5col">'),l(y.ssrRenderComponent(Ub,null,null,c)),l(`<div class="mb-3 mb-lg-5"></div><h2 class="title title-border">${y.ssrInterpolate(s.$lang.app.products)}</h2><div class="row"><!--[-->`),y.ssrRenderList(u.unref(i).data,p=>{l('<div class="col-6 col-md-4 col-xl-3 col-xxl-2">'),l(y.ssrRenderComponent(vm,{item:p},null,c)),l("</div>")}),l('<!--]--></div><div class="mb-4"></div></div><aside class="col-lg-3 col-xl-5col order-lg-first"><div class="sidebar sidebar-shop">'),l(y.ssrRenderComponent(xS,null,null,c)),l(`<div class="widget widget-banner-sidebar"><div class="banner-sidebar-title">ad banner 218 x 430px</div><div class="banner-sidebar banner-overlay"><a href="#"><img${y.ssrRenderAttr("src",bS)} alt="banner"></a></div></div></div></aside></div></div><!--]-->`)}}},Qf=Ah.setup;Ah.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/pages/stores/Show.vue"),Qf?Qf(t,e):void 0};var wS=Object.freeze(Object.defineProperty({__proto__:null,default:Ah},Symbol.toStringTag,{value:"Module"}));const Eh={__ssrInlineRender:!0,async setup(t){let e,r;const a=Hn(),n=_a(),i=ti();La.useRouter(),La.useRoute();const o=u.reactive({types:[],item:{}}),l=Tn.useStore().getters.store;let c=[{label:a.app.stores,route:{name:"stores.index"}},{label:l.name,route:{name:"stores.show",params:{storeId:l.id}}},{label:a.app.editStore}];const d=u.reactive({name:l.name,slug:l.slug||"",slogan:l.slogan,storeTypeIds:l.storeTypes?l.storeTypes.map(p=>p.id):[],icon:"",cover:"",address:{lat:l.address?l.address.lat:null,lng:l.address?l.address.lng:null,fullPath:l.address?l.address.fullPath:""},about:l.about});return[e,r]=u.withAsyncContext(()=>n.get(i.storeCreate).then(p=>{o.types=p.data.types})),await e,r(),(p,m,h,f)=>{const g=u.resolveComponent("router-link");m("<!--[-->"),m(y.ssrRenderComponent(Ln,{title:u.unref(a).app.editingStore,breadcrumbs:u.unref(c)},null,h)),m(`<div class="container"><form><div class="row"><div class="col"><div class="form-group"><label class="form-label">${y.ssrInterpolate(u.unref(a).app.name)} <span class="required">*</span></label><input${y.ssrRenderAttr("value",u.unref(d).name)} type="text" class="form-control" required></div><div class="form-group"><label class="form-label">${y.ssrInterpolate(u.unref(a).app.slug)} <span class="required">*</span></label><div class="input-group"><div class="input-group-prepend"><button class="btn btn-light" disabled>www.megazone.store/</button></div><input${y.ssrRenderAttr("value",u.unref(d).slug)} type="text" class="form-control" pattern="^[a-zA-Z0-9_\\.\\-]*$" required></div><span class="badge badge-warning">${y.ssrInterpolate(u.unref(a).app.only)} ${y.ssrInterpolate(u.unref(a).app.latinLetters.toLowerCase())}, ${y.ssrInterpolate(u.unref(a).app.digits.toLowerCase())} ${y.ssrInterpolate(u.unref(a).app.and)} .-_ ${y.ssrInterpolate(u.unref(a).app.symbols.toLowerCase())}</span></div><div class="form-group"><label class="form-label">${y.ssrInterpolate(u.unref(a).app.slogan)}</label><input${y.ssrRenderAttr("value",u.unref(d).slogan)} type="text" class="form-control"></div><div class="form-group"><label class="form-label">${y.ssrInterpolate(u.unref(a).app.storeTypeIds)} <span class="required">*</span></label><select class="form-control" multiple required><option disabled value="">-- ${y.ssrInterpolate(u.unref(a).app.select)} --</option><!--[-->`),y.ssrRenderList(u.unref(o).types,b=>{m(`<option${y.ssrRenderAttr("value",b.id)}>${y.ssrInterpolate(b.title)}</option>`)}),m(`<!--]--></select></div><div class="form-group"><label class="form-label">${y.ssrInterpolate(u.unref(a).app.icon)}</label>`),m(y.ssrRenderComponent(wd,{modelValue:u.unref(d).icon,"onUpdate:modelValue":b=>u.unref(d).icon=b},null,h)),m(`</div><div class="form-group"><label class="form-label">${y.ssrInterpolate(u.unref(a).app.coverImage)}</label>`),m(y.ssrRenderComponent(wd,{modelValue:u.unref(d).cover,"onUpdate:modelValue":b=>u.unref(d).cover=b},null,h)),m(`</div><div class="form-group"><label class="form-label">${y.ssrInterpolate(u.unref(a).app.address)} <span class="required">*</span></label>`),m(y.ssrRenderComponent(jb,{"full-path":u.unref(d).address.fullPath,"onUpdate:full-path":b=>u.unref(d).address.fullPath=b,lat:u.unref(d).address.lat,"onUpdate:lat":b=>u.unref(d).address.lat=b,lng:u.unref(d).address.lng,"onUpdate:lng":b=>u.unref(d).address.lng=b,required:""},null,h)),m(`</div></div><div class="col"><div class="form-group"><label class="form-label">${y.ssrInterpolate(u.unref(a).app.about)}</label>`),m(y.ssrRenderComponent(Sh,{modelValue:u.unref(d).about,"onUpdate:modelValue":b=>u.unref(d).about=b},null,h)),m(`</div></div></div><div class="mb-2"><button type="submit" class="btn btn-primary">${y.ssrInterpolate(u.unref(a).app.save)}</button>`),m(y.ssrRenderComponent(g,{to:{name:"stores.show",params:{store:u.unref(l).slug}},class:"btn btn-light"},{default:u.withCtx((b,w,v,S)=>{if(w)w(`${y.ssrInterpolate(u.unref(a).app.cancel)}`);else return[u.createTextVNode(u.toDisplayString(u.unref(a).app.cancel),1)]}),_:1},h)),m("</div></form></div><!--]-->")}}},t0=Eh.setup;Eh.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/pages/stores/Edit.vue"),t0?t0(t,e):void 0};var SS=Object.freeze(Object.defineProperty({__proto__:null,default:Eh},Symbol.toStringTag,{value:"Module"}));const Vh={__ssrInlineRender:!0,async setup(t){let e,r;const a=La.useRoute(),n=La.useRouter(),i=([e,r]=u.withAsyncContext(()=>Tn.useStore().dispatch("fetchStore",a.params.store)),e=await e,r(),e),o=([e,r]=u.withAsyncContext(()=>_a().get(ti().storeCategory.replace(":storeId",i.id).replace(":categoryId",a.params.id))),e=await e,r(),e).data,s=[{label:Hn().app.stores,route:{name:"stores.index"}},{label:i.name,route:{name:"stores.show",params:{store:i.slug}}},...o.parents.length>0?o.parents.map(d=>({label:d.name,route:{name:"stores.categories.show",params:{id:d.id}}})):[],{label:o.name}],l=u.reactive({data:[],meta:{},query:{categoryId:a.params.id,categories:a.query.categories||[],sortBy:a.query.sortBy||"",page:a.query.page||"",colorId:a.query.colorId||"",sizeIds:a.query.sizeIds||[],brandIds:a.query.brandIds||[],priceFrom:a.query.priceFrom||"",priceTo:a.query.priceTo||""}}),c=async d=>{l.query=X(X({},l.query),d);const p=await _a().get(ti().storeProducts.replace(":storeId",i.id),{params:l.query});for(let m in d)d[m]||delete d[m];delete d.categoryId,n.push({query:d}).catch(()=>{}),l.data=p.data.data,l.meta=p.data.meta};return[e,r]=u.withAsyncContext(()=>c(l.query)),await e,r(),(d,p,m,h)=>{p("<!--[-->"),p(y.ssrRenderComponent(Ln,{breadcrumbs:s,title:u.unref(o).name,"is-store":""},null,m)),p('<div class="container-fluid"><div class="row"><div class="col-lg-3">'),p(y.ssrRenderComponent(Nd,{category:u.unref(o),query:u.unref(l).query},null,m)),p('</div><div class="col-lg-9">'),p(y.ssrRenderComponent(bh,{pagination:u.unref(l).meta,query:u.unref(l).query},{default:u.withCtx((f,g,b,w)=>{if(g)g(`<div class="products mb-3"${w}><div class="row"${w}><!--[-->`),y.ssrRenderList(u.unref(l).data,v=>{g(`<div class="col-6 col-md-4 col-xl-3 col-xxl-2"${w}>`),g(y.ssrRenderComponent(vm,{item:v},null,b,w)),g("</div>")}),g("<!--]--></div></div>");else return[u.createVNode("div",{class:"products mb-3"},[u.createVNode("div",{class:"row"},[(u.openBlock(!0),u.createBlock(u.Fragment,null,u.renderList(u.unref(l).data,v=>(u.openBlock(),u.createBlock("div",{key:v.id,class:"col-6 col-md-4 col-xl-3 col-xxl-2"},[u.createVNode(vm,{item:v},null,8,["item"])]))),128))])])]}),_:1},m)),p("</div></div></div><!--]-->")}}},e0=Vh.setup;Vh.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/pages/stores/categories/Show.vue"),e0?e0(t,e):void 0};var CS=Object.freeze(Object.defineProperty({__proto__:null,default:Vh},Symbol.toStringTag,{value:"Module"})),kS="/assets/banner.13078450.jpg";const Xb={__ssrInlineRender:!0,async setup(t){let e,r;[e,r]=u.withAsyncContext(()=>Tn.useStore().dispatch("fetchStore",La.useRoute().params.store)),await e,r();const a=u.computed(()=>Tn.useStore().getters.store),n=Hn();return(i,o,s,l)=>{const c=u.resolveComponent("router-link");o("<!--[-->"),u.unref(a).name?o(`<div${y.ssrRenderAttrs(u.mergeProps({class:"container-fluid"},l))} data-v-e7bcfea2><div class="store-header text-center" style="${y.ssrRenderStyle({backgroundImage:"url('"+u.unref(a).cover.path+"')"})}" data-v-e7bcfea2></div></div>`):o("<!---->"),o(`<div style="${y.ssrRenderStyle({"border-bottom":"0.1rem solid rgba(235, 235, 235, 0.55)"})}" data-v-e7bcfea2><div class="container-fluid" data-v-e7bcfea2><div class="row" data-v-e7bcfea2><div class="col" data-v-e7bcfea2><div class="social-icons social-icons-colored justify-content-start" style="${y.ssrRenderStyle({height:"100%","vertical-align":"middle"})}" data-v-e7bcfea2>`),o(y.ssrRenderComponent(c,{to:{name:"stores.edit",params:{store:u.unref(a).slug}},class:"social-icon",title:u.unref(n).app.edit},{default:u.withCtx((d,p,m,h)=>{if(p)p(`<i class="icon-edit" data-v-e7bcfea2${h}></i>`);else return[u.createVNode("i",{class:"icon-edit"})]}),_:1},s)),o(y.ssrRenderComponent(c,{to:{name:"stores.products.create",params:{store:u.unref(a).slug}},class:"btn btn-outline-success",title:u.unref(n).app.addProduct},{default:u.withCtx((d,p,m,h)=>{if(p)p(`<i class="icon-plus" data-v-e7bcfea2${h}></i> ${y.ssrInterpolate(u.unref(n).app.addProduct)}`);else return[u.createVNode("i",{class:"icon-plus"}),u.createTextVNode(" "+u.toDisplayString(u.unref(n).app.addProduct),1)]}),_:1},s)),o(`</div></div><div class="col" data-v-e7bcfea2><div class="store-title" data-v-e7bcfea2><div style="${y.ssrRenderStyle({"margin-bottom":"0"})}" data-v-e7bcfea2><img alt="logo" class="store-icon"${y.ssrRenderAttr("src",u.unref(a).icon.path)} data-v-e7bcfea2><div style="${y.ssrRenderStyle({display:"inline-block"})}" data-v-e7bcfea2><h3 style="${y.ssrRenderStyle({"margin-bottom":"0","text-align":"left"})}" data-v-e7bcfea2>${y.ssrInterpolate(u.unref(a).name)}</h3><span data-v-e7bcfea2>${y.ssrInterpolate(u.unref(a).slogan)}</span></div></div></div></div><div class="col" data-v-e7bcfea2><div class="social-icons social-icons-colored justify-content-end" style="${y.ssrRenderStyle({height:"100%","vertical-align":"middle"})}" data-v-e7bcfea2><a href="#" class="social-icon social-facebook" title="Facebook" target="_blank" data-v-e7bcfea2><i class="icon-facebook-f" data-v-e7bcfea2></i></a><a href="#" class="social-icon social-twitter" title="Twitter" target="_blank" data-v-e7bcfea2><i class="icon-twitter" data-v-e7bcfea2></i></a><a href="#" class="social-icon social-instagram" title="Instagram" target="_blank" data-v-e7bcfea2><i class="icon-instagram" data-v-e7bcfea2></i></a><a href="#" class="social-icon social-youtube" title="Youtube" target="_blank" data-v-e7bcfea2><i class="icon-youtube" data-v-e7bcfea2></i></a><a href="#" class="social-icon social-pinterest" title="Pinterest" target="_blank" data-v-e7bcfea2><i class="icon-pinterest" data-v-e7bcfea2></i></a></div></div></div></div></div><!--]-->`)}}},r0=Xb.setup;Xb.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/components/stores/Store.vue"),r0?r0(t,e):void 0};const Lh={name:"ImgZoom",props:{imgNormal:String,imgZoom:String,scale:Number,disabled:Boolean},data:function(){return{scaleFactor:1,resizeCheckInterval:null,zoomed:!1}},methods:{touchzoom:function(t){this.disabled||(this.move(t),this.zoomed=!this.zoomed)},zoom:function(){this.disabled||(this.zoomed=!0)},unzoom:function(){this.disabled||(this.zoomed=!1)},move:function(t){if(this.disabled||!this.zoomed)return;let e=this.pageOffset(this.$el),r=this.$refs.zoom,a=this.$refs.normal,n=t.clientX-e.x+window.pageXOffset,i=t.clientY-e.y+window.pageYOffset,o=n/a.offsetWidth,s=i/a.offsetHeight,l=o*(r.offsetWidth*this.scaleFactor-a.offsetWidth),c=s*(r.offsetHeight*this.scaleFactor-a.offsetHeight);r.style.left=-l+"px",r.style.top=-c+"px"},initEventLoaded:function(){let t=[this.$refs.zoom,this.$refs.normal].map(function(r){return new Promise(function(a,n){r.addEventListener("load",a),r.addEventListener("error",n)})}),e=this;Promise.all(t).then(function(){e.$emit("loaded")})},initEventResized:function(){let t=this.$refs.normal,e=t.offsetWidth,r=t.offsetHeight,a=this;this.resizeCheckInterval=setInterval(function(){(e!==t.offsetWidth||r!==t.offsetHeight)&&(e=t.offsetWidth,r=t.offsetHeight,a.$emit("resized",{width:t.width,height:t.height,fullWidth:t.naturalWidth,fullHeight:t.naturalHeight}))},1e3)},pageOffset(t){let e=t.getBoundingClientRect(),r=window.pageXOffset||document.documentElement.scrollLeft,a=window.pageYOffset||document.documentElement.scrollTop;return{y:e.top+a,x:e.left+r}}},mounted:function(){this.$props.scale&&(this.scaleFactor=parseInt(this.$props.scale),this.$refs.zoom.style.transform="scale("+this.scaleFactor+")"),this.initEventLoaded(),this.initEventResized()},updated:function(){this.initEventLoaded()},beforeDestroy:function(){this.resizeCheckInterval&&clearInterval(this.resizeCheckInterval)}};function RS(t,e,r,a,n,i,o,s){e(`<div${y.ssrRenderAttrs(u.mergeProps({class:["zoom-on-hover",{zoomed:t.zoomed}]},a))}><img class="normal"${y.ssrRenderAttr("src",n.imgNormal)} alt="img"><img class="zoom"${y.ssrRenderAttr("src",n.imgZoom||n.imgNormal)} alt="img"></div>`)}const a0=Lh.setup;Lh.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/components/partials/ImgZoom.vue"),a0?a0(t,e):void 0};var TS=br(Lh,[["ssrRender",RS]]);const Fh={name:"VSelect",components:{VueSelect:Ob.default},props:{required:Boolean}};function MS(t,e,r,a,n,i,o,s){const l=u.resolveComponent("vue-select");e(y.ssrRenderComponent(l,u.mergeProps(t.$attrs,a),{search:u.withCtx(({attributes:c,events:d},p,m,h)=>{if(p)p(`<input${y.ssrRenderAttrs(u.mergeProps({class:"vs__search",required:n.required&&!t.$attrs.modelValue},c))}${h}>`);else return[u.createVNode("input",u.mergeProps({class:"vs__search",required:n.required&&!t.$attrs.modelValue},c,u.toHandlers(d)),null,16,["required"])]}),_:1},r))}const n0=Fh.setup;Fh.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/components/partials/VSelect.vue"),n0?n0(t,e):void 0};var Kb=br(Fh,[["ssrRender",MS]]);const Jb={name:"Share",data(){return{link:""}},mounted(){this.link=location.href}},i0=Jb.setup;Jb.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/components/partials/Share.vue"),i0?i0(t,e):void 0};const Nh={__ssrInlineRender:!0,async setup(t){let e,r;const a=ti(),n=La.useRoute(),i=Hn(),o=Tn.useStore(),s=([e,r]=u.withAsyncContext(()=>o.dispatch("fetchStore",n.params.store)),e=await e,r(),e),l=([e,r]=u.withAsyncContext(()=>_a().get(a.storeProduct.replace(":storeId",n.params.store).replace(":productId",n.params.id))),e=await e,r(),e).data,c=u.reactive({color:l.colors.length>0?l.colors[0]:null,size:null,qty:1,files:l.colors.length>0?l.files.filter(w=>w.colorId===l.colors[0].id):l.files,file:"",accordion:{description:!0,properties:!1,reviews:!1}}),d=u.reactive({data:[],meta:{},filterForm:{page:1},form:{name:"",message:"",rating:""}}),p=u.reactive({addReview:!1}),m=u.reactive({products:[]});c.file=c.files[0],u.watch(()=>c.colorId,w=>{c.files=l.files.filter(v=>v.colorId===w),c.file=c.files[0]}),u.watch(()=>c.accordion.reviews,w=>{w&&d.data.length===0&&f()});function h(){_a().get(a.storeProductRelated.replace(":storeId",n.params.store).replace(":productId",n.params.id)).then(w=>{m.products=w.data})}function f(){_a().get(a.storeProductReviews.replace(":storeId",n.params.store).replace(":productId",n.params.id),{params:d.filterForm}).then(w=>{d.data=w.data.data,d.meta=w.data.meta})}function g(){_a().post(a.storeProductReviews.replace(":storeId",n.params.store).replace(":productId",n.params.id),d.form).then(w=>{d.data=[w.data,...d.data],p.addReview=!1,d.meta.total++})}u.onMounted(()=>{h()});const b=[{label:i.app.stores,route:{name:"stores.index"}},{label:s.name,route:{name:"stores.show",params:{store:s.slug}}},...l.categories.map(w=>({label:w.name,route:{name:"stores.categories.show",params:{id:w.id}}})),{label:l.title}];return(w,v,S,T)=>{const B=u.resolveComponent("router-link");v("<!--[-->"),v(y.ssrRenderComponent(Ln,{breadcrumbs:b,title:u.unref(l).title,"is-store":""},null,S)),v('<div class="page-content"><div class="container-fluid"><div class="row"><div class="col-xl-10"><div class="product-details-top"><div class="row"><div class="col-md-6 col-lg-7"><div class="product-gallery">'),u.unref(c).file?(v('<figure class="product-main-image">'),u.unref(l).sale?v(`<span class="product-label label-sale">-${y.ssrInterpolate(u.unref(l).sale)}%</span>`):v("<!---->"),u.unref(l).new?v('<span class="product-label label-new">New</span>'):v("<!---->"),v(y.ssrRenderComponent(TS,{"img-normal":u.unref(c).file.path,"img-zoom":u.unref(c).file.path,scale:1.5},null,S)),v("</figure>")):v("<!---->"),v('<div id="product-zoom-gallery" class="product-image-gallery max-col-6"><!--[-->'),y.ssrRenderList(u.unref(c).files,I=>{v(`<a class="${y.ssrRenderClass([{active:I.id===u.unref(c).file.id},"product-gallery-item"])}" href="#"><img${y.ssrRenderAttr("src",I.path)} alt="product side"></a>`)}),v(`<!--]--></div></div></div><div class="col-md-6 col-lg-5"><div class="product-details"><h1 class="product-title">${y.ssrInterpolate(u.unref(l).title)}</h1><div class="ratings-container"><div class="ratings"${y.ssrRenderAttr("title",u.unref(l).rating)}><div class="ratings-val" style="${y.ssrRenderStyle({width:u.unref(l).rating*100/5+"%"})}"></div></div><a class="ratings-text" href="#product-accordion" id="review-link">( ${y.ssrInterpolate(u.unref(l).numberOfReviews)} ${y.ssrInterpolate(u.unref(i).app.reviewCount)} )</a></div><div class="product-price"><span class="new-price">$${y.ssrInterpolate(u.unref(l).price)}</span>`),u.unref(l).sale?v(`<span class="old-price">$${y.ssrInterpolate(u.unref(l).oldPrice)}</span>`):v("<!---->"),v("</div>"),u.unref(l).description?v(`<a href="#product-accordion-desc" class="product-content product-description-ellipsis">${u.unref(l).description}</a>`):v("<!---->"),v("<form>"),u.unref(l).colors.length>0?(v(`<div class="details-filter-row details-row-size"><label>${y.ssrInterpolate(u.unref(i).app.color)}:</label><div class="product-nav product-nav-thumbs"><!--[-->`),y.ssrRenderList(u.unref(l).colors,I=>{v(`<a href="#" class="${y.ssrRenderClass({active:u.unref(c).color&&I.id===u.unref(c).color.id})}" style="${y.ssrRenderStyle({backgroundColor:I.addition})}"></a>`)}),v("<!--]--></div></div>")):v("<!---->"),u.unref(l).sizes.length>0?(v(`<div class="details-filter-row details-row-size"><label>${y.ssrInterpolate(u.unref(i).app.size)}:</label><div class="select-custom">`),v(y.ssrRenderComponent(Kb,{modelValue:u.unref(c).size,"onUpdate:modelValue":I=>u.unref(c).size=I,class:"form-control",required:"",optoins:u.unref(l).sizes,label:"title"},null,S)),v("</div></div>")):v("<!---->"),v(`<div class="details-filter-row details-row-size"><label for="qty">${y.ssrInterpolate(u.unref(i).app.qty)}:</label><div class="product-details-quantity"><input${y.ssrRenderAttr("value",u.unref(c).qty)} type="number" id="qty" class="form-control" min="1" step="1" required></div></div><div class="product-details-action"><button type="submit" class="btn-product btn-cart"><span>${y.ssrInterpolate(u.unref(i).app.addToCart)}</span></button><div class="details-action-wrapper"><a href="#" class="btn-product btn-wishlist" title="Wishlist"><span>${y.ssrInterpolate(u.unref(i).app.addToWishlist)}</span></a></div></div></form><div class="product-details-footer"><div class="product-cat"><span>${y.ssrInterpolate(u.unref(i).app.category)}:</span><!--[-->`),y.ssrRenderList(u.unref(l).categories,(I,O)=>{v(y.ssrRenderComponent(B,{key:O,to:{name:"stores.categories.show",params:{id:I.id}}},{default:u.withCtx((R,E,N,U)=>{if(E)E(O?`<span${U}>, </span>`:"<!---->"),E(`${y.ssrInterpolate(I.name)}`);else return[O?(u.openBlock(),u.createBlock("span",{key:0},", ")):u.createCommentVNode("",!0),u.createTextVNode(u.toDisplayString(I.name),1)]}),_:2},S))}),v('<!--]--></div></div><div class="accordion accordion-plus product-details-accordion" id="product-accordion">'),u.unref(l).description?v(`<div id="product-accordion-desc" class="card card-box card-sm"><div class="card-header" id="product-desc-heading"><h2 class="card-title"><a class="${y.ssrRenderClass({collapsed:!u.unref(c).accordion.description})}" role="button" data-toggle="collapse" href="#product-accordion-desc" aria-expanded="false" aria-controls="product-accordion-desc">${y.ssrInterpolate(u.unref(i).app.description)}</a></h2></div><div class="${y.ssrRenderClass([{show:u.unref(c).accordion.description},"collapse"])}" aria-labelledby="product-desc-heading" data-parent="#product-accordion"><div class="card-body"><div class="product-desc-content" style="${y.ssrRenderStyle({"white-space":"pre-wrap"})}">${u.unref(l).description}</div></div></div></div>`):v("<!---->"),v(`<div id="product-accordion-info" class="card card-box card-sm"><div class="card-header" id="product-info-heading"><h2 class="card-title"><a class="${y.ssrRenderClass({collapsed:!u.unref(c).accordion.properties})}" role="button" data-toggle="collapse" href="#product-accordion-info" aria-expanded="false" aria-controls="product-accordion-info">${y.ssrInterpolate(u.unref(i).app.details)}</a></h2></div><div class="${y.ssrRenderClass([{show:u.unref(c).accordion.properties},"collapse"])}" aria-labelledby="product-info-heading" data-parent="#product-accordion"><div class="card-body"><div class="product-desc-content"><table class="table table-striped"><tbody><!--[-->`),y.ssrRenderList(u.unref(l).fields,(I,O)=>{v(`<tr><td>${y.ssrInterpolate(I.field.name)}</td><td>${y.ssrInterpolate(I.value)}</td><td>${y.ssrInterpolate(I.field.addon)}</td></tr>`)}),v(`<!--]--></tbody></table></div></div></div></div><div id="product-accordion-review" class="card card-box card-sm"><div class="card-header" id="product-review-heading"><h2 class="card-title"><a class="${y.ssrRenderClass({collapsed:!u.unref(c).accordion.reviews})}" role="button" data-toggle="collapse" href="#product-accordion-review" aria-expanded="true" aria-controls="product-accordion-review">${y.ssrInterpolate(u.unref(i).app.reviews)} (${y.ssrInterpolate(u.unref(d).meta.total||u.unref(l).numberOfReviews)}) </a></h2></div><div class="${y.ssrRenderClass([{show:u.unref(c).accordion.reviews},"collapse"])}" aria-labelledby="product-review-heading" data-parent="#product-accordion"><div class="card-body"><button type="button" class="btn btn-primary"><i class="la la-plus"></i> ${y.ssrInterpolate(u.unref(i).app.addReview)}</button><div class="reviews mt-2"><!--[-->`),y.ssrRenderList(u.unref(d).data,(I,O)=>{v(`<div class="review"><div class="row no-gutters"><div class="col-auto"><h4><a href="#">${y.ssrInterpolate(I.name)}</a></h4><div class="ratings-container"><div class="ratings"><div class="ratings-val" style="${y.ssrRenderStyle({width:I.rating*100/5+"%"})}"></div></div></div><span class="review-date">${y.ssrInterpolate(I.createdAt)}</span></div><div class="col"><div class="review-content"><p>${y.ssrInterpolate(I.message)}</p></div><div class="review-action"><a href="#"><i class="icon-thumbs-up"></i>${y.ssrInterpolate(u.unref(i).app.helpful)} (${y.ssrInterpolate(I.helpful)})</a><a href="#"><i class="icon-thumbs-down"></i>${y.ssrInterpolate(u.unref(i).app.unhelpful)} (${y.ssrInterpolate(I.unhelpful)})</a></div></div></div></div>`)}),v('<!--]--></div><div class="mt-2">'),v(y.ssrRenderComponent(bh,{pagination:u.unref(d).meta,modelValue:u.unref(d).filterForm.page,"onUpdate:modelValue":I=>u.unref(d).filterForm.page=I},null,S)),v('</div></div></div></div></div></div></div></div></div></div><aside class="col-xl-2 d-md-none d-xl-block"><div class="sidebar sidebar-product"><div class="widget widget-products"><h4 class="widget-title">Related Product</h4><div class="products"><!--[-->'),y.ssrRenderList(u.unref(m).products,(I,O)=>{v('<div class="product product-sm"><figure class="product-media">'),v(y.ssrRenderComponent(B,{to:{name:"stores.products.show",params:{storeId:u.unref(s).id,id:I.id}}},{default:u.withCtx((R,E,N,U)=>{if(E)E(`<img${y.ssrRenderAttr("src",I.files[0].path)} alt="Product image" class="product-image"${U}>`);else return[u.createVNode("img",{src:I.files[0].path,alt:"Product image",class:"product-image"},null,8,["src"])]}),_:2},S)),v('</figure><div class="product-body"><h5 class="product-title">'),v(y.ssrRenderComponent(B,{to:{name:"stores.products.show",params:{storeId:u.unref(s).id,id:I.id}}},{default:u.withCtx((R,E,N,U)=>{if(E)E(`${y.ssrInterpolate(I.title)}`);else return[u.createTextVNode(u.toDisplayString(I.title),1)]}),_:2},S)),v(`</h5><div class="product-price"><span class="new-price">$${y.ssrInterpolate(I.price)}</span></div></div></div>`)}),v("<!--]--></div>"),v(y.ssrRenderComponent(B,{to:{name:"stores.categories.show",params:{storeId:u.unref(s).id,id:u.unref(l).category.id}},class:"btn btn-outline-dark-3"},{default:u.withCtx((I,O,R,E)=>{if(O)O(`<span${E}>View More Products</span><i class="icon-long-arrow-right"${E}></i>`);else return[u.createVNode("span",null,"View More Products"),u.createVNode("i",{class:"icon-long-arrow-right"})]}),_:1},S)),v(`</div><div class="widget widget-banner-sidebar"><div class="banner-sidebar-title">ad box 280 x 280</div><div class="banner-sidebar banner-overlay"><a href="#"><img${y.ssrRenderAttr("src",kS)} alt="banner"></a></div></div></div></aside></div></div></div>`),v(y.ssrRenderComponent(Ci,{modelValue:u.unref(p).addReview,"onUpdate:modelValue":I=>u.unref(p).addReview=I,"modal-title":u.unref(i).app.addReview},{default:u.withCtx((I,O,R,E)=>{if(O)O(`<form class="p-4"${E}><div class="form-group"${E}><label class="form-label"${E}>${y.ssrInterpolate(u.unref(i).app.yourName)}<span class="text-danger"${E}>*</span></label><input${y.ssrRenderAttr("value",u.unref(d).form.name)} required type="text" class="form-control"${E}></div><div class="form-group"${E}><label class="form-label"${E}>${y.ssrInterpolate(u.unref(i).app.review)}<span class="text-danger"${E}>*</span></label><textarea class="form-control" required${E}>${y.ssrInterpolate(u.unref(d).form.message)}</textarea></div><div class="form-group"${E}><label class="form-label"${E}>${y.ssrInterpolate(u.unref(i).app.evaluation)}<span class="text-danger"${E}>*</span></label><div class="ratings-container"${E}><div class="ratings"${E}><div class="ratings-val" style="${y.ssrRenderStyle({width:u.unref(d).form.rating*100/5+"%"})}"${E}></div><div class="flex-nowrap text-center position-absolute" style="${y.ssrRenderStyle({top:"0"})}"${E}><input${y.ssrIncludeBooleanAttr(y.ssrLooseEqual(u.unref(d).form.rating,1))?" checked":""} name="rating"${y.ssrRenderAttr("value",1)} required type="radio" class="d-inline-block" style="${y.ssrRenderStyle({width:"15px",height:"15px",opacity:"0"})}"${E}><input${y.ssrIncludeBooleanAttr(y.ssrLooseEqual(u.unref(d).form.rating,2))?" checked":""} name="rating"${y.ssrRenderAttr("value",2)} type="radio" class="d-inline-block" style="${y.ssrRenderStyle({width:"15px",height:"15px",opacity:"0"})}"${E}><input${y.ssrIncludeBooleanAttr(y.ssrLooseEqual(u.unref(d).form.rating,3))?" checked":""} name="rating"${y.ssrRenderAttr("value",3)} type="radio" class="d-inline-block" style="${y.ssrRenderStyle({width:"15px",height:"15px",opacity:"0"})}"${E}><input${y.ssrIncludeBooleanAttr(y.ssrLooseEqual(u.unref(d).form.rating,4))?" checked":""} name="rating"${y.ssrRenderAttr("value",4)} type="radio" class="d-inline-block" style="${y.ssrRenderStyle({width:"15px",height:"15px",opacity:"0"})}"${E}><input${y.ssrIncludeBooleanAttr(y.ssrLooseEqual(u.unref(d).form.rating,5))?" checked":""} name="rating"${y.ssrRenderAttr("value",5)} type="radio" class="d-inline-block" style="${y.ssrRenderStyle({width:"15px",height:"15px",opacity:"0"})}"${E}></div></div></div></div>`),u.unref(o).getters.user.id?O(`<button type="submit" class="btn btn-secondary"${E}>${y.ssrInterpolate(u.unref(i).app.save)}</button>`):O(`<a href="#" class="ml-3"${E}>${y.ssrInterpolate(u.unref(i).app.requiresAuthentication)}</a>`),O("</form>");else return[u.createVNode("form",{onSubmit:u.withModifiers(g,["prevent"]),class:"p-4"},[u.createVNode("div",{class:"form-group"},[u.createVNode("label",{class:"form-label"},[u.createTextVNode(u.toDisplayString(u.unref(i).app.yourName),1),u.createVNode("span",{class:"text-danger"},"*")]),u.withDirectives(u.createVNode("input",{"onUpdate:modelValue":N=>u.unref(d).form.name=N,required:"",type:"text",class:"form-control"},null,8,["onUpdate:modelValue"]),[[u.vModelText,u.unref(d).form.name]])]),u.createVNode("div",{class:"form-group"},[u.createVNode("label",{class:"form-label"},[u.createTextVNode(u.toDisplayString(u.unref(i).app.review),1),u.createVNode("span",{class:"text-danger"},"*")]),u.withDirectives(u.createVNode("textarea",{"onUpdate:modelValue":N=>u.unref(d).form.message=N,class:"form-control",required:""},null,8,["onUpdate:modelValue"]),[[u.vModelText,u.unref(d).form.message]])]),u.createVNode("div",{class:"form-group"},[u.createVNode("label",{class:"form-label"},[u.createTextVNode(u.toDisplayString(u.unref(i).app.evaluation),1),u.createVNode("span",{class:"text-danger"},"*")]),u.createVNode("div",{class:"ratings-container"},[u.createVNode("div",{class:"ratings"},[u.createVNode("div",{class:"ratings-val",style:{width:u.unref(d).form.rating*100/5+"%"}},null,4),u.createVNode("div",{class:"flex-nowrap text-center position-absolute",style:{top:"0"}},[u.withDirectives(u.createVNode("input",{"onUpdate:modelValue":N=>u.unref(d).form.rating=N,name:"rating",value:1,required:"",type:"radio",class:"d-inline-block",style:{width:"15px",height:"15px",opacity:"0"}},null,8,["onUpdate:modelValue"]),[[u.vModelRadio,u.unref(d).form.rating]]),u.withDirectives(u.createVNode("input",{"onUpdate:modelValue":N=>u.unref(d).form.rating=N,name:"rating",value:2,type:"radio",class:"d-inline-block",style:{width:"15px",height:"15px",opacity:"0"}},null,8,["onUpdate:modelValue"]),[[u.vModelRadio,u.unref(d).form.rating]]),u.withDirectives(u.createVNode("input",{"onUpdate:modelValue":N=>u.unref(d).form.rating=N,name:"rating",value:3,type:"radio",class:"d-inline-block",style:{width:"15px",height:"15px",opacity:"0"}},null,8,["onUpdate:modelValue"]),[[u.vModelRadio,u.unref(d).form.rating]]),u.withDirectives(u.createVNode("input",{"onUpdate:modelValue":N=>u.unref(d).form.rating=N,name:"rating",value:4,type:"radio",class:"d-inline-block",style:{width:"15px",height:"15px",opacity:"0"}},null,8,["onUpdate:modelValue"]),[[u.vModelRadio,u.unref(d).form.rating]]),u.withDirectives(u.createVNode("input",{"onUpdate:modelValue":N=>u.unref(d).form.rating=N,name:"rating",value:5,type:"radio",class:"d-inline-block",style:{width:"15px",height:"15px",opacity:"0"}},null,8,["onUpdate:modelValue"]),[[u.vModelRadio,u.unref(d).form.rating]])])])])]),u.unref(o).getters.user.id?(u.openBlock(),u.createBlock("button",{key:0,type:"submit",class:"btn btn-secondary"},u.toDisplayString(u.unref(i).app.save),1)):(u.openBlock(),u.createBlock("a",{key:1,onClick:u.withModifiers(N=>{u.unref(p).addReview=!1,u.unref(o).dispatch("showAuthModal")},["prevent"]),href:"#",class:"ml-3"},u.toDisplayString(u.unref(i).app.requiresAuthentication),9,["onClick"]))],40,["onSubmit"])]}),_:1},S)),v("<!--]-->")}}},o0=Nh.setup;Nh.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/pages/stores/products/Show.vue"),o0?o0(t,e):void 0};var PS=Object.freeze(Object.defineProperty({__proto__:null,default:Nh},Symbol.toStringTag,{value:"Module"}));/*!
 * Pintura v8.65.0 - Test version
 * (c) 2018-2023 PQINA Inc. - All Rights Reserved
 * License: https://pqina.nl/pintura/license/
 * 
 * This version of Pintura is for testing purposes only.
 * Visit https://pqina.nl/pintura/ to obtain a commercial license.
 */const IS=[{value:65504,name:"jfif"},{value:65498,name:"sos"},{value:65505,subvalue:17784,name:"exif"},{value:65505,subvalue:26740,name:"xmp"},{value:65506,subvalue:19792,name:"mpf"}];var Qb=t=>{if(t.getUint16(0)!==65496)return;const e=t.byteLength;let r,a=2,n;for(;a<e&&t.getUint8(a)===255;){r=t.getUint16(a);const i=IS.find(o=>o.value===r&&(!o.subvalue||o.subvalue===t.getUint16(a+2+2)));if(i){const{name:o}=i;n||(n={}),n[o]||(n[o]={offset:a,size:t.getUint16(a+2)})}if(r===65498)break;a+=2+t.getUint16(a+2)}return n},zh=(t,e,r)=>{if(!t)return;const a=new DataView(t),n=Qb(a);if(!n||!n.exif)return;const i=((o,s)=>{if(o.getUint16(s)!==65505)return;const l=o.getUint16(s+2);if(s+=4,o.getUint32(s)!==1165519206)return;s+=6;const c=o.getUint16(s);if(c!==18761&&c!==19789)return;const d=c===18761;if(s+=2,o.getUint16(s,d)!==42)return;s+=o.getUint32(s+2,d);const p=m=>{const h=[];let f=s;const g=Math.min(o.byteLength,s+l-16);for(;f<g;f+=12){const b=f;o.getUint16(b,d)===m&&h.push(b)}return h};return{read:m=>{const h=p(m);if(h.length)return o.getUint16(h[0]+8,d)},write:(m,h)=>{const f=p(m);return!!f.length&&(f.forEach(g=>o.setUint16(g+8,h,d)),!0)}}})(a,n.exif.offset);return i?r===void 0?i.read(e):i.write(e,r):void 0},Dh=t=>window.__pqina_webapi__?window.__pqina_webapi__[t]:window[t],be=(...t)=>{};const AS={ArrayBuffer:"readAsArrayBuffer"};var tv=async(t,e=[0,t.size],r)=>await((a,n=be,i={})=>new Promise((o,s)=>{const{dataFormat:l=AS.ArrayBuffer}=i,c=new(Dh("FileReader"));c.onload=()=>o(c.result),c.onerror=()=>s(c.error),c.onprogress=n,c[l](a)}))(t.slice(...e),r),ES=async(t,e)=>{const r=await tv(t,[0,262144],e);return zh(r,274)||1};let Lp=null;var Ka=()=>(Lp===null&&(Lp=typeof window!="undefined"&&window.document!==void 0),Lp);let Yc=null;var zd=()=>new Promise(t=>{if(Yc===null){const e="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4QA6RXhpZgAATU0AKgAAAAgAAwESAAMAAAABAAYAAAEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAD/2wBDAP//////////////////////////////////////////////////////////////////////////////////////wAALCAABAAIBASIA/8QAJgABAAAAAAAAAAAAAAAAAAAAAxABAAAAAAAAAAAAAAAAAAAAAP/aAAgBAQAAPwBH/9k=";let r=Ka()?new Image:{};return r.onload=()=>{Yc=r.naturalWidth===1,r=void 0,t(Yc)},void(r.src=e)}return t(Yc)}),Hl=t=>t.getContext("2d").getImageData(0,0,t.width,t.height),Yr=(t,e,r=[])=>{const a=document.createElement(t),n=Object.getOwnPropertyDescriptors(a.__proto__);for(const i in e)i==="style"?a.style.cssText=e[i]:n[i]&&n[i].set||/textContent|innerHTML/.test(i)||typeof e[i]=="function"?a[i]=e[i]:a.setAttribute(i,e[i]);return r.forEach(i=>a.appendChild(i)),a};const VS={1:()=>[1,0,0,1,0,0],2:t=>[-1,0,0,1,t,0],3:(t,e)=>[-1,0,0,-1,t,e],4:(t,e)=>[1,0,0,-1,0,e],5:()=>[0,1,1,0,0,0],6:(t,e)=>[0,1,-1,0,e,0],7:(t,e)=>[0,-1,-1,0,e,t],8:t=>[0,-1,1,0,0,t]};var Wa=t=>{t.width=1,t.height=1;const e=t.getContext("2d");e&&e.clearRect(0,0,1,1)},Gs=t=>"data"in t,Oh=t=>Ka()?RegExp(t).test(window.navigator.userAgent):void 0;let Fp=null;var Dd=()=>(Fp===null&&(Fp=Oh(/Android/)),Fp),ev=(t,e)=>{const r=Yr("canvas",{width:t.width,height:t.height});return r.getContext("2d",e).drawImage(t,0,0),r},tl=async(t,e=1)=>{const r=await zd(),[a,n]=r||e<5?[t.width,t.height]:[t.height,t.width],i=Yr("canvas",{width:a,height:n}),o=i.getContext("2d",{willReadFrequently:!0});if(Gs(t)&&!r&&e>1){const s=Yr("canvas",{width:t.width,height:t.height});s.getContext("2d",{willReadFrequently:!0}).putImageData(t,0,0),t=s}if(!r&&e>1&&o.transform.apply(o,((s,l,c=-1)=>(c===-1&&(c=1),VS[c](s,l)))(t.width,t.height,e)),Gs(t)){if(o.putImageData(t,0,0),Dd())return ev(i)}else o.drawImage(t,0,0);return t instanceof HTMLCanvasElement&&Wa(t),i},rv=async(t,e=1)=>e===1||await zd()?t:Hl(await tl(t,e)),gs=t=>typeof t=="object";const s0=t=>t instanceof HTMLElement?t:gs(t)?av(t):t,av=t=>{let e;return Array.isArray(t)?(e=[],t.forEach((r,a)=>{e[a]=s0(r)})):(e={},Object.keys(t).forEach(r=>{const a=t[r];e[r]=s0(a)})),e};var Be=t=>typeof t=="string",Xr=t=>typeof t=="function",LS=(t,e)=>new Promise((r,a)=>{const n=()=>r(((i,{width:o,height:s,canvasMemoryLimit:l,contextOptions:c})=>{let d=o||i.naturalWidth,p=s||i.naturalHeight;d||p||(d=300,p=150);const m=d*p;if(l&&m>l){const f=Math.sqrt(l)/Math.sqrt(m);d=Math.floor(d*f),p=Math.floor(p*f)}const h=Yr("canvas");return h.width=d,h.height=p,h.getContext("2d",c).drawImage(i,0,0,d,p),h})(t,e));t.complete&&t.width?n():(t.onload=n,t.onerror=()=>a(new Error("Failed to load image")))}),nv=()=>"createImageBitmap"in window,iv=t=>/svg/.test(t.type),bi=()=>Math.random().toString(36).substr(2,9);const Np=new Map;var Gl=(t,e,r)=>new Promise((a,n)=>{const i=t.toString();let o=Np.get(i);if(!o){const l=(m=>`function () {self.onmessage = function (message) {(${m.toString()}).apply(null, message.data.content.concat([function (err, response) {
    response = response || {};
    const transfer = 'data' in response ? [response.data.buffer] : 'width' in response ? [response] : [];
    return self.postMessage({ id: message.data.id, content: response, error: err }, transfer);
}]))}}`)(t),c=URL.createObjectURL((m=>new Blob(["(",typeof m=="function"?m.toString():m,")()"],{type:"application/javascript"}))(l)),d=new Map,p=new Worker(c);o={url:c,worker:p,messages:d,terminationTimeout:void 0,terminate:()=>{clearTimeout(o.terminationTimeout),o.worker.terminate(),URL.revokeObjectURL(c),Np.delete(i)}},p.onmessage=function(m){const{id:h,content:f,error:g}=m.data;if(clearTimeout(o.terminationTimeout),o.terminationTimeout=setTimeout(()=>{d.size>0||o.terminate()},500),!d.has(h))return;const b=d.get(h);d.delete(h),g!=null?b.reject(g):b.resolve(f)},Np.set(i,o)}const s=bi();o.messages.set(s,{resolve:a,reject:n}),o.worker.postMessage({id:s,content:e},r)}),ov=async(t,e)=>{const r=async()=>{const n=await(async(o,s)=>{const l=Yr("img",{src:URL.createObjectURL(o)}),c=await LS(l,s);return URL.revokeObjectURL(l.src),c})(t,{canvasMemoryLimit:e,contextOptions:{willReadFrequently:!0}}),i=Hl(n);return Wa(n),i};if(Dd())return await r();let a;if(nv()&&!iv(t)&&"OffscreenCanvas"in window)try{a=await Gl((n,i,o)=>{createImageBitmap(n).then(s=>{let l=s.width,c=s.height;const d=l*c;if(i&&d>i){const f=Math.sqrt(i)/Math.sqrt(d);l=Math.floor(l*f),c=Math.floor(c*f)}const p=new OffscreenCanvas(l,c),m=p.getContext("2d",{willReadFrequently:!0});m.drawImage(s,0,0,l,c);const h=m.getImageData(0,0,p.width,p.height);o(null,h)}).catch(s=>{o(s)})},[t,e])}catch{}return a&&a.width?a:await r()},Bh=(t,e,r)=>new Promise((a,n)=>{try{t.toBlob(i=>{if(!i)return n(new Error("Failed to create blob"));a(i)},e,r)}catch(i){n(i)}}),FS=async(t,e,r)=>{const a=await tl(t),n=await Bh(a,e,r);return Wa(a),n};const NS={matroska:"mkv"};var sv=t=>{const e=(t.match(/\/([a-z0-9]+)/)||[])[1];if(/^x/.test(e)){const[,r=""]=t.split("/x-");return NS[r]}return e},lv=t=>t.substr(0,t.lastIndexOf("."))||t;const zS=/avif|bmp|gif|jpg|jpeg|jpe|jif|jfif|png|svg|tiff|webp/;var Uh=t=>{return t&&(e=(r=t,r.split(".").pop()).toLowerCase(),zS.test(e)?"image/"+(/jfif|jif|jpe|jpg/.test(e)?"jpeg":e==="svg"?"svg+xml":e):"");var e,r},Ol=(t,e,r)=>{const a=new Date().getTime(),n=t.type.length&&!/null|text/.test(t.type),i=n?t.type:r,o=((s,l)=>{const c=Uh(s);if(c===l)return s;const d=sv(l)||c;return`${lv(s)}.${d}`})(e,i);try{return new(Dh("File"))([t],o,{lastModified:a,type:n?t.type:i})}catch{const l=n?t.slice():t.slice(0,t.size,i);return l.lastModified=a,l.name=o,l}},pi=(t,e)=>t/e,Br=t=>t;const zp=Math.PI,Qn=Math.PI/2,mi=Qn/2;var Gi=t=>{const e=Math.abs(t)%Math.PI;return e>mi&&e<Math.PI-mi};const xm={Top:"t",Right:"r",Bottom:"b",Left:"l",TopLeft:"tl",TopRight:"tr",BottomRight:"br",BottomLeft:"bl"},{Top:Fo,Right:No,Bottom:zo,Left:Do,TopLeft:vi,TopRight:xi,BottomRight:wi,BottomLeft:Si}=xm;var Bl={[Fo]:[.5,0],[No]:[1,.5],[zo]:[.5,1],[Do]:[0,.5],[vi]:[0,0],[xi]:[1,0],[wi]:[1,1],[Si]:[0,1]},Ze=(t,e=12)=>parseFloat(t.toFixed(e));const Sd=(t,e,r)=>r+(t-r)*e,l0=t=>({x:t.x+.5*t.width,y:t.y+.5*t.height,rx:.5*t.width,ry:.5*t.height}),Or=()=>ot(0,0),ot=(t,e)=>({x:t,y:e}),c0=t=>ot(t.pageX,t.pageY),Fe=t=>ot(t.x,t.y),_s=t=>(t.x=-t.x,t.y=-t.y,t),xn=(t,e,r=Or())=>{const a=Math.cos(e),n=Math.sin(e),i=t.x-r.x,o=t.y-r.y;return t.x=r.x+a*i-n*o,t.y=r.y+n*i+a*o,t},Io=t=>Math.sqrt(t.x*t.x+t.y*t.y),jn=t=>{const e=Math.sqrt(t.x*t.x+t.y*t.y);return e===0?Or():(t.x/=e,t.y/=e,t)},Xc=(t,e)=>Math.atan2(e.y-t.y,e.x-t.x),Mo=(t,e)=>t.x===e.x&&t.y===e.y,qn=(t,e)=>(t.x=e(t.x),t.y=e(t.y),t),pa=(t,e)=>(t.x+=e.x,t.y+=e.y,t),ha=(t,e)=>(t.x-=e.x,t.y-=e.y,t),d0=(t,e)=>(t.x/=e,t.y/=e,t),mn=(t,e)=>(t.x*=e,t.y*=e,t),md=(t,e)=>t.x*e.x+t.y*e.y,hd=(t,e)=>t.x*e.y-t.y*e.x,hi=(t,e=Or())=>{const r=t.x-e.x,a=t.y-e.y;return r*r+a*a},Vn=(t,e=Or())=>Math.sqrt(hi(t,e)),DS=(t,e,r)=>(t.x=Sd(t.x,e,r.x),t.y=Sd(t.y,e,r.y),t),Kn=t=>{let e=0,r=0;return t.forEach(a=>{e+=a.x,r+=a.y}),ot(e/t.length,r/t.length)},Ws=(t,e,r,a,n)=>(t.forEach(i=>{i.x=e?a-(i.x-a):i.x,i.y=r?n-(i.y-n):i.y}),t),qs=(t,e,r,a)=>{const n=Math.sin(e),i=Math.cos(e);return t.forEach(o=>{o.x-=r,o.y-=a;const s=o.x*i-o.y*n,l=o.x*n+o.y*i;o.x=r+s,o.y=a+l}),t},el=(t,e)=>({width:t,height:e}),wn=t=>el(t.width,t.height),Yi=t=>el(t.width,t.height),ms=t=>el(t.width,t.height),cv=t=>el(t[0],t[1]),_h=t=>{return/img/i.test(t.nodeName)?el((e=t).naturalWidth,e.naturalHeight):Yi(t);var e},ma=(t,e)=>el(t,e),Ul=(t,e,r=Br)=>r(t.width)===r(e.width)&&r(t.height)===r(e.height),Kc=(t,e)=>(t.width*=e,t.height*=e,t),Zs=t=>ot(.5*t.width,.5*t.height),dv=(t,e)=>{const r=Math.abs(e),a=Math.cos(r),n=Math.sin(r),i=a*t.width+n*t.height,o=n*t.width+a*t.height;return t.width=i,t.height=o,t},Cd=(t,e)=>t.width>=e.width&&t.height>=e.height,lo=(t,e)=>(t.width=e(t.width),t.height=e(t.height),t),Oo=(t,e)=>({start:t,end:e}),uv=t=>Oo(Fe(t.start),Fe(t.end)),Wh=(t,e)=>{if(e===0)return t;const r=ot(t.start.x-t.end.x,t.start.y-t.end.y),a=jn(r),n=mn(a,e);return t.start.x+=n.x,t.start.y+=n.y,t.end.x-=n.x,t.end.y-=n.y,t},OS=[ot(-1,-1),ot(-1,1),ot(1,1),ot(1,-1)],ki=(t,e,r,a)=>({x:t,y:e,width:r,height:a}),yr=t=>ki(t.x,t.y,t.width,t.height),Ao=()=>ki(0,0,0,0),nn=t=>ki(0,0,t.width,t.height),Ds=t=>ki(t.x||0,t.y||0,t.width||0,t.height||0),Sn=t=>{let e=t[0].x,r=t[0].x,a=t[0].y,n=t[0].y;return t.forEach(i=>{e=Math.min(e,i.x),r=Math.max(r,i.x),a=Math.min(a,i.y),n=Math.max(n,i.y)}),ki(e,a,r-e,n-a)},Dp=t=>na(t.x-t.rx,t.y-t.ry,2*t.rx,2*t.ry),u0=(t,e)=>ki(t.x-.5*e.width,t.y-.5*e.height,e.width,e.height),na=(t,e,r,a)=>ki(t,e,r,a),Cr=t=>ot(t.x+.5*t.width,t.y+.5*t.height),gi=(t,e)=>(t.x+=e.x,t.y+=e.y,t),Ya=(t,e,r)=>(r=r||Cr(t),t.x=e*(t.x-r.x)+r.x,t.y=e*(t.y-r.y)+r.y,t.width=e*t.width,t.height=e*t.height,t),p0=(t,e,r,a)=>{const n=(a.x-t.x)/t.width,i=(a.y-t.y)/t.height;let o=Math.max(e.width,t.width),s=Math.max(e.height,t.height);return o=Math.min(r.width,o),s=Math.min(r.height,s),t.x=a.x-n*o,t.y=a.y-i*s,t.width=o,t.height=s,t},m0=(t,e)=>{const[r,a]=Bl[e],n=r*t.width,i=a*t.height;return ot(t.x+n,t.y+i)},Eo=(t,e)=>(t.x*=e,t.y*=e,t.width*=e,t.height*=e,t),Ni=(t,e,r=Br)=>r(t.x)===r(e.x)&&r(t.y)===r(e.y)&&r(t.width)===r(e.width)&&r(t.height)===r(e.height),Ta=t=>pi(t.width,t.height),pv=(t,e,r,a,n)=>(t.x=e,t.y=r,t.width=a,t.height=n,t),Od=(t,e)=>(t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height,t),Za=(t,e,r)=>(r||(r=Cr(t)),$i(t).map(a=>xn(a,e,r))),gd=(t,e)=>ki(.5*t.width-.5*e.width,.5*t.height-.5*e.height,e.width,e.height),kd=(t,e)=>!(e.x<t.x)&&!(e.y<t.y)&&!(e.x>t.x+t.width)&&!(e.y>t.y+t.height),uo=(t,e,r=Or())=>{if(t.width===0||t.height===0)return Ao();const a=Ta(t);e||(e=a);let n=t.width,i=t.height;return e>a?n=i*e:i=n/e,ki(r.x+.5*(t.width-n),r.y+.5*(t.height-i),n,i)},Cn=(t,e=Ta(t),r=Or())=>{if(t.width===0||t.height===0)return Ao();let a=t.width,n=a/e;return n>t.height&&(n=t.height,a=n*e),ki(r.x+.5*(t.width-a),r.y+.5*(t.height-n),a,n)},hs=t=>[Math.min(t.y,t.y+t.height),Math.max(t.x,t.x+t.width),Math.max(t.y,t.y+t.height),Math.min(t.x,t.x+t.width)],$i=t=>[ot(t.x,t.y),ot(t.x+t.width,t.y),ot(t.x+t.width,t.y+t.height),ot(t.x,t.y+t.height)],Jn=(t,e)=>{if(t)return t.x=e(t.x),t.y=e(t.y),t.width=e(t.width),t.height=e(t.height),t},mv=(t,e,r=Cr(t))=>$i(t).map((a,n)=>{const i=OS[n];return ot(Sd(a.x,1+i.x*e.x,r.x),Sd(a.y,1+i.y*e.y,r.y))}),_l=t=>(t.x=0,t.y=0,t),h0=t=>{const e=t[0],r=t[t.length-1];t=Mo(e,r)?t:[...t,e];const a=e.x,n=e.y;let i,o,s,l=0,c=0,d=0,p=0;const m=t.length;for(;c<m;c++)i=t[c],o=t[c+1>m-1?0:c+1],s=(i.y-n)*(o.x-a)-(o.y-n)*(i.x-a),l+=s,d+=(i.x+o.x-2*a)*s,p+=(i.y+o.y-2*n)*s;return s=3*l,ot(a+d/s,n+p/s)},qh=(t,e)=>hv(t.start,t.end,e.start,e.end),hv=(t,e,r,a)=>{const n=(a.y-r.y)*(e.x-t.x)-(a.x-r.x)*(e.y-t.y);if(n===0)return;const i=((a.x-r.x)*(t.y-r.y)-(a.y-r.y)*(t.x-r.x))/n,o=((e.x-t.x)*(t.y-r.y)-(e.y-t.y)*(t.x-r.x))/n;return i<0||i>1||o<0||o>1?void 0:ot(t.x+i*(e.x-t.x),t.y+i*(e.y-t.y))},gv=(t,e,{ignoreIdenticalLines:r=!1,breakOnIntersection:a=!1}={})=>{const n=e.length,i=[];for(let o=0;o<n-1;o++){if(r&&(Mo(t.start,e[o])||Mo(t.start,e[o+1])||Mo(t.end,e[o])||Mo(t.end,e[o+1])))continue;const s=hv(t.start,t.end,e[o],e[o+1]);if(s){if(a)return[s];i.push(s)}}return i.length?i:void 0},Op=(t,e)=>{let r=0,a=0,n=!1;const i=e.length;for(r=0,a=i-1;r<i;a=r++)e[r].y>t.y!=e[a].y>t.y&&t.x<(e[a].x-e[r].x)*(t.y-e[r].y)/(e[a].y-e[r].y)+e[r].x&&(n=!n);return n},fv=t=>{const e=[];for(let r=0;r<t.length;r++){let a=r+1;a===t.length&&(a=0),e.push(Oo(Fe(t[r]),Fe(t[a])))}return e},$v=(t,e=0)=>fv(t).map(r=>Wh(r,e)),wm=(t,e,r,a=0,n=!1,i=!1,o=12)=>{const s=[];for(let l=0;l<o;l++)s.push(ot(t.x+e*Math.cos(l*(2*Math.PI)/o),t.y+r*Math.sin(l*(2*Math.PI)/o)));return(n||i)&&Ws(s,n,i,t.x,t.y),a&&qs(s,a,t.x,t.y),s};var BS=(t,e)=>{const r=nn(t),a=Cr(r),n=Za(r,e,a);return _l(Sn(n))},Ys=(t,e)=>t instanceof HTMLElement&&(!e||new RegExp(`^${e}$`,"i").test(t.nodeName)),Zl=t=>t instanceof File,g0=async(t,e,r)=>{const a=await Bh(t,e,r);return Ol(a,"canvas")},jh=t=>t.split("/").pop().split(/\?|\#/).shift();const US=Ka()&&!!Node.prototype.replaceChildren?(t,e)=>t.replaceChildren(e):(t,e)=>{for(;t.lastChild;)t.removeChild(t.lastChild);e!==void 0&&t.append(e)},Jc=Ka()&&Yr("div",{class:"PinturaMeasure",style:"position:absolute;left:0;top:0;width:99999px;height:0;pointer-events:none;contain:strict;margin:0;padding:0;"});let f0;var Hh=t=>(US(Jc,t),Jc.parentNode||document.body.append(Jc),clearTimeout(f0),f0=setTimeout(()=>{Jc.remove()},500),t);let Bp=null;var po=()=>(Bp===null&&(Bp=Ka()&&/^((?!chrome|android).)*(safari|iphone|ipad)/i.test(navigator.userAgent)),Bp),yv=t=>new Promise((e,r)=>{let a=!1;!t.parentNode&&po()&&(a=!0,t.style.cssText="position:absolute;visibility:hidden;pointer-events:none;left:0;top:0;width:0;height:0;",Hh(t));const n=()=>{const o=t.naturalWidth,s=t.naturalHeight;o&&s&&(a&&t.remove(),clearInterval(i),e({width:o,height:s}))};t.onerror=o=>{clearInterval(i),r(o)};const i=setInterval(n,1);n()}),bv=t=>new Promise((e,r)=>{const a=()=>{e({width:t.videoWidth,height:t.videoHeight})};if(t.readyState>=1)return a();t.onloadedmetadata=a,t.onerror=()=>r(t.error)}),Bd=t=>/^image/.test(t.type),Gh=t=>new Promise(e=>{const r=Be(t)?t:URL.createObjectURL(t),a=()=>{const i=new Image;i.src=r,e(i)};if(t instanceof Blob&&Bd(t))return a();const n=document.createElement("video");n.preload="metadata",n.onloadedmetadata=()=>e(n),n.onerror=a,n.src=r}),Rd=t=>t.nodeName==="VIDEO",vv=async t=>{let e,r;e=t.src?t:await Gh(t);try{r=Rd(e)?await bv(e):await yv(e)}finally{Zl(t)&&URL.revokeObjectURL(e.src)}return r},_S=async t=>{const e=await vv(t),r=await(i=>new Promise((o,s)=>{if(i.complete)return o(i);i.onload=()=>o(i),i.onerror=()=>s(new Error("Failed to load image"))}))(t),a=Yr("canvas",e);a.getContext("2d",{willReadFrequently:!0}).drawImage(r,0,0);const n=await Bh(a);return Ol(n,jh(r.src))},Os=(t=0,e=!0)=>new(Dh("ProgressEvent"))("progress",{loaded:100*t,total:100,lengthComputable:e}),$0=(t,e,r=a=>a)=>t.getAllResponseHeaders().indexOf(e)>=0?r(t.getResponseHeader(e)):void 0,WS=t=>{if(!t)return null;const e=t.split(/filename=|filename\*=.+''/).splice(1).map(r=>r.trim().replace(/^["']|[;"']{0,2}$/g,"")).filter(r=>r.length);return e.length?decodeURI(e[e.length-1]):null};const qS="URL_REQUEST";class Fl extends Error{constructor(e,r,a){super(e),this.name="EditorError",this.code=r,this.metadata=a}}var xv=(t,e)=>{const{headers:r={},credentials:a}=e||{};Object.entries(r).forEach(([n,i])=>t.setRequestHeader(n,i)),a&&(t.withCredentials=a!=="omit")},jS=(t,e,r)=>/^data:/.test(t)?(async(a,n="data-uri",i=be)=>{i(Os(0));const o=await fetch(a);i(Os(.33));const s=await o.blob();let l;Bd(s)||(l="image/"+(a.includes(",/9j/")?"jpeg":"png")),i(Os(.66));const c=Ol(s,n,l);return i(Os(1)),c})(t,void 0,e):((a,n,i)=>new Promise((o,s)=>{const l=()=>s(new Fl("Error fetching image",qS,c)),c=new XMLHttpRequest;c.onprogress=n,c.onerror=l,c.onload=()=>{if(!c.response||c.status>=300||c.status<200)return l();const p=$0(c,"Content-Type"),m=$0(c,"Content-Disposition",WS)||jh(a);o(Ol(c.response,m,p||Uh(m)))};const{willRequest:d}=i;Promise.resolve(d&&d(a,{resourceType:"image"})).then(p=>{if(p===!1)return s("Image load rejected");c.open("GET",a),xv(c,p),c.responseType="blob",c.send()}).catch(console.error)}))(t,e,r),Zh=t=>t instanceof Blob&&!(t instanceof File),wv=t=>"close"in t,HS=async(t,e,r)=>{if(Zl(t)||Zh(t))return t;if(Be(t))return await jS(t,e,r);if(Ys(t,"canvas"))return await g0(t);if(Ys(t,"img"))return await _S(t);if(Gs(t)||wv(t))return await g0(await tl(t));throw new Fl("Invalid image source","invalid-image-source")};let Up=null;var Yh=()=>(Up===null&&(Up=Ka()&&/^mac/i.test(navigator.platform)),Up);let _p=null;var zi=()=>(_p===null&&(_p=Ka()&&(Oh(/iPhone|iPad|iPod/)||Yh()&&navigator.maxTouchPoints>=1)),_p),GS=async(t,e=1)=>await zd()||zi()||e<5?t:ma(t.height,t.width),Sv=t=>/jpeg/.test(t.type),ZS=t=>{return typeof(e=t)!="object"||e.constructor!=Object?t:JSON.stringify(t);var e},Cv=(t,e=0,r)=>(e===0||(t.translate(r.x,r.y),t.rotate(e),t.translate(-r.x,-r.y)),t),YS=async(t,e={})=>{const{flipX:r,flipY:a,rotation:n,crop:i}=e,o=Yi(t),s=r||a,l=!!n,c=i&&(i.x||i.y||i.width||i.height),d=c&&Ni(i,nn(o)),p=c&&!d;if(!s&&!l&&!p)return t;let m,h=Yr("canvas",{width:t.width,height:t.height});if(h.getContext("2d",{willReadFrequently:!0}).putImageData(t,0,0),s){const f=Yr("canvas",{width:h.width,height:h.height}).getContext("2d",{willReadFrequently:!0});((g,b,w)=>{g.scale(b,w)})(f,r?-1:1,a?-1:1),f.drawImage(h,r?-h.width:0,a?-h.height:0),f.restore(),Wa(h),h=f.canvas}if(l){const f=lo(ms(Sn(Za(Ds(h),n))),Math.floor),g=Yr("canvas",{width:i.width,height:i.height}).getContext("2d",{willReadFrequently:!0});((b,w,v)=>{b.translate(w,v)})(g,-i.x,-i.y),Cv(g,n,Zs(f)),g.drawImage(h,.5*(f.width-h.width),.5*(f.height-h.height)),g.restore(),Wa(h),h=g.canvas}else if(p)return m=h.getContext("2d",{willReadFrequently:!0}).getImageData(i.x,i.y,i.width,i.height),Wa(h),m;return m=h.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,h.width,h.height),Wa(h),m},XS=(t,e)=>{const{imageData:r,width:a,height:n}=t,i=r.width,o=r.height,s=Math.round(a),l=Math.round(n),c=r.data,d=new Uint8ClampedArray(s*l*4),p=i/s,m=o/l,h=Math.ceil(.5*p),f=Math.ceil(.5*m);for(let g=0;g<l;g++)for(let b=0;b<s;b++){const w=4*(b+g*s);let v=0,S=0,T=0,B=0,I=0,O=0,R=0;const E=(g+.5)*m;for(let N=Math.floor(g*m);N<(g+1)*m;N++){const U=Math.abs(E-(N+.5))/f,x=(b+.5)*p,j=U*U;for(let A=Math.floor(b*p);A<(b+1)*p;A++){let P=Math.abs(x-(A+.5))/h;const G=Math.sqrt(j+P*P);if(G<-1||G>1||(v=2*G*G*G-3*G*G+1,v<=0))continue;P=4*(A+N*i);const Q=c[P+3];R+=v*Q,T+=v,Q<255&&(v=v*Q/250),B+=v*c[P],I+=v*c[P+1],O+=v*c[P+2],S+=v}}d[w]=B/S,d[w+1]=I/S,d[w+2]=O/S,d[w+3]=R/T}e(null,{data:d,width:s,height:l})},Xh=t=>{if(t instanceof ImageData)return t;let e;try{e=new ImageData(t.width,t.height)}catch{e=Yr("canvas").getContext("2d").createImageData(t.width,t.height)}return e.data.set(t.data),e},KS=async(t,e={},r)=>{const{width:a,height:n,fit:i,upscale:o}=e;if(!a&&!n)return t;let s=a,l=n;if(a?n||(l=a):s=n,i!=="force"){const c=s/t.width,d=l/t.height;let p=1;if(i==="cover"?p=Math.max(c,d):i==="contain"&&(p=Math.min(c,d)),p>1&&o===!1)return t;s=Math.round(t.width*p),l=Math.round(t.height*p)}return s=Math.max(s,1),l=Math.max(l,1),t.width===s&&t.height===l?t:r?r(t,s,l):(t=await Gl(XS,[{imageData:t,width:s,height:l}],[t.data.buffer]),Xh(t))},JS=(t,e)=>{const{imageData:r,matrix:a}=t;if(!a)return e(null,r);const n=new Uint8ClampedArray(r.width*r.height*4),i=r.data,o=i.length,s=a[0],l=a[1],c=a[2],d=a[3],p=a[4],m=a[5],h=a[6],f=a[7],g=a[8],b=a[9],w=a[10],v=a[11],S=a[12],T=a[13],B=a[14],I=a[15],O=a[16],R=a[17],E=a[18],N=a[19];let U=0,x=0,j=0,A=0,P=0,G=0,Q=0,Z=0,ct=0,lt=0,xt=0,yt=0;for(;U<o;U+=4)x=i[U]/255,j=i[U+1]/255,A=i[U+2]/255,P=i[U+3]/255,G=x*s+j*l+A*c+P*d+p,Q=x*m+j*h+A*f+P*g+b,Z=x*w+j*v+A*S+P*T+B,ct=x*I+j*O+A*R+P*E+N,lt=Math.max(0,G*ct)+(1-ct),xt=Math.max(0,Q*ct)+(1-ct),yt=Math.max(0,Z*ct)+(1-ct),n[U]=255*Math.max(0,Math.min(1,lt)),n[U+1]=255*Math.max(0,Math.min(1,xt)),n[U+2]=255*Math.max(0,Math.min(1,yt)),n[U+3]=255*P;e(null,{data:n,width:r.width,height:r.height})},kv=(t,e)=>{const{imageData:r,matrix:a}=t;if(!a)return e(null,r);let n=a.reduce((R,E)=>R+E);n=n<=0?1:n;const i=r.width,o=r.height,s=r.data;let l=0,c=0,d=0;const p=Math.round(Math.sqrt(a.length)),m=Math.floor(p/2);let h=0,f=0,g=0,b=0,w=0,v=0,S=0,T=0,B=0,I=0;const O=new Uint8ClampedArray(i*o*4);for(d=0;d<o;d++)for(c=0;c<i;c++){for(h=0,f=0,g=0,b=0,v=0;v<p;v++)for(w=0;w<p;w++)S=d+v-m,T=c+w-m,S<0&&(S=o-1),S>=o&&(S=0),T<0&&(T=i-1),T>=i&&(T=0),B=4*(S*i+T),I=a[v*p+w],h+=s[B]*I,f+=s[B+1]*I,g+=s[B+2]*I,b+=s[B+3]*I;O[l]=h/n,O[l+1]=f/n,O[l+2]=g/n,O[l+3]=b/n,l+=4}e(null,{data:O,width:i,height:o})},QS=(t,e)=>{let{imageData:r,strength:a}=t;if(!a)return e(null,r);const n=new Uint8ClampedArray(r.width*r.height*4),i=r.width,o=r.height,s=r.data,l=(j,A)=>(c=j-I,d=A-O,Math.sqrt(c*c+d*d));let c,d,p,m,h,f,g,b,w,v,S,T=0,B=0,I=.5*i,O=.5*o,R=l(0,0);for(a>0?(p=0,m=0,h=0):(a=Math.abs(a),p=1,m=1,h=1),B=0;B<o;B++)for(T=0;T<i;T++)E=4*(T+B*i),N=s,U=n,x=l(T,B)*a/R,f=N[E]/255,g=N[E+1]/255,b=N[E+2]/255,w=N[E+3]/255,v=1-x,S=v*w+x,U[E]=(v*w*f+x*p)/S*255,U[E+1]=(v*w*g+x*m)/S*255,U[E+2]=(v*w*b+x*h)/S*255,U[E+3]=255*S;var E,N,U,x;e(null,{data:n,width:r.width,height:r.height})},t4=(t,e)=>{const{imageData:r,level:a,monochrome:n=!1}=t;if(!a)return e(null,r);const i=new Uint8ClampedArray(r.width*r.height*4),o=r.data,s=o.length;let l,c,d,p=0;const m=()=>255*(2*Math.random()-1)*a,h=n?()=>{const f=m();return[f,f,f]}:()=>[m(),m(),m()];for(;p<s;p+=4)[l,c,d]=h(),i[p]=o[p]+l,i[p+1]=o[p+1]+c,i[p+2]=o[p+2]+d,i[p+3]=o[p+3];e(null,{data:i,width:r.width,height:r.height})},e4=(t,e)=>{const{imageData:r,level:a}=t;if(!a)return e(null,r);const n=new Uint8ClampedArray(r.width*r.height*4),i=r.data,o=i.length;let s,l,c,d=0;for(;d<o;d+=4)s=i[d]/255,l=i[d+1]/255,c=i[d+2]/255,n[d]=255*Math.pow(s,a),n[d+1]=255*Math.pow(l,a),n[d+2]=255*Math.pow(c,a),n[d+3]=i[d+3];e(null,{data:n,width:r.width,height:r.height})},r4=async(t,e={})=>{const{colorMatrix:r,convolutionMatrix:a,gamma:n,noise:i,vignette:o}=e,s=[];if(a&&s.push([kv,{matrix:a.clarity}]),n>0&&s.push([e4,{level:1/n}]),r&&!(d=>{const p=d.length;let m;const h=p>=20?6:p>=16?5:3;for(let f=0;f<p;f++)if(m=d[f],m===1&&f%h!=0||m!==0&&m!==1)return!1;return!0})(r)&&s.push([JS,{matrix:r}]),(i>0||i<0)&&s.push([t4,{level:i}]),(o>0||o<0)&&s.push([QS,{strength:o}]),!s.length)return t;const l=(d,p)=>`(err, imageData) => {
            (${d[p][0].toString()})(Object.assign({ imageData: imageData }, filterInstructions[${p}]), 
                ${d[p+1]?l(d,p+1):"done"})
        }`,c=`function (options, done) {
        const filterInstructions = options.filterInstructions;
        const imageData = options.imageData;
        (${l(s,0)})(null, imageData)
    }`;return t=await Gl(c,[{imageData:t,filterInstructions:s.map(d=>d[1])}],[t.data.buffer]),Xh(t)},Mr=t=>typeof t=="number",Td=t=>Be(t)&&t.match(/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g)!==null,Ee=(t,e)=>t.hasOwnProperty(e),ea=t=>Array.isArray(t);let y0=64,Wp=102,b0=112,v0=!1;var Rv=(t,e)=>(!v0&&Ka()&&(/^win/i.test(navigator.platform)&&(Wp=103),(zi()||Yh())&&(y0=63.5,Wp=110,b0=123),v0=!0),`<svg${e?` aria-label="${e}"`:""} width="128" height="128" viewBox="0 0 128 128" preserveAspectRatio="xMinYMin meet" xmlns="http://www.w3.org/2000/svg"><text x="${y0}" y="${Wp}" alignment-baseline="text-top" dominant-baseline="text-top" text-anchor="middle" font-size="${b0}px">${t}</text></svg>`),Xs=t=>t instanceof Blob,an=(t,e)=>t/e*100+"%",kn=t=>`rgba(${Math.round(255*t[0])}, ${Math.round(255*t[1])}, ${Math.round(255*t[2])}, ${Mr(t[3])?t[3]:1})`,Sm=t=>Object.values(t).join("_");const Tv=async(t,e=0)=>{const r=Yr("canvas",{width:80,height:80}).getContext("2d");return await((a=0)=>new Promise(n=>{setTimeout(n,a)}))(e),r.drawImage(t,0,0,80,80),!((a=>!new Uint32Array(a.getImageData(0,0,a.canvas.width,a.canvas.height).data.buffer).some(n=>n!==0))(r)&&e<=256)||await Tv(t,e+16)},x0=new Map;var a4=t=>new Promise((e,r)=>{const a=new FileReader;a.onerror=()=>r(a.error),a.onload=()=>e(a.result),a.readAsDataURL(t)}),co=()=>{let t=[];return{sub:(e,r)=>(t.push({event:e,callback:r}),()=>t=t.filter(a=>a.event!==e||a.callback!==r)),pub:(e,r)=>{t.filter(a=>a.event===e).forEach(a=>a.callback(r))}}};let qp=null;var Zi=()=>(qp===null&&(qp=Oh(/Firefox/)),qp);const ps=32,Kh=({color:t=[0,0,0],fontSize:e=16,fontFamily:r="sans-serif",fontVariant:a="normal",fontWeight:n="normal",fontStyle:i="normal",textAlign:o="left",lineHeight:s=20},l=1)=>`font-size:${e*l}px;font-style:${i};font-weight:${n};font-family:${r};font-variant:${a};line-height:${s*l}px;text-align:${o};color:${kn(t)};`,Jh=(t,e,r=1)=>{const{width:a,height:n,disableNewline:i}=e,o=!a,s=i===!1?((d="")=>d.split(`
`).length)(t):void 0,l=o?"normal":"break-word",c=o&&!s?"nowrap":"pre-line";return`max-width:none;min-width:auto;width:${o?"auto":a*r+"px"};height:${n?n*r+"px":"auto"};margin-top:0;margin-bottom:0;padding-top:${(({fontSize:d=16,lineHeight:p=20}={})=>.5*Math.max(0,d-p))(e)*r}px;word-break:${l};word-wrap:normal;white-space:${c};`},w0=new Map,Mv=t=>{const e=[];for(const r of Array.from(t.childNodes))r.nodeType===Node.TEXT_NODE?e.push(n4(r)):e.push(...Mv(r));return e},Pv="pointer-events:none;visibility:hidden;position:absolute;left:0;top:0;",n4=t=>{const e=t.nodeValue;if(!e)return[];const r=e.length,a=document.createRange();a.selectNodeContents(t);const n=[];for(let o=0;o<r;o++){a.setStart(t,0),a.setEnd(t,o+1);const s=a.getClientRects().length-1,l=e.charAt(o);n[s]?n[s]+=l:n.push(l)}const i=a.getClientRects();return n.map((o,s)=>({rect:i[s],text:o}))},S0=new Map,Vi=(t="",e)=>{const{width:r=0,height:a=0}=e;if(r&&a)return ma(r,a);let{fontSize:n=16,fontFamily:i,lineHeight:o=20,fontWeight:s,fontStyle:l,fontVariant:c}=e;const d=Sm({text:t,fontFamily:i,fontWeight:s,fontStyle:l,fontVariant:c,fontSize:n,lineHeight:o,width:r});let p=S0.get(d);if(p)return p;let m=1;n>1e3&&Zi()&&(m=n/1e3,n=1e3,o/=m);const h=Hh(Yr("pre",{contenteditable:"true",spellcheck:"false",style:`${Pv}${Kh(de(X({},e),{fontSize:n,lineHeight:o}))};${Jh(t,e)}"`,innerHTML:t})).getBoundingClientRect();return p=Yi(h),p.height+=Math.max(0,n-o),p=lo(p,f=>f*m),r&&(p.width=r),S0.set(d,p),p},C0=new Map,i4=(t,e)=>new Promise((r,a)=>{let n=C0.get(t);n===void 0&&(n=((i,o)=>{const{sub:s,pub:l}=co();let c,d;return Promise.resolve(o&&o(i,{resourceType:"stylesheet"})).then(p=>{if(p===!1)return d="requestPrevented",l("error",d);const{headers:m,credentials:h}=p||{};fetch(i,{headers:m,credentials:h}).then(f=>f.text()).then(f=>{c=f,l("load",c)}).catch(f=>{d=f,l("error",d)})}),{sub:(p,m)=>p==="load"&&c?m(c):p==="error"&&d?m(d):void s(p,m)}})(t,e),C0.set(t,n)),n.sub("load",r),n.sub("error",a)}),k0=async(t,e)=>{let r;try{r=await i4(t,e)}catch{return[]}const a=Yr("style",{innerHTML:r,id:bi()});document.head.append(a);const n=Array.from(document.styleSheets).find(i=>i.ownerNode.id===a.id);return a.remove(),Array.from(n.cssRules)},Vs=new Map,o4=async(t,e)=>{if(Vs.has(t.href))return Vs.get(t.href);let r;try{r=Array.from(t.cssRules);for(const a of(n=>n.filter(i=>i instanceof CSSImportRule))(r)){const n=a.href;if(Vs.has(n)){const o=Vs.get(n);r=[...r,...o];continue}const i=await k0(n,e);Vs.set(n,i),r=[...r,...i]}}catch{const n=t.href;r=await k0(n,e),Vs.set(n,r)}return(a=>a.filter(n=>n instanceof CSSFontFaceRule))(r)},Iv=(t,e)=>t.style.getPropertyValue(e),s4=(t,e)=>t.style?Iv(t,"font-family").replace(/^"|"$/g,"")==e:!1,l4=async(t,e)=>{const r=((a,n)=>{const i=[];for(const o of a)s4(o,n)&&i.push(o);return i})(await(async a=>{const n=Array.from(document.styleSheets).map(s=>o4(s,a)),i=await Promise.all(n),o=[];return i.forEach(s=>o.push(...s)),o})(e),t);return r.length?r.map(a=>{const n=a.parentStyleSheet.href&&new URL(a.parentStyleSheet.href),i=n?n.origin+(l=>l.pathname.split("/").slice(0,-1).join("/"))(n)+"/":"",o=a.style.getPropertyValue("src").match(/url\("?(.*?)"?\)/)[1],s=Array.from(a.style).filter(l=>l!="src").reduce((l,c)=>l+=c+":"+Iv(a,c)+";","");return[/^http/.test(o)?o:i+o,s]}):[]},R0=new Map,T0=new Map;var Av=async(t="",e)=>{if(!t.length)return;let{imageWidth:r=300,imageHeight:a=150,paddingLeft:n=ps,paddingRight:i=ps,fontFamily:o,fontSize:s,pixelRatio:l=1,willRequest:c}=e,d=1,p="";s>1e3&&Zi()&&(d=s/1e3,p=`transform-origin:0 0;transform:scale(${d})`);const m=l/d,h=(r+n+i)*l,f=a*l,g=Kh(de(X({},e),{fontSize:s}),m),b=Jh(t,e,m),w=await(async(v,S)=>{if(R0.get(v))return;let T=T0.get(v);if(!T){const I=await l4(v,S);if(!I.length)return void R0.set(v,!0);const O=[];for(const[R,E]of I){const N=await fetch(R).then(j=>j.blob()),U=!(B=N.type)||/woff2/.test(B)?"woff2":/woff/.test(B)?"woff":/ttf|truetype/.test(B)?"truetype":/otf|opentype/.test(B)?"opentype":/svg/.test(B)?"svg":"woff2",x=await a4(N);O.push(`@font-face { src:url(${x}) format('${U}');${E};font-display:block; }`)}T=O.join(""),T0.set(v,T)}var B;return T})(o,c);return((v,{safariCacheKey:S="*"}={})=>new Promise((T,B)=>{const I=new Image;I.onerror=()=>B(new Error("Failed to load SVG")),I.onload=()=>{if(!po()||!v.includes("@font-face")||x0.has(S))return T(I);Tv(I).then(()=>{x0.set(S,!0),T(I)})},I.src="data:image/svg+xml,"+v}))(`<svg xmlns="http://www.w3.org/2000/svg" width="${h}" height="${f}" viewBox="0 0 ${h} ${f}"><foreignObject x="0" y="0" width="${h}" height="${f}"><div xmlns="http://www.w3.org/1999/xhtml">${w?`<style>${w}</style>`:""}<pre contenteditable="true" spellcheck="false" style="position:absolute;padding-right:${i*m}px;padding-left:${n*m}px;${g};${b};${p}">${t.replace(/%/g,"%25").replace(/#/g,"%23").replace(/&nbsp;/g,"\xA0").replace(/&(?!#\d{4};|[a-z]+;)/gi,"&amp;").replace(/<br>|\n/g,"<br/>")}</pre></div></foreignObject></svg>`,{safariCacheKey:o})};const wa=t=>{const e=X({},t);return av(e)},M0=(t,e={})=>{const r=Ta(t);let a,n;const i=e.width||e.rx,o=e.height||e.ry;if(i&&o)return wn(e);if(i||o){a=parseFloat(i||Number.MAX_SAFE_INTEGER),n=parseFloat(o||Number.MAX_SAFE_INTEGER);const s=Math.min(a,n);Be(i)||Be(o)?(a=s+"%",n=s*r+"%"):(a=s,n=s)}else a=10+"%",n=10*r+"%";return{[(e.width?"width":e.rx?"rx":void 0)||"width"]:a,[(e.width?"height":e.rx?"ry":void 0)||"height"]:n}},P0=(t,e={})=>{return de(X({width:void 0,height:void 0},e),{aspectRatio:1,backgroundImage:(r=Rv(t),"data:image/svg+xml,"+r.replace("<","%3C").replace(">","%3E"))});var r},I0=(t,e={})=>de(X(X({backgroundColor:[0,0,0,0]},Ba(e)?{}:{width:void 0,height:void 0,aspectRatio:void 0}),e),{backgroundImage:Be(t)?t:Xs(t)?URL.createObjectURL(t):t}),A0=(t,e)=>{let r;if(Be(t)||Xs(t)){const a=de(X({},M0(e)),{backgroundSize:"contain"});r=Td(t)?P0(t,a):I0(t,a)}else if(t.src){const a=M0(e,t.shape||t),n=X(X({},t.shape),a);if(t.width&&t.height&&!Ee(n,"aspectRatio")){const i=Mm(a,"width",e),o=Mm(a,"height",e);n.aspectRatio=pi(i,o)}n.backgroundSize||t.shape||t.width&&t.height||(n.backgroundSize="contain"),r=Td(t.src)?P0(t.src,n):I0(t.src,n)}else t.shape&&(r=wa(t.shape));return Ee(r,"backgroundImage")&&(Ee(r,"backgroundColor")||(r.backgroundColor=[0,0,0,0]),Ee(r,"disableStyle")||(r.disableStyle=["cornerRadius","backgroundColor","strokeColor","strokeWidth"])),e?Ga(r,e):r},ko=t=>ot(t.x1,t.y1),Ro=t=>ot(t.x2,t.y2),Ra=t=>Ee(t,"text"),Md=t=>Ra(t)&&!(Ud(t)||Ee(t,"width")),fd=t=>Ra(t)&&(Ud(t)||Ee(t,"width")),fi=t=>!Ra(t)&&c4(t),Ba=t=>Ee(t,"rx"),ka=t=>Ee(t,"x1"),Oa=t=>Ee(t,"points"),no=t=>Ra(t)&&t.isEditing,Qc=t=>!Ee(t,"opacity")||t.opacity>0,To=t=>t.isSelected,jp=t=>t.isEditing,io=t=>t._isDraft,cs=t=>Ee(t,"width")&&Ee(t,"height"),Ev=t=>{const e=Ee(t,"right"),r=Ee(t,"bottom");return e||r},Ud=t=>(Ee(t,"x")||Ee(t,"left"))&&Ee(t,"right")||(Ee(t,"y")||Ee(t,"top"))&&Ee(t,"bottom"),c4=t=>cs(t)||Ud(t),Vv=t=>(t._isDraft=!0,t),Cm=(t,e)=>t.disableStyle!==!0&&(!ea(t.disableStyle)||!e||!t.disableStyle.includes(e)),Ls=t=>t.disableSelect!==!0,E0=t=>t.disableRemove!==!0,d4=t=>!t.disableFlip&&!io(t)&&!Ev(t)&&(e=>Ee(e,"backgroundImage")||Ee(e,"text"))(t),Fs=(t,e)=>!!Ra(t)&&t.disableInput!==!0&&(Xr(t.disableInput)?t.disableInput(e!=null?e:t.text):e||!0),as=(t,e)=>t.disableTextLayout!==!0&&(!ea(t.disableTextLayout)||!e||!t.disableTextLayout.includes(e)),km=t=>t.disableManipulate!==!0&&!io(t)&&!Ev(t),Il=t=>km(t)&&t.disableMove!==!0,Rm=t=>(delete t.left,delete t.right,delete t.top,delete t.bottom,t),V0=t=>(delete t.rotation,t),L0=t=>(t.strokeWidth=t.strokeWidth||1,t.strokeColor=t.strokeColor||[0,0,0],t),F0=t=>(t.backgroundColor=t.backgroundColor?t.backgroundColor:t.strokeWidth||t.backgroundImage?void 0:[0,0,0],t),N0=t=>{let e=t.text;e=e.replace(/&(#[0-9]+|[a-z]+);/gi,(r,a)=>`___${a}___`),e=e.replace(/&/,"&amp;"),t.text=e.replace(/___(#[0-9]+|[a-z]+)___/gi,(r,a)=>`&${a};`)},u4=t=>(t.fontSize=t.fontSize||"4%",t.fontFamily=t.fontFamily||"sans-serif",t.fontWeight=t.fontWeight||"normal",t.fontStyle=t.fontStyle||"normal",t.fontVariant=t.fontVariant||"normal",t.lineHeight=t.lineHeight||"120%",t.color=t.color||[0,0,0],t.format=t.format==="html"?"html":"text",t.format==="html"?N0(t):(e=>{N0(e);let r=e.text;r=r.replace(/</g,"&gt;"),r=r.replace(/>/g,"&lt;"),e.text=r})(t),Md(t)?p4(t):m4(t)),p4=t=>(t.disableNewline!==!1&&(delete t.textAlign,t.text=t.text.replace(/\n/g," ")),Rm(t)),m4=t=>(t.textAlign=t.textAlign||"left",t),Lv=t=>((e=>{Be(e.id)||(e.id=bi()),Ee(e,"rotation")||(e.rotation=0),Ee(e,"opacity")||(e.opacity=1),Ee(e,"disableErase")||(e.disableErase=!0)})(t),Ra(t)?u4(t):fi(t)?(e=>{e.cornerRadius=e.cornerRadius||0,e.strokeWidth=e.strokeWidth||0,e.strokeColor=e.strokeColor||[0,0,0],F0(e)})(t):Oa(t)?(e=>{L0(e),V0(e),Ee(e,"pathClose")||(e.disableResize=!0,Ee(e,"disableMove")||(e.disableMove=!0)),Rm(e)})(t):ka(t)?(e=>{L0(e),e.lineStart=e.lineStart||void 0,e.lineEnd=e.lineEnd||void 0,V0(e),Rm(e)})(t):Ba(t)&&(e=>{e.strokeWidth=e.strokeWidth||0,e.strokeColor=e.strokeColor||[0,0,0],F0(e)})(t),t),h4=t=>Ra(t)?"text":fi(t)?"rectangle":Oa(t)?"path":ka(t)?"line":Ba(t)?"ellipse":void 0,Pd=(t,e)=>parseFloat(t)/100*e,g4=new RegExp(/^x|left|right|^width|rx|fontSize|cornerRadius|strokeWidth/,"i"),f4=new RegExp(/^y|top|bottom|^height|ry/,"i"),Fv=(t,e)=>{Object.entries(t).map(([a,n])=>{t[a]=((i,o,{width:s,height:l})=>{if(Array.isArray(o))return o.map(d=>(gs(d)&&Fv(d,{width:s,height:l}),d));if(typeof o!="string"||!o.endsWith("%"))return o;const c=parseFloat(o)/100;return g4.test(i)?Ze(s*c,6):f4.test(i)?Ze(l*c,6):o})(a,n,e)});const r=t.lineHeight;Be(r)&&(t.lineHeight=Math.round(t.fontSize*(parseFloat(r)/100)))},Ga=(t,e)=>(Fv(t,e),Dv(t,e),t),Tm=(t,e)=>{let r;return/^x|width|rx|fontSize|strokeWidth|cornerRadius/.test(t)?r=e.width:/^y|height|ry/.test(t)&&(r=e.height),r},Mm=(t,e,r)=>Array.isArray(t[e])?t[e].map(a=>Object.entries(a).reduce((n,[i,o])=>(n[i]=Be(o)?Pd(o,Tm(i,r)):o,n),{})):Be(t[e])?Pd(t[e],Tm(e,r)):t[e],js=(t,e,r)=>e.reduce((a,n)=>{const i=Mm(t,n,r);return a[n]=i,a},{}),Fi=(t,e,r)=>(Object.keys(e).forEach(a=>((n,i,o,s)=>{if(!Be(n[i]))return n[i]=o,n;const l=Tm(i,s);return n[i]=l===void 0?o:an(o,l),n})(t,a,e[a],r)),t),Nv=(t,e)=>{const r=t.filter(a=>a.x<0||a.y<0||a.x1<0||a.y1<0).reduce((a,n)=>{const[i,o,s,l]=(c=>{const d=Ao(),p=c.strokeWidth||0;if(fi(c))d.x=c.x-.5*p,d.y=c.y-.5*p,d.width=c.width+p,d.height=c.height+p;else if(ka(c)){const{x1:m,y1:h,x2:f,y2:g}=c,b=Math.abs(Math.min(m,f)),w=Math.abs(Math.max(m,f)),v=Math.abs(Math.min(h,g)),S=Math.abs(Math.min(h,g));d.x=b+.5*p,d.y=w+.5*p,d.width=w-b+p,d.height=S-v+p}else Ba(c)&&(d.x=c.x-c.rx+.5*p,d.y=c.y-c.ry+.5*p,d.width=2*c.rx+p,d.height=2*c.ry+p);return d&&Ee(c,"rotation")&&Za(d,c.rotation),hs(d)})(n);return a.top=Math.min(i,a.top),a.left=Math.min(l,a.left),a.bottom=Math.max(s,a.bottom),a.right=Math.max(o,a.right),a},{top:0,right:0,bottom:0,left:0});return r.right>0&&(r.right-=e.width),r.bottom>0&&(r.bottom-=e.height),r},zv=(t,e,r)=>{const a=wa(t);Ga(a,e);const n=r(a);return Array.isArray(n)?n:[n]},Dv=(t,e)=>{if(Ee(t,"left")&&(t.x=t.left),Ee(t,"right")&&!Be(t.right)){const r=e.width-t.right;Ee(t,"left")?(t.x=t.left,t.width=Math.max(0,r-t.left)):Ee(t,"width")&&(t.x=r-t.width)}if(Ee(t,"top")&&(t.y=t.top),Ee(t,"bottom")&&!Be(t.bottom)){const r=e.height-t.bottom;Ee(t,"top")?(t.y=t.top,t.height=Math.max(0,r-t.top)):Ee(t,"height")&&(t.y=r-t.height)}return t},Ov=(t,e)=>(Oa(t)&&t.points.filter(r=>Mr(r.x)).forEach(r=>{r.x*=e,r.y*=e}),ka(t)&&Mr(t.x1)&&(t.x1*=e,t.y1*=e,t.x2*=e,t.y2*=e),Mr(t.x)&&Mr(t.y)&&(t.x*=e,t.y*=e),Mr(t.width)&&Mr(t.height)&&(t.width*=e,t.height*=e),Mr(t.rx)&&Mr(t.ry)&&(t.rx*=e,t.ry*=e),(r=>Mr(r.strokeWidth)&&r.strokeWidth>0)(t)&&(t.strokeWidth*=e),Ra(t)&&(t._scale=e,Mr(t.fontSize)&&(t.fontSize*=e),Mr(t.lineHeight)&&(t.lineHeight*=e),Mr(t.width)&&!Mr(t.height)&&(t.width*=e)),Ee(t,"cornerRadius")&&Mr(t.cornerRadius)&&(t.cornerRadius*=e),t),$4=t=>{if(fi(t))return ot(t.x+.5*t.width,t.y+.5*t.height);if(Ba(t))return ot(t.x,t.y);if(t.text){if(fd(t)){const r=t.height||Vi(t.text,t).height;return ot(t.x+.5*t.width,t.y+.5*r)}const e=Vi(t.text,t);return ot(t.x+.5*e.width,t.y+.5*e.height)}return Oa(t)?Kn(t.points):ka(t)?Kn([ko(t),Ro(t)]):void 0};var Yl=t=>/canvas/i.test(t.nodeName),y4=(t,e)=>new Promise((r,a)=>{let n=t,i=!1;const o=()=>{i||(i=!0,Xr(e)&&Promise.resolve().then(()=>e(ma(n.naturalWidth,n.naturalHeight))))};if(n.src||(n=new Image,Be(t)&&new URL(t,location.href).origin!==location.origin&&(n.crossOrigin="anonymous"),n.src=Be(t)?t:URL.createObjectURL(t)),n.complete)return o(),r(n);Xr(e)&&yv(n).then(o).catch(a),n.onload=()=>{o(),r(n)},n.onerror=()=>a(new Error("Failed to load image"))});const z0=new Map([]),Qh=(t,e={})=>new Promise((r,a)=>{const{onMetadata:n=be,onLoad:i=r,onError:o=a,onComplete:s=be}=e;let l=z0.get(t);if(l||(l={loading:!1,complete:!1,error:!1,image:void 0,size:void 0,bus:co()},z0.set(t,l)),l.bus.sub("meta",n),l.bus.sub("load",i),l.bus.sub("error",o),l.bus.sub("complete",s),Yl(t)){const c=t,d=c.cloneNode();l.complete=!0,l.image=d,l.size=_h(c)}if(l.complete)return l.bus.pub("meta",{size:l.size}),l.error?l.bus.pub("error",l.error):l.bus.pub("load",l.image),l.bus.pub("complete"),void(l.bus=co());l.loading||(l.loading=!0,y4(t,c=>{l.size=c,l.bus.pub("meta",{size:c})}).then(c=>{l.image=c,l.bus.pub("load",c)}).catch(c=>{l.error=c,l.bus.pub("error",c)}).finally(()=>{l.complete=!0,l.loading=!1,l.bus.pub("complete"),l.bus=co()}))}),b4=(t,e,r,a)=>t.drawImage(e,r.x,r.x,r.width,r.height,a.x,a.y,a.width,a.height);var Bv=async(t,e,r,a,n=b4)=>{t.save(),t.clip(),await n(t,e,r,a),t.restore()};const t1=(t,e,r,a,n)=>{const i=yr(t);if(a){const s=Jn(Sn(a),Ze);return s.x*=r.width,s.width*=r.width,s.y*=r.height,s.height*=r.height,{srcRect:s,destRect:i}}const o=na(0,0,r.width,r.height);if(e==="contain"){const s=Cn(t,Ta(o));i.width=s.width,i.height=s.height,n?(i.x+=n.x,i.y+=n.y):(i.x+=s.x,i.y+=s.y)}else if(e==="cover"){const s=uo(i,o.width/o.height);i.width=s.width,i.height=s.height,n?(i.x+=n.x,i.y+=n.y):(i.x+=s.x,i.y+=s.y)}else e?(i.width=e.width,i.height=e.height,n&&(i.x+=n.x,i.y+=n.y)):n&&(i.width=r.width,i.height=r.height,i.x+=n.x,i.y+=n.y);return{srcRect:o,destRect:i}},D0=(t,e)=>(e.cornerRadius>0?((r,a,n,i,o,s)=>{i<2*s&&(s=i/2),o<2*s&&(s=o/2),r.beginPath(),r.moveTo(a+s,n),r.arcTo(a+i,n,a+i,n+o,s),r.arcTo(a+i,n+o,a,n+o,s),r.arcTo(a,n+o,a,n,s),r.arcTo(a,n,a+i,n,s),r.closePath()})(t,e.x,e.y,e.width,e.height,e.cornerRadius):t.rect(e.x,e.y,e.width,e.height),t),O0=(t,e)=>(e.backgroundColor&&t.fill(),t),B0=(t,e)=>(e.strokeWidth&&t.stroke(),t);var Uv=async(t,e,r={})=>{const{drawImage:a}=r;if(t.lineWidth=e.strokeWidth?e.strokeWidth:1,t.strokeStyle=e.strokeColor?kn(e.strokeColor):"none",t.fillStyle=e.backgroundColor?kn(e.backgroundColor):"none",t.globalAlpha=e.opacity,e.backgroundImage){let n;n=Yl(e.backgroundImage)?e.backgroundImage:await Qh(e.backgroundImage),D0(t,e),O0(t,e);const{srcRect:i,destRect:o}=t1(e,e.backgroundSize,_h(n),e.backgroundCorners,e.backgroundPosition);return await Bv(t,n,i,o,a),B0(t,e),[]}return D0(t,e),O0(t,e),B0(t,e),[]},v4=async(t,e,r={})=>new Promise(async(a,n)=>{const{drawImage:i}=r;if(t.lineWidth=e.strokeWidth||1,t.strokeStyle=e.strokeColor?kn(e.strokeColor):"none",t.fillStyle=e.backgroundColor?kn(e.backgroundColor):"none",t.globalAlpha=e.opacity,t.ellipse(e.x,e.y,e.rx,e.ry,0,0,2*Math.PI),e.backgroundColor&&t.fill(),e.backgroundImage){let o;try{o=await Qh(e.backgroundImage)}catch(d){n(d)}const s=na(e.x-e.rx,e.y-e.ry,2*e.rx,2*e.ry),{srcRect:l,destRect:c}=t1(s,e.backgroundSize,_h(o),e.backgroundCorners,e.backgroundPosition);await Bv(t,o,l,c,i),e.strokeWidth&&t.stroke(),a([])}else e.strokeWidth&&t.stroke(),a([])}),x4=async(t,e,r)=>{const a=e.width&&e.height?Yi(e):Vi(e.text,e),n={x:e.x,y:e.y,width:a.width,height:a.height};if(Uv(t,de(X(X({},e),n),{options:r})),!e.text.length)return[];const{willRequest:i}=r,o=await Av(e.text,de(X(X({},e),n),{imageWidth:n.width,imageHeight:n.height,willRequest:i}));return t.drawImage(o,e.x-ps,e.y,o.width,o.height),[]},w4=async(t,e)=>new Promise(async r=>{t.lineWidth=e.strokeWidth||1,t.strokeStyle=e.strokeColor?kn(e.strokeColor):"none",t.globalAlpha=e.opacity;let a=ko(e),n=Ro(e);t.moveTo(a.x,a.y),t.lineTo(n.x,n.y),e.strokeWidth&&t.stroke(),r([])}),S4=async(t,e)=>new Promise((r,a)=>{t.lineWidth=e.strokeWidth||1,t.strokeStyle=e.strokeColor?kn(e.strokeColor):"none",t.fillStyle=e.backgroundColor?kn(e.backgroundColor):"none",t.globalAlpha=e.opacity;const{points:n}=e;e.pathClose&&t.beginPath(),t.moveTo(n[0].x,n[0].y);const i=n.length;for(let o=1;o<i;o++)t.lineTo(n[o].x,n[o].y);e.pathClose&&t.closePath(),e.strokeWidth&&t.stroke(),e.backgroundColor&&t.fill(),r([])});const C4=async(t,e,r)=>{const a=$4(e);let n;if(Cv(t,e.rotation,a),((i,o,s,l)=>{(o||s)&&(i.translate(l.x,l.y),i.scale(o?-1:1,s?-1:1),i.translate(-l.x,-l.y))})(t,e.flipX,e.flipY,a),fi(e)?n=Uv:Ba(e)?n=v4:ka(e)?n=w4:Oa(e)?n=S4:Ra(e)&&(n=x4),n){const i=await n(t,e,r);return i.length?[e,...await _v(t,i,r)]:[]}return[]};var _v=async(t,e,r)=>{let a=[];for(const n of e)t.save(),t.beginPath(),a=[...a,...await C4(t,n,r)],t.restore();return a},e1=async(t,e={})=>{const{shapes:r=[],contextBounds:a=t,transform:n=be,drawImage:i,willRequest:o,canvasMemoryLimit:s,computeShape:l=Br,preprocessShape:c=Br}=e;if(!r.length)return t;const d=Yr("canvas");d.width=a.width,d.height=a.height;const p=d.getContext("2d",{willReadFrequently:!0});p.putImageData(t,a.x||0,a.y||0);const m=r.map(wa).map(l).map(c).flat();n(p),await _v(p,m,{drawImage:i,canvasMemoryLimit:s,willRequest:o});const h=p.getImageData(0,0,d.width,d.height);return Wa(d),h},k4=async(t,e={})=>{const{backgroundColor:r,backgroundImage:a}=e,n=!(!r||r&&r[3]===0);if(!a&&!n)return t;const i=Yr("canvas");i.width=t.width,i.height=t.height;const o=i.getContext("2d",{willReadFrequently:!0});if(o.putImageData(t,0,0),o.globalCompositeOperation="destination-over",n&&(o.fillStyle=kn(r),o.fillRect(0,0,i.width,i.height)),a){let l;l=Yl(a)?a:await Qh(a);const{srcRect:c,destRect:d}=t1({x:0,y:0,width:t.width,height:t.height},"cover",{width:l.width,height:l.height});o.drawImage(l,c.x,c.y,c.width,c.height,d.x,d.y,d.width,d.height)}const s=o.getImageData(0,0,i.width,i.height);return Wa(i),s},r1=t=>t.length?t.reduce((e,r)=>((a,n)=>{const i=new Array(20);return i[0]=a[0]*n[0]+a[1]*n[5]+a[2]*n[10]+a[3]*n[15],i[1]=a[0]*n[1]+a[1]*n[6]+a[2]*n[11]+a[3]*n[16],i[2]=a[0]*n[2]+a[1]*n[7]+a[2]*n[12]+a[3]*n[17],i[3]=a[0]*n[3]+a[1]*n[8]+a[2]*n[13]+a[3]*n[18],i[4]=a[0]*n[4]+a[1]*n[9]+a[2]*n[14]+a[3]*n[19]+a[4],i[5]=a[5]*n[0]+a[6]*n[5]+a[7]*n[10]+a[8]*n[15],i[6]=a[5]*n[1]+a[6]*n[6]+a[7]*n[11]+a[8]*n[16],i[7]=a[5]*n[2]+a[6]*n[7]+a[7]*n[12]+a[8]*n[17],i[8]=a[5]*n[3]+a[6]*n[8]+a[7]*n[13]+a[8]*n[18],i[9]=a[5]*n[4]+a[6]*n[9]+a[7]*n[14]+a[8]*n[19]+a[9],i[10]=a[10]*n[0]+a[11]*n[5]+a[12]*n[10]+a[13]*n[15],i[11]=a[10]*n[1]+a[11]*n[6]+a[12]*n[11]+a[13]*n[16],i[12]=a[10]*n[2]+a[11]*n[7]+a[12]*n[12]+a[13]*n[17],i[13]=a[10]*n[3]+a[11]*n[8]+a[12]*n[13]+a[13]*n[18],i[14]=a[10]*n[4]+a[11]*n[9]+a[12]*n[14]+a[13]*n[19]+a[14],i[15]=a[15]*n[0]+a[16]*n[5]+a[17]*n[10]+a[18]*n[15],i[16]=a[15]*n[1]+a[16]*n[6]+a[17]*n[11]+a[18]*n[16],i[17]=a[15]*n[2]+a[16]*n[7]+a[17]*n[12]+a[18]*n[17],i[18]=a[15]*n[3]+a[16]*n[8]+a[17]*n[13]+a[18]*n[18],i[19]=a[15]*n[4]+a[16]*n[9]+a[17]*n[14]+a[18]*n[19]+a[19],i})([...e],r),t.shift()):[],Wv=(t,e)=>{const r=t.width*t.height,a=e.reduce((i,o)=>(o.width>i.width&&o.height>i.height&&(i.width=o.width,i.height=o.height),i),{width:0,height:0}),n=a.width*a.height;return((i,o=2)=>Math.round(i*o)/o)(Math.max(.5,.5+(1-n/r)/2),5)};function We(){}const a1=t=>t;function la(t,e){for(const r in e)t[r]=e[r];return t}function qv(t){return t()}function U0(){return Object.create(null)}function Ar(t){t.forEach(qv)}function Vr(t){return typeof t=="function"}function Ye(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function pn(t,...e){if(t==null)return We;const r=t.subscribe(...e);return r.unsubscribe?()=>r.unsubscribe():r}function oo(t){let e;return pn(t,r=>e=r)(),e}function F(t,e,r){t.$$.on_destroy.push(pn(e,r))}function ga(t,e,r,a){if(t){const n=jv(t,e,r,a);return t[0](n)}}function jv(t,e,r,a){return t[1]&&a?la(r.ctx.slice(),t[1](a(e))):r.ctx}function fa(t,e,r,a){if(t[2]&&a){const n=t[2](a(r));if(e.dirty===void 0)return n;if(typeof n=="object"){const i=[],o=Math.max(e.dirty.length,n.length);for(let s=0;s<o;s+=1)i[s]=e.dirty[s]|n[s];return i}return e.dirty|n}return e.dirty}function $a(t,e,r,a,n,i){if(n){const o=jv(e,r,a,i);t.p(o,n)}}function ya(t){if(t.ctx.length>32){const e=[],r=t.ctx.length/32;for(let a=0;a<r;a++)e[a]=-1;return e}return-1}function Pm(t){const e={};for(const r in t)r[0]!=="$"&&(e[r]=t[r]);return e}function _0(t,e){const r={};e=new Set(e);for(const a in t)e.has(a)||a[0]==="$"||(r[a]=t[a]);return r}function Rt(t,e,r){return t.set(r),e}function Ir(t){return t&&Vr(t.destroy)?t.destroy:We}const Hv=typeof window!="undefined";let Gv=Hv?()=>window.performance.now():()=>Date.now(),n1=Hv?t=>requestAnimationFrame(t):We;const Hs=new Set;function Zv(t){Hs.forEach(e=>{e.c(t)||(Hs.delete(e),e.f())}),Hs.size!==0&&n1(Zv)}function i1(t){let e;return Hs.size===0&&n1(Zv),{promise:new Promise(r=>{Hs.add(e={c:t,f:r})}),abort(){Hs.delete(e)}}}function Pt(t,e){t.appendChild(e)}function Yv(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function R4(t){const e=gt("style");return function(r,a){Pt(r.head||r,a),a.sheet}(Yv(t),e),e.sheet}function st(t,e,r){t.insertBefore(e,r||null)}function it(t){t.parentNode.removeChild(t)}function gt(t){return document.createElement(t)}function Xa(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Hr(t){return document.createTextNode(t)}function ge(){return Hr(" ")}function ia(){return Hr("")}function Mt(t,e,r,a){return t.addEventListener(e,r,a),()=>t.removeEventListener(e,r,a)}function T4(t){return function(e){return e.preventDefault(),t.call(this,e)}}function M4(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function C(t,e,r){r==null?t.removeAttribute(e):t.getAttribute(e)!==r&&t.setAttribute(e,r)}function Ks(t,e){const r=Object.getOwnPropertyDescriptors(t.__proto__);for(const a in e)e[a]==null?t.removeAttribute(a):a==="style"?t.style.cssText=e[a]:a==="__value"?t.value=t[a]=e[a]:r[a]&&r[a].set?t[a]=e[a]:C(t,a,e[a])}function ca(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function W0(t,e){t.value=e==null?"":e}function Xv(t,e,{bubbles:r=!1,cancelable:a=!1}={}){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,r,a,e),n}class _d{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,r,a=null){this.e||(this.is_svg?this.e=Xa(r.nodeName):this.e=gt(r.nodeName),this.t=r,this.c(e)),this.i(a)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let r=0;r<this.n.length;r+=1)st(this.t,this.n[r],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(it)}}function Id(t,e){return new t(e)}const Ad=new Map;let Wl,$d=0;function q0(t,e,r,a,n,i,o,s=0){const l=16.666/a;let c=`{
`;for(let b=0;b<=1;b+=l){const w=e+(r-e)*i(b);c+=100*b+`%{${o(w,1-w)}}
`}const d=c+`100% {${o(r,1-r)}}
}`,p=`__svelte_${function(b){let w=5381,v=b.length;for(;v--;)w=(w<<5)-w^b.charCodeAt(v);return w>>>0}(d)}_${s}`,m=Yv(t),{stylesheet:h,rules:f}=Ad.get(m)||function(b,w){const v={stylesheet:R4(w),rules:{}};return Ad.set(b,v),v}(m,t);f[p]||(f[p]=!0,h.insertRule(`@keyframes ${p} ${d}`,h.cssRules.length));const g=t.style.animation||"";return t.style.animation=`${g?g+", ":""}${p} ${a}ms linear ${n}ms 1 both`,$d+=1,p}function P4(t,e){const r=(t.style.animation||"").split(", "),a=r.filter(e?i=>i.indexOf(e)<0:i=>i.indexOf("__svelte")===-1),n=r.length-a.length;n&&(t.style.animation=a.join(", "),$d-=n,$d||n1(()=>{$d||(Ad.forEach(i=>{const{ownerNode:o}=i.stylesheet;o&&it(o)}),Ad.clear())}))}function Nl(t){Wl=t}function fs(){if(!Wl)throw new Error("Function called outside component initialization");return Wl}function Uo(t){fs().$$.on_mount.push(t)}function I4(t){fs().$$.after_update.push(t)}function ri(t){fs().$$.on_destroy.push(t)}function Oi(){const t=fs();return(e,r,{cancelable:a=!1}={})=>{const n=t.$$.callbacks[e];if(n){const i=Xv(e,r,{cancelable:a});return n.slice().forEach(o=>{o.call(t,i)}),!i.defaultPrevented}return!0}}function Ei(t,e){return fs().$$.context.set(t,e),e}function ta(t){return fs().$$.context.get(t)}function on(t,e){const r=t.$$.callbacks[e.type];r&&r.slice().forEach(a=>a.call(this,e))}const Al=[],xr=[],yd=[],Im=[],Kv=Promise.resolve();let Am=!1;function Jv(){Am||(Am=!0,Kv.then(D))}function Qv(){return Jv(),Kv}function Js(t){yd.push(t)}function Rn(t){Im.push(t)}const Hp=new Set;let Cl,td=0;function D(){const t=Wl;do{for(;td<Al.length;){const e=Al[td];td++,Nl(e),A4(e.$$)}for(Nl(null),Al.length=0,td=0;xr.length;)xr.pop()();for(let e=0;e<yd.length;e+=1){const r=yd[e];Hp.has(r)||(Hp.add(r),r())}yd.length=0}while(Al.length);for(;Im.length;)Im.pop()();Am=!1,Hp.clear(),Nl(t)}function A4(t){if(t.fragment!==null){t.update(),Ar(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Js)}}function Gp(t,e,r){t.dispatchEvent(Xv(`${e?"intro":"outro"}${r}`))}const bd=new Set;let so;function ze(){so={r:0,c:[],p:so}}function De(){so.r||Ar(so.c),so=so.p}function V(t,e){t&&t.i&&(bd.delete(t),t.i(e))}function _(t,e,r,a){if(t&&t.o){if(bd.has(t))return;bd.add(t),so.c.push(()=>{bd.delete(t),a&&(r&&t.d(1),a())}),t.o(e)}else a&&a()}const E4={duration:0};function j0(t,e,r,a){let n=e(t,r),i=a?0:1,o=null,s=null,l=null;function c(){l&&P4(t,l)}function d(m,h){const f=m.b-i;return h*=Math.abs(f),{a:i,b:m.b,d:f,duration:h,start:m.start,end:m.start+h,group:m.group}}function p(m){const{delay:h=0,duration:f=300,easing:g=a1,tick:b=We,css:w}=n||E4,v={start:Gv()+h,b:m};m||(v.group=so,so.r+=1),o||s?s=v:(w&&(c(),l=q0(t,i,m,f,h,g,w)),m&&b(0,1),o=d(v,f),Js(()=>Gp(t,m,"start")),i1(S=>{if(s&&S>s.start&&(o=d(s,f),s=null,Gp(t,o.b,"start"),w&&(c(),l=q0(t,i,o.b,o.duration,0,g,n.css))),o){if(S>=o.end)b(i=o.b,1-i),Gp(t,o.b,"end"),s||(o.b?c():--o.group.r||Ar(o.group.c)),o=null;else if(S>=o.start){const T=S-o.start;i=o.a+o.d*g(T/o.duration),b(i,1-i)}}return!(!o&&!s)}))}return{run(m){Vr(n)?(Cl||(Cl=Promise.resolve(),Cl.then(()=>{Cl=null})),Cl).then(()=>{n=n(),p(m)}):p(m)},end(){c(),o=s=null}}}const t2=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;function e2(t,e){t.d(1),e.delete(t.key)}function _o(t,e){_(t,1,1,()=>{e.delete(t.key)})}function Xi(t,e,r,a,n,i,o,s,l,c,d,p){let m=t.length,h=i.length,f=m;const g={};for(;f--;)g[t[f].key]=f;const b=[],w=new Map,v=new Map;for(f=h;f--;){const I=p(n,i,f),O=r(I);let R=o.get(O);R?a&&R.p(I,e):(R=c(O,I),R.c()),w.set(O,b[f]=R),O in g&&v.set(O,Math.abs(f-g[O]))}const S=new Set,T=new Set;function B(I){V(I,1),I.m(s,d),o.set(I.key,I),d=I.first,h--}for(;m&&h;){const I=b[h-1],O=t[m-1],R=I.key,E=O.key;I===O?(d=I.first,m--,h--):w.has(E)?!o.has(R)||S.has(R)?B(I):T.has(E)?m--:v.get(R)>v.get(E)?(T.add(R),B(I)):(S.add(E),m--):(l(O,o),m--)}for(;m--;){const I=t[m];w.has(I.key)||l(I,o)}for(;h;)B(b[h-1]);return b}function Ja(t,e){const r={},a={},n={$$scope:1};let i=t.length;for(;i--;){const o=t[i],s=e[i];if(s){for(const l in o)l in s||(a[l]=1);for(const l in s)n[l]||(r[l]=s[l],n[l]=1);t[i]=s}else for(const l in o)n[l]=1}for(const o in a)o in r||(r[o]=void 0);return r}function Mn(t){return typeof t=="object"&&t!==null?t:{}}function hn(t,e,r){const a=t.$$.props[e];a!==void 0&&(t.$$.bound[a]=r,r(t.$$.ctx[a]))}function Ut(t){t&&t.c()}function Ot(t,e,r,a){const{fragment:n,after_update:i}=t.$$;n&&n.m(e,r),a||Js(()=>{const o=t.$$.on_mount.map(qv).filter(Vr);t.$$.on_destroy?t.$$.on_destroy.push(...o):Ar(o),t.$$.on_mount=[]}),i.forEach(Js)}function Bt(t,e){const r=t.$$;r.fragment!==null&&(Ar(r.on_destroy),r.fragment&&r.fragment.d(e),r.on_destroy=r.fragment=null,r.ctx=[])}function tr(t,e,r,a,n,i,o,s=[-1]){const l=Wl;Nl(t);const c=t.$$={fragment:null,ctx:[],props:i,update:We,not_equal:n,bound:U0(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:U0(),dirty:s,skip_bound:!1,root:e.target||l.$$.root};o&&o(c.root);let d=!1;if(c.ctx=r?r(t,e.props||{},(p,m,...h)=>{const f=h.length?h[0]:m;return c.ctx&&n(c.ctx[p],c.ctx[p]=f)&&(!c.skip_bound&&c.bound[p]&&c.bound[p](f),d&&function(g,b){g.$$.dirty[0]===-1&&(Al.push(g),Jv(),g.$$.dirty.fill(0)),g.$$.dirty[b/31|0]|=1<<b%31}(t,p)),m}):[],c.update(),d=!0,Ar(c.before_update),c.fragment=!!a&&a(c.ctx),e.target){if(e.hydrate){const p=function(m){return Array.from(m.childNodes)}(e.target);c.fragment&&c.fragment.l(p),p.forEach(it)}else c.fragment&&c.fragment.c();e.intro&&V(t.$$.fragment),Ot(t,e.target,e.anchor,e.customElement),D()}Nl(l)}class er{$destroy(){Bt(this,1),this.$destroy=We}$on(e,r){if(!Vr(r))return We;const a=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return a.push(r),()=>{const n=a.indexOf(r);n!==-1&&a.splice(n,1)}}$set(e){var r;this.$$set&&(r=e,Object.keys(r).length!==0)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Ns=[];function Bs(t,e){return{subscribe:le(t,e).subscribe}}function le(t,e=We){let r;const a=new Set;function n(i){if(Ye(t,i)&&(t=i,r)){const o=!Ns.length;for(const s of a)s[1](),Ns.push(s,t);if(o){for(let s=0;s<Ns.length;s+=2)Ns[s][0](Ns[s+1]);Ns.length=0}}}return{set:n,update:function(i){n(i(t))},subscribe:function(i,o=We){const s=[i,o];return a.add(s),a.size===1&&(r=e(n)||We),i(t),()=>{a.delete(s),a.size===0&&(r(),r=null)}}}}function vr(t,e,r){const a=!Array.isArray(t),n=a?[t]:t,i=e.length<2;return Bs(r,o=>{let s=!1;const l=[];let c=0,d=We;const p=()=>{if(c)return;d();const h=e(a?l[0]:l,o);i?o(h):d=Vr(h)?h:We},m=n.map((h,f)=>pn(h,g=>{l[f]=g,c&=~(1<<f),s&&p()},()=>{c|=1<<f}));return s=!0,p(),function(){Ar(m),d()}})}var r2=t=>t.reduce((e,r)=>Object.assign(e,r),{});const zs=t=>({updateValue:t}),ui=t=>({defaultValue:t}),a2=t=>({store:t}),ed=t=>({store:(e,r)=>vr(...t(r))}),rd=t=>({store:(e,r)=>{const[a,n,i=()=>!1]=t(r);let o,s=!0;return vr(a,(l,c)=>{n(l,d=>{!s&&i(o,d)||(o=d,s=!1,c(d))})})}}),Zp=t=>({store:(e,r)=>{const[a,n={},i]=t(r);let o=[];const s={},l=h=>a(h,s),c=h=>{(o.length||h.length)&&(o=h,d())},d=()=>{const h=o.map(l);i&&h.sort(i),o=[...h],m(h)};Object.entries(n).map(([h,f])=>f.subscribe(g=>{s[h]=g,g&&d()}));const{subscribe:p,set:m}=le(e||[]);return{set:c,update:h=>c(h(o)),subscribe:p}}});var H0=t=>{const e={},r={};return t.forEach(([a,...n])=>{const i=r2(n),o=e[a]=((l,c,d)=>{const{store:p=T=>le(T),defaultValue:m=be,updateValue:h}=d,f=p(m(),c,l),{subscribe:g,update:b=be}=f;let w;const v=T=>{let B=!0;w&&w(),w=g(I=>{if(B)return B=!1;T(I),w(),w=void 0})},S=h?h(l):Br;return f.set=T=>b(B=>S(T,B,v)),f.defaultValue=m,f})(r,e,i),s={get:()=>oo(o),set:o.set};Object.defineProperty(r,a,s)}),{stores:e,accessors:r}},V4=[["src",a2(()=>{let t;const{subscribe:e,set:r}=le(),a=n=>{t!==n&&(t=n,r(t))};return{set:a,subscribe:e,update:n=>a(n(t))}})],["imageReader"],["imageWriter"],["imageScrambler"],["imageRedactionRendering",ui(()=>"pixelated")],["images",ui(()=>[])],["shapePreprocessor"],["willRequestResource"],["willRequest"]],n2=t=>t.charAt(0).toUpperCase()+t.slice(1),Ed=(t,e)=>{Object.keys(e).forEach(r=>{const a=Xr(e[r])?{value:e[r],writable:!1}:e[r];Object.defineProperty(t,r,a)})};const G0=(t,e)=>{let r,a,n,i,o,s,l,c,d,p;const m=e.length;for(r=0;r<m;r++)if(a=e[r],n=e[r+1>m-1?0:r+1],i=a.x-t.x,o=a.y-t.y,s=n.x-t.x,l=n.y-t.y,c=i-s,d=o-l,p=c*o-d*i,p<-1e-5)return!1;return!0};var Z0=(t,e)=>{const r=fv(e),a=Or();$i(t).forEach(i=>{pa(i,a),G0(i,e)||r.forEach(o=>{const s=Math.atan2(o.start.y-o.end.y,o.start.x-o.end.x),l=1e4*Math.sin(Math.PI-s),c=1e4*Math.cos(Math.PI-s),d=ot(i.x+l,i.y+c),p=Wh(uv(o),1e4),m=qh(Oo(i,d),p);m&&pa(a,ha(Fe(m),i))})});const n=yr(t);return pa(n,a),!!$i(n).every(i=>G0(i,e))&&(Od(t,n),!0)},i2=(t,e)=>{const r=$i(t),a=$v(e,5),n=Cr(t),i=[];r.forEach(l=>{const c=((p,m)=>{if(m===0)return p;const h=ot(p.start.x-p.end.x,p.start.y-p.end.y),f=jn(h),g=mn(f,m);return p.end.x+=g.x,p.end.y+=g.y,p})(Oo(Fe(n),Fe(l)),1e6);let d=!1;a.map(uv).forEach(p=>{const m=qh(c,p);m&&!d&&(i.push(m),d=!0)})});const o=Vn(i[0],i[2])<Vn(i[1],i[3])?[i[0],i[2]]:[i[1],i[3]],s=Sn(o);return s.width<t.width&&(Od(t,s),!0)},o2=(t,e,r={x:0,y:0})=>{const a=nn(t),n=Cr(a),i=mv(a,r,n).map(s=>xn(s,e,n)),o=Sn(i);return i.map(s=>ha(s,o))},Us=(t,e=0,r=Ta(t))=>{let a,n;if(e!==0){const i=Math.atan2(1,r),o=Math.sign(e)*e,s=o%Math.PI,l=o%Qn;let c;c=s>mi&&s<Qn+mi?l>mi?o:Qn-l:l>mi?Qn-l:o;const d=Math.min(Math.abs(t.height/Math.sin(i+c)),Math.abs(t.width/Math.cos(i-c)));a=Math.cos(i)*d,n=a/r}else a=t.width,n=a/r,n>t.height&&(n=t.height,a=n*r);return ma(a,n)},L4=(t,e,r,a,n,i,o,s)=>{const l=wn(o),c=wn(s),d=Ze(Math.max(e.width/c.width,e.height/c.height)),p=Ze(Math.min(e.width/l.width,e.height/l.height)),m=yr(e);if(p<1||d>1){const h=Cr(t),f=Cr(e),g=p<1?p:d,b=(f.x+h.x)/2,w=(f.y+h.y)/2,v=m.width/g,S=m.height/g;pv(m,b-.5*v,w-.5*S,v,S)}return i?(((h,f,g=0,b=Or(),w)=>{if(Mr(g)&&g!==0||b.x||b.y){const v=Ta(h),S=o2(f,g,b),T=Us(f,g,v);if(!(h.width<T.width&&h.height<T.height)){const B=.5*h.width-.5*T.width,I=.5*h.height-.5*T.height;h.width>T.width&&(h.width=T.width,h.x+=B),h.height>T.height&&(h.height=T.height,h.y+=I)}Z0(h,S),i2(h,S)&&Z0(h,S)}else{const v=Ta(h);h.width=Math.min(h.width,f.width),h.height=Math.min(h.height,f.height),h.x=Math.max(h.x,0),h.x+h.width>f.width&&(h.x-=h.x+h.width-f.width),h.y=Math.max(h.y,0),h.y+h.height>f.height&&(h.y-=h.y+h.height-f.height);const S=Cr(h),T=Cn(h,v);T.width=Math.max(w.width,T.width),T.height=Math.max(w.height,T.height),T.x=S.x-.5*T.width,T.y=S.y-.5*T.height,Od(h,T)}})(m,r,a,n,l),{crop:m}):{crop:m}},o1=(t,e,r)=>{const a=nn(t),n=Cr(a),i=Za(a,r,n),o=Cr(_l(Sn(i))),s=Cr(e),l=xn(s,-r,o),c=ha(l,o),d=qn(pa(n,c),Ze);return na(d.x-.5*e.width,d.y-.5*e.height,e.width,e.height)},Nr=(t,e,r)=>Math.max(e,Math.min(t,r));const Yp=["cropLimitToImage","cropMinSize","cropMaxSize","cropAspectRatio","flipX","flipY","rotation","crop","colorMatrix","convolutionMatrix","gamma","vignette","redaction","annotation","decoration","frame","backgroundColor","backgroundImage","targetSize","metadata","trim","volume"],Em=t=>ea(t)?t.map(Em):Zh(t)||Zl(t)?t:gs(t)?X({},t):t,Xp=t=>t.map(e=>Object.entries(e).reduce((r,[a,n])=>(a.startsWith("_")||(r[a]=n),r),{})),F4=(t,e)=>t===e;var mo=(t,e,r=F4)=>{if(t.length!==e.length)return!1;for(let a=0;a<t.length;a++)if(!r(t[a],e[a]))return!1;return!0};const Y0=(t,e,r)=>{const a=qn(Cr(t),d=>Ze(d,8)),n=nn(e),i=Cr(n),o=Za(n,r,i),s=qn(Zs(Sn(o)),d=>Ze(d,8)),l=Math.abs(s.x-a.x),c=Math.abs(s.y-a.y);return l<1&&c<1},N4=(t,e,r,a,n)=>{if(!n)return[-1/0,1/0];const i=Math.max(r.width/a.width,r.height/a.height),o=ma(a.width*i,a.height*i),s=(l=o,Math.sqrt(l.width*l.width+l.height*l.height));var l;if(s<Math.min(t.width,t.height))return[-1/0,1/0];const c=e?t.height:t.width,d=e?t.width:t.height,p=Math.acos(o.height/s),m=p-Math.acos(d/s),h=Math.asin(c/s)-p;if(Number.isNaN(m)&&Number.isNaN(h))return[-1/0,1/0];const f=Number.isNaN(m)?h:Number.isNaN(h)?m:Math.min(m,h);return[-f,f]},Kp=(t,e)=>{const{context:r,props:a}=e;return t._isFormatted||((t=Lv(t))._isFormatted=!0,Object.assign(t,a)),t._isDraft||!Ud(t)||t._context&&Ni(r,t._context)||(Dv(t,r),t._context=X({},r)),t};var s1=[["file"],["size"],["loadState"],["processState"],["aspectRatio",ed(({size:t})=>[t,e=>e?Ta(e):void 0])],["perspectiveX",ui(()=>0)],["perspectiveY",ui(()=>0)],["perspective",ed(({perspectiveX:t,perspectiveY:e})=>[[t,e],([r,a])=>({x:r,y:a})])],["rotation",ui(()=>0),zs(t=>(e,r,a)=>{if(e===r)return e;const{loadState:n,size:i,rotationRange:o,cropMinSize:s,cropMaxSize:l,crop:c,perspective:d,cropLimitToImage:p,cropOrigin:m}=t;if(!c||!n||!n.beforeComplete)return e;const h=p&&((b,w,v)=>{const S=Us(w,v,Ta(b));return Ul(lo(S,Math.round),lo(wn(b),Math.round))})(c,i,r),f=p&&Y0(c,i,r),g=((b,w,v,S,T,B,I,O,R,E)=>{const N=wn(R),U=wn(E);I&&(U.width=Math.min(E.width,T.width),U.height=Math.min(E.height,T.height));let x=!1;const j=(G,Q)=>{const Z=o1(T,S,G),ct=nn(T),lt=Cr(ct),xt=mv(ct,B,lt),yt=ha(Fe(lt),h0(xt)),bt=xn(Cr(Z),Q,lt),qt=ha(Fe(lt),bt);xt.forEach(W=>xn(W,Q,lt));const Y=Sn(xt),et=h0(xt),Vt=pa(ha(ha(et,qt),Y),yt),z=na(Vt.x-.5*Z.width,Vt.y-.5*Z.height,Z.width,Z.height);if(O&&Ya(z,O.width/z.width),I){const W=o2(T,Q,B);i2(z,W)}const vt=Ze(Math.min(z.width/N.width,z.height/N.height),8),St=Ze(Math.max(z.width/U.width,z.height/U.height),8);return(vt<1||St>1)&&Ze(Math.abs(Q-G))===Ze(Math.PI/2)&&!x?(x=!0,j(b,b+Math.sign(Q-G)*Math.PI)):{rotation:Q,crop:Jn(z,W=>Ze(W,8))}},A=Math.sign(w)*Math.round(Math.abs(w)/Qn)*Qn,P=Nr(w,A+v[0],A+v[1]);return j(b,P)})(r,e,o,c,i,d,p,m,s,l);if(h&&f){const b=Us(i,e,Ta(g.crop));g.crop.x+=.5*g.crop.width,g.crop.y+=.5*g.crop.height,g.crop.x-=.5*b.width,g.crop.y-=.5*b.height,g.crop.width=b.width,g.crop.height=b.height}return a(()=>{t.crop=Jn(g.crop,b=>Ze(b,8))}),g.rotation})],["flipX",ui(()=>!1)],["flipY",ui(()=>!1)],["flip",ed(({flipX:t,flipY:e})=>[[t,e],([r,a])=>({x:r,y:a})])],["isRotatedSideways",rd(({rotation:t})=>[[t],([e],r)=>r(Gi(e)),(e,r)=>e!==r])],["crop",zs(t=>(e,r=e)=>{const{loadState:a,size:n,cropMinSize:i,cropMaxSize:o,cropLimitToImage:s,cropAspectRatio:l,rotation:c,perspective:d}=t;if(!e&&!r||!a||!a.beforeComplete)return e;e||(e=nn(Us(n,c,l||Ta(n))));const p=L4(r,e,n,c,d,s,i,o),m=Jn(p.crop,h=>Ze(h,8));return Ni(r,m)?r:m})],["cropAspectRatio",zs(t=>(e,r)=>{const{loadState:a,crop:n,size:i,rotation:o,cropLimitToImage:s}=t,l=(d=>{if(d){if(/:/.test(d)){const[p,m]=d.split(":");return p/m}return parseFloat(d)}})(e);if(!l)return;if(!n||!a||!a.beforeComplete)return l;const c=r?Math.abs(e-r):1;if(Y0(n,i,o)&&s&&c>=.1){const d=((p,m)=>{const h=p.width,f=p.height;return Gi(m)&&(p.width=f,p.height=h),p})(wn(i),o);t.crop=Jn(Cn(nn(d),e),Ze)}else{const d={width:n.height*l,height:n.height},p=.5*(n.width-d.width),m=.5*(n.height-d.height);t.crop=Jn(na(n.x+p,n.y+m,d.width,d.height),Ze)}return l})],["cropOrigin"],["cropMinSize",ui(()=>({width:1,height:1}))],["cropMaxSize",ui(()=>({width:32768,height:32768}))],["cropLimitToImage",ui(()=>!0),zs(t=>(e,r,a)=>{const{crop:n}=t;return n&&!r&&e&&a(()=>t.crop=yr(t.crop)),e})],["cropSize",rd(({crop:t})=>[[t],([e],r)=>{e&&r(ma(e.width,e.height))},(e,r)=>Ul(e,r)])],["cropRectAspectRatio",ed(({cropSize:t})=>[[t],([e],r)=>{e&&r(Ze(Ta(e),5))}])],["cropRange",rd(({size:t,rotation:e,cropRectAspectRatio:r,cropMinSize:a,cropMaxSize:n,cropLimitToImage:i})=>[[t,e,r,a,n,i],([o,s,l,c,d,p],m)=>{!o||m(((h,f,g,b,w,v)=>{const S=wn(b),T=wn(w);return v?[S,lo(Us(h,f,g),Math.round)]:[S,T]})(o,s,l,c,d,p))},(o,s)=>mo(o,s)])],["rotationRange",rd(({size:t,isRotatedSideways:e,cropMinSize:r,cropSize:a,cropLimitToImage:n})=>[[t,e,r,a,n],([i,o,s,l,c],d)=>{!i||!l||d(N4(i,o,s,l,c))},(i,o)=>mo(i,o)])],["backgroundColor",zs(()=>t=>((e=[0,0,0,0],r=1)=>e.length===4?e:[...e,r])(t))],["backgroundImage"],["targetSize"],["colorMatrix"],["convolutionMatrix"],["gamma"],["noise"],["vignette"],["duration"],["minDuration",ui(()=>1)],["maxDuration",ui(()=>1/0)],["trim"],["volume"],["redaction",Zp(({size:t})=>[Kp,{context:t}])],["annotation",Zp(({size:t})=>[Kp,{context:t}])],["decoration",Zp(({crop:t})=>[Kp,{context:t}])],["frame",zs(()=>t=>{if(!t)return;const e={frameStyle:void 0,x:0,y:0,width:"100%",height:"100%",disableStyle:["backgroundColor","strokeColor","strokeWidth"]};return Be(t)?e.frameStyle=t:Object.assign(e,t),e})],["metadata"],["state",a2((t,e,r)=>{const a=Yp.map(l=>e[l]);let n=!1;const i=le({}),{subscribe:o}=vr([...a,i],(l,c)=>{if(n)return;const d=Yp.reduce((p,m,h)=>(p[m]=Em(l[h]),p),{});d.crop&&Jn(d.crop,Math.round),d.redaction=d.redaction&&Xp(d.redaction),d.annotation=d.annotation&&Xp(d.annotation),d.decoration=d.decoration&&Xp(d.decoration),c(d)}),s=l=>{l&&(n=!0,r.cropOrigin=void 0,Yp.filter(c=>Ee(l,c)).forEach(c=>{const d=l[c];r[c]=d===null?void 0:Em(d)}),n=!1,i.set({}))};return{set:s,update:l=>s(l(null)),subscribe:o}})]],X0=async(t,e,r={},a)=>{const{ontaskstart:n,ontaskprogress:i,ontaskend:o,token:s}=a;let l=!1;const c={cancel:be};s.cancel=()=>{l=!0,c.cancel()};for(const[d,p]of e.entries()){if(l)return;const[m,h]=p;n(d,h);try{t=await m(t,de(X({},r),{taskCancelToken:c}),f=>i(d,h,f))}catch(f){throw l=!0,f}o(d,h)}return t};const s2=["loadstart","loadabort","loaderror","loadprogress","load","processstart","processabort","processerror","processprogress","process"],z4=["flip","cropOrigin","isRotatedSideways","perspective","perspectiveX","perspectiveY","cropRange"],D4=s1.map(([t])=>t).filter(t=>!z4.includes(t)),Jp=t=>"image"+n2(t),K0=t=>Ee(t,"crop");var l2=()=>{const{stores:t,accessors:e}=H0(V4),{sub:r,pub:a}=co(),n=()=>e.images?e.images[0]:{};let i={};const o={};D4.forEach(g=>{Object.defineProperty(e,Jp(g),{get:()=>{const b=n();if(b)return b.accessors[g]},set:b=>{i[Jp(g)]=b,o[Jp(g)]=b;const w=n();w&&(w.accessors[g]=b)}})});const s=()=>e.images&&e.images[0],l=t.src.subscribe(g=>{if(!g)return e.images=[];e.imageReader&&(e.images.length&&(i={}),d(g))}),c=t.imageReader.subscribe(g=>{g&&(e.images.length||e.src&&d(e.src))}),d=g=>{Promise.resolve().then(()=>m(g,i)).catch(()=>{})};let p;const m=(g,b={})=>new Promise((w,v)=>{let S=s();const T=!(b.cropLimitToImage===!1||b.imageCropLimitToImage===!1||o.imageCropLmitedToImage===!1),B=b.cropMinSize||b.imageCropMinSize||o.imageCropMinSize,I=T?B:S&&S.accessors.cropMinSize,O=b.minDuration||b.imageMinDuration;S&&f(),S=(({minSize:N={width:1,height:1},minDuration:U=0}={})=>{const{stores:x,accessors:j}=H0(s1),{pub:A,sub:P}=co(),G=(Q,Z)=>{const ct=()=>j[Q]||{},lt=bt=>{j[Q]=de(X(X({},ct()),bt),{timeStamp:Date.now()})},xt=()=>ct().error,yt=bt=>{xt()||(lt({error:bt}),A(Z+"error",X({},ct())))};return{start(){A(Z+"start")},onabort(){lt({abort:!0}),A(Z+"abort",X({},ct()))},ontaskstart(bt,qt){xt()||(lt({index:bt,task:qt,taskProgress:void 0,taskLengthComputable:void 0}),A(Z+"taskstart",X({},ct())))},ontaskprogress(bt,qt,Y){xt()||(lt({index:bt,task:qt,taskProgress:Y.loaded/Y.total,taskLengthComputable:Y.lengthComputable}),A(Z+"taskprogress",X({},ct())),A(Z+"progress",X({},ct())))},ontaskend(bt,qt){xt()||(lt({index:bt,task:qt}),A(Z+"taskend",X({},ct())))},ontaskerror(bt){yt(bt)},error(bt){yt(bt)},beforeComplete(bt){xt()||(lt({beforeComplete:!0}),A("before"+Z,bt))},complete(bt){xt()||(lt({complete:!0}),A(Z,bt))}}};return Ed(j,{read:(Q,{reader:Z},ct={})=>{if(!Z)return;Object.assign(j,{file:void 0,size:void 0,loadState:void 0});let lt={cancel:be},xt=!1;const yt=G("loadState","load"),bt=X({token:lt},yt),qt={src:Q,size:void 0,dest:void 0,duration:void 0};return Promise.resolve().then(async()=>{try{if(yt.start(),xt)return yt.onabort();const Y=await X0(qt,Z,ct,bt);if(xt)return yt.onabort();const{size:et,duration:Vt,dest:z}=Y||{};if(!et||!et.width||!et.height)throw new Fl("Image size missing","IMAGE_SIZE_MISSING",Y);if(Vt>0&&Vt<U)throw new Fl("Video too short","VIDEO_TOO_SHORT",de(X({},Y),{minDuration:U}));if(et.width<N.width||et.height<N.height)throw new Fl("Image too small","IMAGE_TOO_SMALL",de(X({},Y),{minWidth:N.width,minHeight:N.height}));Object.assign(j,{file:z,size:et,duration:Vt}),yt.beforeComplete(Y),yt.complete(Y)}catch(Y){yt.error(Y)}finally{lt=void 0}}),()=>{xt=!0,lt&&lt.cancel(),yt.onabort()}},write:(Q,Z)=>{if(!j.loadState.complete)return;j.processState=void 0;const ct=G("processState","process"),lt={src:j.file,imageState:j.state,dest:void 0};if(Xr(Q)&&(Q=Q(j.file,j.state)),!Q)return ct.start(),void ct.complete(lt);let xt={cancel:be},yt=!1;const bt=Z,qt=X({token:xt},ct);return Promise.resolve().then(async()=>{try{if(ct.start(),yt)return ct.onabort();const Y=await X0(lt,Q,bt,qt);if(yt)return ct.onabort();ct.complete(Y)}catch(Y){ct.error(Y)}finally{xt=void 0}}),()=>{yt=!0,xt&&xt.cancel()}},on:P}),{accessors:j,stores:x}})({minSize:I,minDuration:O}),s2.map(N=>{return S.accessors.on(N,(U=N,x=>a(U,x)));var U});const R=()=>{i={},E.forEach(N=>N())},E=[];E.push(S.accessors.on("loaderror",N=>{R(),v(N)})),E.push(S.accessors.on("loadabort",()=>{R(),v({name:"AbortError"})})),E.push(S.accessors.on("load",N=>{p=void 0,R(),w(N)})),E.push(S.accessors.on("beforeload",()=>((N,U)=>{if(K0(U))return void(e.imageState=U);if(!U.imageCrop){const A=N.accessors.size,P=U.imageRotation||0,G=dv(wn(A),P),Q=nn(G);Q.width=Ze(Math.abs(Q.width),6),Q.height=Ze(Math.abs(Q.height),6);const Z=U.imageCropAspectRatio||(U.imageCropLimitToImage?Ta(A):Ta(Q));let ct;U.imageCropLimitToImage?ct=Cn(Q,Z):(ct=uo(Q,Z),ct.x=(A.width-ct.width)/2,ct.y=(A.height-ct.height)/2),U.imageCrop=ct}const x=["imageCropLimitToImage","imageCrop","imageCropAspectRatio","imageRotation"];x.filter(A=>Ee(U,A)).forEach(A=>{e[A]=U[A],delete U[A]});const j=Object.keys(U).filter(A=>!x.includes(A)).reduce((A,P)=>(A[P]=U[P],A),{});Object.assign(e,j)})(S,b))),e.images=[S],b.imageReader&&(e.imageReader=b.imageReader),b.imageWriter&&(e.imageWriter=b.imageWriter),p=S.accessors.read(g,{reader:e.imageReader},{willRequest:e.willRequest})});let h;const f=()=>{const g=s();g&&(p&&p(),g.accessors.loadState=void 0,e.images=[])};return Object.defineProperty(e,"stores",{get:()=>t}),Ed(e,{on:r,loadImage:m,abortLoadImage:()=>{p&&p(),e.images=[]},editImage:(g,b)=>new Promise((w,v)=>{m(g,b).then(()=>{const{images:S}=e,T=S[0],B=()=>{I(),O()},I=T.accessors.on("processerror",R=>{B(),v(R)}),O=T.accessors.on("process",R=>{B(),w(R)})}).catch(v)}),removeImage:f,processImage:(g,b)=>new Promise((w,v)=>{try{const S=[],T=()=>{h=void 0,S.forEach(B=>B())};(async()=>{if((I=>Be(I)||Xs(I)||Ys(I))(g))try{await m(g,b)}catch(I){v(I)}else g&&(K0(g)?e.imageState=g:Object.assign(e,g));const B=s();if(!B)return v("no image");S.push(B.accessors.on("processerror",I=>{T(),v(I)})),S.push(B.accessors.on("processabort",()=>{T(),v({name:"AbortError"})})),S.push(B.accessors.on("process",I=>{T(),w(I)})),h=B.accessors.write(e.imageWriter,{redactionRenderStyle:e.imageRedactionRendering,shapePreprocessor:e.shapePreprocessor||Br,imageScrambler:e.imageScrambler,willRequest:e.willRequest,willRequestResource:e.willRequestResource})})()}catch(S){v(S)}}),abortProcessImage:()=>{const g=s();g&&(h&&h(),g.accessors.processState=void 0)},destroy:()=>{l&&l(),c&&c()}}),e};const O4=(t,e)=>{const{processImage:r}=l2();return r(t,e)};var c2=()=>po()?zi()?/15_|16_/.test(navigator.userAgent)?14745600:16777216:/15_/.test(navigator.userAgent)?16777216:1/0:1/0,d2=(t,e)=>Object.keys(t).filter(r=>!e.includes(r)).reduce((r,a)=>(r[a]=t[a],r),{}),u2=t=>new Promise(e=>{if(t.duration===1/0)return t.ontimeupdate=()=>{t.ontimeupdate=void 0,e(t)},void(t.currentTime=Number.MAX_SAFE_INTEGER);e(t)});const l1=({imageDataResizer:t,canvasMemoryLimit:e}={})=>async(r,a,n,i)=>{n.width=Math.max(n.width,1),n.height=Math.max(n.height,1),i.width=Math.max(i.width,1),i.height=Math.max(i.height,1);const{dest:o}=await O4(a,{imageReader:$2(),imageWriter:y2({format:"canvas",targetSize:de(X({},i),{upscale:!0}),imageDataResizer:t,canvasMemoryLimit:e}),imageCrop:n});r.drawImage(o,i.x,i.y,i.width,i.height),Wa(o)},Qr=(t,e=(...a)=>a,r)=>async(a,n,i)=>{i(Os(0,!1));let o=!1;const s=await t(...e(a,n,l=>{o=!0,i(l)}));return r&&r(a,s),o||i(Os(1,!1)),a},B4=({willRequest:t,srcProp:e="src",destProp:r="dest"}={})=>[Qr(HS,(a,n,i)=>[a[e],i,de(X({},n),{willRequest:t})],(a,n)=>a[r]=n),"any-to-file"],U4=({srcProp:t="dest",destProp:e="dest"}={})=>[Qr(async r=>{if(/octet-stream/.test(r.type)){console.warn(`Pintura: File has unknown mime type "${r.type}", make sure your server sets the correct Content-Type header.`);let a="image";const n=await Gh(r);/video/i.test(n.nodeName)&&(a="video");const i={type:a+"/unknown"};return Zl(r)?new File([r],r.name,de(X({},i),{lastModified:r.lastModified})):new Blob([r],i)}return r},r=>[r[t]],(r,a)=>r[e]=a),"any-to-file"],p2=({srcProp:t="src",destProp:e="size"}={})=>[Qr(vv,r=>[r[t]],(r,a)=>r[e]=a),"read-image-size"],_4=async t=>{const e=await Gh(t);if(Rd(e))return await(r=>new Promise((a,n)=>{const i=()=>{u2(r).then(()=>{a(r.duration)})};if(r.readyState>=1)return i();r.onloadedmetadata=i,r.onerror=()=>n(r.error)}))(e)},W4=({srcProp:t="src",destProp:e="duration"}={})=>[Qr(_4,r=>[r[t]],(r,a)=>r[e]=a),"read-media-duration"],m2=({srcSize:t="size",srcOrientation:e="orientation",destSize:r="size"}={})=>[Qr(GS,a=>[a[t],a[e]],(a,n)=>a[r]=n),"image-size-match-orientation"],h2=({srcProp:t="src",destProp:e="head"}={})=>[Qr((r,a)=>Sv(r)?tv(r,a):void 0,r=>[r[t],[0,262144],onprogress],(r,a)=>r[e]=a),"read-image-head"],g2=({srcProp:t="head",destProp:e="orientation"}={})=>[Qr(zh,r=>[r[t],274],(r,a=1)=>r[e]=a),"read-exif-orientation-tag"],q4=({srcProp:t="head"}={})=>[Qr(zh,e=>[e[t],274,1]),"clear-exif-orientation-tag"],j4=({srcImageSize:t="size",srcCanvasSize:e="imageData",srcImageState:r="imageState",destImageSize:a="size",destScalar:n="scalar"}={})=>[Qr((i,o)=>[Math.min(o.width/i.width,o.height/i.height),Yi(o)],i=>[i[t],i[e],i[r]],(i,[o,s])=>{i[n]=o,i[a]=s}),"calculate-canvas-scalar"],H4=({srcProp:t="src",destProp:e="imageData",canvasMemoryLimit:r}={})=>[Qr(ov,a=>[a[t],r],(a,n)=>a[e]=n),"blob-to-image-data"],G4=({srcImageData:t="imageData",srcOrientation:e="orientation"}={})=>[Qr(rv,r=>[r[t],r[e]],(r,a)=>r.imageData=a),"image-data-match-orientation"],Z4=({srcImageData:t="imageData",srcImageState:e="imageState"}={})=>[Qr(k4,r=>[r[t],{backgroundColor:r[e].backgroundColor,backgroundImage:r[e].backgroundImage}],(r,a)=>r.imageData=a),"image-data-fill"],Y4=({srcImageData:t="imageData",srcImageState:e="imageState",destScalar:r="scalar"}={})=>[Qr(YS,a=>{const n=a[r];let{crop:i}=a[e];return i&&n!==1&&(i=Ya(yr(i),n,Or())),[a[t],{crop:i,rotation:a[e].rotation,flipX:a[e].flipX,flipY:a[e].flipY}]},(a,n)=>a.imageData=n),"image-data-crop"],X4=({targetSize:t={width:void 0,height:void 0,fit:void 0,upscale:void 0},imageDataResizer:e,srcProp:r="imageData",srcImageState:a="imageState",destImageScaledSize:n="imageScaledSize"})=>[Qr(KS,i=>{const o=Math.min(t.width||Number.MAX_SAFE_INTEGER,i[a].targetSize&&i[a].targetSize.width||Number.MAX_SAFE_INTEGER),s=Math.min(t.height||Number.MAX_SAFE_INTEGER,i[a].targetSize&&i[a].targetSize.height||Number.MAX_SAFE_INTEGER);return[i[r],{width:o,height:s,fit:t.fit||"contain",upscale:(l=i[a],!!(l.targetSize&&l.targetSize.width||l.targetSize&&l.targetSize.height)||t.upscale||!1)},e];var l},(i,o)=>{Ul(i.imageData,o)||(i[n]=Yi(o)),i.imageData=o}),"image-data-resize"],K4=({srcImageData:t="imageData",srcImageState:e="imageState",destImageData:r="imageData"}={})=>[Qr(r4,a=>{const{colorMatrix:n}=a[e],i=n&&Object.keys(n).map(o=>n[o]).filter(Boolean);return[a[t],{colorMatrix:i&&r1(i),convolutionMatrix:a[e].convolutionMatrix,gamma:a[e].gamma,noise:a[e].noise,vignette:a[e].vignette}]},(a,n)=>a[r]=n),"image-data-filter"],J4=({srcImageData:t="imageData",srcImageState:e="imageState",destImageData:r="imageData",destScalar:a="scalar"}={})=>[Qr(async(n,i,o,s,l,c)=>{if(!i||!s.length)return n;let d;try{const g={dataSizeScalar:Wv(n,s)};o&&o[3]>0&&(g.backgroundColor=[...o]),d=await i(n,g)}catch{}const p=Yr("canvas");p.width=n.width,p.height=n.height;const m=p.getContext("2d",{willReadFrequently:!0});if(m.putImageData(n,0,0),c==="auto"){const g=Math.sqrt(n.width*n.height);m.filter=`blur(${Math.round(g/100)}px)`}const h=new Path2D;s.forEach(g=>{const b=na(g.x,g.y,g.width,g.height);Eo(b,l);const w=Za(yr(b),g.rotation),v=new Path2D;w.forEach((S,T)=>{if(T===0)return v.moveTo(S.x,S.y);v.lineTo(S.x,S.y)}),h.addPath(v)}),m.clip(h,"nonzero"),m.imageSmoothingEnabled=!1,m.drawImage(d,0,0,p.width,p.height),Wa(d);const f=m.getImageData(0,0,p.width,p.height);return Wa(p),f},(n,{imageScrambler:i,redactionRenderStyle:o})=>[n[t],i,n[e].backgroundColor,n[e].redaction,n[a],o],(n,i)=>n[r]=i),"image-data-redact"],Q4=({srcImageData:t="imageData",srcSize:e="size",srcImageState:r="imageState",destImageData:a="imageData",destImageScaledSize:n="imageScaledSize",destScalar:i="scalar",imageDataResizer:o,canvasMemoryLimit:s}={})=>[Qr(e1,(l,{shapePreprocessor:c,willRequestResource:d,willRequest:p})=>{const{annotation:m}=l[r];if(!m.length)return[l[t]];const h=l[i],{crop:f}=l[r],g=l[e];let b=h;const w=l[n];w&&(b=Math.min(w.width/f.width,w.height/f.height));const v={width:g.width/h,height:g.height/h};return[l[t],{shapes:m,computeShape:S=>(S=Ga(S,v),S=d2(S,["left","right","top","bottom"]),S=Ov(S,b)),transform:S=>{const T=l[e],{rotation:B=0,flipX:I,flipY:O,cropLimitToImage:R}=l[r],E=l[i],{crop:N=nn(T)}=l[r],U=l[n],x=U?Math.min(U.width/N.width,U.height/N.height):1,j={width:T.width/E*x,height:T.height/E*x},A=BS(j,B),P=A.width,G=A.height,Q=.5*j.width-.5*P,Z=.5*j.height-.5*G,ct=Zs(j);S.translate(-Q,-Z),S.translate(-N.x*x,-N.y*x),S.translate(ct.x,ct.y),S.rotate(B),S.translate(-ct.x,-ct.y),S.scale(I?-1:1,O?-1:1),S.translate(I?-j.width:0,O?-j.height:0),R&&(S.rect(0,0,j.width,j.height),S.clip())},drawImage:l1({imageDataResizer:o,canvasMemoryLimit:s}),preprocessShape:S=>c(S,X({isPreview:!1},l[r])),canvasMemoryLimit:s,willRequest:p||d}]},(l,c)=>l[a]=c),"image-data-annotate"],t3=({srcImageData:t="imageData",srcImageState:e="imageState",destImageData:r="imageData",destImageScaledSize:a="imageScaledSize",imageDataResizer:n,canvasMemoryLimit:i,destScalar:o="scalar"}={})=>[Qr(e1,(s,{shapePreprocessor:l,willRequestResource:c,willRequest:d})=>{let{decoration:p}=s[e];if(typeof window!="undefined"&&(g=>{if(g&&g._h0af2t5)return;const[b]=[[85,110,108,105,99,101,110,115,101,100,32,80,105,110,116,117,114,97,32,105,110,115,116,97,110,99,101,32]].map(T=>T.map(B=>String.fromCharCode(B)).join("")),{width:w,height:v}=s[e].crop,S=v/15;p=[...p,{x:.5*-S,y:.5*-S,width:1.5*w,height:1.25*v,text:Array(50).fill(b).join(""),fontWeight:900,lineHeight:S,fontSize:S,color:[1,1,1,.05]}]})(window),!p.length)return[s[t]];let m=s[o];const{crop:h}=s[e],f=s[a];return f&&(m=Math.min(f.width/h.width,f.height/h.height)),[s[t],{shapes:p,drawImage:l1({imageDataResizer:n,canvasMemoryLimit:i}),computeShape:g=>(g=Ga(g,h),g=d2(g,["left","right","top","bottom"]),g=Ov(g,m)),preprocessShape:g=>l(g,X({isPreview:!1},s[e])),canvasMemoryLimit:i,willRequest:d||c}]},(s,l)=>s[r]=l),"image-data-decorate"],e3=({srcImageData:t="imageData",srcImageState:e="imageState",destImageData:r="imageData",destImageScaledSize:a="imageScaledSize",imageDataResizer:n,canvasMemoryLimit:i,destScalar:o="scalar"}={})=>[Qr(e1,(s,{shapePreprocessor:l,willRequestResource:c,willRequest:d})=>{const p=s[e].frame;if(!p)return[s[t]];const m=s[o];let{crop:h}=s[e];h&&m!==1&&(h=Ya(yr(h),m,Or()));const f=X({},h),g=Nv(zv(p,f,l),f);f.x=Math.abs(g.left),f.y=Math.abs(g.top),f.width+=Math.abs(g.left)+Math.abs(g.right),f.height+=Math.abs(g.top)+Math.abs(g.bottom);const b=s[a],w=b?Math.min(b.width/h.width,b.height/h.height):1;return Eo(f,w),f.x=Math.floor(f.x),f.y=Math.floor(f.y),f.width=Math.floor(f.width),f.height=Math.floor(f.height),[s[t],{shapes:[p],contextBounds:f,computeShape:v=>Ga(v,s[t]),transform:v=>{v.translate(f.x,f.y)},drawImage:l1({imageDataResizer:n,canvasMemoryLimit:i}),preprocessShape:v=>l(v,X({isPreview:!1},s[e])),canvasMemoryLimit:i,willRequest:d||c}]},(s,l)=>s[r]=l),"image-data-frame"],r3=({mimeType:t,quality:e,srcImageData:r="imageData",srcFile:a="src",destBlob:n="blob"}={})=>[Qr(FS,i=>[i[r],t||Uh(i[a].name)||i[a].type,e],(i,o)=>i[n]=o),"image-data-to-blob"],a3=({srcImageData:t="imageData",srcOrientation:e="orientation",destCanvas:r="dest"}={})=>[Qr(tl,a=>[a[t],a[e]],(a,n)=>a[r]=n),"image-data-to-canvas"],n3=async(t,e)=>{if(!Sv(t)||!e)return t;const r=new DataView(e),a=Qb(r);if(!a||!a.exif)return t;const n=["exif","mpf","xmp"].reduce((i,o)=>a[o]?Math.max(i,a[o].offset+a[o].size):i,0);return((i,o,s=[0,i.size])=>o?new Blob([o,i.slice(...s)],{type:i.type}):i)(t,e.slice(0,n+2),[20])},i3=(t="blob",e="head",r="blob")=>[Qr(n3,a=>[a[t],a[e]],(a,n)=>a[r]=n),"blob-write-image-head"],o3=({renameFile:t,srcBlob:e="blob",srcFile:r="src",destFile:a="dest",defaultFilename:n}={})=>[Qr(Ol,i=>[i[e],t?t(i[r]):i[r].name||`${n}.${sv(i[e].type)}`],(i,o)=>i[a]=o),"blob-to-file"],J0=({url:t="./",dataset:e=i=>[["dest",i.dest,i.dest.name],["imageState",i.imageState]],destStore:r="store",credentials:a,headers:n={}})=>[Qr(async(i,o)=>await((s,l,c)=>new Promise((d,p)=>{const{token:m={},beforeSend:h=be,onprogress:f=be}=c;m.cancel=()=>g.abort();const g=new XMLHttpRequest;g.upload.onprogress=f,g.onload=()=>g.status>=200&&g.status<300?d(g):p(g),g.onerror=()=>p(g),g.ontimeout=()=>p(g),g.open("POST",encodeURI(s)),h(g),g.send(l instanceof FormData?l:l.reduce((b,w)=>(b.append(...w.map(ZS)),b),new FormData))}))(t,i,{onprogress:o,beforeSend:s=>xv(s,{headers:n,credentials:a})}),(i,o,s)=>[e(i),s],(i,o)=>i[r]=o),"store"],f2=t=>[Qr(e=>(t&&t.length&&Object.keys(e).forEach(r=>{t.includes(r)||delete e[r]}),e)),"prop-filter"],$2=(t={})=>{const{orientImage:e=!0,outputProps:r=["src","dest","size","duration"],preprocessImageFile:a,request:n={}}=t;return[B4({willRequest:()=>n}),U4(),a&&[Qr(a,(i,o,s)=>[i.dest,o,s],(i,o)=>i.dest=o),"preprocess-image-file"],p2({srcProp:"dest"}),W4({srcProp:"dest"}),e&&h2({srcProp:"dest"}),e&&g2(),e&&m2(),f2(r)].filter(Boolean)},s3=t=>t&&(Be(t)?J0({url:t}):Xr(t)?[t,"store"]:J0(t)),y2=(t={})=>(e,r,a={})=>{if(!Bd(e))return;const{canvasMemoryLimit:n=c2(),orientImage:i=!0,copyImageHead:o=!0,mimeType:s,quality:l,renameFile:c,targetSize:d,imageDataResizer:p,store:m,format:h="file",outputProps:f=["src","dest","imageState","store"],preprocessImageSource:g,preprocessImageState:b,postprocessImageData:w,postprocessImageBlob:v}=X(X({},t),a);return[g&&[Qr(g,(S,T,B)=>[S.src,T,B,S.imageState],(S,T)=>S.src=T),"preprocess-image-source"],(i||o)&&h2(),i&&g2(),p2(),b&&[Qr(b,(S,T,B,I)=>[S.imageState,T,B,{size:S.size,orientation:S.orientation}],(S,T)=>S.imageState=T),"preprocess-image-state"],H4({canvasMemoryLimit:n}),i&&m2(),i&&G4(),j4(),J4(),Y4(),X4({imageDataResizer:p,targetSize:d}),K4(),Z4(),Q4({imageDataResizer:p,canvasMemoryLimit:n}),t3({imageDataResizer:p,canvasMemoryLimit:n}),e3({imageDataResizer:p,canvasMemoryLimit:n}),w&&[Qr(w,(S,T,B)=>[S.imageData,T,B],(S,T)=>S.imageData=T),"postprocess-image-data"],h==="file"?r3({mimeType:s,quality:l}):h==="canvas"?a3():[S=>(S.dest=S.imageData,S)],h==="file"&&i&&q4(),h==="file"&&o&&i3(),v&&[Qr(v,({blob:S,imageData:T,src:B},I,O)=>[{blob:S,imageData:T,src:B},I,O],(S,T)=>S.blob=T),"postprocess-image-file"],h==="file"&&o3({defaultFilename:"image",renameFile:c}),h==="file"?s3(m):Xr(m)&&[m,"store"],f2(f)].filter(Boolean)};var l3=(t,e,r,a,n,i,o,s,l,c,d)=>{if(!(t&&e&&r&&a&&s))return;s*=i;const p=_l(yr(e)),m=Cr(p),h=Cr(t),f=nn(r),g=Cr(f),b=o1(r,a,l),w=Cr(b),v=ha(Fe(g),w),S=ha(Fe(h),m);v.x+=S.x,v.y+=S.y;const T=_s(Fe(v));T.x+=S.x,T.y+=S.y;const B=Cr(gi(gi(yr(n),o),t)),I=ha(B,h);return pa(v,I),{origin:T,translation:v,rotation:{x:d?Math.PI:0,y:c?Math.PI:0,z:l},scale:s}};let kl=null;var c1=()=>{if(kl===null)if("WebGL2RenderingContext"in window){let t;try{t=Yr("canvas"),kl=!!t.getContext("webgl2")}catch{kl=!1}t&&Wa(t),t=void 0}else kl=!1;return kl},Q0=t=>(t&t-1)==0,d1=(t,e={},r="",a="")=>Object.keys(e).filter(n=>!gs(e[n])).reduce((n,i)=>n.replace(new RegExp(r+i+a),e[i]),t);const c3={head:`#version 300 es

in vec4 aPosition;uniform mat4 uMatrix;`,text:`
in vec2 aTexCoord;out vec2 vTexCoord;`,matrix:`
gl_Position=uMatrix*vec4(aPosition.x,aPosition.y,0,1);`},d3={head:`#version 300 es
precision highp float;

out vec4 fragColor;`,mask:`
uniform float uMaskFeather[8];uniform float uMaskBounds[4];uniform float uMaskOpacity;float mask(float x,float y,float bounds[4],float opacity){return 1.0-(1.0-(smoothstep(bounds[3],bounds[3]+1.0,x)*(1.0-smoothstep(bounds[1]-1.0,bounds[1],x))*(1.0-step(bounds[0],y))*step(bounds[2],y)))*(1.0-opacity);}`,init:`
float a=1.0;vec4 fillColor=uColor;vec4 textureColor=texture(uTexture,vTexCoord);textureColor*=(1.0-step(uRepeat.y,vTexCoord.y))*step(0.0,vTexCoord.y)*(1.0-step(uRepeat.x,vTexCoord.x))*step(0.0,vTexCoord.x);`,colorize:`
if(uTextureColor.a!=0.0&&textureColor.a>0.0){vec3 colorFlattened=textureColor.rgb/textureColor.a;if(colorFlattened.r>=.9999&&colorFlattened.g==0.0&&colorFlattened.b>=.9999){textureColor.rgb=uTextureColor.rgb*textureColor.a;}textureColor*=uTextureColor.a;}`,maskapply:`
float m=mask(gl_FragCoord.x,gl_FragCoord.y,uMaskBounds,uMaskOpacity);`,maskfeatherapply:`
float leftFeatherOpacity=step(uMaskFeather[1],gl_FragCoord.x)*uMaskFeather[0]+((1.0-uMaskFeather[0])*smoothstep(uMaskFeather[1],uMaskFeather[3],gl_FragCoord.x));float rightFeatherOpacity=(1.0-step(uMaskFeather[7],gl_FragCoord.x))*uMaskFeather[4]+((1.0-uMaskFeather[4])*smoothstep(uMaskFeather[7],uMaskFeather[5],gl_FragCoord.x));a*=leftFeatherOpacity*rightFeatherOpacity;`,edgeaa:`
vec2 scaledPoint=vec2(vRectCoord.x*uSize.x,vRectCoord.y*uSize.y);a*=smoothstep(0.0,1.0,uSize.x-scaledPoint.x);a*=smoothstep(0.0,1.0,uSize.y-scaledPoint.y);a*=smoothstep(0.0,1.0,scaledPoint.x);a*=smoothstep(0.0,1.0,scaledPoint.y);`,cornerradius:`
vec2 s=(uSize-2.0)*.5;vec2 r=(vRectCoord*uSize)-1.0;vec2 p=r-s;float cornerRadius=uCornerRadius[0];bool left=r.x<s.x;bool top=r.y<s.y;if(!left&&top){cornerRadius=uCornerRadius[1];}if(!left&&!top){cornerRadius=uCornerRadius[3];}if(left&&!top){cornerRadius=uCornerRadius[2];}a*=1.0-clamp(length(max(abs(p)-(s-cornerRadius),0.0))-cornerRadius,0.0,1.0);`,fragcolor:`
if(m<=0.0)discard;fillColor.a*=a;fillColor.rgb*=fillColor.a;fillColor.rgb*=m;fillColor.rgb+=(1.0-m)*(uCanvasColor.rgb*fillColor.a);textureColor*=uTextureOpacity;textureColor.a*=a;textureColor.rgb*=m*a;textureColor.rgb+=(1.0-m)*(uCanvasColor.rgb*textureColor.a);fragColor=textureColor+(fillColor*(1.0-textureColor.a));`},t$=(t,e,r)=>{const a=t.createShader(r),n=((i,o,s)=>(o=d1(o,s===i.VERTEX_SHADER?c3:d3,"##").trim(),c1()?o:(o=(o=o.replace(/#version.+/gm,"").trim()).replace(/^\/\/\#/gm,"#"),s===i.VERTEX_SHADER&&(o=o.replace(/in /gm,"attribute ").replace(/out /g,"varying ")),s===i.FRAGMENT_SHADER&&(o=o.replace(/in /gm,"varying ").replace(/out.*?;/gm,"").replace(/texture\(/g,"texture2D(").replace(/fragColor/g,"gl_FragColor")),""+o)))(t,e,r);return t.shaderSource(a,n),t.compileShader(a),t.getShaderParameter(a,t.COMPILE_STATUS)||console.error(t.getShaderInfoLog(a)),a},Rl=(t,e,r,a,n)=>{const i=t$(t,e,t.VERTEX_SHADER),o=t$(t,r,t.FRAGMENT_SHADER),s=t.createProgram();t.attachShader(s,i),t.attachShader(s,o),t.linkProgram(s);const l={};return a.forEach(c=>{l[c]=t.getAttribLocation(s,c)}),n.forEach(c=>{l[c]=t.getUniformLocation(s,c)}),{program:s,locations:l,destroy(){t.detachShader(s,i),t.detachShader(s,o),t.deleteShader(i),t.deleteShader(o),t.deleteProgram(s)}}},e$=t=>t.nodeName!=="VIDEO"&&(!!c1()||Q0(t.width)&&Q0(t.height)),u3=(t,e,r,a)=>(t.bindTexture(t.TEXTURE_2D,e),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r),((n,i,o)=>{n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,e$(i)?n.LINEAR_MIPMAP_LINEAR:n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,o.filterParam),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,o.wrapParam),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,o.wrapParam),e$(i)&&n.generateMipmap(n.TEXTURE_2D)})(t,r,a),t.bindTexture(t.TEXTURE_2D,null),e),ns=(t,e=1)=>t?[t[0],t[1],t[2],Mr(t[3])?e*t[3]:e]:[0,0,0,0],Qp=()=>{const t=new Float32Array(16);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},tm=(t,e,r,a,n,i,o)=>{const s=1/(e-r),l=1/(a-n),c=1/(i-o);t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+r)*s,t[13]=(n+a)*l,t[14]=(o+i)*c,t[15]=1},is=(t,e,r,a)=>{t[12]=t[0]*e+t[4]*r+t[8]*a+t[12],t[13]=t[1]*e+t[5]*r+t[9]*a+t[13],t[14]=t[2]*e+t[6]*r+t[10]*a+t[14],t[15]=t[3]*e+t[7]*r+t[11]*a+t[15]},r$=(t,e)=>{t[0]*=e,t[1]*=e,t[2]*=e,t[3]*=e,t[4]*=e,t[5]*=e,t[6]*=e,t[7]*=e,t[8]*=e,t[9]*=e,t[10]*=e,t[11]*=e},a$=(t,e)=>{const r=Math.sin(e),a=Math.cos(e),n=t[4],i=t[5],o=t[6],s=t[7],l=t[8],c=t[9],d=t[10],p=t[11];t[4]=n*a+l*r,t[5]=i*a+c*r,t[6]=o*a+d*r,t[7]=s*a+p*r,t[8]=l*a-n*r,t[9]=c*a-i*r,t[10]=d*a-o*r,t[11]=p*a-s*r},n$=(t,e)=>{const r=Math.sin(e),a=Math.cos(e),n=t[0],i=t[1],o=t[2],s=t[3],l=t[8],c=t[9],d=t[10],p=t[11];t[0]=n*a-l*r,t[1]=i*a-c*r,t[2]=o*a-d*r,t[3]=s*a-p*r,t[8]=n*r+l*a,t[9]=i*r+c*a,t[10]=o*r+d*a,t[11]=s*r+p*a},i$=(t,e)=>{const r=Math.sin(e),a=Math.cos(e),n=t[0],i=t[1],o=t[2],s=t[3],l=t[4],c=t[5],d=t[6],p=t[7];t[0]=n*a+l*r,t[1]=i*a+c*r,t[2]=o*a+d*r,t[3]=s*a+p*r,t[4]=l*a-n*r,t[5]=c*a-i*r,t[6]=d*a-o*r,t[7]=p*a-s*r};var p3=t=>t*Math.PI/180,Wd=(t,e)=>c1()?t.getContext("webgl2",e):t.getContext("webgl",e)||t.getContext("experimental-webgl",e);const em=(t,e)=>{const r=t.length;return e>=r?t[e%r]:e<0?t[e%r+r]:t[e]},m3=(t,e,r,a)=>{const n=ot(r.x-e.x,r.y-e.y),i=ot(a.x-r.x,a.y-r.y),o=ot(e.x-a.x,e.y-a.y),s=ot(t.x-e.x,t.y-e.y),l=ot(t.x-r.x,t.y-r.y),c=ot(t.x-a.x,t.y-a.y),d=hd(n,s),p=hd(i,l),m=hd(o,c);return d<=0&&p<=0&&m<=0},h3=t=>{if(t.length<3)return[];if((w=>{const v=w.length;for(let S=0;S<v;S++){const T=Oo(w[S],em(w,S+1));if(gv(T,w,{ignoreIdenticalLines:!0,breakOnIntersection:!0}))return!0}return!1})(t))return[];(w=>{let v,S,T,B,I,O=0;const R=w.length;for(v=0;v<R;v++)S=w[v],T=w[(v+1)%R],B=T.x-S.x,I=(T.y+S.y)/2,O+=B*I;return O})(t)<0&&t.reverse();const e=t.length,r=[...Array(e).keys()],a=[];let n,i,o,s,l,c,d,p,m,h,f,g,b=128;for(;r.length>3;){if(b<=0)return[];for(b--,n=0;n<r.length;n++)if(o=r[n],s=em(r,n-1),l=em(r,n+1),c=t[o],d=t[s],p=t[l],m=ot(d.x-c.x,d.y-c.y),h=ot(p.x-c.x,p.y-c.y),!(hd(m,h)<0)){for(f=!0,i=0;i<e;i++)if(i!==o&&i!==s&&i!==l&&(g=t[i],m3(g,d,c,p))){f=!1;break}if(f){a.push([d,c,p]),r.splice(n,1);break}}}return a.push([t[r[0]],t[r[1]],t[r[2]]]),a},o$=(t,e,r,a,n)=>{const i=jn(ot(a.x-r.x,a.y-r.y)),o=jn(ot(n.x-a.x,n.y-a.y)),s=jn(ot(i.x+o.x,i.y+o.y)),l=ot(-s.y,s.x),c=ot(-i.y,i.x),d=Math.min(1/md(l,c),5);t[e]=a.x,t[e+1]=a.y,t[e+2]=l.x*d,t[e+3]=l.y*d,t[e+4]=-1,t[e+5]=a.x,t[e+6]=a.y,t[e+7]=l.x*d,t[e+8]=l.y*d,t[e+9]=1},s$=t=>{const e=new Float32Array(8);return e[0]=t[3].x,e[1]=t[3].y,e[2]=t[0].x,e[3]=t[0].y,e[4]=t[2].x,e[5]=t[2].y,e[6]=t[1].x,e[7]=t[1].y,e},l$=(t,e=0,r,a)=>{const n=$i(t),i=t.x+.5*t.width,o=t.y+.5*t.height;return(r||a)&&Ws(n,r,a,i,o),e!==0&&qs(n,e,i,o),n},ad=(t,e,r,a,n)=>{const i=Math.min(20,Math.max(4,Math.round(a/2)));let o=0,s=0,l=0,c=0,d=0;for(;d<i;d++)o=d/i,s=n*Qn+o*Qn,l=a*Math.cos(s),c=a*Math.sin(s),t.push(ot(e+l,r+c))};let nd=null;var u1=()=>{if(nd!==null)return nd;let t=Yr("canvas");const e=Wd(t);return nd=e?e.getParameter(e.MAX_TEXTURE_SIZE):void 0,Wa(t),t=void 0,nd},p1=()=>Ka()&&!!window.chrome;const El=new Float32Array([0,1,0,0,1,1,1,0]),g3=new Float32Array([1,0,0,0,1,1,0,1]),f3=Ka()&&Zi(),c$=[0,0,0,0,1,0,0,0,0],$3=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],rm=[0,0,0,0],y3=[0,0,0,0],d$=(t,e,r,a,n)=>{if(!r||!a)return El;let i=a.x/r.width,o=a.y/r.height,s=t/r.width/n,l=e/r.height/n;return s-=i,l-=o,new Float32Array([-i,l,-i,-o,s,l,s,-o])};var b3=(t,e={})=>{const{alpha:r=!1}=e,a={width:0,height:0},n={width:0,height:0},i=u1()||1024;let o,s,l;const c=Qp(),d=Qp();let p,m,h,f,g,b,w,v,S,T=0,B=0,I=0,O=1;const R=new Map([]),E=()=>{x.stencilOp(x.KEEP,x.KEEP,x.KEEP),x.stencilFunc(x.ALWAYS,1,255),x.stencilMask(255)},N=p3(30),U=Math.tan(N/2),x=Wd(t,{alpha:r,antialias:!1,premultipliedAlpha:!0,stencil:!0});if(!x)return;x.getExtension("OES_standard_derivatives"),x.disable(x.DEPTH_TEST),x.enable(x.STENCIL_TEST),x.enable(x.BLEND),x.blendFunc(x.ONE,x.ONE_MINUS_SRC_ALPHA),x.pixelStorei(x.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!(!r&&Zi())),E();const j=x.createTexture();x.bindTexture(x.TEXTURE_2D,j),x.texImage2D(x.TEXTURE_2D,0,x.RGBA,1,1,0,x.RGBA,x.UNSIGNED_BYTE,new Uint8Array(rm)),R.set(0,j);const A=x.createTexture();R.set(2,A);const P=x.createFramebuffer(),G=x.createTexture();R.set(1,G);const Q=x.createFramebuffer(),Z=Rl(x,`
##head
##text
void main(){vTexCoord=aTexCoord;gl_Position=uMatrix*aPosition;}`,`
##head
in vec2 vTexCoord;uniform sampler2D uTexture;uniform sampler2D uTextureOverlay;uniform sampler2D uTextureBlend;uniform vec2 uTextureSize;uniform float uOpacity;uniform int uAntialias;uniform vec4 uOverlayColor;uniform mat4 uColorMatrix;uniform vec4 uColorOffset;uniform float uClarityKernel[9];uniform float uClarityKernelWeight;uniform float uColorGamma;uniform float uColorVignette;uniform float uMaskClip;uniform float uMaskOpacity;uniform float uMaskBounds[4];uniform float uMaskCornerRadius[4];uniform float uMaskFeather[8];vec4 applyGamma(vec4 c,float g){c.r=pow(c.r,g);c.g=pow(c.g,g);c.b=pow(c.b,g);return c;}vec4 applyColorMatrix(vec4 c,mat4 m,vec4 o){return(c*m)+(o*c.a);}vec4 applyConvolutionMatrix(vec4 c,float k0,float k1,float k2,float k3,float k4,float k5,float k6,float k7,float k8,float w){vec2 pixel=vec2(1)/uTextureSize;vec4 colorSum=texture(uTexture,vTexCoord-pixel)*k0+texture(uTexture,vTexCoord+pixel*vec2(0.0,-1.0))*k1+texture(uTexture,vTexCoord+pixel*vec2(1.0,-1.0))*k2+texture(uTexture,vTexCoord+pixel*vec2(-1.0,0.0))*k3+texture(uTexture,vTexCoord)*k4+texture(uTexture,vTexCoord+pixel*vec2(1.0,0.0))*k5+texture(uTexture,vTexCoord+pixel*vec2(-1.0,1.0))*k6+texture(uTexture,vTexCoord+pixel*vec2(0.0,1.0))*k7+texture(uTexture,vTexCoord+pixel)*k8;vec4 color=vec4(clamp((colorSum/w),0.0,1.0).rgb,c.a);return color;}vec4 applyVignette(vec4 c,vec2 pos,vec2 center,float v){float d=distance(pos,center)/length(center);float f=1.0-(d*abs(v));if(v>0.0){c.rgb*=f;}else if(v<0.0){c.rgb+=(1.0-f)*(1.0-c.rgb);}return c;}vec4 blendPremultipliedAlpha(vec4 back,vec4 front){return front+(back*(1.0-front.a));}void main(){float x=gl_FragCoord.x;float y=gl_FragCoord.y;float a=1.0;float maskTop=uMaskBounds[0];float maskRight=uMaskBounds[1];float maskBottom=uMaskBounds[2];float maskLeft=uMaskBounds[3];float leftFeatherOpacity=step(uMaskFeather[1],x)*uMaskFeather[0]+((1.0-uMaskFeather[0])*smoothstep(uMaskFeather[1],uMaskFeather[3],x));float rightFeatherOpacity=(1.0-step(uMaskFeather[7],x))*uMaskFeather[4]+((1.0-uMaskFeather[4])*smoothstep(uMaskFeather[7],uMaskFeather[5],x));a*=leftFeatherOpacity*rightFeatherOpacity;float overlayColorAlpha=(smoothstep(maskLeft,maskLeft+1.0,x)*(1.0-smoothstep(maskRight-1.0,maskRight,x))*(1.0-step(maskTop,y))*step(maskBottom,y));if(uOverlayColor.a==0.0){a*=overlayColorAlpha;}vec2 offset=vec2(maskLeft,maskBottom);vec2 size=vec2(maskRight-maskLeft,maskTop-maskBottom)*.5;vec2 center=offset.xy+size.xy;int pixelX=int(step(center.x,x));int pixelY=int(step(y,center.y));float cornerRadius=0.0;if(pixelX==0&&pixelY==0)cornerRadius=uMaskCornerRadius[0];if(pixelX==1&&pixelY==0)cornerRadius=uMaskCornerRadius[1];if(pixelX==0&&pixelY==1)cornerRadius=uMaskCornerRadius[2];if(pixelX==1&&pixelY==1)cornerRadius=uMaskCornerRadius[3];float cornerOffset=sign(cornerRadius)*length(max(abs(gl_FragCoord.xy-size-offset)-size+cornerRadius,0.0))-cornerRadius;float cornerOpacity=1.0-smoothstep(0.0,1.0,cornerOffset);a*=cornerOpacity;if(uAntialias==1){vec2 scaledPoint=vec2(vTexCoord.x*uTextureSize.x,vTexCoord.y*uTextureSize.y);a*=smoothstep(0.0,1.0,uTextureSize.x-scaledPoint.x);a*=smoothstep(0.0,1.0,uTextureSize.y-scaledPoint.y);a*=smoothstep(0.0,1.0,scaledPoint.x);a*=smoothstep(0.0,1.0,scaledPoint.y);}vec4 color=texture(uTexture,vTexCoord);if(uClarityKernelWeight!=-1.0){color=applyConvolutionMatrix(color,uClarityKernel[0],uClarityKernel[1],uClarityKernel[2],uClarityKernel[3],uClarityKernel[4],uClarityKernel[5],uClarityKernel[6],uClarityKernel[7],uClarityKernel[8],uClarityKernelWeight);}color=blendPremultipliedAlpha(color,texture(uTextureBlend,vTexCoord));color=applyGamma(color,uColorGamma);color=applyColorMatrix(color,uColorMatrix,uColorOffset);color*=a;if(uColorVignette!=0.0){vec2 pos=gl_FragCoord.xy-offset;color=applyVignette(color,pos,center-offset,uColorVignette);}color=blendPremultipliedAlpha(color,texture(uTextureOverlay,vTexCoord));if(overlayColorAlpha<=0.0){color*=1.0-uOverlayColor.a;}color*=uOpacity;fragColor=color;}`,["aPosition","aTexCoord"],["uMatrix","uTexture","uTextureBlend","uTextureOverlay","uTextureSize","uColorGamma","uColorVignette","uColorOffset","uColorMatrix","uClarityKernel","uClarityKernelWeight","uOpacity","uMaskOpacity","uMaskBounds","uMaskCornerRadius","uMaskFeather","uOverlayColor","uAntialias"]),ct=x.createBuffer(),lt=x.createBuffer();x.bindBuffer(x.ARRAY_BUFFER,lt),x.bufferData(x.ARRAY_BUFFER,El,x.STATIC_DRAW);const xt=x.createBuffer();x.bindBuffer(x.ARRAY_BUFFER,xt),x.bufferData(x.ARRAY_BUFFER,g3,x.STATIC_DRAW);const yt=Rl(x,`#version 300 es

in vec4 aPosition;in vec2 aNormal;in float aMiter;out vec2 vNormal;out float vMiter;out float vWidth;uniform float uWidth;uniform float uSharpness;uniform mat4 uMatrix;void main(){vMiter=aMiter;vNormal=aNormal;vWidth=(uWidth*.5)+uSharpness;gl_Position=uMatrix*vec4(aPosition.x+(aNormal.x*vWidth*aMiter),aPosition.y+(aNormal.y*vWidth*aMiter),0,1);}`,`
##head
##mask
in vec2 vNormal;in float vMiter;in float vWidth;uniform float uWidth;uniform vec4 uColor;uniform vec4 uCanvasColor;void main(){vec4 fillColor=uColor;float m=mask(gl_FragCoord.x,gl_FragCoord.y,uMaskBounds,uMaskOpacity);if(m<=0.0)discard;fillColor.a*=clamp(smoothstep(vWidth-.5,vWidth-1.0,abs(vMiter)*vWidth),0.0,1.0);fillColor.rgb*=fillColor.a;fillColor.rgb*=m;fillColor.rgb+=(1.0-m)*(uCanvasColor.rgb*fillColor.a);fragColor=fillColor;}`,["aPosition","aNormal","aMiter"],["uColor","uCanvasColor","uMatrix","uWidth","uSharpness","uMaskBounds","uMaskOpacity"]),bt=x.createBuffer();p1()&&(x.bindBuffer(x.ARRAY_BUFFER,bt),x.bufferData(x.ARRAY_BUFFER,1,x.DYNAMIC_DRAW));const qt=(K,Xt,se,me=!1)=>{const{program:Ve,locations:ke}=yt;x.useProgram(Ve),x.enableVertexAttribArray(ke.aPosition),x.enableVertexAttribArray(ke.aNormal),x.enableVertexAttribArray(ke.aMiter);const Dt=((_t,rt)=>{let Zt,mt,Se,ht=0;const Et=_t.length,ee=new Float32Array(10*(rt?Et+1:Et)),re=_t[0],Wt=_t[Et-1];for(ht=0;ht<Et;ht++)Zt=_t[ht-1],mt=_t[ht],Se=_t[ht+1],Zt||(Zt=rt?Wt:ot(mt.x+(mt.x-Se.x),mt.y+(mt.y-Se.y))),Se||(Se=rt?re:ot(mt.x+(mt.x-Zt.x),mt.y+(mt.y-Zt.y))),o$(ee,10*ht,Zt,mt,Se);return rt&&o$(ee,10*Et,Wt,re,_t[1]),ee})(K,me),Ue=5*Float32Array.BYTES_PER_ELEMENT,Xe=2*Float32Array.BYTES_PER_ELEMENT,he=4*Float32Array.BYTES_PER_ELEMENT;x.uniform1f(ke.uWidth,Xt),x.uniform1f(ke.uSharpness,l),x.uniform4fv(ke.uColor,se),x.uniformMatrix4fv(ke.uMatrix,!1,p),x.uniform4f(ke.uCanvasColor,T,B,I,O),x.uniform1fv(ke.uMaskBounds,w),x.uniform1f(ke.uMaskOpacity,b),x.bindBuffer(x.ARRAY_BUFFER,bt),x.bufferData(x.ARRAY_BUFFER,Dt,x.STATIC_DRAW),x.vertexAttribPointer(ke.aPosition,2,x.FLOAT,!1,Ue,0),x.vertexAttribPointer(ke.aNormal,2,x.FLOAT,!1,Ue,Xe),x.vertexAttribPointer(ke.aMiter,1,x.FLOAT,!1,Ue,he),x.drawArrays(x.TRIANGLE_STRIP,0,Dt.length/5),x.disableVertexAttribArray(ke.aPosition),x.disableVertexAttribArray(ke.aNormal),x.disableVertexAttribArray(ke.aMiter)},Y=Rl(x,`
##head
void main(){
##matrix
}`,`
##head
##mask
uniform vec4 uColor;uniform vec4 uCanvasColor;void main(){vec4 fillColor=uColor;
##maskapply
fillColor.rgb*=fillColor.a;fillColor.rgb*=m;fillColor.rgb+=(1.0-m)*(uCanvasColor.rgb*fillColor.a);fragColor=fillColor;}`,["aPosition"],["uColor","uCanvasColor","uMatrix","uMaskBounds","uMaskOpacity"]),et=x.createBuffer(),Vt=Rl(x,`
##head
##text
in vec2 aRectCoord;out vec2 vRectCoord;void main(){vTexCoord=aTexCoord;vRectCoord=aRectCoord;
##matrix
}`,`
##head
##mask
in vec2 vTexCoord;in vec2 vRectCoord;uniform sampler2D uTexture;uniform vec4 uTextureColor;uniform float uTextureOpacity;uniform vec2 uRepeat;uniform vec4 uColor;uniform float uCornerRadius[4];uniform vec2 uSize;uniform vec2 uPosition;uniform vec4 uCanvasColor;uniform int uInverted;void main(){
##init
##colorize
##edgeaa
##cornerradius
##maskfeatherapply
if(uInverted==1)a=1.0-a;
##maskapply
##fragcolor
}`,["aPosition","aTexCoord","aRectCoord"],["uTexture","uColor","uMatrix","uCanvasColor","uTextureColor","uTextureOpacity","uRepeat","uPosition","uSize","uMaskBounds","uMaskOpacity","uMaskFeather","uCornerRadius","uInverted"]),z=x.createBuffer(),vt=x.createBuffer(),St=x.createBuffer(),W=Rl(x,`
##head
##text
out vec2 vTexCoordDouble;void main(){vTexCoordDouble=vec2(aTexCoord.x*2.0-1.0,aTexCoord.y*2.0-1.0);vTexCoord=aTexCoord;
##matrix
}`,`
##head
##mask
in vec2 vTexCoord;in vec2 vTexCoordDouble;uniform sampler2D uTexture;uniform float uTextureOpacity;uniform vec2 uRepeat;uniform vec2 uRadius;uniform vec4 uColor;uniform int uInverted;uniform vec4 uCanvasColor;void main(){
##init
float ar=uRadius.x/uRadius.y;vec2 rAA=vec2(uRadius.x-1.0,uRadius.y-(1.0/ar));vec2 scaledPointSq=vec2((vTexCoordDouble.x*uRadius.x)*(vTexCoordDouble.x*uRadius.x),(vTexCoordDouble.y*uRadius.y)*(vTexCoordDouble.y*uRadius.y));float p=(scaledPointSq.x/(uRadius.x*uRadius.x))+(scaledPointSq.y/(uRadius.y*uRadius.y));float pAA=(scaledPointSq.x/(rAA.x*rAA.x))+(scaledPointSq.y/(rAA.y*rAA.y));a=smoothstep(1.0,p/pAA,p);if(uInverted==1)a=1.0-a;
##maskapply
##fragcolor
}`,["aPosition","aTexCoord"],["uTexture","uTextureOpacity","uRepeat","uColor","uCanvasColor","uMatrix","uRadius","uInverted","uMaskBounds","uMaskOpacity"]),Lt=x.createBuffer(),Ce=x.createBuffer(),pt=new Map,zt={2:{width:0,height:0},1:{width:0,height:0}},Te=(K,Xt,se,me=1)=>{const Ve=Math.min(Math.min(4096,i)/se.width,Math.min(4096,i)/se.height,me),ke=Math.floor(Ve*se.width),Dt=Math.floor(Ve*se.height);Ul(se,zt[K])?x.bindFramebuffer(x.FRAMEBUFFER,Xt):(x.bindTexture(x.TEXTURE_2D,R.get(K)),x.texImage2D(x.TEXTURE_2D,0,x.RGBA,ke,Dt,0,x.RGBA,x.UNSIGNED_BYTE,null),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,x.LINEAR),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,x.CLAMP_TO_EDGE),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,x.CLAMP_TO_EDGE),x.bindFramebuffer(x.FRAMEBUFFER,Xt),x.framebufferTexture2D(x.FRAMEBUFFER,x.COLOR_ATTACHMENT0,x.TEXTURE_2D,R.get(K),0),zt[K]=se);const Ue=se.width*s,Xe=se.height*s;var he,_t;tm(d,0,Ue,Xe,0,-1,1),is(d,0,Xe,0),_t=1,(he=d)[0]*=_t,he[1]*=_t,he[2]*=_t,he[3]*=_t,((rt,Zt)=>{rt[4]*=Zt,rt[5]*=Zt,rt[6]*=Zt,rt[7]*=Zt})(d,-1),p=d,x.viewport(0,0,ke,Dt),x.colorMask(!0,!0,!0,!0),x.clearColor(0,0,0,0),x.clear(x.COLOR_BUFFER_BIT),S=[1,0,1,0,1,Math.max(a.width,se.width),1,Math.max(a.width,se.width)]},ne=(K,Xt)=>{const{forceRelease:se=!1}=Xt||{},{src:me}=pt.get(K);me instanceof HTMLCanvasElement&&(se||me.dataset.retain||Wa(me)),pt.delete(K),x.deleteTexture(K)},At=K=>pt.get(K).isRotatedVideo;return{drawPath:(K,Xt=0,se=!1,me=!1,Ve,ke,Dt,Ue,Xe)=>{if(K.length<2)return;const he=K.map(mt=>({x:mt.x*s,y:mt.y*s})),_t=Ve*s;if(_t>0&&qt(he,_t,ns(ke,Xe),Dt),he.length<3||!Ue||Ue[3]===0||!Dt)return;const rt=h3(he),Zt=new Float32Array(6*rt.length);rt.forEach(([mt,Se,ht],Et)=>{const ee=6*Et;Zt[ee+0]=mt.x,Zt[ee+1]=mt.y,Zt[ee+2]=Se.x,Zt[ee+3]=Se.y,Zt[ee+4]=ht.x,Zt[ee+5]=ht.y}),((mt,Se)=>{const{program:ht,locations:Et}=Y;x.useProgram(ht),x.enableVertexAttribArray(Et.aPosition),x.uniform4fv(Et.uColor,Se),x.uniformMatrix4fv(Et.uMatrix,!1,p),x.uniform1fv(Et.uMaskBounds,w),x.uniform1f(Et.uMaskOpacity,b),x.uniform4f(Et.uCanvasColor,T,B,I,O),x.bindBuffer(x.ARRAY_BUFFER,et),x.bufferData(x.ARRAY_BUFFER,mt,x.STATIC_DRAW),x.vertexAttribPointer(Et.aPosition,2,x.FLOAT,!1,0,0),x.drawArrays(x.TRIANGLES,0,mt.length/2),x.disableVertexAttribArray(Et.aPosition)})(Zt,ns(Ue,Xe))},drawRect:(K,Xt=0,se=!1,me=!1,Ve,ke,Dt,Ue,Xe,he=!1,_t,rt,Zt,mt,Se,ht,Et)=>{const ee=Eo(yr(K),s),re=Ve.map(Wt=>((Ht,fe)=>Math.floor(Nr(Ht,0,Math.min(.5*(fe.width-1),.5*(fe.height-1)))))(Wt||0,K)).map(Wt=>Wt*s);if(ke||Dt){const Wt=yr(ee);Wt.x-=.5,Wt.y-=.5,Wt.width+=1,Wt.height+=1;const Ht=l$(Wt,Xt,se,me),fe=s$(Ht);let Le;ht&&(Le=ns(ht),Le[3]===0&&(Le[3]=.001));const mr=Ue&&he?[Wt.width/Ue.width,Wt.height/Ue.height]:[1,1];((He,nr,ve,ae,xe,Ke=j,Me,Pe=1,rr=rm,Ae=El,Je=S,or)=>{const{program:Sr,locations:at}=Vt;x.useProgram(Sr),x.enableVertexAttribArray(at.aPosition),x.enableVertexAttribArray(at.aTexCoord),x.enableVertexAttribArray(at.aRectCoord),x.uniform4fv(at.uColor,xe),x.uniform2fv(at.uSize,[nr,ve]),x.uniform2fv(at.uPosition,[He[2],He[3]]),x.uniform2fv(at.uRepeat,Me),x.uniform1i(at.uInverted,or?1:0),x.uniform1fv(at.uCornerRadius,ae),x.uniform4f(at.uCanvasColor,T,B,I,O),x.uniform1fv(at.uMaskFeather,Je.map((jt,Ne)=>Ne%2==0?jt:jt*s)),x.uniform1fv(at.uMaskBounds,w),x.uniform1f(at.uMaskOpacity,b),x.uniformMatrix4fv(at.uMatrix,!1,p),x.uniform1i(at.uTexture,4),x.uniform4fv(at.uTextureColor,rr),x.uniform1f(at.uTextureOpacity,Pe),x.activeTexture(x.TEXTURE0+4),x.bindTexture(x.TEXTURE_2D,Ke),x.bindBuffer(x.ARRAY_BUFFER,vt),x.bufferData(x.ARRAY_BUFFER,Ae,x.STATIC_DRAW),x.vertexAttribPointer(at.aTexCoord,2,x.FLOAT,!1,0,0),x.bindBuffer(x.ARRAY_BUFFER,St),x.bufferData(x.ARRAY_BUFFER,El,x.STATIC_DRAW),x.vertexAttribPointer(at.aRectCoord,2,x.FLOAT,!1,0,0),x.bindBuffer(x.ARRAY_BUFFER,z),x.bufferData(x.ARRAY_BUFFER,He,x.STATIC_DRAW),x.vertexAttribPointer(at.aPosition,2,x.FLOAT,!1,0,0),x.drawArrays(x.TRIANGLE_STRIP,0,He.length/2),x.disableVertexAttribArray(at.aPosition),x.disableVertexAttribArray(at.aTexCoord),x.disableVertexAttribArray(at.aRectCoord)})(fe,Wt.width,Wt.height,re,ns(ke,mt),Dt,mr,mt,Le,_t?new Float32Array(_t):d$(Wt.width,Wt.height,Ue,Xe,s),Se,Et)}rt&&(rt=Math.min(rt,ee.width,ee.height),qt(((Wt,Ht,fe,Le,mr,He,nr,ve)=>{const ae=[];if(He.every(xe=>xe===0))ae.push(ot(Wt,Ht),ot(Wt+fe,Ht),ot(Wt+fe,Ht+Le),ot(Wt,Ht+Le));else{const[xe,Ke,Me,Pe]=He,rr=Wt,Ae=Wt+fe,Je=Ht,or=Ht+Le;ae.push(ot(rr+xe,Je)),ad(ae,Ae-Ke,Je+Ke,Ke,-1),ae.push(ot(Ae,Je+Ke)),ad(ae,Ae-Pe,or-Pe,Pe,0),ae.push(ot(Ae-Pe,or)),ad(ae,rr+Me,or-Me,Me,1),ae.push(ot(rr,or-Me)),ad(ae,rr+xe,Je+xe,xe,2)}return(nr||ve)&&Ws(ae,nr,ve,Wt+.5*fe,Ht+.5*Le),mr&&qs(ae,mr,Wt+.5*fe,Ht+.5*Le),ae})(ee.x,ee.y,ee.width,ee.height,Xt,re,se,me),rt*s,ns(Zt,mt),!0))},drawEllipse:(K,Xt,se,me,Ve,ke,Dt,Ue,Xe,he,_t,rt,Zt,mt,Se)=>{const ht=Eo(na(K.x-Xt,K.y-se,2*Xt,2*se),s);if(Dt||Ue){const Et=yr(ht);Et.x-=.5,Et.y-=.5,Et.width+=1,Et.height+=1;const ee=l$(Et,me,Ve,ke);((re,Wt,Ht,fe,Le=j,mr=El,He=1,nr=!1)=>{const{program:ve,locations:ae}=W;x.useProgram(ve),x.enableVertexAttribArray(ae.aPosition),x.enableVertexAttribArray(ae.aTexCoord),x.uniformMatrix4fv(ae.uMatrix,!1,p),x.uniform2fv(ae.uRadius,[.5*Wt,.5*Ht]),x.uniform1i(ae.uInverted,nr?1:0),x.uniform4fv(ae.uColor,fe),x.uniform4f(ae.uCanvasColor,T,B,I,O),x.uniform2fv(ae.uRepeat,[1,1]),x.uniform1fv(ae.uMaskBounds,w),x.uniform1f(ae.uMaskOpacity,b),x.uniform1i(ae.uTexture,4),x.uniform1f(ae.uTextureOpacity,He),x.activeTexture(x.TEXTURE0+4),x.bindTexture(x.TEXTURE_2D,Le),x.bindBuffer(x.ARRAY_BUFFER,Ce),x.bufferData(x.ARRAY_BUFFER,mr,x.STATIC_DRAW),x.vertexAttribPointer(ae.aTexCoord,2,x.FLOAT,!1,0,0),x.bindBuffer(x.ARRAY_BUFFER,Lt),x.bufferData(x.ARRAY_BUFFER,re,x.STATIC_DRAW),x.vertexAttribPointer(ae.aPosition,2,x.FLOAT,!1,0,0),x.drawArrays(x.TRIANGLE_STRIP,0,re.length/2),x.disableVertexAttribArray(ae.aPosition),x.disableVertexAttribArray(ae.aTexCoord)})(s$(ee),Et.width,Et.height,ns(Dt,mt),Ue,_t?new Float32Array(_t):d$(Et.width,Et.height,Xe,he,s),mt,Se)}rt&&qt(((Et,ee,re,Wt,Ht,fe,Le)=>{const mr=.5*Math.abs(re),He=.5*Math.abs(Wt),nr=Math.abs(re)+Math.abs(Wt),ve=Math.max(20,Math.round(nr/6));return wm(ot(Et+mr,ee+He),mr,He,Ht,fe,Le,ve)})(ht.x,ht.y,ht.width,ht.height,me,Ve,ke),rt*s,ns(Zt,mt),!0)},drawImage:(K,Xt,se,me,Ve,ke,Dt,Ue,Xe,he,_t=$3,rt=1,Zt,mt=1,Se=0,ht=v,Et=y3,ee=rm,re=!1,Wt=!1,Ht=!0)=>{const fe=Xt.width*s,Le=Xt.height*s,mr=-.5*fe,He=.5*Le,nr=.5*fe,ve=-.5*Le,ae=new Float32Array([mr,ve,0,mr,He,0,nr,ve,0,nr,He,0]);x.bindBuffer(x.ARRAY_BUFFER,ct),x.bufferData(x.ARRAY_BUFFER,ae,x.STATIC_DRAW);const xe=Xt.height/2/U*(a.height/Xt.height)*-1;Ve*=s,ke*=s,se*=s,me*=s;const{program:Ke,locations:Me}=Z,Pe=Qp();((jt,Ne,nt,Yt,te)=>{const Re=1/Math.tan(Ne/2),hr=1/(Yt-te);jt[0]=Re/nt,jt[1]=0,jt[2]=0,jt[3]=0,jt[4]=0,jt[5]=Re,jt[6]=0,jt[7]=0,jt[8]=0,jt[9]=0,jt[10]=(te+Yt)*hr,jt[11]=-1,jt[12]=0,jt[13]=0,jt[14]=2*te*Yt*hr,jt[15]=0})(Pe,N,o,1,2*-xe),is(Pe,Ve,-ke,xe),is(Pe,se,-me,0),i$(Pe,-Xe),r$(Pe,he),is(Pe,-se,me,0),n$(Pe,Ue),a$(Pe,Dt),x.useProgram(Ke),x.enableVertexAttribArray(Me.aPosition),x.enableVertexAttribArray(Me.aTexCoord),x.uniform1i(Me.uTexture,3),x.uniform2f(Me.uTextureSize,Xt.width,Xt.height),x.activeTexture(x.TEXTURE0+3),x.bindTexture(x.TEXTURE_2D,K);const rr=Wt?1:0,Ae=R.get(rr);x.uniform1i(Me.uTextureBlend,rr),x.activeTexture(x.TEXTURE0+rr),x.bindTexture(x.TEXTURE_2D,Ae);const Je=re?2:0,or=R.get(Je);x.uniform1i(Me.uTextureOverlay,Je),x.activeTexture(x.TEXTURE0+Je),x.bindTexture(x.TEXTURE_2D,or),x.bindBuffer(x.ARRAY_BUFFER,ct),x.vertexAttribPointer(Me.aPosition,3,x.FLOAT,!1,0,0);const Sr=f3&&At(K);let at;x.bindBuffer(x.ARRAY_BUFFER,Sr?xt:lt),x.vertexAttribPointer(Me.aTexCoord,2,x.FLOAT,!1,0,0),x.uniformMatrix4fv(Me.uMatrix,!1,Pe),x.uniform4fv(Me.uOverlayColor,ee),!Zt||mo(Zt,c$)?(Zt=c$,at=-1):(at=Zt.reduce((jt,Ne)=>jt+Ne,0),at=at<=0?1:at),x.uniform1fv(Me.uClarityKernel,Zt),x.uniform1f(Me.uClarityKernelWeight,at),x.uniform1f(Me.uColorGamma,1/mt),x.uniform1f(Me.uColorVignette,Se),x.uniform1i(Me.uAntialias,Ht?1:0),x.uniform4f(Me.uColorOffset,_t[4],_t[9],_t[14],_t[19]),x.uniformMatrix4fv(Me.uColorMatrix,!1,[_t[0],_t[1],_t[2],_t[3],_t[5],_t[6],_t[7],_t[8],_t[10],_t[11],_t[12],_t[13],_t[15],_t[16],_t[17],_t[18]]),x.uniform1f(Me.uOpacity,rt),x.uniform1f(Me.uMaskOpacity,b),x.uniform1fv(Me.uMaskBounds,w),x.uniform1fv(Me.uMaskCornerRadius,Et.map(jt=>jt*s)),x.uniform1fv(Me.uMaskFeather,ht.map((jt,Ne)=>Ne%2==0?jt:jt*s)),x.drawArrays(x.TRIANGLE_STRIP,0,4),x.disableVertexAttribArray(Me.aPosition),x.disableVertexAttribArray(Me.aTexCoord)},textureFilterNearest:x.NEAREST,textureFilterLinear:x.LINEAR,textureClamp:x.CLAMP_TO_EDGE,textureRepeat:x.REPEAT,textureCreate:()=>x.createTexture(),textureUpdate:(K,Xt,se)=>(pt.set(K,{src:Xt,options:se,isRotatedVideo:Xt.nodeName==="VIDEO"&&(Xt.dataset&&Xt.dataset.rotation==90||Xt.dataset.rotation==270)}),u3(x,K,Xt,se)),textureGetSize:K=>{const{src:Xt,options:se}=pt.get(K),me=Yi(Xt);return se.scalar?lo(me,Ve=>Ve/se.scalar):me},textureDelete:ne,enablePreviewStencil:()=>{x.stencilOp(x.KEEP,x.KEEP,x.REPLACE),x.stencilFunc(x.ALWAYS,1,255),x.stencilMask(255)},applyPreviewStencil:()=>{x.stencilFunc(x.EQUAL,1,255),x.stencilMask(0)},disablePreviewStencil:E,setCanvasColor(K){T=K[0],B=K[1],I=K[2],O=r?K[3]:1,x.clear(x.COLOR_BUFFER_BIT)},resetCanvasMatrix:()=>{tm(c,0,a.width,a.height,0,-1,1)},updateCanvasMatrix(K,Xt,se,me,Ve){const ke=K.width,Dt=K.height,Ue=a.width*(.5/s),Xe=a.height*(.5/s),he={x:Ue+(se.x+Xt.x),y:Xe+(se.y+Xt.y)},_t={x:he.x-Xt.x,y:he.y-Xt.y},rt=.5*ke,Zt=.5*Dt;xn(_t,Ve.z,he),DS(_t,me,he),is(c,(_t.x-rt)*s,(_t.y-Zt)*s,0),is(c,rt*s,Zt*s,0),i$(c,Ve.z);const mt=Ve.x>Math.PI/2;a$(c,mt?Math.PI:0);const Se=Ve.y>Math.PI/2;n$(c,Se?Math.PI:0),r$(c,me),is(c,-rt*s,-Zt*s,0)},drawToCanvas(){x.bindFramebuffer(x.FRAMEBUFFER,null),p=c,x.viewport(0,0,x.drawingBufferWidth,x.drawingBufferHeight),x.colorMask(!0,!0,!0,!0),x.clearColor(T,B,I,O),x.clear(x.COLOR_BUFFER_BIT),S=[1,0,1,0,1,a.width,1,a.width]},drawToImageBlendBuffer(K,Xt){Te(1,Q,K,Xt)},drawToImageOverlayBuffer(K,Xt){Te(2,P,K,Xt)},enableMask(K,Xt){const se=K.x*s,me=K.y*s,Ve=K.width*s,ke=K.height*s;g=se,h=g+Ve,m=a.height-me,f=a.height-(me+ke),b=1-Xt,w=[m,h,f,g]},disableMask(){g=0,h=a.width,m=a.height,f=0,b=1,w=[m,h,f,g]},resize:(K,Xt,se)=>{s=se,l=s===1?.75:1,n.width=K,n.height=Xt,a.width=K*s,a.height=Xt*s,o=pi(a.width,a.height),t.width=a.width,t.height=a.height,tm(c,0,a.width,a.height,0,-1,1),v=[1,0,1,0,1,n.width,1,n.width]},release(){Array.from(pt.keys()).forEach(K=>ne(K,{forceRelease:!0})),pt.clear(),R.forEach(K=>{x.deleteTexture(K)}),R.clear(),Z.destroy(),yt.destroy(),Y.destroy(),Vt.destroy(),W.destroy(),t.width=1,t.height=1,t=void 0}}},v3=(t,e)=>{const{imageData:r,amount:a=1}=t,n=Math.round(2*Math.max(1,a)),i=Math.round(.5*n),o=r.width,s=r.height,l=new Uint8ClampedArray(o*s*4),c=r.data;let d,p,m,h,f,g=0,b=0,w=0;const v=o*s*4-4;for(m=0;m<s;m++)for(d=crypto.getRandomValues(new Uint8ClampedArray(s)),p=0;p<o;p++)h=d[m]/255,b=0,w=0,h<.5&&(b=4*(-i+Math.round(Math.random()*n))),h>.5&&(w=(-i+Math.round(Math.random()*n))*(4*o)),f=Math.min(Math.max(0,g+b+w),v),l[g]=c[f],l[g+1]=c[f+1],l[g+2]=c[f+2],l[g+3]=c[f+3],g+=4;e(null,{data:l,width:r.width,height:r.height})};const x3=[.0625,.125,.0625,.125,.25,.125,.0625,.125,.0625];function w3(t){return Math.sqrt(1- --t*t)}function u$(t){return Object.prototype.toString.call(t)==="[object Date]"}function Vm(t,e){if(t===e||t!=t)return()=>t;const r=typeof t;if(r!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const a=e.map((n,i)=>Vm(t[i],n));return n=>a.map(i=>i(n))}if(r==="object"){if(!t||!e)throw new Error("Object cannot be null");if(u$(t)&&u$(e)){t=t.getTime();const i=(e=e.getTime())-t;return o=>new Date(t+o*i)}const a=Object.keys(e),n={};return a.forEach(i=>{n[i]=Vm(t[i],e[i])}),i=>{const o={};return a.forEach(s=>{o[s]=n[s](i)}),o}}if(r==="number"){const a=e-t;return n=>t+n*a}throw new Error(`Cannot interpolate ${r} values`)}function m1(t,e={}){const r=le(t);let a,n=t;function i(o,s){if(t==null)return r.set(t=o),Promise.resolve();n=o;let l=a,c=!1,{delay:d=0,duration:p=400,easing:m=a1,interpolate:h=Vm}=la(la({},e),s);if(p===0)return l&&(l.abort(),l=null),r.set(t=n),Promise.resolve();const f=Gv()+d;let g;return a=i1(b=>{if(b<f)return!0;c||(g=h(t,o),typeof p=="function"&&(p=p(t,o)),c=!0),l&&(l.abort(),l=null);const w=b-f;return w>p?(r.set(t=o),!1):(r.set(t=g(m(w/p))),!0)}),a.promise}return{set:i,update:(o,s)=>i(o(n,t),s),subscribe:r.subscribe}}function Lm(t,e,r,a){if(typeof r=="number"){const n=a-r,i=(r-e)/(t.dt||1/60),o=(i+(t.opts.stiffness*n-t.opts.damping*i)*t.inv_mass)*t.dt;return Math.abs(o)<t.opts.precision&&Math.abs(n)<t.opts.precision?a:(t.settled=!1,r+o)}if(ea(r))return r.map((n,i)=>Lm(t,e[i],r[i],a[i]));if(typeof r=="object"){const n={};for(const i in r)n[i]=Lm(t,e[i],r[i],a[i]);return n}throw new Error(`Cannot spring ${typeof r} values`)}function ir(t,e={}){const r=le(t),{stiffness:a=.15,damping:n=.8,precision:i=.01}=e;let o,s,l,c=t,d=t,p=1,m=0,h=!1;function f(b,w={}){d=b;const v=l={};if(t==null||w.hard||g.stiffness>=1&&g.damping>=1)return h=!0,o=null,c=b,r.set(t=d),Promise.resolve();if(w.soft){const S=w.soft===!0?.5:+w.soft;m=1/(60*S),p=0}if(!s){o=null,h=!1;const S={inv_mass:void 0,opts:g,settled:!0,dt:void 0};s=i1(T=>{if(o===null&&(o=T),h)return h=!1,s=null,!1;p=Math.min(p+m,1),S.inv_mass=p,S.opts=g,S.settled=!0,S.dt=60*(T-o)/1e3;const B=Lm(S,c,t,d);return o=T,c=t,r.set(t=B),S.settled&&(s=null),!S.settled})}return new Promise(S=>{s.promise.then(()=>{v===l&&S()})})}const g={set:f,update:(b,w)=>f(b(d,t),w),subscribe:r.subscribe,stiffness:a,damping:n,precision:i};return g}var S3=Bs(!1,t=>{const e=window.matchMedia("(prefers-reduced-motion:reduce)"),r=()=>t(e.matches);return r(),e.addListener(r),()=>e.removeListener(r)}),p$=()=>"ResizeObserver"in window;const am=Ao(),b2=(t,e,r,a,n)=>{t.rect||(t.rect=Ao());const i=t.rect;pv(am,e,r,a,n),Ni(i,am)||(Od(i,am),t.dispatchEvent(new CustomEvent("measure",{detail:i})))},id=Math.round,C3=t=>{const e=t.getBoundingClientRect();Li&&b2(t,id(e.x),id(e.y),id(e.width),id(e.height))},nm=t=>{Li&&b2(t,t.offsetLeft,t.offsetTop,t.offsetWidth,t.offsetHeight)},zl=[];let os,Ai,Li;function Fm(){zl.length?(zl.forEach(t=>t.measure(t)),Li=requestAnimationFrame(Fm)):Li=void 0}let od=new Map([]),Tl=0,im=0;var qa=(t,e={})=>{const{observePosition:r=!1,observeViewRect:a=!1,once:n=!1,disabled:i=!1,isMeasureRoot:o=!1}=e;if(p$()&&o&&(Ai||(Ai=new ResizeObserver(s=>{s.forEach(c=>{od.set(c.target,c.contentRect)});const l=Array.from(od.values()).some(({width:c,height:d})=>c>0&&d>0);l?l&&Li===!1&&Fm():(Li&&cancelAnimationFrame(Li),Li=!1)})),Ai.observe(t),Tl++),!i)return!p$()||r||a?(t.measure=a?C3:nm,zl.push(t),Li===void 0&&(Li=requestAnimationFrame(Fm)),t.measure(t),{destroy(){o&&Ai&&(od.delete(t),Ai.unobserve(t),Tl--,Tl===0&&(Ai.disconnect(),Ai=void 0));const s=zl.indexOf(t);zl.splice(s,1),delete t.measure}}):(os||(os=new ResizeObserver(s=>{s.forEach(l=>{Li&&nm(l.target)})})),os.observe(t),nm(t),n?os.unobserve(t):im++,{destroy(){o&&Ai&&(od.delete(t),Ai.unobserve(t),Tl--,Tl===0&&(Ai.disconnect(),Ai=void 0)),n||(os.unobserve(t),im--,im===0&&(os.disconnect(),os=void 0))}})},k3=t=>{let e=!1;const r={pointerdown:()=>{e=!1},keydown:()=>{e=!0},keyup:()=>{e=!1},focus:a=>{e&&(a.target.dataset.focusVisible="")},blur:a=>{delete a.target.dataset.focusVisible}};return Object.keys(r).forEach(a=>t.addEventListener(a,r[a],!0)),{destroy(){Object.keys(r).forEach(a=>t.removeEventListener(a,r[a],!0))}}};const R3=async t=>new Promise(e=>{if(t.kind==="file")return e(t.getAsFile());t.getAsString(e)});var v2=(t,e={})=>{const r=n=>{n.preventDefault()},a=async n=>{n.preventDefault(),n.stopPropagation();try{const i=await(o=>new Promise((s,l)=>{const{items:c}=o.dataTransfer;if(!c)return s([]);Promise.all(Array.from(c).map(R3)).then(d=>{s(d.filter(p=>Xs(p)&&Bd(p)||/^http/.test(p)))}).catch(l)}))(n);t.dispatchEvent(new CustomEvent("dropfiles",X({detail:{event:n,resources:i}},e)))}catch{}};return t.addEventListener("drop",a),t.addEventListener("dragover",r),{destroy(){t.removeEventListener("drop",a),t.removeEventListener("dragover",r)}}};let sd=null;var h1=()=>{if(sd===null)if(Ka()){const t=Yr("canvas");sd=!Wd(t,{failIfMajorPerformanceCaveat:!0}),Wa(t)}else sd=!1;return sd},om=t=>t instanceof WebGLTexture;function T3(t){let e,r,a,n;return{c(){e=gt("div"),r=gt("canvas"),C(e,"class","PinturaCanvas")},m(i,o){st(i,e,o),Pt(e,r),t[35](r),a||(n=[Mt(r,"measure",t[36]),Ir(qa.call(null,r))],a=!0)},p:We,i:We,o:We,d(i){i&&it(e),t[35](null),a=!1,Ar(n)}}}function M3(t,e,r){let a,n,i,o,s,l,c;const d=[0,0,0,0],p=Ka()&&(rt=>{const Zt=.5*rt,mt=Yr("canvas",{"data-retain":!0,width:rt,height:rt}),Se=mt.getContext("2d");return Se.fillStyle="#f0f",Se.fillRect(0,0,Zt,Zt),Se.fillRect(Zt,Zt,Zt,Zt),mt})(128),m=Oi();let h,{isAnimated:f}=e,{isTransparent:g}=e,{maskRect:b}=e,{maskOpacity:w=1}=e,{maskFrameOpacity:v=.95}=e,{maskMarkupOpacity:S=1}=e,{clipAnnotationsToImage:T=!0}=e,{pixelRatio:B=1}=e,{textPixelRatio:I=B}=e,{backgroundColor:O}=e,{willRender:R=Br}=e,{didRender:E=Br}=e,{willRequest:N}=e,{loadImageData:U=Br}=e,{enableGrid:x=!1}=e,{gridColors:j}=e,{gridSize:A}=e,{gridOpacity:P=0}=e,{images:G=[]}=e,{interfaceImages:Q=[]}=e,Z=null,ct=null,lt=null;const xt=(rt,Zt)=>rt.set(Zt,{hard:!f}),yt={precision:1e-4*.01};let bt=0;const qt=m1(void 0,{duration:0});F(t,qt,rt=>r(34,c=rt));const Y=ir(1,yt);F(t,Y,rt=>r(33,s=rt));const et=ir(1,yt);F(t,et,rt=>r(45,i=rt));const Vt=le();F(t,Vt,rt=>r(47,l=rt));const z=le();F(t,z,rt=>r(46,o=rt));const vt=()=>requestAnimationFrame(()=>{Xt=!0,he=0,n()}),St=new Map([]),W=new Map([]),Lt=(rt,Zt)=>({filterParam:rt==="pixelated"?Z.textureFilterNearest:Z.textureFilterLinear,wrapParam:Zt==="repeat"?Z.textureRepeat:Z.textureClamp}),Ce=(rt,Zt,mt)=>{if(!St.has(rt)){St.set(rt,rt);const Et=Lt(Zt,mt);if(!Be(Se=rt)&&(wv(Se)||Gs(Se)||Yl(Se)||Rd(Se))){const ee=Z.textureCreate();Z.textureUpdate(ee,rt,Et),St.set(rt,ee)}else U(rt).then(ee=>{if(!Z||!ee)return;const re=Z.textureCreate();Z.textureUpdate(re,ee,Et),St.set(rt,re),vt()}).catch(ee=>{console.error(ee)})}var Se,ht;if(Rd(rt)&&((ht=rt).currentTime>0&&!ht.paused&&!ht.ended&&ht.readyState>2||rt.dataset.redraw==="true")){const Et=St.get(rt),ee=Lt(Zt,mt);return Z.textureUpdate(Et,rt,ee),rt.dataset.redraw=!1,Et}return St.get(rt)},pt=rt=>{if(!rt.text.length)return void W.delete(rt.id);let{text:Zt,textAlign:mt,fontFamily:Se,fontSize:ht=16,fontWeight:Et,fontVariant:ee,fontStyle:re,lineHeight:Wt=ht,width:Ht,height:fe}=rt;Ht=Mr(Ht)?Math.floor(Ht):Ht,fe=Mr(fe)?Math.floor(fe):fe;const{textSize:Le,signature:mr}=((ve="",ae)=>{let{width:xe=0,height:Ke="auto",fontSize:Me,fontFamily:Pe,lineHeight:rr,fontWeight:Ae,fontStyle:Je,fontVariant:or}=ae;const Sr=Sm({text:ve,fontFamily:Pe,fontWeight:Ae,fontStyle:Je,fontVariant:or,fontSize:Me,lineHeight:rr,width:xe,height:Ke});let at=w0.get(Sr);if(at)return at;let jt=1;Me>1e3&&Zi()&&(jt=Me/1e3,Me=1e3,rr*=jt);const Ne=Hh(Yr("pre",{contenteditable:"true",spellcheck:"false",style:`${Pv}${Kh({fontFamily:Pe,fontWeight:Ae,fontStyle:Je,fontVariant:or,fontSize:Me,lineHeight:rr})};${Jh(ve,ae)}"`,innerHTML:ve})),nt=Ne.getBoundingClientRect();return at={signature:Mv(Ne).flat().map(Yt=>Yt.text).join("_;_"),textSize:lo(Yi(nt),Yt=>Math.ceil(Yt*jt))},w0.set(Sr,at),Ne.remove(),at})(Zt,de(X({},rt),{width:Ht,height:fe})),He=Sm({text:Zt,textAlign:mt,fontFamily:Se,fontSize:ht,fontWeight:Et,fontVariant:ee,fontStyle:re,lineHeight:Wt,signature:mr});if(!St.has(He)){St.set(He,Zt);const ve=Math.ceil(Le.width),ae=Math.ceil(Le.height/Wt)*Wt;if(ve===0||ae===0)return;const xe=u1(),Ke=Math.min(1,(xe-ps*I*2)/(ve*I),xe/(ae*I));Av(Zt,{fontSize:ht,fontFamily:Se,fontWeight:Et,fontVariant:ee,fontStyle:re,textAlign:mt,lineHeight:Wt,width:Ht,height:fe,imageWidth:ve,imageHeight:ae,pixelRatio:I*Ke,willRequest:N,color:[1,0,1]}).then(Me=>{if(!Z)return;const Pe=Z.textureCreate();Z.textureUpdate(Pe,Me,{filterParam:Z.textureFilterLinear,wrapParam:Z.textureClamp,scalar:Ke}),St.set(He,Pe),W.set(rt.id,Pe),vt()}).catch(console.error)}const nr=St.get(He);return om(nr)?nr:W.get(rt.id)},zt=({data:rt,size:Zt,origin:mt,translation:Se,rotation:ht,scale:Et,colorMatrix:ee,opacity:re,convolutionMatrix:Wt,gamma:Ht,vignette:fe,maskFeather:Le,maskCornerRadius:mr,overlayColor:He,enableOverlay:nr,enableBlend:ve,enableAntialiasing:ae})=>{const xe=Ce(rt);let Ke=0,Me=0;if(B===1){const Pe=Math.abs(1-Et)<Number.EPSILON;Ke=Pe&&ct%2!=0?.5:0,Me=Pe&&lt%2!=0?.5:0}return Z.drawImage(xe,Zt,mt.x,mt.y,Se.x+Ke,Se.y+Me,ht.x,ht.y,ht.z,Et,ee,Nr(re,0,1),Wt,Ht,fe,Le,mr,He,nr,ve,ae),xe},Te=([rt,Zt,mt,Se])=>[Se.x,Se.y,rt.x,rt.y,mt.x,mt.y,Zt.x,Zt.y],ne=Or(),At=(rt=[],Zt)=>rt.map(mt=>{let Se=!mt._isLoading&&(Wt=>{let Ht;if(Wt.backgroundImage)Ht=Ce(Wt.backgroundImage,Wt.backgroundImageRendering);else if(Be(Wt.text)){if(Wt.width&&Wt.width<1||Wt.height&&Wt.height<1)return;Ht=pt(Wt)}return Ht})(mt),ht=om(Se)?Se:void 0;const Et=mt._scale||1,ee=mt._translate||ne,re=mt.strokeWidth&&mt.strokeWidth*Et;if(ea(mt.points)){const Wt=mt.points.map(Ht=>ot(Ht.x*Et+ee.x,Ht.y*Et+ee.y));Z.drawPath(Wt,mt.rotation,mt.flipX,mt.flipY,re,mt.strokeColor,mt.pathClose,mt.backgroundColor,mt.opacity)}else if(Mr(mt.rx)&&Mr(mt.ry)){let Wt=mt.x,Ht=mt.y;Wt*=Et,Ht*=Et,Wt+=ee.x,Ht+=ee.y,Z.drawEllipse(ot(Wt,Ht),mt.rx*Et,mt.ry*Et,mt.rotation,mt.flipX,mt.flipY,mt.backgroundColor,ht,void 0,void 0,mt.backgroundCorners&&Te(mt.backgroundCorners),re,mt.strokeColor,mt.opacity,mt.inverted)}else if(Be(mt.text)&&ht||mt.width){const Wt=ht&&Z.textureGetSize(ht);let Ht,fe,Le,mr,He=mt.backgroundColor,nr=mt.strokeColor,ve=[mt.cornerRadius,mt.cornerRadius,mt.cornerRadius,mt.cornerRadius].map(ae=>ae*Et);if(Ht=mt.width?Ds(mt):X({x:mt.x,y:mt.y},Wt),Et&&ee&&(Ht.x*=Et,Ht.y*=Et,Ht.x+=ee.x,Ht.y+=ee.y,Ht.width*=Et,Ht.height*=Et),Wt){if(mt.backgroundImage&&(mt.backgroundSize||mt.backgroundPosition)){const ae=pi(Wt.width,Wt.height);if(mt.backgroundSize==="contain"){const xe=Cn(Ht,ae,Ht);fe=ms(xe),Le=mt.backgroundPosition?mt.backgroundPosition:ot(.5*(Ht.width-fe.width),.5*(Ht.height-fe.height))}else if(mt.backgroundSize==="cover"){const xe=uo(Ht,ae,Ht);fe=ms(xe),mt.backgroundPosition?Le=mt.backgroundPosition:(Le=ot(xe.x,xe.y),Le=ot(.5*(Ht.width-fe.width),.5*(Ht.height-fe.height)))}else mt.backgroundSize?(fe=mt.backgroundSize,Le=mt.backgroundPosition):mt.backgroundPosition&&(fe=X({},Wt),Le=mt.backgroundPosition)}else if(mt.text){const ae={width:Wt.width/I,height:Wt.height/I};let xe=1;if(mt.fontSize>1e3&&Zi()&&(xe=mt.fontSize/1e3),Le=ot(0,0),fe={width:ae.width*Et,height:ae.height*Et},mt.backgroundColor||mt.strokeColor){He=void 0,nr=void 0;let Ke=(mt.width||ae.width-2*ps)*Et,Me=(mt.height||ae.height)*Et;Z.drawRect(de(X({},Ht),{width:Ke,height:Me}),mt.rotation,mt.flipX,mt.flipY,ve,mt.backgroundColor,void 0,void 0,void 0,!1,void 0,re,mt.strokeColor,mt.opacity,void 0,void 0,mt.inverted)}Ht.x-=ps*Et,mr=mt.color||[0,0,0],mt.width?(Ht.height=Ht.height||ae.height*Et,Ht.width+=2*ps*Et/xe,mt.textAlign==="center"?Le.x=.5*(Ht.width-fe.width/xe):mt.textAlign==="right"&&(Le.x=Ht.width-fe.width/xe)):(Ht.width=ae.width*Et,Ht.height=ae.height*Et),mt._prerender&&(mr[3]=0)}}Z.drawRect(Ht,mt.rotation,mt.flipX,mt.flipY,ve,He,ht,fe,Le,!1,mt.backgroundCorners&&Te(mt.backgroundCorners),re,nr,mt.opacity,void 0,mr,mt.inverted)}return Se}).filter(Boolean),K=(rt,Zt,mt,Se,ht,Et)=>Z.drawRect(Zt,0,!1,!1,d,d,rt,Se,mt,!0,void 0,0,void 0,Et,void 0,ht);let Xt=!1,se=!0,me=!1;const Ve=[],ke=[],Dt=[],Ue=()=>{Dt.length=0;const rt=G[0],{blendShapes:Zt,blendShapesDirty:mt,annotationShapes:Se,annotationShapesDirty:ht,interfaceShapes:Et,decorationShapes:ee,frameShapes:re}=R({opacity:rt.opacity,rotation:rt.rotation,scale:rt.scale,images:G,size:ma(ct,lt),backgroundColor:[...c],selectionRect:l}),Wt=[...c],Ht=l,fe=Nr(s,0,1),Le=o,mr=Math.abs(rt.rotation.x/Math.PI*2-1),He=Math.abs(rt.rotation.y/Math.PI*2-1),nr=mr<.99||He<.99,ve=X({},rt.size),ae=rt.backgroundColor,xe=rt.backgroundImage,Ke=Zt.length>0,Me=Se.length>0,Pe=ae[3]>0,rr=!!T&&S>=1;if(fe<1&&Pe){const Ae=Wt[0],Je=Wt[1],or=Wt[2],Sr=1-fe,at=ae[0]*Sr,jt=ae[1]*Sr,Ne=ae[2]*Sr,nt=1-Sr;Wt[0]=at+Ae*nt,Wt[1]=jt+Je*nt,Wt[2]=Ne+or*nt,Wt[3]=1}if(Z.setCanvasColor(g?d:Wt),Ke&&mt?(Z.disableMask(),Z.drawToImageBlendBuffer(ve),Ve.length=0,Ve.push(...At(Zt))):Ke||(Ve.length=0),Dt.push(...Ve),se&&(Z.drawToImageOverlayBuffer(ve,I),se=!1),nr?(Me&&(ht||Xt)||!me?(Z.disableMask(),Z.drawToImageOverlayBuffer(ve,I),ke.length=0,ke.push(...At(Se))):Me||(ke.length=0),me=!0):me=!1,Z.drawToCanvas(),Z.enableMask(Ht,fe),x&&A>=1&&j.length===2&&P&&((Ae,Je,or,Sr,at)=>{const jt=ma(Je,Je),Ne=Ce(p,"pixelated","repeat"),nt=ot(-Ae.x%Je,-Ae.y%Je),Yt=ot(nt.x+.5*jt.width,nt.y);K(Ne,Ae,nt,jt,or,at),K(Ne,Ae,Yt,jt,Sr,at)})(Ht,A,j[0],j[1],P),Pe&&Z.drawRect(Ht,0,!1,!1,d,ae),xe){Z.enableMask(Ht,1);const Ae=Math.max(b.width/xe.width,b.height/xe.height),Je=xe.width*Ae,or=xe.height*Ae,Sr={x:b.x+.5*b.width-.5*Je,y:b.y+.5*b.height-.5*or,width:Je,height:or};Z.drawRect(Sr,0,!1,!1,d,d,Ce(xe,"linear")),Z.enableMask(Ht,fe)}if(rr&&Z.enablePreviewStencil(),Dt.push(...[...G].reverse().map(Ae=>zt(de(X({},Ae),{enableOverlay:nr&&Me,enableBlend:Ke,enableAntialiasing:!0,mask:Ht,maskOpacity:fe,overlayColor:Le})))),Z.enableMask(Ht,S),nr||(rr&&Z.applyPreviewStencil(),Z.resetCanvasMatrix(),Z.updateCanvasMatrix(ve,rt.origin,rt.translation,rt.scale,rt.rotation),ke.length=0,ke.push(...At(Se)),rr&&Z.disablePreviewStencil()),Dt.push(...ke),Z.resetCanvasMatrix(),Z.enableMask(Ht,S),Dt.push(...At(ee)),re.length){Z.enableMask(Ht,1);const Ae=re.filter(or=>!or.expandsCanvas),Je=re.filter(or=>or.expandsCanvas);Ae.length&&Dt.push(...At(Ae)),Je.length&&(Z.enableMask({x:Ht.x+.5,y:Ht.y+.5,width:Ht.width-1,height:Ht.height-1},i),Dt.push(...At(Je)))}Z.disableMask(),Dt.push(...At(Et)),Q.forEach(Ae=>{if(Z.enableMask(Ae.mask,Ae.maskOpacity),Ae.backgroundColor){const or=xe&&uo(X({},Ae.mask),xe.width/xe.height),Sr=xe&&Ce(xe,"linear");Z.drawRect(Ae.mask,0,!1,!1,Ae.maskCornerRadius,Ae.backgroundColor,Sr,or,or,void 0,void 0,void 0,void 0,Ae.opacity,Ae.maskFeather),Sr&&Dt.push(Sr)}const Je=zt(de(X({},Ae),{enableAntialiasing:!1,translation:{x:Ae.translation.x+Ae.offset.x-.5*ct,y:Ae.translation.y+Ae.offset.y-.5*lt}}));Dt.push(Je)}),Z.disableMask(),(Ae=>{St.forEach((Je,or)=>{!Ae.find(Sr=>Sr===Je)&&om(Je)&&(Array.from(W.values()).includes(Je)||(St.delete(or),Z.textureDelete(Je)))})})(Dt),E(),Xt=!1};let Xe,he=0;const _t=()=>{clearTimeout(Xe);const rt=Date.now();rt-he<48?Xe=setTimeout(_t,48):(he=rt,Ue())};return I4(()=>n()),Uo(()=>r(29,Z=b3(h,{alpha:g}))),ri(()=>{Z&&(Z.release(),r(29,Z=void 0),r(0,h=void 0))}),t.$$set=rt=>{"isAnimated"in rt&&r(9,f=rt.isAnimated),"isTransparent"in rt&&r(10,g=rt.isTransparent),"maskRect"in rt&&r(11,b=rt.maskRect),"maskOpacity"in rt&&r(12,w=rt.maskOpacity),"maskFrameOpacity"in rt&&r(13,v=rt.maskFrameOpacity),"maskMarkupOpacity"in rt&&r(14,S=rt.maskMarkupOpacity),"clipAnnotationsToImage"in rt&&r(15,T=rt.clipAnnotationsToImage),"pixelRatio"in rt&&r(16,B=rt.pixelRatio),"textPixelRatio"in rt&&r(17,I=rt.textPixelRatio),"backgroundColor"in rt&&r(18,O=rt.backgroundColor),"willRender"in rt&&r(19,R=rt.willRender),"didRender"in rt&&r(20,E=rt.didRender),"willRequest"in rt&&r(21,N=rt.willRequest),"loadImageData"in rt&&r(22,U=rt.loadImageData),"enableGrid"in rt&&r(23,x=rt.enableGrid),"gridColors"in rt&&r(24,j=rt.gridColors),"gridSize"in rt&&r(25,A=rt.gridSize),"gridOpacity"in rt&&r(26,P=rt.gridOpacity),"images"in rt&&r(27,G=rt.images),"interfaceImages"in rt&&r(28,Q=rt.interfaceImages)},t.$$.update=()=>{if(1&t.$$.dirty[0]&&h){const rt=getComputedStyle(h).getPropertyValue("--color-transition-duration");r(30,bt=(Zt=>{let mt=parseFloat(Zt);return/^[0-9]+s$/.test(Zt)?1e3*mt:mt})(rt))}1074004480&t.$$.dirty[0]&&O&&qt.set(O,{duration:f?bt:0}),4096&t.$$.dirty[0]&&xt(Y,Mr(w)?w:1),8192&t.$$.dirty[0]&&xt(et,Mr(v)?v:1),2048&t.$$.dirty[0]&&b&&Vt.set(b),12&t.$$.dirty[1]&&c&&z.set([c[0],c[1],c[2],Nr(s,0,1)]),671088646&t.$$.dirty[0]&&r(32,a=!!(Z&&ct&&lt&&G.length)),536936454&t.$$.dirty[0]&&ct&&lt&&Z&&(he=0,Z.resize(ct,lt,B)),2&t.$$.dirty[1]&&r(31,n=a?h1()?_t:Ue:be),3&t.$$.dirty[1]&&a&&n&&n()},[h,ct,lt,m,qt,Y,et,Vt,z,f,g,b,w,v,S,T,B,I,O,R,E,N,U,x,j,A,P,G,Q,Z,bt,n,a,s,c,function(rt){xr[rt?"unshift":"push"](()=>{h=rt,r(0,h)})},rt=>{r(1,ct=rt.detail.width),r(2,lt=rt.detail.height),m("measure",{width:ct,height:lt})}]}class P3 extends er{constructor(e){super(),tr(this,e,M3,T3,Ye,{isAnimated:9,isTransparent:10,maskRect:11,maskOpacity:12,maskFrameOpacity:13,maskMarkupOpacity:14,clipAnnotationsToImage:15,pixelRatio:16,textPixelRatio:17,backgroundColor:18,willRender:19,didRender:20,willRequest:21,loadImageData:22,enableGrid:23,gridColors:24,gridSize:25,gridOpacity:26,images:27,interfaceImages:28},null,[-1,-1,-1])}}var ar=(t,e=Boolean,r=" ")=>t.filter(e).join(r);function m$(t,e,r){const a=t.slice();return a[17]=e[r],a}const I3=t=>({tab:4&t}),h$=t=>({tab:t[17]});function g$(t){let e,r,a,n=[],i=new Map,o=t[2];const s=l=>l[17].id;for(let l=0;l<o.length;l+=1){let c=m$(t,o,l),d=s(c);i.set(d,n[l]=f$(d,c))}return{c(){e=gt("ul");for(let l=0;l<n.length;l+=1)n[l].c();C(e,"class",r=ar(["PinturaTabList",t[0]])),C(e,"role","tablist"),C(e,"data-layout",t[1])},m(l,c){st(l,e,c);for(let d=0;d<n.length;d+=1)n[d].m(e,null);t[14](e),a=!0},p(l,c){1124&c&&(o=l[2],ze(),n=Xi(n,c,s,1,l,o,i,e,_o,f$,null,m$),De()),(!a||1&c&&r!==(r=ar(["PinturaTabList",l[0]])))&&C(e,"class",r),(!a||2&c)&&C(e,"data-layout",l[1])},i(l){if(!a){for(let c=0;c<o.length;c+=1)V(n[c]);a=!0}},o(l){for(let c=0;c<n.length;c+=1)_(n[c]);a=!1},d(l){l&&it(e);for(let c=0;c<n.length;c+=1)n[c].d();t[14](null)}}}function f$(t,e){let r,a,n,i,o,s,l,c,d,p;const m=e[11].default,h=ga(m,e,e[10],h$);function f(...b){return e[12](e[17],...b)}function g(...b){return e[13](e[17],...b)}return{key:t,first:null,c(){r=gt("li"),a=gt("button"),h&&h.c(),i=ge(),C(a,"type","button"),a.disabled=n=e[17].disabled,C(r,"role","tab"),C(r,"aria-controls",o=e[17].href.substr(1)),C(r,"id",s=e[17].tabId),C(r,"aria-selected",l=e[17].selected),this.first=r},m(b,w){st(b,r,w),Pt(r,a),h&&h.m(a,null),Pt(r,i),c=!0,d||(p=[Mt(a,"keydown",f),Mt(a,"click",g)],d=!0)},p(b,w){e=b,h&&h.p&&(!c||1028&w)&&$a(h,m,e,e[10],c?fa(m,e[10],w,I3):ya(e[10]),h$),(!c||4&w&&n!==(n=e[17].disabled))&&(a.disabled=n),(!c||4&w&&o!==(o=e[17].href.substr(1)))&&C(r,"aria-controls",o),(!c||4&w&&s!==(s=e[17].tabId))&&C(r,"id",s),(!c||4&w&&l!==(l=e[17].selected))&&C(r,"aria-selected",l)},i(b){c||(V(h,b),c=!0)},o(b){_(h,b),c=!1},d(b){b&&it(r),h&&h.d(b),d=!1,Ar(p)}}}function A3(t){let e,r,a=t[4]&&g$(t);return{c(){a&&a.c(),e=ia()},m(n,i){a&&a.m(n,i),st(n,e,i),r=!0},p(n,[i]){n[4]?a?(a.p(n,i),16&i&&V(a,1)):(a=g$(n),a.c(),V(a,1),a.m(e.parentNode,e)):a&&(ze(),_(a,1,1,()=>{a=null}),De())},i(n){r||(V(a),r=!0)},o(n){_(a),r=!1},d(n){a&&a.d(n),n&&it(e)}}}function E3(t,e,r){let a,n,i,{$$slots:o={},$$scope:s}=e,{class:l}=e,{name:c}=e,{selected:d}=e,{tabs:p=[]}=e,{layout:m}=e;const h=Oi(),f=w=>{const v=i.querySelectorAll('[role="tab"] button')[w];v&&v.focus()},g=(w,v)=>{w.preventDefault(),w.stopPropagation(),h("select",v)},b=({key:w},v)=>{if(!/arrow/i.test(w))return;const S=p.findIndex(T=>T.id===v);return/right|down/i.test(w)?f(S<p.length-1?S+1:0):/left|up/i.test(w)?f(S>0?S-1:p.length-1):void 0};return t.$$set=w=>{"class"in w&&r(0,l=w.class),"name"in w&&r(7,c=w.name),"selected"in w&&r(8,d=w.selected),"tabs"in w&&r(9,p=w.tabs),"layout"in w&&r(1,m=w.layout),"$$scope"in w&&r(10,s=w.$$scope)},t.$$.update=()=>{896&t.$$.dirty&&r(2,a=p.map(w=>{const v=w.id===d;return de(X({},w),{tabId:`tab-${c}-${w.id}`,href:`#panel-${c}-${w.id}`,selected:v})})),4&t.$$.dirty&&r(4,n=a.length>1)},[l,m,a,i,n,g,b,c,d,p,s,o,(w,v)=>b(v,w.id),(w,v)=>g(v,w.id),function(w){xr[w?"unshift":"push"](()=>{i=w,r(3,i)})}]}class qd extends er{constructor(e){super(),tr(this,e,E3,A3,Ye,{class:0,name:7,selected:8,tabs:9,layout:1})}}const V3=t=>({panel:16&t}),$$=t=>({panel:t[4][0].id,panelIsActive:!0});function y$(t,e,r){const a=t.slice();return a[14]=e[r].id,a[15]=e[r].shouldDraw,a[16]=e[r].panelId,a[17]=e[r].tabindex,a[18]=e[r].labelledBy,a[19]=e[r].isActive,a[20]=e[r].hidden,a[3]=e[r].visible,a}const L3=t=>({panel:16&t,panelIsActive:16&t}),b$=t=>({panel:t[14],panelIsActive:t[19]});function F3(t){let e,r,a,n,i,o;const s=t[11].default,l=ga(s,t,t[10],$$);return{c(){e=gt("div"),r=gt("div"),l&&l.c(),C(r,"class",a=ar([t[1]])),C(e,"class",t[0]),C(e,"style",t[2])},m(c,d){st(c,e,d),Pt(e,r),l&&l.m(r,null),n=!0,i||(o=[Mt(e,"measure",t[13]),Ir(qa.call(null,e))],i=!0)},p(c,d){l&&l.p&&(!n||1040&d)&&$a(l,s,c,c[10],n?fa(s,c[10],d,V3):ya(c[10]),$$),(!n||2&d&&a!==(a=ar([c[1]])))&&C(r,"class",a),(!n||1&d)&&C(e,"class",c[0]),(!n||4&d)&&C(e,"style",c[2])},i(c){n||(V(l,c),n=!0)},o(c){_(l,c),n=!1},d(c){c&&it(e),l&&l.d(c),i=!1,Ar(o)}}}function N3(t){let e,r,a,n,i,o=[],s=new Map,l=t[4];const c=d=>d[14];for(let d=0;d<l.length;d+=1){let p=y$(t,l,d),m=c(p);s.set(m,o[d]=x$(m,p))}return{c(){e=gt("div");for(let d=0;d<o.length;d+=1)o[d].c();C(e,"class",r=ar(["PinturaTabPanels",t[0]])),C(e,"style",t[2])},m(d,p){st(d,e,p);for(let m=0;m<o.length;m+=1)o[m].m(e,null);a=!0,n||(i=[Mt(e,"measure",t[12]),Ir(qa.call(null,e,{observePosition:!0}))],n=!0)},p(d,p){1042&p&&(l=d[4],ze(),o=Xi(o,p,c,1,d,l,s,e,_o,x$,null,y$),De()),(!a||1&p&&r!==(r=ar(["PinturaTabPanels",d[0]])))&&C(e,"class",r),(!a||4&p)&&C(e,"style",d[2])},i(d){if(!a){for(let p=0;p<l.length;p+=1)V(o[p]);a=!0}},o(d){for(let p=0;p<o.length;p+=1)_(o[p]);a=!1},d(d){d&&it(e);for(let p=0;p<o.length;p+=1)o[p].d();n=!1,Ar(i)}}}function v$(t){let e;const r=t[11].default,a=ga(r,t,t[10],b$);return{c(){a&&a.c()},m(n,i){a&&a.m(n,i),e=!0},p(n,i){a&&a.p&&(!e||1040&i)&&$a(a,r,n,n[10],e?fa(r,n[10],i,L3):ya(n[10]),b$)},i(n){e||(V(a,n),e=!0)},o(n){_(a,n),e=!1},d(n){a&&a.d(n)}}}function x$(t,e){let r,a,n,i,o,s,l,c,d,p=e[15]&&v$(e);return{key:t,first:null,c(){r=gt("div"),p&&p.c(),a=ge(),C(r,"class",n=ar(["PinturaTabPanel",e[1]])),r.hidden=i=e[20],C(r,"id",o=e[16]),C(r,"tabindex",s=e[17]),C(r,"aria-labelledby",l=e[18]),C(r,"data-inert",c=!e[3]),this.first=r},m(m,h){st(m,r,h),p&&p.m(r,null),Pt(r,a),d=!0},p(m,h){(e=m)[15]?p?(p.p(e,h),16&h&&V(p,1)):(p=v$(e),p.c(),V(p,1),p.m(r,a)):p&&(ze(),_(p,1,1,()=>{p=null}),De()),(!d||2&h&&n!==(n=ar(["PinturaTabPanel",e[1]])))&&C(r,"class",n),(!d||16&h&&i!==(i=e[20]))&&(r.hidden=i),(!d||16&h&&o!==(o=e[16]))&&C(r,"id",o),(!d||16&h&&s!==(s=e[17]))&&C(r,"tabindex",s),(!d||16&h&&l!==(l=e[18]))&&C(r,"aria-labelledby",l),(!d||16&h&&c!==(c=!e[3]))&&C(r,"data-inert",c)},i(m){d||(V(p),d=!0)},o(m){_(p),d=!1},d(m){m&&it(r),p&&p.d()}}}function z3(t){let e,r,a,n;const i=[N3,F3],o=[];function s(l,c){return l[5]?0:1}return e=s(t),r=o[e]=i[e](t),{c(){r.c(),a=ia()},m(l,c){o[e].m(l,c),st(l,a,c),n=!0},p(l,[c]){let d=e;e=s(l),e===d?o[e].p(l,c):(ze(),_(o[d],1,1,()=>{o[d]=null}),De(),r=o[e],r?r.p(l,c):(r=o[e]=i[e](l),r.c()),V(r,1),r.m(a.parentNode,a))},i(l){n||(V(r),n=!0)},o(l){_(r),n=!1},d(l){o[e].d(l),l&&it(a)}}}function D3(t,e,r){let a,n,{$$slots:i={},$$scope:o}=e,{class:s}=e,{name:l}=e,{selected:c}=e,{panelClass:d}=e,{panels:p=[]}=e,{visible:m}=e,{style:h}=e;const f={};return t.$$set=g=>{"class"in g&&r(0,s=g.class),"name"in g&&r(6,l=g.name),"selected"in g&&r(7,c=g.selected),"panelClass"in g&&r(1,d=g.panelClass),"panels"in g&&r(8,p=g.panels),"visible"in g&&r(3,m=g.visible),"style"in g&&r(2,h=g.style),"$$scope"in g&&r(10,o=g.$$scope)},t.$$.update=()=>{968&t.$$.dirty&&r(4,a=p.map(g=>{const b=g===c;b&&r(9,f[g]=!0,f);const w=m?m.indexOf(g)!==-1:b;return{id:g,panelId:`panel-${l}-${g}`,labelledBy:`tab-${l}-${g}`,isActive:b,hidden:!b,visible:w,tabindex:b?0:-1,shouldDraw:b||f[g]}})),16&t.$$.dirty&&r(5,n=a.length>1)},[s,d,h,m,a,n,l,c,p,f,o,i,function(g){on.call(this,t,g)},function(g){on.call(this,t,g)}]}class jd extends er{constructor(e){super(),tr(this,e,D3,z3,Ye,{class:0,name:6,selected:7,panelClass:1,panels:8,visible:3,style:2})}}var g1=t=>{const e=Object.getOwnPropertyDescriptors(t.prototype);return Object.keys(e).filter(r=>!!e[r].get)};function w$(t){let e,r,a,n;const i=[t[4]];function o(c){t[22](c)}var s=t[10];function l(c){let d={};for(let p=0;p<i.length;p+=1)d=la(d,i[p]);return c[2]!==void 0&&(d.name=c[2]),{props:d}}return s&&(e=Id(s,l(t)),xr.push(()=>hn(e,"name",o)),t[23](e),e.$on("measure",t[11])),{c(){e&&Ut(e.$$.fragment),a=ia()},m(c,d){e&&Ot(e,c,d),st(c,a,d),n=!0},p(c,d){const p=16&d[0]?Ja(i,[Mn(c[4])]):{};if(!r&&4&d[0]&&(r=!0,p.name=c[2],Rn(()=>r=!1)),s!==(s=c[10])){if(e){ze();const m=e;_(m.$$.fragment,1,0,()=>{Bt(m,1)}),De()}s?(e=Id(s,l(c)),xr.push(()=>hn(e,"name",o)),c[23](e),e.$on("measure",c[11]),Ut(e.$$.fragment),V(e.$$.fragment,1),Ot(e,a.parentNode,a)):e=null}else s&&e.$set(p)},i(c){n||(e&&V(e.$$.fragment,c),n=!0)},o(c){e&&_(e.$$.fragment,c),n=!1},d(c){t[23](null),c&&it(a),e&&Bt(e,c)}}}function O3(t){let e,r,a,n=t[5]&&w$(t);return{c(){e=gt("div"),n&&n.c(),C(e,"data-util",t[2]),C(e,"class",r=ar(["PinturaUtilPanel",t[1]])),C(e,"style",t[6])},m(i,o){st(i,e,o),n&&n.m(e,null),t[24](e),a=!0},p(i,o){i[5]?n?(n.p(i,o),32&o[0]&&V(n,1)):(n=w$(i),n.c(),V(n,1),n.m(e,null)):n&&(ze(),_(n,1,1,()=>{n=null}),De()),(!a||4&o[0])&&C(e,"data-util",i[2]),(!a||2&o[0]&&r!==(r=ar(["PinturaUtilPanel",i[1]])))&&C(e,"class",r),(!a||64&o[0])&&C(e,"style",i[6])},i(i){a||(V(n),a=!0)},o(i){_(n),a=!1},d(i){i&&it(e),n&&n.d(),t[24](null)}}}function B3(t,e,r){let a,n,i,o,s,l;const c=Oi();let{isActive:d=!0}=e,{stores:p}=e,{content:m}=e,{component:h}=e,{locale:f}=e,{class:g}=e;const b=ta("isAnimated");let w;F(t,b,G=>r(21,l=G));const v=ir(0),S=vr(v,G=>Nr(G,0,1));F(t,S,G=>r(20,s=G));let T=!d;const B=le(d);F(t,B,G=>r(25,o=G));const I={isActive:vr(B,async(G,Q)=>{if(!G)return Q(G);await Qv(),Q(G)}),isActiveFraction:vr(S,G=>G),isVisible:vr(S,G=>G>0)},O=m.view,R=g1(O),E=Object.keys(m.props||{}).reduce((G,Q)=>(R.includes(Q)&&(G[Q]=m.props[Q]),G),{}),N=Object.keys(I).reduce((G,Q)=>(R.includes(Q)&&(G[Q]=I[Q]),G),{});let U,x;const j=G=>{r(17,w=X({},G.detail)),P&&d&&c("measure",X({},w))};Ei("measurable",qa);const A=fs().$$.context;let P=!1;return Uo(()=>{if(r(19,P=!0),i)return;r(0,h=new O({target:x,props:X({},n),context:A})),r(2,U=h.name);const G=h.$on("measure",j);return()=>{G(),h.$destroy()}}),t.$$set=G=>{"isActive"in G&&r(12,d=G.isActive),"stores"in G&&r(13,p=G.stores),"content"in G&&r(14,m=G.content),"component"in G&&r(0,h=G.component),"locale"in G&&r(15,f=G.locale),"class"in G&&r(1,g=G.class)},t.$$.update=()=>{135169&t.$$.dirty[0]&&w&&d&&h&&c("measure",w),2101248&t.$$.dirty[0]&&v.set(d?1:0,{hard:l===!1}),1310720&t.$$.dirty[0]&&(s<=0&&!T?r(18,T=!0):s>0&&T&&r(18,T=!1)),786432&t.$$.dirty[0]&&P&&c(T?"hide":"show"),1048576&t.$$.dirty[0]&&c("fade",s),1048576&t.$$.dirty[0]&&r(6,a=s<1?"opacity: "+s:void 0),4096&t.$$.dirty[0]&&Rt(B,o=d,o),40960&t.$$.dirty[0]&&r(4,n=de(X(X({},E),N),{stores:p,locale:f}))},r(5,i=!R.includes("external")),[h,g,U,x,n,i,a,b,S,B,O,j,d,p,m,f,v,w,T,P,s,l,function(G){U=G,r(2,U)},function(G){xr[G?"unshift":"push"](()=>{h=G,r(0,h)})},function(G){xr[G?"unshift":"push"](()=>{x=G,r(3,x)})}]}class x2 extends er{constructor(e){super(),tr(this,e,B3,O3,Ye,{isActive:12,stores:13,content:14,component:0,locale:15,class:1,opacity:16},null,[-1,-1])}get opacity(){return this.$$.ctx[16]}}function U3(t){let e,r,a;const n=t[5].default,i=ga(n,t,t[4],null);return{c(){e=Xa("svg"),i&&i.c(),C(e,"class",t[3]),C(e,"style",t[2]),C(e,"width",t[0]),C(e,"height",t[1]),C(e,"viewBox",r="0 0 "+t[0]+`
    `+t[1]),C(e,"xmlns","http://www.w3.org/2000/svg"),C(e,"aria-hidden","true"),C(e,"focusable","false"),C(e,"stroke-linecap","round"),C(e,"stroke-linejoin","round")},m(o,s){st(o,e,s),i&&i.m(e,null),a=!0},p(o,[s]){i&&i.p&&(!a||16&s)&&$a(i,n,o,o[4],a?fa(n,o[4],s,null):ya(o[4]),null),(!a||8&s)&&C(e,"class",o[3]),(!a||4&s)&&C(e,"style",o[2]),(!a||1&s)&&C(e,"width",o[0]),(!a||2&s)&&C(e,"height",o[1]),(!a||3&s&&r!==(r="0 0 "+o[0]+`
    `+o[1]))&&C(e,"viewBox",r)},i(o){a||(V(i,o),a=!0)},o(o){_(i,o),a=!1},d(o){o&&it(e),i&&i.d(o)}}}function _3(t,e,r){let{$$slots:a={},$$scope:n}=e,{width:i=24}=e,{height:o=24}=e,{style:s}=e,{class:l}=e;return t.$$set=c=>{"width"in c&&r(0,i=c.width),"height"in c&&r(1,o=c.height),"style"in c&&r(2,s=c.style),"class"in c&&r(3,l=c.class),"$$scope"in c&&r(4,n=c.$$scope)},[i,o,s,l,n,a]}class ei extends er{constructor(e){super(),tr(this,e,_3,U3,Ye,{width:0,height:1,style:2,class:3})}}var w2=(t,e)=>e===t.target||e.contains(t.target),S$=(t,e,r)=>{return(Be(e)?e:t)+(r?` (${a=r,a.map(n=>n==="CMD"?Yh()?"\u2318":"Ctrl":n).join("+")})`:"");var a};function C$(t){let e,r;return e=new ei({props:{class:"PinturaButtonIcon",$$slots:{default:[W3]},$$scope:{ctx:t}}}),{c(){Ut(e.$$.fragment)},m(a,n){Ot(e,a,n),r=!0},p(a,n){const i={};536870920&n&&(i.$$scope={dirty:n,ctx:a}),e.$set(i)},i(a){r||(V(e.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),r=!1},d(a){Bt(e,a)}}}function W3(t){let e;return{c(){e=Xa("g")},m(r,a){st(r,e,a),e.innerHTML=t[3]},p(r,a){8&a&&(e.innerHTML=r[3])},d(r){r&&it(e)}}}function k$(t){let e;return{c(){e=gt("span"),C(e,"class",t[11])},m(r,a){st(r,e,a),e.innerHTML=t[0]},p(r,a){1&a&&(e.innerHTML=r[0]),2048&a&&C(e,"class",r[11])},d(r){r&&it(e)}}}function q3(t){let e,r,a,n,i;const o=t[27].default,s=ga(o,t,t[29],null),l=s||function(c){let d,p,m,h=c[3]&&C$(c),f=c[0]&&k$(c);return{c(){d=gt("span"),h&&h.c(),p=ge(),f&&f.c(),C(d,"class",c[13])},m(g,b){st(g,d,b),h&&h.m(d,null),Pt(d,p),f&&f.m(d,null),m=!0},p(g,b){g[3]?h?(h.p(g,b),8&b&&V(h,1)):(h=C$(g),h.c(),V(h,1),h.m(d,p)):h&&(ze(),_(h,1,1,()=>{h=null}),De()),g[0]?f?f.p(g,b):(f=k$(g),f.c(),f.m(d,null)):f&&(f.d(1),f=null),(!m||8192&b)&&C(d,"class",g[13])},i(g){m||(V(h),m=!0)},o(g){_(h),m=!1},d(g){g&&it(d),h&&h.d(),f&&f.d()}}}(t);return{c(){e=gt("button"),l&&l.c(),C(e,"type",t[6]),C(e,"style",t[4]),e.disabled=t[5],C(e,"class",t[12]),C(e,"title",r=S$(t[0],t[1],t[2]))},m(c,d){st(c,e,d),l&&l.m(e,null),t[28](e),a=!0,n||(i=[Mt(e,"keydown",function(){Vr(t[8])&&t[8].apply(this,arguments)}),Mt(e,"click",function(){Vr(t[7])&&t[7].apply(this,arguments)}),Mt(e,"pointerdown",function(){Vr(t[14])&&t[14].apply(this,arguments)}),Ir(t[9].call(null,e))],n=!0)},p(c,[d]){t=c,s?s.p&&(!a||536870912&d)&&$a(s,o,t,t[29],a?fa(o,t[29],d,null):ya(t[29]),null):l&&l.p&&(!a||10249&d)&&l.p(t,a?d:-1),(!a||64&d)&&C(e,"type",t[6]),(!a||16&d)&&C(e,"style",t[4]),(!a||32&d)&&(e.disabled=t[5]),(!a||4096&d)&&C(e,"class",t[12]),(!a||7&d&&r!==(r=S$(t[0],t[1],t[2])))&&C(e,"title",r)},i(c){a||(V(l,c),a=!0)},o(c){_(l,c),a=!1},d(c){c&&it(e),l&&l.d(c),t[28](null),n=!1,Ar(i)}}}function j3(t,e,r){let a,n,i,o,s,l,{$$slots:c={},$$scope:d}=e,{class:p}=e,{label:m}=e,{title:h}=e,{shortcut:f}=e,{labelClass:g}=e,{innerClass:b}=e,{hideLabel:w=!1}=e,{icon:v}=e,{style:S}=e,{disabled:T}=e,{type:B="button"}=e,{onclick:I}=e,{onkeydown:O}=e,{onhold:R}=e,{action:E=()=>{}}=e,{holdThreshold:N=500}=e,{holdSpeedUpFactor:U=.5}=e,{holdSpeedMin:x=20}=e;const j=P=>{r(25,l=setTimeout(()=>{R(),j(Math.max(P*U,x))},P))};let A;return t.$$set=P=>{"class"in P&&r(15,p=P.class),"label"in P&&r(0,m=P.label),"title"in P&&r(1,h=P.title),"shortcut"in P&&r(2,f=P.shortcut),"labelClass"in P&&r(16,g=P.labelClass),"innerClass"in P&&r(17,b=P.innerClass),"hideLabel"in P&&r(18,w=P.hideLabel),"icon"in P&&r(3,v=P.icon),"style"in P&&r(4,S=P.style),"disabled"in P&&r(5,T=P.disabled),"type"in P&&r(6,B=P.type),"onclick"in P&&r(7,I=P.onclick),"onkeydown"in P&&r(8,O=P.onkeydown),"onhold"in P&&r(19,R=P.onhold),"action"in P&&r(9,E=P.action),"holdThreshold"in P&&r(20,N=P.holdThreshold),"holdSpeedUpFactor"in P&&r(21,U=P.holdSpeedUpFactor),"holdSpeedMin"in P&&r(22,x=P.holdSpeedMin),"$$scope"in P&&r(29,d=P.$$scope)},t.$$.update=()=>{101187584&t.$$.dirty&&r(26,n=R?()=>{l&&(clearTimeout(l),r(25,l=void 0),document.documentElement.removeEventListener("pointerup",n))}:We),68681728&t.$$.dirty&&r(14,a=R?()=>{document.documentElement.addEventListener("pointerup",n),j(N)}:We),131072&t.$$.dirty&&r(13,i=ar(["PinturaButtonInner",b])),294912&t.$$.dirty&&r(12,o=ar(["PinturaButton",w&&"PinturaButtonIconOnly",p])),327680&t.$$.dirty&&r(11,s=ar([w?"implicit":"PinturaButtonLabel",g]))},[m,h,f,v,S,T,B,I,O,E,A,s,o,i,a,p,g,b,w,R,N,U,x,P=>w2(P,A),()=>A,l,n,c,function(P){xr[P?"unshift":"push"](()=>{A=P,r(10,A)})},d]}class Bo extends er{constructor(e){super(),tr(this,e,j3,q3,Ye,{class:15,label:0,title:1,shortcut:2,labelClass:16,innerClass:17,hideLabel:18,icon:3,style:4,disabled:5,type:6,onclick:7,onkeydown:8,onhold:19,action:9,holdThreshold:20,holdSpeedUpFactor:21,holdSpeedMin:22,isEventTarget:23,getElement:24})}get isEventTarget(){return this.$$.ctx[23]}get getElement(){return this.$$.ctx[24]}}var S2=(t,e)=>{const r=t.findIndex(e);if(r>=0)return t.splice(r,1)};const H3=80;var Wo=(t,e={})=>{const{inertia:r=!1,inertiaDurationMultiplier:a=H3,shouldStartInteraction:n=()=>!0,pinch:i=!1,multiTouch:o,getEventPosition:s=lt=>ot(lt.clientX,lt.clientY)}=e;function l(lt,xt){t.dispatchEvent(new CustomEvent(lt,{detail:xt}))}function c(){B&&B(),B=void 0}const d=[],p=lt=>lt.timeStamp===0?Date.now():lt.timeStamp,m=()=>{const lt=Fe(d[0].position);if(d[1]){const xt=.5*(d[1].position.x-lt.x),yt=.5*(d[1].position.y-lt.y);lt.x+=xt,lt.y+=yt}return lt},h=lt=>{lt.origin.x=lt.position.x,lt.origin.y=lt.position.y,lt.translation.x=0,lt.translation.y=0},f=lt=>{const xt=(yt=>d.findIndex(bt=>bt.event.pointerId===yt.pointerId))(lt);if(!(xt<0))return d[xt]},g=()=>d.length===1,b=()=>d.length===2,w=lt=>{const xt=Kn(lt.map(yt=>yt.position));return{center:xt,distance:((yt,bt)=>yt.reduce((qt,Y)=>qt+Vn(bt,Y.position),0)/yt.length)(lt,xt),velocity:Kn(lt.map(yt=>yt.velocity)),translation:Kn(lt.map(yt=>yt.translation))}};let v,S,T,B,I,O,R,E,N=0,U;function x(lt){if(!b()&&!(xt=>Mr(xt.button)&&xt.button!==0)(lt)&&n(lt,t)){if(c(),(xt=>{const yt=p(xt),bt={timeStamp:yt,timeStampInitial:yt,position:s(xt),origin:s(xt),velocity:Or(),velocityHistory:[],velocityAverage:Or(),translation:Or(),interactionState:void 0,event:xt};d.push(bt),bt.interactionState=w(d)})(lt),g())document.documentElement.addEventListener("pointermove",A),document.documentElement.addEventListener("pointerup",P),document.documentElement.addEventListener("pointercancel",P),document.addEventListener("visibilitychange",Q),E=!1,R=1,O=Or(),I=void 0,l("interactionstart",{origin:Fe(f(lt).origin)});else if(i)E=!0,I=Vn(d[0].position,d[1].position),O.x+=d[0].translation.x,O.y+=d[0].translation.y,h(d[0]);else if(o===!1)return d.length=0,ct(),l("interactioncancel")}}t.addEventListener("pointerdown",x);let j=Date.now();function A(lt){lt.preventDefault(),(qt=>{const Y=f(qt);if(!Y)return;const et=p(qt),Vt=s(qt),z=Math.max(1,et-Y.timeStamp);Y.velocity.x=(Vt.x-Y.position.x)/z,Y.velocity.y=(Vt.y-Y.position.y)/z,Y.velocityHistory.push(Fe(Y.velocity)),Y.velocityHistory=Y.velocityHistory.slice(-3),Y.velocityAverage=Y.velocityHistory.reduce((vt,St,W,Lt)=>(vt.x+=St.x/Lt.length,vt.y+=St.y/Lt.length,vt),Or()),Y.translation.x=Vt.x-Y.origin.x,Y.translation.y=Vt.y-Y.origin.y,Y.timeStamp=et,Y.position.x=Vt.x,Y.position.y=Vt.y,Y.event=qt})(lt);const xt=Fe(d[0].translation);let yt=R;i&&b()&&(yt*=Vn(d[0].position,d[1].position)/I,pa(xt,d[1].translation)),pa(xt,O);const bt=Date.now();bt-j<16||(j=bt,l("interactionupdate",{position:m(),translation:xt,scalar:i?yt:void 0,isMultiTouching:b()}))}function P(lt){if(!f(lt))return;const xt=m(),yt=(vt=>{const St=S2(d,W=>W.event.pointerId===vt.pointerId);if(St)return St[0]})(lt);i&&g()&&(R*=Vn(d[0].position,yt.position)/I,O.x+=d[0].translation.x+yt.translation.x,O.y+=d[0].translation.y+yt.translation.y,h(d[0]));let bt=!1,qt=!1;if(!E&&yt){const vt=performance.now(),St=vt-yt.timeStampInitial;bt=hi(yt.translation)<64&&St<300,qt=!!(U&&bt&&vt-N<700&&hi(U,yt.position)<128),bt&&(U=Fe(yt.position),N=vt)}if(d.length>0)return;ct();const Y=Fe(yt.translation),et=Fe(yt.velocityAverage);let Vt=!1;l("interactionrelease",{isTap:bt,isDoubleTap:qt,position:xt,translation:Y,scalar:R,preventInertia:()=>Vt=!0});const z=Vn(et);if(Vt||!r||z<.25)return Z(Y,{isTap:bt,isDoubleTap:qt});S=Fe(xt),T=Fe(Y),v=m1(Fe(Y),{easing:w3,duration:z*a}),v.set({x:Y.x+50*et.x,y:Y.y+50*et.y}).then(()=>{B&&Z(oo(v),{isTap:bt,isDoubleTap:qt})}),B=v.subscribe(G)}function G(lt){lt&&l("interactionupdate",{position:ot(S.x+(lt.x-T.x),S.y+(lt.y-T.y)),translation:lt,scalar:i?R:void 0})}function Q(lt){if(document.visibilityState==="visible"||!d.length)return;const xt=w(d);c(),l("interactionend",X({},xt)),d.length=0,ct()}function Z(lt,xt){c(),l("interactionend",de(X({},xt),{translation:lt,scalar:i?R:void 0}))}function ct(){document.documentElement.removeEventListener("pointermove",A),document.documentElement.removeEventListener("pointerup",P),document.documentElement.removeEventListener("pointercancel",P),document.addEventListener("visibilitychange",Q)}return{destroy(){c(),t.removeEventListener("pointerdown",x)}}},qo=(t,e={})=>{const{direction:r,shiftMultiplier:a=10,bubbles:n=!1,preventDefault:i=!1,stopKeydownPropagation:o=!0}=e,s=r==="horizontal",l=r==="vertical",c=d=>{const{key:p}=d,m=d.shiftKey,h=/up|down/i.test(p),f=/left|right/i.test(p);if(!f&&!h||s&&h||l&&f)return;const g=m?a:1;o&&d.stopPropagation(),i&&d.preventDefault(),t.dispatchEvent(new CustomEvent("nudge",{bubbles:n,detail:ot((/left/i.test(p)?-1:/right/i.test(p)?1:0)*g,(/up/i.test(p)?-1:/down/i.test(p)?1:0)*g)}))};return t.addEventListener("keydown",c),{destroy(){t.removeEventListener("keydown",c)}}};function Po(t,e){return e?e*Math.sign(t)*Math.log10(1+Math.abs(t)/e):t}const R$=(t,e,r)=>{if(!e||!r)return X({},t);const a=t.x+Po(e.x-t.x,r),n=t.x+t.width+Po(e.x+e.width-(t.x+t.width),r),i=t.y+Po(e.y-t.y,r);return{x:a,y:i,width:n-a,height:t.y+t.height+Po(e.y+e.height-(t.y+t.height),r)-i}},G3=(t,e,r)=>e&&r?ot(t.x+Po(e.x-t.x,r),t.y+Po(e.y-t.y,r)):X({},t);var C2=(t,e)=>{if(t)return/em/.test(t)?16*parseInt(t,10):/px/.test(t)?parseInt(t,10):void 0},Hd=t=>{let e=t.detail||0;const{deltaX:r,deltaY:a,wheelDelta:n,wheelDeltaX:i,wheelDeltaY:o}=t;return Mr(i)&&Math.abs(i)>Math.abs(o)?e=i/-120:Mr(r)&&Math.abs(r)>Math.abs(a)?e=r/20:(n||o)&&(e=(n||o)/-120),e||(e=a/20),(Zi()||po())&&(e*=2),e};function Z3(t){let e,r,a,n,i,o,s;const l=t[36].default,c=ga(l,t,t[35],null);return{c(){e=gt("div"),r=gt("div"),c&&c.c(),C(r,"style",t[5]),C(e,"class",a=ar(["PinturaScrollable",t[0]])),C(e,"style",t[4]),C(e,"data-direction",t[1]),C(e,"data-state",t[6])},m(d,p){st(d,e,p),Pt(e,r),c&&c.m(r,null),t[38](e),i=!0,o||(s=[Mt(r,"interactionstart",t[8]),Mt(r,"interactionupdate",t[10]),Mt(r,"interactionend",t[11]),Mt(r,"interactionrelease",t[9]),Ir(Wo.call(null,r,{inertia:!0})),Mt(r,"measure",t[37]),Ir(qa.call(null,r)),Mt(e,"wheel",t[13],{passive:!1}),Mt(e,"scroll",t[15]),Mt(e,"focusin",t[14]),Mt(e,"nudge",t[16]),Mt(e,"measure",t[12]),Ir(qa.call(null,e,{observePosition:!0})),Ir(n=qo.call(null,e,{direction:t[1]==="x"?"horizontal":"vertical",stopKeydownPropagation:!1}))],o=!0)},p(d,p){c&&c.p&&(!i||16&p[1])&&$a(c,l,d,d[35],i?fa(l,d[35],p,null):ya(d[35]),null),(!i||32&p[0])&&C(r,"style",d[5]),(!i||1&p[0]&&a!==(a=ar(["PinturaScrollable",d[0]])))&&C(e,"class",a),(!i||16&p[0])&&C(e,"style",d[4]),(!i||2&p[0])&&C(e,"data-direction",d[1]),(!i||64&p[0])&&C(e,"data-state",d[6]),n&&Vr(n.update)&&2&p[0]&&n.update.call(null,{direction:d[1]==="x"?"horizontal":"vertical",stopKeydownPropagation:!1})},i(d){i||(V(c,d),i=!0)},o(d){_(c,d),i=!1},d(d){d&&it(e),c&&c.d(d),t[38](null),o=!1,Ar(s)}}}function Y3(t,e,r){let a,n,i,o,s,l,c,d,{$$slots:p={},$$scope:m}=e;const h=Oi();let f,g,b,w,v="idle",S=ir(0);F(t,S,Y=>r(34,d=Y));let T,{class:B}=e,{scrollBlockInteractionDist:I=5}=e,{scrollStep:O=10}=e,{scrollFocusMargin:R=64}=e,{scrollDirection:E="x"}=e,{scrollAutoCancel:N=!1}=e,{elasticity:U=0}=e,{onscroll:x=be}=e,{maskFeatherSize:j}=e,{maskFeatherStartOpacity:A}=e,{maskFeatherEndOpacity:P}=e,{scroll:G}=e,Q="",Z=!0;const ct=S.subscribe(Y=>{const et=Or();et[E]=Y,x(et)}),lt=Y=>Math.max(Math.min(0,Y),b[a]-g[a]);let xt,yt,bt;const qt=(Y,et={})=>{const{elastic:Vt=!1,animate:z=!1,preventScrollState:vt=!1}=et;Math.abs(Y-f)>I&&v==="idle"&&!w&&!vt&&r(27,v="scrolling");const St=lt(Y),W=Vt&&U&&!w?St+Po(Y-St,U):St;let Lt=!0;z?Lt=!1:Z||(Lt=!w),Z=!1,S.set(W,{hard:Lt}).then(Ce=>{w&&(Z=!0)})};return ri(()=>{ct()}),t.$$set=Y=>{"class"in Y&&r(0,B=Y.class),"scrollBlockInteractionDist"in Y&&r(20,I=Y.scrollBlockInteractionDist),"scrollStep"in Y&&r(21,O=Y.scrollStep),"scrollFocusMargin"in Y&&r(22,R=Y.scrollFocusMargin),"scrollDirection"in Y&&r(1,E=Y.scrollDirection),"scrollAutoCancel"in Y&&r(23,N=Y.scrollAutoCancel),"elasticity"in Y&&r(24,U=Y.elasticity),"onscroll"in Y&&r(25,x=Y.onscroll),"maskFeatherSize"in Y&&r(19,j=Y.maskFeatherSize),"maskFeatherStartOpacity"in Y&&r(17,A=Y.maskFeatherStartOpacity),"maskFeatherEndOpacity"in Y&&r(18,P=Y.maskFeatherEndOpacity),"scroll"in Y&&r(26,G=Y.scroll),"$$scope"in Y&&r(35,m=Y.$$scope)},t.$$.update=()=>{if(2&t.$$.dirty[0]&&r(31,a=E==="x"?"width":"height"),2&t.$$.dirty[0]&&r(29,n=E.toUpperCase()),8&t.$$.dirty[0]&&r(33,i=T&&getComputedStyle(T)),8&t.$$.dirty[0]|4&t.$$.dirty[1]&&r(32,o=i&&C2(i.getPropertyValue("--scrollable-feather-size"))),268828676&t.$$.dirty[0]|11&t.$$.dirty[1]&&d!=null&&b&&o!=null&&g){const Y=-1*d/o,et=-(b[a]-g[a]-d)/o;r(17,A=Nr(1-Y,0,1)),r(18,P=Nr(1-et,0,1)),r(19,j=o),r(4,Q=`--scrollable-feather-start-opacity: ${A};--scrollable-feather-end-opacity: ${P}`)}67108872&t.$$.dirty[0]&&T&&G!==void 0&&(Mr(G)?qt(G):qt(G.scrollOffset,G)),268435460&t.$$.dirty[0]|1&t.$$.dirty[1]&&r(30,s=b&&g?g[a]>b[a]:void 0),1207959552&t.$$.dirty[0]&&r(6,l=ar([v,s?"overflows":void 0])),1610612736&t.$$.dirty[0]|8&t.$$.dirty[1]&&r(5,c=s?`transform: translate${n}(${d}px)`:void 0)},[B,E,g,T,Q,c,l,S,()=>{s&&(yt=!1,xt=!0,bt=ot(0,0),w=!1,r(27,v="idle"),f=oo(S))},({detail:Y})=>{s&&(w=!0,r(27,v="idle"))},({detail:Y})=>{s&&(yt||xt&&(xt=!1,hi(Y.translation)<.1)||(!N||E!=="x"||(et=>{const Vt=qn(ot(et.x-bt.x,et.y-bt.y),Math.abs);bt=Fe(et);const z=hi(Vt),vt=Vt.x-Vt.y;return!(z>1&&vt<-.5)})(Y.translation)?qt(f+Y.translation[E],{elastic:!0}):yt=!0))},({detail:Y})=>{if(!s||yt)return;const et=f+Y.translation[E],Vt=lt(et);Z=!1,S.set(Vt).then(z=>{w&&(Z=!0)})},({detail:Y})=>{r(28,b=Y),h("measure",{x:Y.x,y:Y.y,width:Y.width,height:Y.height})},Y=>{if(!s)return;Y.preventDefault(),Y.stopPropagation();const et=Y.shiftKey,Vt=Hd(Y)*(et?-1:1),z=oo(S);qt(z+Vt*O,{animate:!0})},Y=>{if(!s||!w)return;let et=Y.target;Y.target.classList.contains("implicit")&&(et=et.parentNode);const Vt=et[E==="x"?"offsetLeft":"offsetTop"],z=Vt+et[E==="x"?"offsetWidth":"offsetHeight"],vt=oo(S),St=R+j;vt+Vt<St?qt(-Vt+St):vt+z>b[a]-St&&qt(b[a]-z-St,{animate:!0})},()=>{r(3,T[E==="x"?"scrollLeft":"scrollTop"]=0,T)},({detail:Y})=>{if(T.querySelector("[data-focus-visible]"))return;const et=-2*Y[E],Vt=oo(S);qt(Vt+et*O,{animate:!0,preventScrollState:!0})},A,P,j,I,O,R,N,U,x,G,v,b,n,s,a,o,i,d,m,p,Y=>r(2,g=Y.detail),function(Y){xr[Y?"unshift":"push"](()=>{T=Y,r(3,T)})}]}class Ki extends er{constructor(e){super(),tr(this,e,Y3,Z3,Ye,{class:0,scrollBlockInteractionDist:20,scrollStep:21,scrollFocusMargin:22,scrollDirection:1,scrollAutoCancel:23,elasticity:24,onscroll:25,maskFeatherSize:19,maskFeatherStartOpacity:17,maskFeatherEndOpacity:18,scroll:26},null,[-1,-1])}}function T$(t,{delay:e=0,duration:r=400,easing:a=a1}={}){const n=+getComputedStyle(t).opacity;return{delay:e,duration:r,easing:a,css:i=>"opacity: "+i*n}}function X3(t){let e,r,a,n,i;return{c(){e=gt("span"),C(e,"class","PinturaStatusMessage")},m(o,s){st(o,e,s),e.innerHTML=t[0],a=!0,n||(i=[Mt(e,"measure",function(){Vr(t[1])&&t[1].apply(this,arguments)}),Ir(qa.call(null,e))],n=!0)},p(o,[s]){t=o,(!a||1&s)&&(e.innerHTML=t[0])},i(o){a||(Js(()=>{r||(r=j0(e,T$,{duration:500},!0)),r.run(1)}),a=!0)},o(o){r||(r=j0(e,T$,{duration:500},!1)),r.run(0),a=!1},d(o){o&&it(e),o&&r&&r.end(),n=!1,Ar(i)}}}function K3(t,e,r){let{text:a}=e,{onmeasure:n=be}=e;return t.$$set=i=>{"text"in i&&r(0,a=i.text),"onmeasure"in i&&r(1,n=i.onmeasure)},[a,n]}class k2 extends er{constructor(e){super(),tr(this,e,K3,X3,Ye,{text:0,onmeasure:1})}}function J3(t){let e,r,a,n,i,o,s,l;return{c(){e=gt("span"),r=Xa("svg"),a=Xa("g"),n=Xa("circle"),i=Xa("circle"),o=ge(),s=gt("span"),l=Hr(t[3]),C(n,"class","PinturaProgressIndicatorBar"),C(n,"r","8.5"),C(n,"cx","10"),C(n,"cy","10"),C(n,"stroke-linecap","round"),C(n,"opacity",".25"),C(i,"class","PinturaProgressIndicatorFill"),C(i,"r","8.5"),C(i,"stroke-dasharray",t[2]),C(i,"cx","10"),C(i,"cy","10"),C(i,"transform","rotate(-90) translate(-20)"),C(a,"fill","none"),C(a,"stroke","currentColor"),C(a,"stroke-width","2.5"),C(a,"stroke-linecap","round"),C(a,"opacity",t[1]),C(r,"width","20"),C(r,"height","20"),C(r,"viewBox","0 0 20 20"),C(r,"xmlns","http://www.w3.org/2000/svg"),C(r,"aria-hidden","true"),C(r,"focusable","false"),C(s,"class","implicit"),C(e,"class","PinturaProgressIndicator"),C(e,"data-status",t[0])},m(c,d){st(c,e,d),Pt(e,r),Pt(r,a),Pt(a,n),Pt(a,i),Pt(e,o),Pt(e,s),Pt(s,l)},p(c,[d]){4&d&&C(i,"stroke-dasharray",c[2]),2&d&&C(a,"opacity",c[1]),8&d&&ca(l,c[3]),1&d&&C(e,"data-status",c[0])},i:We,o:We,d(c){c&&it(e)}}}function Q3(t,e,r){let a,n,i,o,s,l;const c=Oi();let{progress:d}=e,{min:p=0}=e,{max:m=100}=e,{labelBusy:h="Busy"}=e;const f=ir(0,{precision:.01}),g=ir(0,{precision:.01});F(t,g,v=>r(10,s=v));const b=vr([f],v=>Nr(v,p,m));F(t,b,v=>r(11,l=v));const w=b.subscribe(v=>{d===1&&Math.round(v)>=100&&c("complete")});return Uo(()=>{g.set(1)}),ri(()=>{w()}),t.$$set=v=>{"progress"in v&&r(6,d=v.progress),"min"in v&&r(7,p=v.min),"max"in v&&r(8,m=v.max),"labelBusy"in v&&r(9,h=v.labelBusy)},t.$$.update=()=>{64&t.$$.dirty&&d&&d!==1/0&&f.set(100*d),2624&t.$$.dirty&&r(3,a=d===1/0?h:Math.round(l)+"%"),2112&t.$$.dirty&&r(2,n=d===1/0?"26.5 53":l/100*53+" 53"),1024&t.$$.dirty&&r(1,i=s),64&t.$$.dirty&&r(0,o=d===1/0?"busy":"loading")},[o,i,n,a,g,b,d,p,m,h,s,l]}class t5 extends er{constructor(e){super(),tr(this,e,Q3,J3,Ye,{progress:6,min:7,max:8,labelBusy:9})}}function e5(t){let e,r,a;const n=t[5].default,i=ga(n,t,t[4],null);return{c(){e=gt("span"),i&&i.c(),C(e,"class",r="PinturaStatusAside "+t[0]),C(e,"style",t[1])},m(o,s){st(o,e,s),i&&i.m(e,null),a=!0},p(o,[s]){i&&i.p&&(!a||16&s)&&$a(i,n,o,o[4],a?fa(n,o[4],s,null):ya(o[4]),null),(!a||1&s&&r!==(r="PinturaStatusAside "+o[0]))&&C(e,"class",r),(!a||2&s)&&C(e,"style",o[1])},i(o){a||(V(i,o),a=!0)},o(o){_(i,o),a=!1},d(o){o&&it(e),i&&i.d(o)}}}function r5(t,e,r){let a,{$$slots:n={},$$scope:i}=e,{offset:o=0}=e,{opacity:s=0}=e,{class:l}=e;return t.$$set=c=>{"offset"in c&&r(2,o=c.offset),"opacity"in c&&r(3,s=c.opacity),"class"in c&&r(0,l=c.class),"$$scope"in c&&r(4,i=c.$$scope)},t.$$.update=()=>{12&t.$$.dirty&&r(1,a=`transform:translateX(${o}px);opacity:${s}`)},[l,a,o,s,i,n]}class R2 extends er{constructor(e){super(),tr(this,e,r5,e5,Ye,{offset:2,opacity:3,class:0})}}function a5(t){let e,r;const a=t[3].default,n=ga(a,t,t[2],null);let i=[{for:"_"},t[1]],o={};for(let s=0;s<i.length;s+=1)o=la(o,i[s]);return{c(){e=gt("label"),n&&n.c(),Ks(e,o)},m(s,l){st(s,e,l),n&&n.m(e,null),r=!0},p(s,l){n&&n.p&&(!r||4&l)&&$a(n,a,s,s[2],r?fa(a,s[2],l,null):ya(s[2]),null),Ks(e,o=Ja(i,[{for:"_"},2&l&&s[1]]))},i(s){r||(V(n,s),r=!0)},o(s){_(n,s),r=!1},d(s){s&&it(e),n&&n.d(s)}}}function n5(t){let e,r;const a=t[3].default,n=ga(a,t,t[2],null);let i=[t[1]],o={};for(let s=0;s<i.length;s+=1)o=la(o,i[s]);return{c(){e=gt("div"),n&&n.c(),Ks(e,o)},m(s,l){st(s,e,l),n&&n.m(e,null),r=!0},p(s,l){n&&n.p&&(!r||4&l)&&$a(n,a,s,s[2],r?fa(a,s[2],l,null):ya(s[2]),null),Ks(e,o=Ja(i,[2&l&&s[1]]))},i(s){r||(V(n,s),r=!0)},o(s){_(n,s),r=!1},d(s){s&&it(e),n&&n.d(s)}}}function i5(t){let e,r;const a=t[3].default,n=ga(a,t,t[2],null);let i=[t[1]],o={};for(let s=0;s<i.length;s+=1)o=la(o,i[s]);return{c(){e=gt("div"),n&&n.c(),Ks(e,o)},m(s,l){st(s,e,l),n&&n.m(e,null),r=!0},p(s,l){n&&n.p&&(!r||4&l)&&$a(n,a,s,s[2],r?fa(a,s[2],l,null):ya(s[2]),null),Ks(e,o=Ja(i,[2&l&&s[1]]))},i(s){r||(V(n,s),r=!0)},o(s){_(n,s),r=!1},d(s){s&&it(e),n&&n.d(s)}}}function o5(t){let e,r,a,n;const i=[i5,n5,a5],o=[];function s(l,c){return l[0]==="div"?0:l[0]==="span"?1:l[0]==="label"?2:-1}return~(e=s(t))&&(r=o[e]=i[e](t)),{c(){r&&r.c(),a=ia()},m(l,c){~e&&o[e].m(l,c),st(l,a,c),n=!0},p(l,[c]){let d=e;e=s(l),e===d?~e&&o[e].p(l,c):(r&&(ze(),_(o[d],1,1,()=>{o[d]=null}),De()),~e?(r=o[e],r?r.p(l,c):(r=o[e]=i[e](l),r.c()),V(r,1),r.m(a.parentNode,a)):r=null)},i(l){n||(V(r),n=!0)},o(l){_(r),n=!1},d(l){~e&&o[e].d(l),l&&it(a)}}}function s5(t,e,r){let{$$slots:a={},$$scope:n}=e,{name:i="div"}=e,{attributes:o={}}=e;return t.$$set=s=>{"name"in s&&r(0,i=s.name),"attributes"in s&&r(1,o=s.attributes),"$$scope"in s&&r(2,n=s.$$scope)},[i,o,n,a]}class l5 extends er{constructor(e){super(),tr(this,e,s5,o5,Ye,{name:0,attributes:1})}}var Vl=()=>Ka()&&window.devicePixelRatio||1;let sm=null;var ql=t=>(sm===null&&(sm=Vl()===1?Math.round:e=>e),sm(t)),Nm=(t,e={})=>{if(t){if(e.preventScroll&&po()){const r=document.body.scrollTop;return t.focus(),void(document.body.scrollTop=r)}t.focus(e)}},Vd=t=>(e=>/textarea/i.test(e.nodeName))(t)||(e=>/date|email|number|search|text|url/.test(e.type))(t)||t.isContentEditable;const c5=t=>({}),M$=t=>({}),d5=t=>({}),P$=t=>({});function u5(t){let e,r;const a=[t[7]];let n={$$slots:{default:[m5]},$$scope:{ctx:t}};for(let i=0;i<a.length;i+=1)n=la(n,a[i]);return e=new Bo({props:n}),t[40](e),{c(){Ut(e.$$.fragment)},m(i,o){Ot(e,i,o),r=!0},p(i,o){const s=128&o[0]?Ja(a,[Mn(i[7])]):{};8192&o[1]&&(s.$$scope={dirty:o,ctx:i}),e.$set(s)},i(i){r||(V(e.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),r=!1},d(i){t[40](null),Bt(e,i)}}}function p5(t){let e,r;const a=[t[7]];let n={};for(let i=0;i<a.length;i+=1)n=la(n,a[i]);return e=new Bo({props:n}),t[39](e),{c(){Ut(e.$$.fragment)},m(i,o){Ot(e,i,o),r=!0},p(i,o){const s=128&o[0]?Ja(a,[Mn(i[7])]):{};e.$set(s)},i(i){r||(V(e.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),r=!1},d(i){t[39](null),Bt(e,i)}}}function m5(t){let e;const r=t[38].label,a=ga(r,t,t[44],P$);return{c(){a&&a.c()},m(n,i){a&&a.m(n,i),e=!0},p(n,i){a&&a.p&&(!e||8192&i[1])&&$a(a,r,n,n[44],e?fa(r,n[44],i,d5):ya(n[44]),P$)},i(n){e||(V(a,n),e=!0)},o(n){_(a,n),e=!1},d(n){a&&a.d(n)}}}function I$(t){let e,r,a,n,i,o,s;const l=t[38].details,c=ga(l,t,t[44],M$);return{c(){e=gt("div"),c&&c.c(),r=ge(),a=gt("span"),C(a,"class","PinturaPanelTip"),C(a,"style",t[10]),C(e,"class",n=ar(["PinturaPanel","pintura-editor-panel",t[2]])),C(e,"tabindex","-1"),C(e,"style",t[11])},m(d,p){st(d,e,p),c&&c.m(e,null),Pt(e,r),Pt(e,a),t[41](e),i=!0,o||(s=[Mt(e,"close",t[42]),Mt(e,"keydown",t[18]),Mt(e,"measure",t[43]),Ir(qa.call(null,e))],o=!0)},p(d,p){c&&c.p&&(!i||8192&p[1])&&$a(c,l,d,d[44],i?fa(l,d[44],p,c5):ya(d[44]),M$),(!i||1024&p[0])&&C(a,"style",d[10]),(!i||4&p[0]&&n!==(n=ar(["PinturaPanel","pintura-editor-panel",d[2]])))&&C(e,"class",n),(!i||2048&p[0])&&C(e,"style",d[11])},i(d){i||(V(c,d),i=!0)},o(d){_(c,d),i=!1},d(d){d&&it(e),c&&c.d(d),t[41](null),o=!1,Ar(s)}}}function h5(t){let e,r,a,n,i,o,s,l,c;const d=[p5,u5],p=[];function m(f,g){return f[1]?0:1}r=m(t),a=p[r]=d[r](t);let h=t[6]&&I$(t);return{c(){e=ge(),a.c(),n=ge(),h&&h.c(),i=ge(),o=ia()},m(f,g){st(f,e,g),p[r].m(f,g),st(f,n,g),h&&h.m(f,g),st(f,i,g),st(f,o,g),s=!0,l||(c=[Mt(document.body,"pointerdown",function(){Vr(t[9])&&t[9].apply(this,arguments)}),Mt(document.body,"pointerup",function(){Vr(t[8])&&t[8].apply(this,arguments)})],l=!0)},p(f,g){let b=r;r=m(t=f),r===b?p[r].p(t,g):(ze(),_(p[b],1,1,()=>{p[b]=null}),De(),a=p[r],a?a.p(t,g):(a=p[r]=d[r](t),a.c()),V(a,1),a.m(n.parentNode,n)),t[6]?h?(h.p(t,g),64&g[0]&&V(h,1)):(h=I$(t),h.c(),V(h,1),h.m(i.parentNode,i)):h&&(ze(),_(h,1,1,()=>{h=null}),De())},i(f){s||(V(a),V(h),V(!1),s=!0)},o(f){_(a),_(h),_(!1),s=!1},d(f){f&&it(e),p[r].d(f),f&&it(n),h&&h.d(f),f&&it(i),f&&it(o),l=!1,Ar(c)}}}function g5(t,e,r){let a,n,i,o,s,l,c,d,p,m,h,f,g,b,w,v,S,T,{$$slots:B={},$$scope:I}=e,{buttonClass:O}=e,{buttonLabel:R}=e,{panelClass:E}=e,{isActive:N=!1}=e,{onshow:U=({panel:W})=>Nm(W,{preventScroll:!0})}=e,{onhide:x=be}=e;const j=ta("isAnimated");F(t,j,W=>r(37,T=W));const A=ta("rootPortal");F(t,A,W=>r(32,g=W));const P=ta("rootRect");let G,Q,Z;F(t,P,W=>r(36,S=W));const ct=()=>r(22,Z=a&&a.getBoundingClientRect());let lt=Or(),xt=ir(0);F(t,xt,W=>r(34,w=W));let yt=Or();const bt=le({x:0,y:0});F(t,bt,W=>r(33,b=W));const qt=ir(-5,{stiffness:.1,damping:.35,precision:.001});F(t,qt,W=>r(35,v=W));const Y=W=>w2(W,g)||Q.isEventTarget(W);let et,Vt,z=!1;const vt=W=>{Vd(W.target)||(N||ct(),r(26,Vt=W),r(0,N=!N))},St=W=>{/down/i.test(W.key)&&(r(0,N=!0),r(26,Vt=W))};return ri(()=>{if(!g||!et)return;const W=et;Qv().then(()=>{W.parentNode&&W.remove()})}),t.$$set=W=>{"buttonClass"in W&&r(19,O=W.buttonClass),"buttonLabel"in W&&r(1,R=W.buttonLabel),"panelClass"in W&&r(2,E=W.panelClass),"isActive"in W&&r(0,N=W.isActive),"onshow"in W&&r(20,U=W.onshow),"onhide"in W&&r(21,x=W.onhide),"$$scope"in W&&r(44,I=W.$$scope)},t.$$.update=()=>{if(16&t.$$.dirty[0]&&(a=Q&&Q.getElement()),33554433&t.$$.dirty[0]&&r(8,h=N?W=>{z&&(r(25,z=!1),Y(W)||r(0,N=!1))}:void 0),1&t.$$.dirty[0]|64&t.$$.dirty[1]&&xt.set(N?1:0,{hard:T===!1}),1&t.$$.dirty[0]|64&t.$$.dirty[1]&&qt.set(N?0:-5,{hard:T===!1}),16&t.$$.dirty[1]&&r(29,n=1-v/-5),1&t.$$.dirty[0]|32&t.$$.dirty[1]&&S&&N&&ct(),4194313&t.$$.dirty[0]|32&t.$$.dirty[1]&&S&&G&&Z&&N){let W=Z.x-S.x+.5*Z.width-.5*G.width,Lt=Z.y-S.y+Z.height;const Ce=12,pt=12,zt=S.width-12,Te=S.height-12,ne=W,At=Lt,K=ne+G.width,Xt=At+G.height;ne<Ce&&(r(24,yt.x=ne-Ce,yt),W=Ce),K>zt&&(r(24,yt.x=K-zt,yt),W=zt-G.width),Xt>Te?(r(23,lt.y=-1,lt),pt<Lt-G.height-Z.height?(r(24,yt.y=0,yt),Lt-=G.height+Z.height):(r(24,yt.y=Lt-(Xt-Te),yt),Lt-=Xt-Te)):r(23,lt.y=1,lt),Rt(bt,b=qn(ot(W,Lt),ql),b)}8&t.$$.dirty[1]&&r(6,i=w>0),8&t.$$.dirty[1]&&r(31,o=w<1),8388608&t.$$.dirty[0]|20&t.$$.dirty[1]&&r(30,s=`translateX(${Math.round(b.x)+12*lt.x}px) translateY(${Math.round(b.y)+12*lt.y+lt.y*v}px)`),1073741824&t.$$.dirty[0]|9&t.$$.dirty[1]&&r(11,l=o?`opacity: ${w}; pointer-events: ${w<1?"none":"all"}; transform: ${s};`:"transform: "+s),536870912&t.$$.dirty[0]&&r(27,c=.5+.5*n),536870912&t.$$.dirty[0]&&r(28,d=n),427819016&t.$$.dirty[0]|4&t.$$.dirty[1]&&r(10,p=b&&G&&`opacity:${d};transform:scaleX(${c})rotate(45deg);top:${lt.y<0?yt.y+G.height:0}px;left:${yt.x+.5*G.width}px`),1&t.$$.dirty[0]&&r(9,m=N?W=>{Y(W)||r(25,z=!0)}:void 0),96&t.$$.dirty[0]|2&t.$$.dirty[1]&&i&&g&&et&&et.parentNode!==g&&g.append(et),1&t.$$.dirty[0]&&(N||r(26,Vt=void 0)),68157537&t.$$.dirty[0]&&N&&i&&et&&U({e:Vt,panel:et}),2097217&t.$$.dirty[0]&&i&&!N&&x(),524290&t.$$.dirty[0]&&r(7,f={label:R,class:ar(["PinturaPanelButton",O]),onkeydown:St,onclick:vt})},[N,R,E,G,Q,et,i,f,h,m,p,l,j,A,P,xt,bt,qt,W=>{/esc/i.test(W.key)&&(r(0,N=!1),a.focus())},O,U,x,Z,lt,yt,z,Vt,c,d,n,s,o,g,b,w,v,S,T,B,function(W){xr[W?"unshift":"push"](()=>{Q=W,r(4,Q)})},function(W){xr[W?"unshift":"push"](()=>{Q=W,r(4,Q)})},function(W){xr[W?"unshift":"push"](()=>{et=W,r(5,et)})},W=>{W.stopPropagation(),r(0,N=!1)},W=>r(3,G=Yi(W.detail)),I]}class Gd extends er{constructor(e){super(),tr(this,e,g5,h5,Ye,{buttonClass:19,buttonLabel:1,panelClass:2,isActive:0,onshow:20,onhide:21},null,[-1,-1])}}var f5={Up:38,Down:40,Left:37,Right:39};function $5(t){let e,r,a,n,i,o,s,l;const c=t[15].default,d=ga(c,t,t[14],null);return{c(){e=gt("li"),r=gt("input"),a=ge(),n=gt("label"),d&&d.c(),C(r,"type","radio"),C(r,"class","implicit"),C(r,"id",t[7]),C(r,"name",t[0]),r.value=t[3],r.disabled=t[6],r.hidden=t[5],r.checked=t[4],C(n,"for",t[7]),C(n,"title",t[2]),C(e,"class",i=ar(["PinturaRadioGroupOption",t[1]])),C(e,"data-hidden",t[5]),C(e,"data-disabled",t[6]),C(e,"data-selected",t[4])},m(p,m){st(p,e,m),Pt(e,r),Pt(e,a),Pt(e,n),d&&d.m(n,null),o=!0,s||(l=[Mt(r,"change",M4(t[16])),Mt(r,"keydown",t[9]),Mt(r,"click",t[10])],s=!0)},p(p,[m]){(!o||128&m)&&C(r,"id",p[7]),(!o||1&m)&&C(r,"name",p[0]),(!o||8&m)&&(r.value=p[3]),(!o||64&m)&&(r.disabled=p[6]),(!o||32&m)&&(r.hidden=p[5]),(!o||16&m)&&(r.checked=p[4]),d&&d.p&&(!o||16384&m)&&$a(d,c,p,p[14],o?fa(c,p[14],m,null):ya(p[14]),null),(!o||128&m)&&C(n,"for",p[7]),(!o||4&m)&&C(n,"title",p[2]),(!o||2&m&&i!==(i=ar(["PinturaRadioGroupOption",p[1]])))&&C(e,"class",i),(!o||32&m)&&C(e,"data-hidden",p[5]),(!o||64&m)&&C(e,"data-disabled",p[6]),(!o||16&m)&&C(e,"data-selected",p[4])},i(p){o||(V(d,p),o=!0)},o(p){_(d,p),o=!1},d(p){p&&it(e),d&&d.d(p),s=!1,Ar(l)}}}function y5(t,e,r){let a,n,{$$slots:i={},$$scope:o}=e,{name:s}=e,{class:l}=e,{label:c}=e,{id:d}=e,{value:p}=e,{checked:m}=e,{onkeydown:h}=e,{onclick:f}=e,{hidden:g=!1}=e,{disabled:b=!1}=e;const w=Object.values(f5),v=ta("keysPressed");return F(t,v,S=>r(17,n=S)),t.$$set=S=>{"name"in S&&r(0,s=S.name),"class"in S&&r(1,l=S.class),"label"in S&&r(2,c=S.label),"id"in S&&r(11,d=S.id),"value"in S&&r(3,p=S.value),"checked"in S&&r(4,m=S.checked),"onkeydown"in S&&r(12,h=S.onkeydown),"onclick"in S&&r(13,f=S.onclick),"hidden"in S&&r(5,g=S.hidden),"disabled"in S&&r(6,b=S.disabled),"$$scope"in S&&r(14,o=S.$$scope)},t.$$.update=()=>{2049&t.$$.dirty&&r(7,a=`${s}-${d}`)},[s,l,c,p,m,g,b,a,v,S=>{h(S)},S=>{n.some(T=>w.includes(T))||f(S)},d,h,f,o,i,function(S){on.call(this,t,S)}]}class T2 extends er{constructor(e){super(),tr(this,e,y5,$5,Ye,{name:0,class:1,label:2,id:11,value:3,checked:4,onkeydown:12,onclick:13,hidden:5,disabled:6})}}var Vo=(t=[])=>t.reduce((e,r)=>(ea(r)?ea(r[1]):!!r.options)?e.concat(ea(r)?r[1]:r.options):(e.push(r),e),[]);const ld=(t,e,r)=>{let a;return ea(t)?a=X({id:e,value:t[0],label:t[1]},t[2]||{}):(a=t,a.id=a.id!=null?a.id:e),r?r(a):a};var Ua=(t,e,r)=>Xr(t)?t(e,r):t;const M2=(t,e)=>t.map(([r,a,n])=>{if(ea(a))return[Ua(r,e),M2(a,e)];{const i=[r,Ua(a,e)];if(n){let o=X({},n);n.icon&&(o.icon=Ua(n.icon,e)),i.push(o)}return i}});var P2=(t,e)=>M2(t,e),I2=(t,e)=>Array.isArray(t)&&Array.isArray(e)?mo(t,e):t===e;function A$(t,e,r){const a=t.slice();return a[27]=e[r],a}const b5=t=>({option:1024&t[0]}),E$=t=>({option:t[27]});function V$(t,e,r){const a=t.slice();return a[27]=e[r],a}const v5=t=>({option:1024&t[0]}),L$=t=>({option:t[27]}),x5=t=>({option:1024&t[0]}),F$=t=>({option:t[27]});function N$(t){let e,r,a,n,i,o=[],s=new Map,l=t[1]&&z$(t),c=t[10];const d=p=>p[27].id;for(let p=0;p<c.length;p+=1){let m=A$(t,c,p),h=d(m);s.set(h,o[p]=W$(h,m))}return{c(){e=gt("fieldset"),l&&l.c(),r=ge(),a=gt("ul");for(let p=0;p<o.length;p+=1)o[p].c();C(a,"class","PinturaRadioGroupOptions"),C(e,"class",n=ar(["PinturaRadioGroup",t[3]])),C(e,"data-layout",t[5]),C(e,"title",t[7])},m(p,m){st(p,e,m),l&&l.m(e,null),Pt(e,r),Pt(e,a);for(let h=0;h<o.length;h+=1)o[h].m(a,null);i=!0},p(p,m){p[1]?l?l.p(p,m):(l=z$(p),l.c(),l.m(e,r)):l&&(l.d(1),l=null),8419153&m[0]&&(c=p[10],ze(),o=Xi(o,m,d,1,p,c,s,a,_o,W$,null,A$),De()),(!i||8&m[0]&&n!==(n=ar(["PinturaRadioGroup",p[3]])))&&C(e,"class",n),(!i||32&m[0])&&C(e,"data-layout",p[5]),(!i||128&m[0])&&C(e,"title",p[7])},i(p){if(!i){for(let m=0;m<c.length;m+=1)V(o[m]);i=!0}},o(p){for(let m=0;m<o.length;m+=1)_(o[m]);i=!1},d(p){p&&it(e),l&&l.d();for(let m=0;m<o.length;m+=1)o[m].d()}}}function z$(t){let e,r,a;return{c(){e=gt("legend"),r=Hr(t[1]),C(e,"class",a=t[2]&&"implicit")},m(n,i){st(n,e,i),Pt(e,r)},p(n,i){2&i[0]&&ca(r,n[1]),4&i[0]&&a!==(a=n[2]&&"implicit")&&C(e,"class",a)},d(n){n&&it(e)}}}function w5(t){let e,r;return e=new T2({props:{name:t[4],label:t[27].label,id:t[27].id,value:t[27].value,disabled:t[27].disabled,hidden:t[27].hidden,class:t[8],checked:t[12](t[27])===t[0],onkeydown:t[13](t[27]),onclick:t[14](t[27]),$$slots:{default:[k5]},$$scope:{ctx:t}}}),{c(){Ut(e.$$.fragment)},m(a,n){Ot(e,a,n),r=!0},p(a,n){const i={};16&n[0]&&(i.name=a[4]),1024&n[0]&&(i.label=a[27].label),1024&n[0]&&(i.id=a[27].id),1024&n[0]&&(i.value=a[27].value),1024&n[0]&&(i.disabled=a[27].disabled),1024&n[0]&&(i.hidden=a[27].hidden),256&n[0]&&(i.class=a[8]),1025&n[0]&&(i.checked=a[12](a[27])===a[0]),1024&n[0]&&(i.onkeydown=a[13](a[27])),1024&n[0]&&(i.onclick=a[14](a[27])),8389696&n[0]&&(i.$$scope={dirty:n,ctx:a}),e.$set(i)},i(a){r||(V(e.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),r=!1},d(a){Bt(e,a)}}}function S5(t){let e,r,a,n,i,o,s=[],l=new Map;const c=t[22].group,d=ga(c,t,t[23],F$),p=d||function(f){let g,b,w=f[27].label+"";return{c(){g=gt("span"),b=Hr(w),C(g,"class","PinturaRadioGroupOptionGroupLabel")},m(v,S){st(v,g,S),Pt(g,b)},p(v,S){1024&S[0]&&w!==(w=v[27].label+"")&&ca(b,w)},d(v){v&&it(g)}}}(t);let m=t[27].options;const h=f=>f[27].id;for(let f=0;f<m.length;f+=1){let g=V$(t,m,f),b=h(g);l.set(b,s[f]=_$(b,g))}return{c(){e=gt("li"),p&&p.c(),r=ge(),a=gt("ul");for(let f=0;f<s.length;f+=1)s[f].c();n=ge(),C(a,"class","PinturaRadioGroupOptions"),C(e,"class",i=ar(["PinturaRadioGroupOptionGroup",t[9]]))},m(f,g){st(f,e,g),p&&p.m(e,null),Pt(e,r),Pt(e,a);for(let b=0;b<s.length;b+=1)s[b].m(a,null);Pt(e,n),o=!0},p(f,g){d?d.p&&(!o||8389632&g[0])&&$a(d,c,f,f[23],o?fa(c,f[23],g,x5):ya(f[23]),F$):p&&p.p&&(!o||1024&g[0])&&p.p(f,o?g:[-1,-1]),8418641&g[0]&&(m=f[27].options,ze(),s=Xi(s,g,h,1,f,m,l,a,_o,_$,null,V$),De()),(!o||512&g[0]&&i!==(i=ar(["PinturaRadioGroupOptionGroup",f[9]])))&&C(e,"class",i)},i(f){if(!o){V(p,f);for(let g=0;g<m.length;g+=1)V(s[g]);o=!0}},o(f){_(p,f);for(let g=0;g<s.length;g+=1)_(s[g]);o=!1},d(f){f&&it(e),p&&p.d(f);for(let g=0;g<s.length;g+=1)s[g].d()}}}function D$(t){let e,r;return e=new ei({props:{$$slots:{default:[C5]},$$scope:{ctx:t}}}),{c(){Ut(e.$$.fragment)},m(a,n){Ot(e,a,n),r=!0},p(a,n){const i={};8389632&n[0]&&(i.$$scope={dirty:n,ctx:a}),e.$set(i)},i(a){r||(V(e.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),r=!1},d(a){Bt(e,a)}}}function C5(t){let e,r=t[27].icon+"";return{c(){e=Xa("g")},m(a,n){st(a,e,n),e.innerHTML=r},p(a,n){1024&n[0]&&r!==(r=a[27].icon+"")&&(e.innerHTML=r)},d(a){a&&it(e)}}}function O$(t){let e,r,a=t[27].label+"";return{c(){e=gt("span"),r=Hr(a),C(e,"class",t[6])},m(n,i){st(n,e,i),Pt(e,r)},p(n,i){1024&i[0]&&a!==(a=n[27].label+"")&&ca(r,a),64&i[0]&&C(e,"class",n[6])},d(n){n&&it(e)}}}function k5(t){let e;const r=t[22].option,a=ga(r,t,t[23],E$),n=a||function(i){let o,s,l,c=i[27].icon&&D$(i),d=!i[27].hideLabel&&O$(i);return{c(){c&&c.c(),o=ge(),d&&d.c(),s=ge()},m(p,m){c&&c.m(p,m),st(p,o,m),d&&d.m(p,m),st(p,s,m),l=!0},p(p,m){p[27].icon?c?(c.p(p,m),1024&m[0]&&V(c,1)):(c=D$(p),c.c(),V(c,1),c.m(o.parentNode,o)):c&&(ze(),_(c,1,1,()=>{c=null}),De()),p[27].hideLabel?d&&(d.d(1),d=null):d?d.p(p,m):(d=O$(p),d.c(),d.m(s.parentNode,s))},i(p){l||(V(c),l=!0)},o(p){_(c),l=!1},d(p){c&&c.d(p),p&&it(o),d&&d.d(p),p&&it(s)}}}(t);return{c(){n&&n.c()},m(i,o){n&&n.m(i,o),e=!0},p(i,o){a?a.p&&(!e||8389632&o[0])&&$a(a,r,i,i[23],e?fa(r,i[23],o,b5):ya(i[23]),E$):n&&n.p&&(!e||1088&o[0])&&n.p(i,e?o:[-1,-1])},i(i){e||(V(n,i),e=!0)},o(i){_(n,i),e=!1},d(i){n&&n.d(i)}}}function B$(t){let e,r;return e=new ei({props:{$$slots:{default:[R5]},$$scope:{ctx:t}}}),{c(){Ut(e.$$.fragment)},m(a,n){Ot(e,a,n),r=!0},p(a,n){const i={};8389632&n[0]&&(i.$$scope={dirty:n,ctx:a}),e.$set(i)},i(a){r||(V(e.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),r=!1},d(a){Bt(e,a)}}}function R5(t){let e,r=t[27].icon+"";return{c(){e=Xa("g")},m(a,n){st(a,e,n),e.innerHTML=r},p(a,n){1024&n[0]&&r!==(r=a[27].icon+"")&&(e.innerHTML=r)},d(a){a&&it(e)}}}function U$(t){let e,r,a=t[27].label+"";return{c(){e=gt("span"),r=Hr(a),C(e,"class",t[6])},m(n,i){st(n,e,i),Pt(e,r)},p(n,i){1024&i[0]&&a!==(a=n[27].label+"")&&ca(r,a),64&i[0]&&C(e,"class",n[6])},d(n){n&&it(e)}}}function T5(t){let e;const r=t[22].option,a=ga(r,t,t[23],L$),n=a||function(i){let o,s,l,c=i[27].icon&&B$(i),d=!i[27].hideLabel&&U$(i);return{c(){c&&c.c(),o=ge(),d&&d.c(),s=ge()},m(p,m){c&&c.m(p,m),st(p,o,m),d&&d.m(p,m),st(p,s,m),l=!0},p(p,m){p[27].icon?c?(c.p(p,m),1024&m[0]&&V(c,1)):(c=B$(p),c.c(),V(c,1),c.m(o.parentNode,o)):c&&(ze(),_(c,1,1,()=>{c=null}),De()),p[27].hideLabel?d&&(d.d(1),d=null):d?d.p(p,m):(d=U$(p),d.c(),d.m(s.parentNode,s))},i(p){l||(V(c),l=!0)},o(p){_(c),l=!1},d(p){c&&c.d(p),p&&it(o),d&&d.d(p),p&&it(s)}}}(t);return{c(){n&&n.c()},m(i,o){n&&n.m(i,o),e=!0},p(i,o){a?a.p&&(!e||8389632&o[0])&&$a(a,r,i,i[23],e?fa(r,i[23],o,v5):ya(i[23]),L$):n&&n.p&&(!e||1088&o[0])&&n.p(i,e?o:[-1,-1])},i(i){e||(V(n,i),e=!0)},o(i){_(n,i),e=!1},d(i){n&&n.d(i)}}}function _$(t,e){let r,a,n;return a=new T2({props:{name:e[4],label:e[27].label,id:e[27].id,value:e[27].value,disabled:e[27].disabled,hidden:e[27].hidden,class:e[8],checked:e[12](e[27])===e[0],onkeydown:e[13](e[27]),onclick:e[14](e[27]),$$slots:{default:[T5]},$$scope:{ctx:e}}}),{key:t,first:null,c(){r=ia(),Ut(a.$$.fragment),this.first=r},m(i,o){st(i,r,o),Ot(a,i,o),n=!0},p(i,o){e=i;const s={};16&o[0]&&(s.name=e[4]),1024&o[0]&&(s.label=e[27].label),1024&o[0]&&(s.id=e[27].id),1024&o[0]&&(s.value=e[27].value),1024&o[0]&&(s.disabled=e[27].disabled),1024&o[0]&&(s.hidden=e[27].hidden),256&o[0]&&(s.class=e[8]),1025&o[0]&&(s.checked=e[12](e[27])===e[0]),1024&o[0]&&(s.onkeydown=e[13](e[27])),1024&o[0]&&(s.onclick=e[14](e[27])),8389696&o[0]&&(s.$$scope={dirty:o,ctx:e}),a.$set(s)},i(i){n||(V(a.$$.fragment,i),n=!0)},o(i){_(a.$$.fragment,i),n=!1},d(i){i&&it(r),Bt(a,i)}}}function W$(t,e){let r,a,n,i,o;const s=[S5,w5],l=[];function c(d,p){return d[27].options?0:1}return a=c(e),n=l[a]=s[a](e),{key:t,first:null,c(){r=ia(),n.c(),i=ia(),this.first=r},m(d,p){st(d,r,p),l[a].m(d,p),st(d,i,p),o=!0},p(d,p){let m=a;a=c(e=d),a===m?l[a].p(e,p):(ze(),_(l[m],1,1,()=>{l[m]=null}),De(),n=l[a],n?n.p(e,p):(n=l[a]=s[a](e),n.c()),V(n,1),n.m(i.parentNode,i))},i(d){o||(V(n),o=!0)},o(d){_(n),o=!1},d(d){d&&it(r),l[a].d(d),d&&it(i)}}}function M5(t){let e,r,a,n=t[11].length&&N$(t);return{c(){n&&n.c(),e=ge(),r=ia()},m(i,o){n&&n.m(i,o),st(i,e,o),st(i,r,o),a=!0},p(i,o){i[11].length?n?(n.p(i,o),2048&o[0]&&V(n,1)):(n=N$(i),n.c(),V(n,1),n.m(e.parentNode,e)):n&&(ze(),_(n,1,1,()=>{n=null}),De())},i(i){a||(V(n),V(!1),a=!0)},o(i){_(n),_(!1),a=!1},d(i){n&&n.d(i),i&&it(e),i&&it(r)}}}function P5(t,e,r){let a,n,i,{$$slots:o={},$$scope:s}=e;const l=Oi();let{label:c}=e,{hideLabel:d=!0}=e,{class:p}=e,{name:m="radio-group-"+bi()}=e,{selectedIndex:h=-1}=e,{options:f=[]}=e,{onchange:g}=e,{layout:b}=e,{optionMapper:w}=e,{optionFilter:v}=e,{value:S}=e,{optionLabelClass:T}=e,{title:B}=e,{locale:I}=e,{optionClass:O}=e,{optionGroupClass:R}=e;const E=U=>i.findIndex(x=>x.id===U.id),N=(U,x)=>{r(0,h=E(U));const j=X({index:h},U);((A,...P)=>{A&&A(...P)})(g,j,x),l("change",j)};return t.$$set=U=>{"label"in U&&r(1,c=U.label),"hideLabel"in U&&r(2,d=U.hideLabel),"class"in U&&r(3,p=U.class),"name"in U&&r(4,m=U.name),"selectedIndex"in U&&r(0,h=U.selectedIndex),"options"in U&&r(15,f=U.options),"onchange"in U&&r(16,g=U.onchange),"layout"in U&&r(5,b=U.layout),"optionMapper"in U&&r(17,w=U.optionMapper),"optionFilter"in U&&r(18,v=U.optionFilter),"value"in U&&r(19,S=U.value),"optionLabelClass"in U&&r(6,T=U.optionLabelClass),"title"in U&&r(7,B=U.title),"locale"in U&&r(20,I=U.locale),"optionClass"in U&&r(8,O=U.optionClass),"optionGroupClass"in U&&r(9,R=U.optionGroupClass),"$$scope"in U&&r(23,s=U.$$scope)},t.$$.update=()=>{1343488&t.$$.dirty[0]&&r(11,a=P2(v?f.filter(v):f,I)),133120&t.$$.dirty[0]&&r(10,n=((U=[],x)=>{let j=0;return U.map(A=>(j++,ea(A)?ea(A[1])?{id:j,label:A[0],options:A[1].map(P=>ld(P,++j,x))}:ld(A,j,x):A.options?{id:A.id||j,label:A.label,options:A.options.map(P=>ld(P,++j,x))}:ld(A,j,x)))})(a,w)),1024&t.$$.dirty[0]&&r(21,i=Vo(n)),2654209&t.$$.dirty[0]&&h<0&&(r(0,h=i.findIndex(U=>I2(U.value,S))),h<0&&r(0,h=(U=>U.findIndex(x=>x[0]===void 0))(f)))},[h,c,d,p,m,b,T,B,O,R,n,a,E,U=>x=>{var j;j=x.key,/enter| /i.test(j)&&N(U,x)},U=>x=>{N(U,x)},f,g,w,v,S,I,i,o,s]}class jo extends er{constructor(e){super(),tr(this,e,P5,M5,Ye,{label:1,hideLabel:2,class:3,name:4,selectedIndex:0,options:15,onchange:16,layout:5,optionMapper:17,optionFilter:18,value:19,optionLabelClass:6,title:7,locale:20,optionClass:8,optionGroupClass:9},null,[-1,-1])}}function q$(t){let e,r,a,n,i,o,s,l,c,d;return{c(){e=gt("div"),r=gt("button"),a=Hr("\u25B2"),i=ge(),o=gt("button"),s=Hr("\u25BC"),C(r,"type","button"),C(r,"tabindex","-1"),C(r,"aria-label",n="increase "+t[6]),C(o,"type","button"),C(o,"tabindex","-1"),C(o,"aria-label",l="decrease "+t[6]),C(e,"class","PinturaInputSpinners")},m(p,m){st(p,e,m),Pt(e,r),Pt(r,a),Pt(e,i),Pt(e,o),Pt(o,s),c||(d=[Mt(r,"click",t[15]),Mt(o,"click",t[16])],c=!0)},p(p,m){64&m&&n!==(n="increase "+p[6])&&C(r,"aria-label",n),64&m&&l!==(l="decrease "+p[6])&&C(o,"aria-label",l)},d(p){p&&it(e),c=!1,Ar(d)}}}function I5(t){let e,r,a,n,i,o,s=t[1]==="number"&&t[7]&&q$(t);return{c(){e=gt("div"),r=gt("input"),n=ge(),s&&s.c(),C(r,"class","PinturaInputField"),C(r,"title",t[6]),C(r,"type",t[1]),C(r,"min",t[3]),C(r,"max",t[4]),C(r,"step",t[5]),C(r,"inputmode",t[2]),r.value=a=t[12]?t[11]:t[0],C(r,"style",t[9]),C(r,"maxlength",t[10]),C(r,"spellcheck","false"),C(r,"autocorrect","off"),C(r,"autocapitalize","off"),C(e,"class","PinturaInput")},m(l,c){st(l,e,c),Pt(e,r),t[23](r),Pt(e,n),s&&s.m(e,null),i||(o=[Mt(r,"input",t[14]),Mt(r,"blur",function(){Vr(t[12]&&t[13])&&(t[12]&&t[13]).apply(this,arguments)}),Mt(r,"keydown",t[17]),Mt(r,"keyup",t[18])],i=!0)},p(l,[c]){t=l,64&c&&C(r,"title",t[6]),2&c&&C(r,"type",t[1]),8&c&&C(r,"min",t[3]),16&c&&C(r,"max",t[4]),32&c&&C(r,"step",t[5]),4&c&&C(r,"inputmode",t[2]),6145&c&&a!==(a=t[12]?t[11]:t[0])&&r.value!==a&&(r.value=a),512&c&&C(r,"style",t[9]),1024&c&&C(r,"maxlength",t[10]),t[1]==="number"&&t[7]?s?s.p(t,c):(s=q$(t),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},i:We,o:We,d(l){l&&it(e),t[23](null),s&&s.d(),i=!1,Ar(o)}}}function A5(t,e,r){let a,n,i,o,s,l,c,{value:d}=e,{type:p="text"}=e,{inputmode:m}=e,{min:h}=e,{max:f}=e,{step:g=1}=e,{onchange:b}=e,{title:w}=e,{stepMultiplier:v=10}=e,{enableSpinButtons:S=!0}=e;const T=()=>{let R=l.value;return p==="number"&&(R=m==="numeric"?parseInt(R,10):parseFloat(R),!Mr(R)||Number.isNaN(R)?R=h||0:a&&(R=Nr(R,h,f))),R};let B=d;const I=()=>{const R=Nr(T()+(c?g*v:g),h,f);R!==d&&(r(21,B=R),r(0,d=R),b(d))},O=()=>{const R=Nr(T()-(c?g*v:g),h,f);R!==d&&(r(21,B=R),r(0,d=R),b(d))};return t.$$set=R=>{"value"in R&&r(0,d=R.value),"type"in R&&r(1,p=R.type),"inputmode"in R&&r(2,m=R.inputmode),"min"in R&&r(3,h=R.min),"max"in R&&r(4,f=R.max),"step"in R&&r(5,g=R.step),"onchange"in R&&r(19,b=R.onchange),"title"in R&&r(6,w=R.title),"stepMultiplier"in R&&r(20,v=R.stepMultiplier),"enableSpinButtons"in R&&r(7,S=R.enableSpinButtons)},t.$$.update=()=>{24&t.$$.dirty&&r(12,a=Mr(h)&&Mr(f)),2097409&t.$$.dirty&&r(11,n=l===document.activeElement?B:d),16&t.$$.dirty&&r(22,i=f?(f+"").length:void 0),4194308&t.$$.dirty&&r(10,o=m==="numeric"&&i?i:void 0),4194304&t.$$.dirty&&r(9,s=i?`min-width:${i}em`:void 0)},[d,p,m,h,f,g,w,S,l,s,o,n,a,()=>{r(21,B=T()),b(d)},()=>{r(21,B=l.value),b(T())},I,O,R=>{c=R.shiftKey;const{key:E}=R;/up|down/i.test(E)&&(/up/i.test(E)&&I(),/down/i.test(E)&&O(),R.preventDefault(),R.stopPropagation())},R=>{const{key:E}=R;/up|down/i.test(E)&&(R.preventDefault(),R.stopPropagation())},b,v,B,i,function(R){xr[R?"unshift":"push"](()=>{l=R,r(8,l)})}]}class A2 extends er{constructor(e){super(),tr(this,e,A5,I5,Ye,{value:0,type:1,inputmode:2,min:3,max:4,step:5,onchange:19,title:6,stepMultiplier:20,enableSpinButtons:7})}}const E5=t=>({}),j$=t=>({});function V5(t){let e,r,a,n,i=(t[2]||t[21])+"",o=t[6]&&H$(t);return{c(){o&&o.c(),e=ge(),r=gt("span"),C(r,"class",a=ar(["PinturaButtonLabel",t[3],t[5]&&"implicit"]))},m(s,l){o&&o.m(s,l),st(s,e,l),st(s,r,l),r.innerHTML=i,n=!0},p(s,l){s[6]?o?(o.p(s,l),64&l[0]&&V(o,1)):(o=H$(s),o.c(),V(o,1),o.m(e.parentNode,e)):o&&(ze(),_(o,1,1,()=>{o=null}),De()),(!n||2097156&l[0])&&i!==(i=(s[2]||s[21])+"")&&(r.innerHTML=i),(!n||40&l[0]&&a!==(a=ar(["PinturaButtonLabel",s[3],s[5]&&"implicit"])))&&C(r,"class",a)},i(s){n||(V(o),n=!0)},o(s){_(o),n=!1},d(s){o&&o.d(s),s&&it(e),s&&it(r)}}}function L5(t){let e,r;return e=new A2({props:{value:t[10],onchange:t[17],type:"number",inputmode:"numeric",min:t[8].reduce(Y$,1/0),max:t[8].reduce(X$,-1/0),enableSpinButtons:!1}}),{c(){Ut(e.$$.fragment)},m(a,n){Ot(e,a,n),r=!0},p(a,n){const i={};1024&n[0]&&(i.value=a[10]),131072&n[0]&&(i.onchange=a[17]),256&n[0]&&(i.min=a[8].reduce(Y$,1/0)),256&n[0]&&(i.max=a[8].reduce(X$,-1/0)),e.$set(i)},i(a){r||(V(e.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),r=!1},d(a){Bt(e,a)}}}function H$(t){let e,r;return e=new ei({props:{class:"PinturaButtonIcon",$$slots:{default:[F5]},$$scope:{ctx:t}}}),{c(){Ut(e.$$.fragment)},m(a,n){Ot(e,a,n),r=!0},p(a,n){const i={};1073741888&n[0]&&(i.$$scope={dirty:n,ctx:a}),e.$set(i)},i(a){r||(V(e.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),r=!1},d(a){Bt(e,a)}}}function F5(t){let e;return{c(){e=Xa("g")},m(r,a){st(r,e,a),e.innerHTML=t[6]},p(r,a){64&a[0]&&(e.innerHTML=r[6])},d(r){r&&it(e)}}}function N5(t){let e,r,a,n,i,o;const s=[L5,V5],l=[];function c(d,p){return d[18]?0:1}return r=c(t),a=l[r]=s[r](t),{c(){e=gt("span"),a.c(),C(e,"slot","label"),C(e,"title",n=Ua(t[1],t[16])),C(e,"class",i=ar(["PinturaButtonInner",t[18]&&"PinturaComboBox",t[4]]))},m(d,p){st(d,e,p),l[r].m(e,null),o=!0},p(d,p){let m=r;r=c(d),r===m?l[r].p(d,p):(ze(),_(l[m],1,1,()=>{l[m]=null}),De(),a=l[r],a?a.p(d,p):(a=l[r]=s[r](d),a.c()),V(a,1),a.m(e,null)),(!o||65538&p[0]&&n!==(n=Ua(d[1],d[16])))&&C(e,"title",n),(!o||262160&p[0]&&i!==(i=ar(["PinturaButtonInner",d[18]&&"PinturaComboBox",d[4]])))&&C(e,"class",i)},i(d){o||(V(a),o=!0)},o(d){_(a),o=!1},d(d){d&&it(e),l[r].d()}}}function z5(t){let e,r,a=t[32].label+"";return{c(){e=gt("span"),r=Hr(a),C(e,"slot","group")},m(n,i){st(n,e,i),Pt(e,r)},p(n,i){2&i[1]&&a!==(a=n[32].label+"")&&ca(r,a)},d(n){n&&it(e)}}}function G$(t){let e,r;return e=new ei({props:{style:Xr(t[14])?t[14](t[32].value):t[14],$$slots:{default:[D5]},$$scope:{ctx:t}}}),{c(){Ut(e.$$.fragment)},m(a,n){Ot(e,a,n),r=!0},p(a,n){const i={};16384&n[0]|2&n[1]&&(i.style=Xr(a[14])?a[14](a[32].value):a[14]),1073741824&n[0]|2&n[1]&&(i.$$scope={dirty:n,ctx:a}),e.$set(i)},i(a){r||(V(e.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),r=!1},d(a){Bt(e,a)}}}function D5(t){let e,r=t[32].icon+"";return{c(){e=Xa("g")},m(a,n){st(a,e,n),e.innerHTML=r},p(a,n){2&n[1]&&r!==(r=a[32].icon+"")&&(e.innerHTML=r)},d(a){a&&it(e)}}}function Z$(t){let e,r=t[32].sublabel+"";return{c(){e=gt("span"),C(e,"class","PinturaDropdownOptionSublabel")},m(a,n){st(a,e,n),e.innerHTML=r},p(a,n){2&n[1]&&r!==(r=a[32].sublabel+"")&&(e.innerHTML=r)},d(a){a&&it(e)}}}function O5(t){let e,r,a,n,i,o,s,l,c=t[32].label+"",d=t[32].icon&&G$(t),p=t[32].sublabel&&Z$(t);return{c(){e=gt("span"),d&&d.c(),r=ge(),a=gt("span"),n=new _d(!1),i=ge(),p&&p.c(),n.a=i,C(a,"style",o=Xr(t[15])?t[15](t[32].value):t[15]),C(a,"class",s=ar(["PinturaDropdownOptionLabel",t[11]])),C(e,"slot","option")},m(m,h){st(m,e,h),d&&d.m(e,null),Pt(e,r),Pt(e,a),n.m(c,a),Pt(a,i),p&&p.m(a,null),l=!0},p(m,h){m[32].icon?d?(d.p(m,h),2&h[1]&&V(d,1)):(d=G$(m),d.c(),V(d,1),d.m(e,r)):d&&(ze(),_(d,1,1,()=>{d=null}),De()),(!l||2&h[1])&&c!==(c=m[32].label+"")&&n.p(c),m[32].sublabel?p?p.p(m,h):(p=Z$(m),p.c(),p.m(a,null)):p&&(p.d(1),p=null),(!l||32768&h[0]|2&h[1]&&o!==(o=Xr(m[15])?m[15](m[32].value):m[15]))&&C(a,"style",o),(!l||2048&h[0]&&s!==(s=ar(["PinturaDropdownOptionLabel",m[11]])))&&C(a,"class",s)},i(m){l||(V(d),l=!0)},o(m){_(d),l=!1},d(m){m&&it(e),d&&d.d(),p&&p.d()}}}function B5(t){let e,r,a,n,i,o;const s=t[28].controls,l=ga(s,t,t[30],j$);return a=new jo({props:{class:"PinturaOptionsList PinturaScrollableContent",name:t[7],value:t[10],selectedIndex:t[9],optionFilter:t[12],optionMapper:t[13],optionLabelClass:ar(["PinturaDropdownOptionLabel",t[11]]),optionGroupClass:"PinturaListOptionGroup",optionClass:"PinturaListOption",options:t[19],onchange:t[22],$$slots:{option:[O5,({option:c})=>({32:c}),({option:c})=>[0,c?2:0]],group:[z5,({option:c})=>({32:c}),({option:c})=>[0,c?2:0]]},$$scope:{ctx:t}}}),{c(){e=gt("div"),l&&l.c(),r=ge(),Ut(a.$$.fragment),C(e,"slot","details"),C(e,"class","PinturaOptionsListWrapper")},m(c,d){st(c,e,d),l&&l.m(e,null),Pt(e,r),Ot(a,e,null),n=!0,i||(o=Mt(e,"keydown",t[24]),i=!0)},p(c,d){l&&l.p&&(!n||1073741824&d[0])&&$a(l,s,c,c[30],n?fa(s,c[30],d,E5):ya(c[30]),j$);const p={};128&d[0]&&(p.name=c[7]),1024&d[0]&&(p.value=c[10]),512&d[0]&&(p.selectedIndex=c[9]),4096&d[0]&&(p.optionFilter=c[12]),8192&d[0]&&(p.optionMapper=c[13]),2048&d[0]&&(p.optionLabelClass=ar(["PinturaDropdownOptionLabel",c[11]])),524288&d[0]&&(p.options=c[19]),1073793024&d[0]|2&d[1]&&(p.$$scope={dirty:d,ctx:c}),a.$set(p)},i(c){n||(V(l,c),V(a.$$.fragment,c),n=!0)},o(c){_(l,c),_(a.$$.fragment,c),n=!1},d(c){c&&it(e),l&&l.d(c),Bt(a),i=!1,o()}}}function U5(t){let e,r,a;function n(o){t[29](o)}let i={onshow:t[23],buttonClass:ar(["PinturaDropdownButton",t[0],t[5]&&"PinturaDropdownIconOnly"]),$$slots:{details:[B5],label:[N5]},$$scope:{ctx:t}};return t[20]!==void 0&&(i.isActive=t[20]),e=new Gd({props:i}),xr.push(()=>hn(e,"isActive",n)),{c(){Ut(e.$$.fragment)},m(o,s){Ot(e,o,s),a=!0},p(o,s){const l={};33&s[0]&&(l.buttonClass=ar(["PinturaDropdownButton",o[0],o[5]&&"PinturaDropdownIconOnly"])),1076887550&s[0]&&(l.$$scope={dirty:s,ctx:o}),!r&&1048576&s[0]&&(r=!0,l.isActive=o[20],Rn(()=>r=!1)),e.$set(l)},i(o){a||(V(e.$$.fragment,o),a=!0)},o(o){_(e.$$.fragment,o),a=!1},d(o){Bt(e,o)}}}const Y$=(t,[e])=>e<t?e:t,X$=(t,[e])=>e>t?e:t;function _5(t,e,r){let a,n,{$$slots:i={},$$scope:o}=e,{class:s}=e,{title:l}=e,{label:c}=e,{labelClass:d}=e,{innerClass:p}=e,{hideLabel:m=!1}=e,{icon:h}=e,{name:f}=e,{options:g=[]}=e,{selectedIndex:b=-1}=e,{value:w}=e,{optionLabelClass:v}=e,{optionFilter:S}=e,{optionMapper:T}=e,{optionIconStyle:B}=e,{optionLabelStyle:I}=e,{locale:O}=e,{onchange:R=be}=e,{onload:E=be}=e,{ondestroy:N=be}=e,{enableStep:U=!1}=e,{enableInput:x=!1}=e,j;return Uo(()=>E({options:g})),ri(()=>N({options:g})),t.$$set=A=>{"class"in A&&r(0,s=A.class),"title"in A&&r(1,l=A.title),"label"in A&&r(2,c=A.label),"labelClass"in A&&r(3,d=A.labelClass),"innerClass"in A&&r(4,p=A.innerClass),"hideLabel"in A&&r(5,m=A.hideLabel),"icon"in A&&r(6,h=A.icon),"name"in A&&r(7,f=A.name),"options"in A&&r(8,g=A.options),"selectedIndex"in A&&r(9,b=A.selectedIndex),"value"in A&&r(10,w=A.value),"optionLabelClass"in A&&r(11,v=A.optionLabelClass),"optionFilter"in A&&r(12,S=A.optionFilter),"optionMapper"in A&&r(13,T=A.optionMapper),"optionIconStyle"in A&&r(14,B=A.optionIconStyle),"optionLabelStyle"in A&&r(15,I=A.optionLabelStyle),"locale"in A&&r(16,O=A.locale),"onchange"in A&&r(17,R=A.onchange),"onload"in A&&r(25,E=A.onload),"ondestroy"in A&&r(26,N=A.ondestroy),"enableStep"in A&&r(27,U=A.enableStep),"enableInput"in A&&r(18,x=A.enableInput),"$$scope"in A&&r(30,o=A.$$scope)},t.$$.update=()=>{65792&t.$$.dirty[0]&&r(19,a=O?P2(g,O):g),525312&t.$$.dirty[0]&&r(21,n=a.reduce((A,P)=>{if(A)return A;const G=Array.isArray(P)?P:[P,P],[Q,Z]=G;return I2(Q,w)?Z:void 0},void 0)||(A=>{const P=A.find(G=>G[0]===void 0);if(P)return P[1]})(a)||w)},[s,l,c,d,p,m,h,f,g,b,w,v,S,T,B,I,O,R,x,a,j,n,A=>{r(21,n=A.value),R(A),r(20,j=!1)},({e:A,panel:P})=>{if(A&&A.key&&/up|down/i.test(A.key))return Nm(P.querySelector("input:not([disabled])"));Nm(P.querySelector("fieldset"))},A=>{/tab/i.test(A.key)&&A.preventDefault()},E,N,U,i,function(A){j=A,r(20,j)},o]}class E2 extends er{constructor(e){super(),tr(this,e,_5,U5,Ye,{class:0,title:1,label:2,labelClass:3,innerClass:4,hideLabel:5,icon:6,name:7,options:8,selectedIndex:9,value:10,optionLabelClass:11,optionFilter:12,optionMapper:13,optionIconStyle:14,optionLabelStyle:15,locale:16,onchange:17,onload:25,ondestroy:26,enableStep:27,enableInput:18},null,[-1,-1])}}function W5(t){let e;return{c(){e=gt("div"),C(e,"slot","details")},m(r,a){st(r,e,a),t[10](e)},p:We,d(r){r&&it(e),t[10](null)}}}function q5(t){let e,r,a;function n(o){t[11](o)}let i={buttonLabel:t[0],buttonClass:t[1],onshow:t[2],onhide:t[3],$$slots:{details:[W5]},$$scope:{ctx:t}};return t[5]!==void 0&&(i.isActive=t[5]),e=new Gd({props:i}),xr.push(()=>hn(e,"isActive",n)),{c(){Ut(e.$$.fragment)},m(o,s){Ot(e,o,s),a=!0},p(o,[s]){const l={};1&s&&(l.buttonLabel=o[0]),2&s&&(l.buttonClass=o[1]),4&s&&(l.onshow=o[2]),8&s&&(l.onhide=o[3]),4112&s&&(l.$$scope={dirty:s,ctx:o}),!r&&32&s&&(r=!0,l.isActive=o[5],Rn(()=>r=!1)),e.$set(l)},i(o){a||(V(e.$$.fragment,o),a=!0)},o(o){_(e.$$.fragment,o),a=!1},d(o){Bt(e,o)}}}function j5(t,e,r){let{buttonLabel:a}=e,{buttonClass:n}=e,{root:i}=e,{ondestroy:o=be}=e,{onshow:s=be}=e,{onhide:l=be}=e,c,d=!1;return ri(o),t.$$set=p=>{"buttonLabel"in p&&r(0,a=p.buttonLabel),"buttonClass"in p&&r(1,n=p.buttonClass),"root"in p&&r(6,i=p.root),"ondestroy"in p&&r(7,o=p.ondestroy),"onshow"in p&&r(2,s=p.onshow),"onhide"in p&&r(3,l=p.onhide)},t.$$.update=()=>{80&t.$$.dirty&&c&&i&&c.firstChild!==i&&(c.hasChildNodes()?c.replaceChild(i,c.firstChild):c.append(i))},[a,n,s,l,c,d,i,o,()=>r(5,d=!1),()=>r(5,d=!0),function(p){xr[p?"unshift":"push"](()=>{c=p,r(4,c)})},function(p){d=p,r(5,d)}]}class H5 extends er{constructor(e){super(),tr(this,e,j5,q5,Ye,{buttonLabel:0,buttonClass:1,root:6,ondestroy:7,onshow:2,onhide:3,hide:8,show:9})}get hide(){return this.$$.ctx[8]}get show(){return this.$$.ctx[9]}}var Ll=(t,e,r)=>(t-e)/(r-e);const G5=t=>({}),K$=t=>({});function J$(t){let e,r,a,n,i,o,s,l;return r=new ei({props:{$$slots:{default:[Z5]},$$scope:{ctx:t}}}),i=new ei({props:{$$slots:{default:[Y5]},$$scope:{ctx:t}}}),{c(){e=gt("button"),Ut(r.$$.fragment),a=ge(),n=gt("button"),Ut(i.$$.fragment),C(e,"type","button"),C(e,"aria-label","Increase"),C(n,"type","button"),C(n,"aria-label","Decrease")},m(c,d){st(c,e,d),Ot(r,e,null),st(c,a,d),st(c,n,d),Ot(i,n,null),o=!0,s||(l=[Mt(e,"pointerdown",t[20](1)),Mt(n,"pointerdown",t[20](-1))],s=!0)},p(c,d){const p={};128&d[1]&&(p.$$scope={dirty:d,ctx:c}),r.$set(p);const m={};128&d[1]&&(m.$$scope={dirty:d,ctx:c}),i.$set(m)},i(c){o||(V(r.$$.fragment,c),V(i.$$.fragment,c),o=!0)},o(c){_(r.$$.fragment,c),_(i.$$.fragment,c),o=!1},d(c){c&&it(e),Bt(r),c&&it(a),c&&it(n),Bt(i),s=!1,Ar(l)}}}function Z5(t){let e;return{c(){e=Xa("path"),C(e,"d","M8 12 h8 M12 8 v8")},m(r,a){st(r,e,a)},p:We,d(r){r&&it(e)}}}function Y5(t){let e;return{c(){e=Xa("path"),C(e,"d","M9 12 h6")},m(r,a){st(r,e,a)},p:We,d(r){r&&it(e)}}}function X5(t){let e,r,a,n,i,o,s,l,c,d,p,m,h,f,g,b,w;const v=t[36].default,S=ga(v,t,t[38],null),T=t[36].knob,B=ga(T,t,t[38],K$);let I=t[9]&&J$(t);return{c(){e=gt("div"),r=gt("div"),a=gt("input"),i=ge(),o=gt("div"),S&&S.c(),l=ge(),c=gt("div"),d=gt("div"),B&&B.c(),h=ge(),I&&I.c(),C(a,"type","range"),C(a,"id",t[3]),C(a,"min",t[0]),C(a,"max",t[1]),C(a,"step",t[2]),a.value=t[14],C(a,"style",n=t[10]?"pointer-events:none":""),C(o,"class",s=ar(["PinturaSliderTrack",t[5]])),C(o,"style",t[4]),C(d,"class",p=ar(["PinturaSliderKnob",t[7]])),C(d,"style",t[6]),C(c,"class","PinturaSliderKnobController"),C(c,"style",t[17]),C(r,"class","PinturaSliderControl"),C(r,"style",m="--slider-position:"+Math.round(t[15])),C(e,"class",f=ar(["PinturaSlider",t[12]])),C(e,"data-direction",t[8])},m(O,R){st(O,e,R),Pt(e,r),Pt(r,a),t[37](a),Pt(r,i),Pt(r,o),S&&S.m(o,null),Pt(r,l),Pt(r,c),Pt(c,d),B&&B.m(d,null),Pt(e,h),I&&I.m(e,null),g=!0,b||(w=[Mt(a,"input",t[18]),Mt(a,"nudge",t[19]),Ir(qo.call(null,a)),Mt(r,"pointerdown",function(){Vr(t[11]&&t[13])&&(t[11]&&t[13]).apply(this,arguments)})],b=!0)},p(O,R){t=O,(!g||8&R[0])&&C(a,"id",t[3]),(!g||1&R[0])&&C(a,"min",t[0]),(!g||2&R[0])&&C(a,"max",t[1]),(!g||4&R[0])&&C(a,"step",t[2]),(!g||16384&R[0])&&(a.value=t[14]),(!g||1024&R[0]&&n!==(n=t[10]?"pointer-events:none":""))&&C(a,"style",n),S&&S.p&&(!g||128&R[1])&&$a(S,v,t,t[38],g?fa(v,t[38],R,null):ya(t[38]),null),(!g||32&R[0]&&s!==(s=ar(["PinturaSliderTrack",t[5]])))&&C(o,"class",s),(!g||16&R[0])&&C(o,"style",t[4]),B&&B.p&&(!g||128&R[1])&&$a(B,T,t,t[38],g?fa(T,t[38],R,G5):ya(t[38]),K$),(!g||128&R[0]&&p!==(p=ar(["PinturaSliderKnob",t[7]])))&&C(d,"class",p),(!g||64&R[0])&&C(d,"style",t[6]),(!g||131072&R[0])&&C(c,"style",t[17]),(!g||32768&R[0]&&m!==(m="--slider-position:"+Math.round(t[15])))&&C(r,"style",m),t[9]?I?(I.p(t,R),512&R[0]&&V(I,1)):(I=J$(t),I.c(),V(I,1),I.m(e,null)):I&&(ze(),_(I,1,1,()=>{I=null}),De()),(!g||4096&R[0]&&f!==(f=ar(["PinturaSlider",t[12]])))&&C(e,"class",f),(!g||256&R[0])&&C(e,"data-direction",t[8])},i(O){g||(V(S,O),V(B,O),V(I),g=!0)},o(O){_(S,O),_(B,O),_(I),g=!1},d(O){O&&it(e),t[37](null),S&&S.d(O),B&&B.d(O),I&&I.d(),b=!1,Ar(w)}}}function K5(t,e,r){let a,n,i,o,s,l,c,d,p,m,h,f,g,b,w,{$$slots:v={},$$scope:S}=e,{min:T=0}=e,{max:B=100}=e,{step:I=1}=e,{id:O}=e,{value:R=0}=e,{valueMin:E}=e,{valueMax:N}=e,{trackStyle:U}=e,{trackClass:x}=e,{knobStyle:j}=e,{knobClass:A}=e,{ongrab:P=be}=e,{onchange:G=be}=e,{onrelease:Q=be}=e,{onexceed:Z=be}=e,{direction:ct="x"}=e,{getValue:lt=Br}=e,{setValue:xt=Br}=e,{enableSpinButtons:yt=!0}=e,{enableForceUseKnob:bt=!1}=e,{enableStopPropagation:qt=!0}=e,{enablePointerdownListener:Y=!0}=e,{maxInteractionDistance:et=6}=e,{class:Vt}=e;const z=At=>xt(((K,Xt)=>(Xt=1/Xt,Math.round(K*Xt)/Xt))(Nr(At,T,B),I)),vt=(At,K,Xt={})=>{const{grabbed:se=!1,released:me=!1}=Xt,Ve=z(T+At/K*n),ke=E||T,Dt=N||B;r(21,R=Be(Ve)?Ve:Nr(Ve,ke,Dt)),w!==Ve&&(w=Ve,!Be(Ve)&&(Ve<ke||Ve>Dt)&&Z(R,Ve),R!==b&&(b=R,se&&P(R),G(R),me&&Q(R)))};let St;const W=At=>{const K=At[d]-g;vt(f+K,h)},Lt=At=>{h=void 0,document.documentElement.removeEventListener("pointermove",W),document.documentElement.removeEventListener("pointerup",Lt),G(R),Q(R)},Ce=()=>{r(21,R=z(a+zt*I)),G(R)};let pt,zt=1,Te=!1;const ne=At=>{clearTimeout(pt),Te||Ce(),Q(R),document.removeEventListener("pointerup",ne)};return t.$$set=At=>{"min"in At&&r(0,T=At.min),"max"in At&&r(1,B=At.max),"step"in At&&r(2,I=At.step),"id"in At&&r(3,O=At.id),"value"in At&&r(21,R=At.value),"valueMin"in At&&r(22,E=At.valueMin),"valueMax"in At&&r(23,N=At.valueMax),"trackStyle"in At&&r(4,U=At.trackStyle),"trackClass"in At&&r(5,x=At.trackClass),"knobStyle"in At&&r(6,j=At.knobStyle),"knobClass"in At&&r(7,A=At.knobClass),"ongrab"in At&&r(24,P=At.ongrab),"onchange"in At&&r(25,G=At.onchange),"onrelease"in At&&r(26,Q=At.onrelease),"onexceed"in At&&r(27,Z=At.onexceed),"direction"in At&&r(8,ct=At.direction),"getValue"in At&&r(28,lt=At.getValue),"setValue"in At&&r(29,xt=At.setValue),"enableSpinButtons"in At&&r(9,yt=At.enableSpinButtons),"enableForceUseKnob"in At&&r(10,bt=At.enableForceUseKnob),"enableStopPropagation"in At&&r(30,qt=At.enableStopPropagation),"enablePointerdownListener"in At&&r(11,Y=At.enablePointerdownListener),"maxInteractionDistance"in At&&r(31,et=At.maxInteractionDistance),"class"in At&&r(12,Vt=At.class),"$$scope"in At&&r(38,S=At.$$scope)},t.$$.update=()=>{270532608&t.$$.dirty[0]&&r(14,a=R!==void 0?lt(R):0),3&t.$$.dirty[0]&&(n=B-T),16387&t.$$.dirty[0]&&r(33,i=Ll(a,T,B)),4&t.$$.dirty[1]&&r(15,o=100*i),256&t.$$.dirty[0]&&r(34,s=ct.toUpperCase()),256&t.$$.dirty[0]&&r(35,l=ct==="x"?"Width":"Height"),16&t.$$.dirty[1]&&(c="offset"+l),t.$$.dirty[1],8&t.$$.dirty[1]&&(d="page"+s),32768&t.$$.dirty[0]|8&t.$$.dirty[1]&&r(17,p=`transform: translate${s}(${o}%)`)},[T,B,I,O,U,x,j,A,ct,yt,bt,Y,Vt,At=>{let K=!1;qt&&At.stopPropagation(),clearTimeout(St);const Xt=m.getBoundingClientRect();if(h=m[c],g=At[d],f=g-Xt[ct],bt){if(Math.abs(f-i*h)>et)return;K=!0,At.stopPropagation()}return document.activeElement!==m&&m.focus(),vt(f,h,{grabbed:!0}),document.documentElement.addEventListener("pointermove",W),document.documentElement.addEventListener("pointerup",Lt),K},a,o,m,p,At=>{h||(r(21,R=xt(parseFloat(At.target.value))),R!==b&&(b=R,G(R)))},At=>{const K=m[c];vt(a/n*K+At.detail[ct],K),clearTimeout(St),St=setTimeout(()=>{Q(R)},250)},At=>K=>{clearTimeout(St),zt=At,Te=!1,pt=setInterval(()=>{Te=!0,Ce()},100),document.addEventListener("pointercancel",ne),document.addEventListener("pointerup",ne)},R,E,N,P,G,Q,Z,lt,xt,qt,et,At=>{const K=m.getBoundingClientRect(),Xt=At[d]-K[ct],se=m[c];return Math.abs(Xt-i*se)},i,s,l,v,function(At){xr[At?"unshift":"push"](()=>{m=At,r(16,m)})},S]}class f1 extends er{constructor(e){super(),tr(this,e,K5,X5,Ye,{min:0,max:1,step:2,id:3,value:21,valueMin:22,valueMax:23,trackStyle:4,trackClass:5,knobStyle:6,knobClass:7,ongrab:24,onchange:25,onrelease:26,onexceed:27,direction:8,getValue:28,setValue:29,enableSpinButtons:9,enableForceUseKnob:10,enableStopPropagation:30,enablePointerdownListener:11,maxInteractionDistance:31,class:12,eventDistanceToKnob:32,handlePointerDown:13},null,[-1,-1])}get eventDistanceToKnob(){return this.$$.ctx[32]}get handlePointerDown(){return this.$$.ctx[13]}}function Q$(t){let e,r;return e=new ei({props:{class:"PinturaButtonIcon",$$slots:{default:[J5]},$$scope:{ctx:t}}}),{c(){Ut(e.$$.fragment)},m(a,n){Ot(e,a,n),r=!0},p(a,n){const i={};524292&n&&(i.$$scope={dirty:n,ctx:a}),e.$set(i)},i(a){r||(V(e.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),r=!1},d(a){Bt(e,a)}}}function J5(t){let e;return{c(){e=Xa("g")},m(r,a){st(r,e,a),e.innerHTML=t[2]},p(r,a){4&a&&(e.innerHTML=r[2])},d(r){r&&it(e)}}}function Q5(t){let e,r,a,n,i,o,s,l,c=t[2]&&Q$(t);return{c(){e=gt("span"),c&&c.c(),r=ge(),a=gt("span"),n=Hr(t[8]),C(a,"class",i=ar(["PinturaButtonLabel",t[3],t[5]&&"implicit"])),C(e,"slot","label"),C(e,"title",o=Ua(t[1],t[6])),C(e,"class",s=ar(["PinturaButtonInner",t[4]]))},m(d,p){st(d,e,p),c&&c.m(e,null),Pt(e,r),Pt(e,a),Pt(a,n),l=!0},p(d,p){d[2]?c?(c.p(d,p),4&p&&V(c,1)):(c=Q$(d),c.c(),V(c,1),c.m(e,r)):c&&(ze(),_(c,1,1,()=>{c=null}),De()),(!l||256&p)&&ca(n,d[8]),(!l||40&p&&i!==(i=ar(["PinturaButtonLabel",d[3],d[5]&&"implicit"])))&&C(a,"class",i),(!l||66&p&&o!==(o=Ua(d[1],d[6])))&&C(e,"title",o),(!l||16&p&&s!==(s=ar(["PinturaButtonInner",d[4]])))&&C(e,"class",s)},i(d){l||(V(c),l=!0)},o(d){_(c),l=!1},d(d){d&&it(e),c&&c.d()}}}function tC(t){let e,r,a,n,i;const o=[t[11],{value:t[7]},{onchange:t[10]}];let s={};for(let l=0;l<o.length;l+=1)s=la(s,o[l]);return r=new f1({props:s}),{c(){e=gt("div"),Ut(r.$$.fragment),C(e,"slot","details")},m(l,c){st(l,e,c),Ot(r,e,null),a=!0,n||(i=Mt(e,"keydown",t[9]),n=!0)},p(l,c){const d=3200&c?Ja(o,[2048&c&&Mn(l[11]),128&c&&{value:l[7]},1024&c&&{onchange:l[10]}]):{};r.$set(d)},i(l){a||(V(r.$$.fragment,l),a=!0)},o(l){_(r.$$.fragment,l),a=!1},d(l){l&&it(e),Bt(r),n=!1,i()}}}function eC(t){let e,r;return e=new Gd({props:{panelClass:"PinturaSliderPanel",buttonClass:ar(["PinturaSliderButton",t[0],t[5]&&"PinturaSliderIconOnly"]),$$slots:{details:[tC],label:[Q5]},$$scope:{ctx:t}}}),{c(){Ut(e.$$.fragment)},m(a,n){Ot(e,a,n),r=!0},p(a,[n]){const i={};33&n&&(i.buttonClass=ar(["PinturaSliderButton",a[0],a[5]&&"PinturaSliderIconOnly"])),526846&n&&(i.$$scope={dirty:n,ctx:a}),e.$set(i)},i(a){r||(V(e.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),r=!1},d(a){Bt(e,a)}}}function rC(t,e,r){const a=["class","title","label","icon","labelClass","innerClass","hideLabel","locale","value","onchange"];let n=_0(e,a),{class:i}=e,{title:o}=e,{label:s=Math.round}=e,{icon:l}=e,{labelClass:c}=e,{innerClass:d}=e,{hideLabel:p=!1}=e,{locale:m}=e,{value:h}=e,{onchange:f=be}=e;const{min:g,max:b,getValue:w=Br}=n;let v;const S=T=>r(8,v=(B=>Xr(s)?s(w(B),g,b):s)(T));return t.$$set=T=>{e=la(la({},e),Pm(T)),r(11,n=_0(e,a)),"class"in T&&r(0,i=T.class),"title"in T&&r(1,o=T.title),"label"in T&&r(12,s=T.label),"icon"in T&&r(2,l=T.icon),"labelClass"in T&&r(3,c=T.labelClass),"innerClass"in T&&r(4,d=T.innerClass),"hideLabel"in T&&r(5,p=T.hideLabel),"locale"in T&&r(6,m=T.locale),"value"in T&&r(7,h=T.value),"onchange"in T&&r(13,f=T.onchange)},t.$$.update=()=>{4224&t.$$.dirty&&S(h)},[i,o,l,c,d,p,m,h,v,T=>{/tab/i.test(T.key)&&T.preventDefault()},T=>{S(T),f(T)},n,s,f]}class aC extends er{constructor(e){super(),tr(this,e,rC,eC,Ye,{class:0,title:1,label:12,icon:2,labelClass:3,innerClass:4,hideLabel:5,locale:6,value:7,onchange:13})}}function ty(t){let e,r,a=Ua(t[0],t[1])+"";return{c(){e=gt("span"),r=Hr(a),C(e,"class",t[3])},m(n,i){st(n,e,i),Pt(e,r)},p(n,i){3&i&&a!==(a=Ua(n[0],n[1])+"")&&ca(r,a),8&i&&C(e,"class",n[3])},d(n){n&&it(e)}}}function nC(t){let e,r,a,n,i=t[0]&&ty(t);return a=new Ji({props:{items:t[2]}}),{c(){e=gt("li"),i&&i.c(),r=ge(),Ut(a.$$.fragment),C(e,"class","PinturaShapeStyle")},m(o,s){st(o,e,s),i&&i.m(e,null),Pt(e,r),Ot(a,e,null),n=!0},p(o,[s]){o[0]?i?i.p(o,s):(i=ty(o),i.c(),i.m(e,r)):i&&(i.d(1),i=null);const l={};4&s&&(l.items=o[2]),a.$set(l)},i(o){n||(V(a.$$.fragment,o),n=!0)},o(o){_(a.$$.fragment,o),n=!1},d(o){o&&it(e),i&&i.d(),Bt(a)}}}function iC(t,e,r){let a,{title:n}=e,{locale:i}=e,{items:o}=e,{hideTitle:s=!1}=e;return t.$$set=l=>{"title"in l&&r(0,n=l.title),"locale"in l&&r(1,i=l.locale),"items"in l&&r(2,o=l.items),"hideTitle"in l&&r(4,s=l.hideTitle)},t.$$.update=()=>{16&t.$$.dirty&&r(3,a="PinturaShapeStyleLabel"+(s?" implicit":""))},[n,i,o,a,s]}class oC extends er{constructor(e){super(),tr(this,e,iC,nC,Ye,{title:0,locale:1,items:2,hideTitle:4})}}var ey=(t,e,r)=>{let a,n,i;const o=Math.floor(6*t),s=6*t-o,l=r*(1-e),c=r*(1-s*e),d=r*(1-(1-s)*e);switch(o%6){case 0:a=r,n=d,i=l;break;case 1:a=c,n=r,i=l;break;case 2:a=l,n=r,i=d;break;case 3:a=l,n=c,i=r;break;case 4:a=d,n=l,i=r;break;case 5:a=r,n=l,i=c}return[a,n,i]};function sC(t){let e,r,a;return{c(){e=gt("div"),r=gt("span"),C(e,"class","PinturaColorPreview"),C(e,"title",t[0]),C(e,"style",a="--color:"+t[1])},m(n,i){st(n,e,i),Pt(e,r)},p(n,[i]){1&i&&C(e,"title",n[0]),2&i&&a!==(a="--color:"+n[1])&&C(e,"style",a)},i:We,o:We,d(n){n&&it(e)}}}function lC(t,e,r){let a,{color:n}=e,{title:i}=e;return t.$$set=o=>{"color"in o&&r(2,n=o.color),"title"in o&&r(0,i=o.title)},t.$$.update=()=>{4&t.$$.dirty&&r(1,a=n?kn(n):"transparent")},[i,a,n]}class $1 extends er{constructor(e){super(),tr(this,e,lC,sC,Ye,{color:2,title:0})}}var V2=t=>(t=t.trim(),/^rgba/.test(t)?t.substr(5).split(",").map(parseFloat).map((e,r)=>e/(r===3?1:255)):/^rgb/.test(t)?t.substr(4).split(",").map(parseFloat).map(e=>e/255):/^#/.test(t)?(e=>{const[,r,a,n,i]=e.split("");e=e.length>=4&&e.length<=5?`#${r}${r}${a}${a}${n}${n}${i?`${i}${i}`:""}`:e;const[o,s,l,c,d]=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i.exec(e)||[];if(o)return[s,l,c,d].filter(p=>p!==void 0).map(p=>parseInt(p,16)/255)})(t):/[0-9]{1,3}\s?,\s?[0-9]{1,3}\s?,\s?[0-9]{1,3}/.test(t)?t.split(",").map(e=>parseInt(e,10)).map(e=>e/255):void 0);function ry(t){let e,r;return{c(){e=gt("span"),r=Hr(t[0])},m(a,n){st(a,e,n),Pt(e,r)},p(a,n){1&n[0]&&ca(r,a[0])},d(a){a&&it(e)}}}function cC(t){let e,r,a,n;r=new $1({props:{color:t[4],title:Ua(t[8],t[10])}});let i=!t[9]&&ry(t);return{c(){e=gt("span"),Ut(r.$$.fragment),a=ge(),i&&i.c(),C(e,"slot","label"),C(e,"class","PinturaButtonLabel")},m(o,s){st(o,e,s),Ot(r,e,null),Pt(e,a),i&&i.m(e,null),n=!0},p(o,s){const l={};16&s[0]&&(l.color=o[4]),1280&s[0]&&(l.title=Ua(o[8],o[10])),r.$set(l),o[9]?i&&(i.d(1),i=null):i?i.p(o,s):(i=ry(o),i.c(),i.m(e,null))},i(o){n||(V(r.$$.fragment,o),n=!0)},o(o){_(r.$$.fragment,o),n=!1},d(o){o&&it(e),Bt(r),i&&i.d()}}}function ay(t){let e,r,a,n,i,o,s,l,c,d,p,m,h,f;c=new f1({props:{class:"PinturaHuePicker",knobStyle:"background-color:"+t[20],onchange:t[26],value:t[15],min:0,max:1,step:.01}});let g=t[11]&&ny(t),b=t[14]&&iy(t);return{c(){e=gt("div"),r=gt("div"),a=gt("div"),n=gt("div"),l=ge(),Ut(c.$$.fragment),d=ge(),g&&g.c(),p=ge(),b&&b.c(),C(n,"role","button"),C(n,"aria-label","Saturation slider"),C(n,"class","PinturaPickerKnob"),C(n,"tabindex","0"),C(n,"style",i=`background-color:${t[19]};`),C(a,"class","PinturaPickerKnobController"),C(a,"style",o=`transform:translate(${t[24]}%,${t[23]}%)`),C(r,"class","PinturaSaturationPicker"),C(r,"style",s="background-color: "+t[20]),C(e,"class","PinturaPicker")},m(w,v){st(w,e,v),Pt(e,r),Pt(r,a),Pt(a,n),t[37](r),Pt(e,l),Ot(c,e,null),Pt(e,d),g&&g.m(e,null),Pt(e,p),b&&b.m(e,null),m=!0,h||(f=[Mt(n,"nudge",t[29]),Ir(qo.call(null,n,{preventDefault:!0})),Mt(r,"pointerdown",t[28])],h=!0)},p(w,v){(!m||524288&v[0]&&i!==(i=`background-color:${w[19]};`))&&C(n,"style",i),(!m||25165824&v[0]&&o!==(o=`transform:translate(${w[24]}%,${w[23]}%)`))&&C(a,"style",o),(!m||1048576&v[0]&&s!==(s="background-color: "+w[20]))&&C(r,"style",s);const S={};1048576&v[0]&&(S.knobStyle="background-color:"+w[20]),32768&v[0]&&(S.value=w[15]),c.$set(S),w[11]?g?(g.p(w,v),2048&v[0]&&V(g,1)):(g=ny(w),g.c(),V(g,1),g.m(e,p)):g&&(ze(),_(g,1,1,()=>{g=null}),De()),w[14]?b?b.p(w,v):(b=iy(w),b.c(),b.m(e,null)):b&&(b.d(1),b=null)},i(w){m||(V(c.$$.fragment,w),V(g),m=!0)},o(w){_(c.$$.fragment,w),_(g),m=!1},d(w){w&&it(e),t[37](null),Bt(c),g&&g.d(),b&&b.d(),h=!1,Ar(f)}}}function ny(t){let e,r;return e=new f1({props:{class:"PinturaOpacityPicker",knobStyle:"background-color:"+t[17],trackStyle:`background-image:linear-gradient(to right,${t[18]},${t[19]})`,onchange:t[27],value:t[16],min:0,max:1,step:.01}}),{c(){Ut(e.$$.fragment)},m(a,n){Ot(e,a,n),r=!0},p(a,n){const i={};131072&n[0]&&(i.knobStyle="background-color:"+a[17]),786432&n[0]&&(i.trackStyle=`background-image:linear-gradient(to right,${a[18]},${a[19]})`),65536&n[0]&&(i.value=a[16]),e.$set(i)},i(a){r||(V(e.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),r=!1},d(a){Bt(e,a)}}}function iy(t){let e,r,a;return{c(){e=gt("input"),C(e,"class","PinturaColorPickerInput"),C(e,"type","text"),e.value=t[22]},m(n,i){st(n,e,i),r||(a=Mt(e,"input",t[30]),r=!0)},p(n,i){4194304&i[0]&&e.value!==n[22]&&(e.value=n[22])},d(n){n&&it(e),r=!1,a()}}}function oy(t){let e,r;return e=new jo({props:{label:Ua(t[10].labelColorPalette,t[10]),class:ar(["PinturaColorPresets",t[9]?"PinturaColorPresetsGrid":"PinturaColorPresetsList"]),hideLabel:!1,name:t[1],value:t[4],optionGroupClass:"PinturaListOptionGroup",optionClass:"PinturaListOption",options:t[2].map(t[38]),selectedIndex:t[3],optionMapper:t[7],optionLabelClass:t[6],onchange:t[39],$$slots:{option:[uC,({option:a})=>({51:a}),({option:a})=>[0,a?1048576:0]],group:[dC,({option:a})=>({51:a}),({option:a})=>[0,a?1048576:0]]},$$scope:{ctx:t}}}),{c(){Ut(e.$$.fragment)},m(a,n){Ot(e,a,n),r=!0},p(a,n){const i={};1024&n[0]&&(i.label=Ua(a[10].labelColorPalette,a[10])),512&n[0]&&(i.class=ar(["PinturaColorPresets",a[9]?"PinturaColorPresetsGrid":"PinturaColorPresetsList"])),2&n[0]&&(i.name=a[1]),16&n[0]&&(i.value=a[4]),1028&n[0]&&(i.options=a[2].map(a[38])),8&n[0]&&(i.selectedIndex=a[3]),128&n[0]&&(i.optionMapper=a[7]),64&n[0]&&(i.optionLabelClass=a[6]),512&n[0]|3145728&n[1]&&(i.$$scope={dirty:n,ctx:a}),e.$set(i)},i(a){r||(V(e.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),r=!1},d(a){Bt(e,a)}}}function dC(t){let e,r,a=t[51].label+"";return{c(){e=gt("span"),r=Hr(a),C(e,"slot","group")},m(n,i){st(n,e,i),Pt(e,r)},p(n,i){1048576&i[1]&&a!==(a=n[51].label+"")&&ca(r,a)},d(n){n&&it(e)}}}function sy(t){let e,r,a=t[51].label+"";return{c(){e=gt("span"),r=Hr(a),C(e,"class","PinturaButtonLabel")},m(n,i){st(n,e,i),Pt(e,r)},p(n,i){1048576&i[1]&&a!==(a=n[51].label+"")&&ca(r,a)},d(n){n&&it(e)}}}function uC(t){let e,r,a,n;r=new $1({props:{title:t[51].label,color:t[51].value}});let i=!t[9]&&sy(t);return{c(){e=gt("span"),Ut(r.$$.fragment),a=ge(),i&&i.c(),C(e,"slot","option")},m(o,s){st(o,e,s),Ot(r,e,null),Pt(e,a),i&&i.m(e,null),n=!0},p(o,s){const l={};1048576&s[1]&&(l.title=o[51].label),1048576&s[1]&&(l.color=o[51].value),r.$set(l),o[9]?i&&(i.d(1),i=null):i?i.p(o,s):(i=sy(o),i.c(),i.m(e,null))},i(o){n||(V(r.$$.fragment,o),n=!0)},o(o){_(r.$$.fragment,o),n=!1},d(o){o&&it(e),Bt(r),i&&i.d()}}}function pC(t){let e,r,a,n=t[13]&&ay(t),i=t[12]&&oy(t);return{c(){e=gt("div"),n&&n.c(),r=ge(),i&&i.c(),C(e,"slot","details"),C(e,"class","PinturaColorPickerPanel")},m(o,s){st(o,e,s),n&&n.m(e,null),Pt(e,r),i&&i.m(e,null),a=!0},p(o,s){o[13]?n?(n.p(o,s),8192&s[0]&&V(n,1)):(n=ay(o),n.c(),V(n,1),n.m(e,r)):n&&(ze(),_(n,1,1,()=>{n=null}),De()),o[12]?i?(i.p(o,s),4096&s[0]&&V(i,1)):(i=oy(o),i.c(),V(i,1),i.m(e,null)):i&&(ze(),_(i,1,1,()=>{i=null}),De())},i(o){a||(V(n),V(i),a=!0)},o(o){_(n),_(i),a=!1},d(o){o&&it(e),n&&n.d(),i&&i.d()}}}function mC(t){let e,r;return e=new Gd({props:{buttonClass:ar(["PinturaColorPickerButton",t[5]]),$$slots:{details:[pC],label:[cC]},$$scope:{ctx:t}}}),{c(){Ut(e.$$.fragment)},m(a,n){Ot(e,a,n),r=!0},p(a,n){const i={};32&n[0]&&(i.buttonClass=ar(["PinturaColorPickerButton",a[5]])),33554399&n[0]|2097152&n[1]&&(i.$$scope={dirty:n,ctx:a}),e.$set(i)},i(a){r||(V(e.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),r=!1},d(a){Bt(e,a)}}}function hC(t,e,r){let a,n,i,o,s,l,c,d,p,m,h,f,g,b,{label:w}=e,{name:v}=e,{options:S=[]}=e,{selectedIndex:T=-1}=e,{value:B}=e,{buttonClass:I}=e,{optionLabelClass:O}=e,{optionMapper:R}=e,{onchange:E}=e,{title:N}=e,{hidePresetLabel:U=!0}=e,{locale:x}=e,{enableOpacity:j=!0}=e,{enablePresets:A=!0}=e,{enablePicker:P=!0}=e,{enableInput:G=!1}=e;const Q=(z,vt)=>{if(p=[z[0],z[1],z[2]],vt){let St=((W,Lt,Ce)=>{let pt=Math.max(W,Lt,Ce),zt=pt-Math.min(W,Lt,Ce),Te=zt&&(pt==W?(Lt-Ce)/zt:pt==Lt?2+(Ce-W)/zt:4+(W-Lt)/zt);return[60*(Te<0?Te+6:Te)/360,pt&&zt/pt,pt]})(...p);r(15,s=St[0]),r(32,l=St[1]),r(33,c=St[2]),r(16,d=Mr(z[3])?z[3]:1)}r(17,m=kn(z)),r(18,h=kn([...p,0])),r(19,f=kn([...p,1])),r(20,g=kn(ey(s,1,1)))},Z=()=>{const z=[...ey(s,l,c),d];Q(z),E(z)},ct=z=>{const vt=z.length===3?[...z,1]:z;Q(vt,!0),E(vt)},lt=(z,vt)=>{const St=Nr(z.x/vt.width,0,1),W=Nr(z.y/vt.height,0,1);var Lt;Lt=1-W,r(32,l=St),r(33,c=Lt),d===0&&r(16,d=1),Z()};let xt,yt,bt,qt;const Y=z=>{const vt=ha(c0(z),qt);lt(pa(Fe(bt),vt),yt)},et=z=>{yt=void 0,document.documentElement.removeEventListener("pointermove",Y),document.documentElement.removeEventListener("pointerup",et)};let Vt;return t.$$set=z=>{"label"in z&&r(0,w=z.label),"name"in z&&r(1,v=z.name),"options"in z&&r(2,S=z.options),"selectedIndex"in z&&r(3,T=z.selectedIndex),"value"in z&&r(4,B=z.value),"buttonClass"in z&&r(5,I=z.buttonClass),"optionLabelClass"in z&&r(6,O=z.optionLabelClass),"optionMapper"in z&&r(7,R=z.optionMapper),"onchange"in z&&r(31,E=z.onchange),"title"in z&&r(8,N=z.title),"hidePresetLabel"in z&&r(9,U=z.hidePresetLabel),"locale"in z&&r(10,x=z.locale),"enableOpacity"in z&&r(11,j=z.enableOpacity),"enablePresets"in z&&r(12,A=z.enablePresets),"enablePicker"in z&&r(13,P=z.enablePicker),"enableInput"in z&&r(14,G=z.enableInput)},t.$$.update=()=>{16&t.$$.dirty[0]|8&t.$$.dirty[1]&&(!B||b&&mo(B,b)||(r(34,b=[...B]),Q(B,!0))),2&t.$$.dirty[1]&&r(24,a=100*l),4&t.$$.dirty[1]&&r(23,n=100-100*c),16&t.$$.dirty[1]&&r(36,i=!!Vt&&Vt.length>=4&&Vt.length<=5),18448&t.$$.dirty[0]|32&t.$$.dirty[1]&&r(22,o=G&&B?((z,vt,St)=>{let W=z.map(Lt=>Math.round(255*Lt).toString(16).toLowerCase().padStart(2,"0"));return(!vt&&W.length>3||W[3]==="ff")&&W.pop(),St&&(W=W.map(Lt=>Lt.substring(0,1))),"#"+W.join("")})(B,j,i):void 0)},[w,v,S,T,B,I,O,R,N,U,x,j,A,P,G,s,d,m,h,f,g,xt,o,n,a,ct,z=>{r(15,s=z),d===0&&r(16,d=1),Z()},z=>{r(16,d=z),Z()},z=>{z.stopPropagation(),yt=ma(xt.offsetWidth,xt.offsetHeight),bt=(vt=>ot(vt.offsetX,vt.offsetY))(z),qt=c0(z),lt(bt,yt),document.documentElement.addEventListener("pointermove",Y),document.documentElement.addEventListener("pointerup",et)},z=>{yt=ma(xt.offsetWidth,xt.offsetHeight);const vt=a/100*yt.width,St=n/100*yt.height;lt({x:vt+z.detail.x,y:St+z.detail.y},yt)},z=>{const{value:vt}=z.target,St=vt.length;if(!vt.startsWith("#")||St<4||St===6||St===8||St>9||!j&&St>7)return;const W=V2(vt);W&&(r(35,Vt=vt),Q(W),E(W))},E,l,c,b,Vt,i,function(z){xr[z?"unshift":"push"](()=>{xt=z,r(21,xt)})},([z,vt])=>[z,Xr(vt)?vt(x):vt],z=>ct(z.value)]}class gC extends er{constructor(e){super(),tr(this,e,hC,mC,Ye,{label:0,name:1,options:2,selectedIndex:3,value:4,buttonClass:5,optionLabelClass:6,optionMapper:7,onchange:31,title:8,hidePresetLabel:9,locale:10,enableOpacity:11,enablePresets:12,enablePicker:13,enableInput:14},null,[-1,-1])}}function ly(t,e,r){const a=t.slice();return a[9]=e[r][0],a[0]=e[r][1],a[10]=e[r][2],a[2]=e[r][3],a}function fC(t){let e,r,a;const n=[t[10]];var i=t[3][t[9]]||t[9];function o(s){let l={};for(let c=0;c<n.length;c+=1)l=la(l,n[c]);return{props:l}}return i&&(e=Id(i,o())),{c(){e&&Ut(e.$$.fragment),r=ia()},m(s,l){e&&Ot(e,s,l),st(s,r,l),a=!0},p(s,l){const c=4&l?Ja(n,[Mn(s[10])]):{};if(i!==(i=s[3][s[9]]||s[9])){if(e){ze();const d=e;_(d.$$.fragment,1,0,()=>{Bt(d,1)}),De()}i?(e=Id(i,o()),Ut(e.$$.fragment),V(e.$$.fragment,1),Ot(e,r.parentNode,r)):e=null}else i&&e.$set(c)},i(s){a||(e&&V(e.$$.fragment,s),a=!0)},o(s){e&&_(e.$$.fragment,s),a=!1},d(s){s&&it(r),e&&Bt(e,s)}}}function $C(t){let e,r;return e=new l5({props:{name:t[9],attributes:t[4](t[10]),$$slots:{default:[xC]},$$scope:{ctx:t}}}),{c(){Ut(e.$$.fragment)},m(a,n){Ot(e,a,n),r=!0},p(a,n){const i={};4&n&&(i.name=a[9]),4&n&&(i.attributes=a[4](a[10])),8196&n&&(i.$$scope={dirty:n,ctx:a}),e.$set(i)},i(a){r||(V(e.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),r=!1},d(a){Bt(e,a)}}}function yC(t){let e,r,a=t[10].innerHTML+"";return{c(){e=new _d(!1),r=ia(),e.a=r},m(n,i){e.m(a,n,i),st(n,r,i)},p(n,i){4&i&&a!==(a=n[10].innerHTML+"")&&e.p(a)},i:We,o:We,d(n){n&&it(r),n&&e.d()}}}function bC(t){let e,r=t[10].textContent+"";return{c(){e=Hr(r)},m(a,n){st(a,e,n)},p(a,n){4&n&&r!==(r=a[10].textContent+"")&&ca(e,r)},i:We,o:We,d(a){a&&it(e)}}}function vC(t){let e,r;return e=new Ji({props:{items:t[2],discardEmptyItems:!0}}),{c(){Ut(e.$$.fragment)},m(a,n){Ot(e,a,n),r=!0},p(a,n){const i={};4&n&&(i.items=a[2]),e.$set(i)},i(a){r||(V(e.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),r=!1},d(a){Bt(e,a)}}}function xC(t){let e,r,a,n;const i=[vC,bC,yC],o=[];function s(l,c){return l[2]&&l[2].length?0:l[10].textContent?1:l[10].innerHTML?2:-1}return~(e=s(t))&&(r=o[e]=i[e](t)),{c(){r&&r.c(),a=ge()},m(l,c){~e&&o[e].m(l,c),st(l,a,c),n=!0},p(l,c){let d=e;e=s(l),e===d?~e&&o[e].p(l,c):(r&&(ze(),_(o[d],1,1,()=>{o[d]=null}),De()),~e?(r=o[e],r?r.p(l,c):(r=o[e]=i[e](l),r.c()),V(r,1),r.m(a.parentNode,a)):r=null)},i(l){n||(V(r),n=!0)},o(l){_(r),n=!1},d(l){~e&&o[e].d(l),l&&it(a)}}}function cy(t,e){let r,a,n,i,o,s;const l=[$C,fC],c=[];function d(p,m){return 4&m&&(a=null),a==null&&(a=!p[5](p[9])),a?0:1}return n=d(e,-1),i=c[n]=l[n](e),{key:t,first:null,c(){r=ia(),i.c(),o=ia(),this.first=r},m(p,m){st(p,r,m),c[n].m(p,m),st(p,o,m),s=!0},p(p,m){let h=n;n=d(e=p,m),n===h?c[n].p(e,m):(ze(),_(c[h],1,1,()=>{c[h]=null}),De(),i=c[n],i?i.p(e,m):(i=c[n]=l[n](e),i.c()),V(i,1),i.m(o.parentNode,o))},i(p){s||(V(i),s=!0)},o(p){_(i),s=!1},d(p){p&&it(r),c[n].d(p),p&&it(o)}}}function wC(t){let e,r,a=[],n=new Map,i=t[2];const o=s=>s[0]+s[1];for(let s=0;s<i.length;s+=1){let l=ly(t,i,s),c=o(l);n.set(c,a[s]=cy(c,l))}return{c(){for(let s=0;s<a.length;s+=1)a[s].c();e=ia()},m(s,l){for(let c=0;c<a.length;c+=1)a[c].m(s,l);st(s,e,l),r=!0},p(s,[l]){62&l&&(i=s[2],ze(),a=Xi(a,l,o,1,s,i,n,e.parentNode,_o,cy,e,ly),De())},i(s){if(!r){for(let l=0;l<i.length;l+=1)V(a[l]);r=!0}},o(s){for(let l=0;l<a.length;l+=1)_(a[l]);r=!1},d(s){for(let l=0;l<a.length;l+=1)a[l].d(s);s&&it(e)}}}function SC(t,e,r){let a,n,{items:i}=e,{discardEmptyItems:o=!0}=e,{key:s=""}=e;const l={Button:Bo,Dropdown:E2,RadioGroup:jo,Input:A2,Panel:H5,ToggleSlider:aC,ShapeStyle:oC,ColorPicker:gC},c=p=>!Be(p)||!!l[p],d=p=>{if(!p)return!1;const[m,,h,f=[]]=p;return!!c(m)||f.some(d)||h.textContent||h.innerHTML};return t.$$set=p=>{"items"in p&&r(6,i=p.items),"discardEmptyItems"in p&&r(7,o=p.discardEmptyItems),"key"in p&&r(0,s=p.key)},t.$$.update=()=>{1&t.$$.dirty&&r(1,a=s),192&t.$$.dirty&&r(2,n=(i&&o?i.filter(d):i)||[])},[s,a,n,l,(p={})=>{const g=p,{textContent:m,innerHTML:h}=g;return Gc(g,["textContent","innerHTML"])},c,i,o]}class Ji extends er{constructor(e){super(),tr(this,e,SC,wC,Ye,{items:6,discardEmptyItems:7,key:0})}}const CC=["aspectRatio","isRotatedSideways","flip","cropSize"],dy=s1.map(([t])=>t).filter(t=>!CC.includes(t));var Co=(t,e)=>new CustomEvent("ping",{detail:{type:t,data:e},cancelable:!0,bubbles:!0}),L2=(t,e)=>(e?d1(t,e):t).replace(/([a-z])([A-Z])/g,"$1-$2").replace(/\s+/g,"-").toLowerCase(),uy=(t,e=Br)=>{const{subscribe:r,set:a}=le(void 0);return{subscribe:r,destroy:((n,i)=>{const o=matchMedia(n);return o.addListener(i),i(o),{get matches(){return o.matches},destroy:()=>o.removeListener(i)}})(t,({matches:n})=>a(e(n))).destroy}},rl=t=>/video/.test(t.type),py=(t,e,r)=>new Promise((a,n)=>{(async()=>{rl(t)&&a(await(l=>new Promise((c,d)=>{const p=Yr("video");p.onseeked=()=>{const m=Yr("canvas");bv(p).then(({width:h,height:f})=>{m.width=h,m.height=f;const g=m.getContext("2d",{willReadFrequently:!0}),b=()=>{g.drawImage(p,0,0,m.width,m.height);const w=g.getImageData(0,0,m.width,m.height);Wa(m),c(w)};po()?setTimeout(b,16):b()})},p.onloadeddata=()=>{p.currentTime=0},p.onerror=m=>{console.error(m),d(p.error)},p.src=URL.createObjectURL(l),p.load()}))(t));const i=await e.read(t),o=l=>ov(l,r).then(c=>e.apply(c,i)).then(a).catch(n);if(iv(t)||!nv()||po()||zi())return o(t);let s;try{s=await Gl((l,c)=>createImageBitmap(l).then(d=>c(null,d)).catch(c),[t])}catch{}s&&s.width?await zd()?p1()&&i>1?a(await(async l=>Hl(await tl(l)))(s)):a(s):a(e.apply(s,i)):o(t)})()}),my=(t,e)=>new Promise(async r=>{if(t.width<e.width&&t.height<e.height)return r(t);const a=Math.min(e.width/t.width,e.height/t.height),n=a*t.width,i=a*t.height,o=Yr("canvas",{width:n,height:i}),s=o.getContext("2d",{willReadFrequently:!0}),l=Gs(t)?await tl(t):t;s.drawImage(l,0,0,n,i),r(Hl(o))});let lm=null;var kC=()=>{if(lm===null){let t=Yr("canvas");lm=!!Wd(t),Wa(t),t=void 0}return lm};const hy=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],ds={precision:1e-4},cd={precision:.01*ds.precision};var RC=()=>{const t=[],e=[],r=[],a=()=>{e.forEach(i=>i(r))},n=i=>{i.unsub=i.subscribe(o=>((s,l)=>{const c=t.indexOf(s);c<0||(r[c]=l,a())})(i,o)),a()};return{get length(){return t.length},clear:()=>{t.forEach(i=>i.unsub()),t.length=0,r.length=0},unshift:i=>{t.unshift(i),n(i)},get:i=>t[i],push:i=>{t.push(i),n(i)},remove:i=>{i.unsub();const o=t.indexOf(i);t.splice(o,1),r.splice(o,1)},forEach:i=>t.forEach(i),filter:i=>t.filter(i),subscribe:i=>(e.push(i),i(r),()=>{e.splice(e.indexOf(i),1)})}},cm=t=>t[0]<.25&&t[1]<.25&&t[2]<.25,F2=(t={})=>new Promise(e=>{const{accept:r="image/*"}=t,a=Yr("input",{style:"position:absolute;visibility:hidden;width:0;height:0;",type:"file",accept:r}),n=()=>{const[i]=a.files;a.parentNode&&a.remove(),a.removeEventListener("change",n),e(i)};a.addEventListener("change",n),zi()&&document.body.append(a),a.click()}),jl=t=>{try{return t()}catch(e){console.error(e)}},TC=([t,e])=>t+.5*(e-t),Lo=t=>Math.round(100*t),y1=t=>ot(t.clientX,t.clientY),zm=(t,e,r)=>{const a=y1(t);return ha(ha(a,e),r)};function MC(t,e,r){let a,n,i,o,s,l,c,d,p,m,h,f,g,b,w,v,S,T,B,I,{root:O}=e,{locale:R}=e,{stores:E}=e,{allowPan:N=!0}=e,{allowZoom:U=!0}=e,{enablePan:x=!0}=e,{enableZoom:j=!0}=e,{enableZoomControls:A=j}=e,{enableZoomInput:P=!0}=e,{enablePanInput:G=!0}=e,{enablePanLimit:Q=!0}=e,{panLimitGutterScalar:Z=0}=e,{zoomOptions:ct=[.25,.5,1,1.25,1.5,2,3,4,6,8,16]}=e,{zoomAdjustStep:lt=.25}=e,{zoomAdjustFactor:xt=.1}=e,{zoomAdjustWheelFactor:yt=1}=e,{elasticity:bt=5}=e,{imageSelectionRectCentered:qt}=e,{imageSelectionRectScalar:Y}=e,{zoomLevel:et=null}=e,{zoomControls:Vt}=e,{zoomMultiTouching:z=!1}=e;const{isAnimated:vt,isInteracting:St,rootRect:W,stageRect:Lt,stageScalar:Ce,imageSelectionPan:pt,imageSelectionZoom:zt,imageSelectionStageFitScalar:Te,imageSelectionRect:ne,imageSelectionStoredState:At,imagePreviewUpscale:K}=E;F(t,vt,nt=>r(68,B=nt)),F(t,St,nt=>r(67,S=nt)),F(t,W,nt=>r(65,w=nt)),F(t,Lt,nt=>r(64,b=nt)),F(t,Ce,nt=>r(45,T=nt)),F(t,pt,nt=>r(63,h=nt)),F(t,zt,nt=>r(42,m=nt)),F(t,Te,nt=>r(43,f=nt)),F(t,ne,nt=>r(66,v=nt)),F(t,At,nt=>r(69,I=nt)),F(t,K,nt=>r(44,g=nt));let Xt=!1,se,me,Ve,ke;const Dt=nt=>{const Yt=O.querySelector(".PinturaMain > .PinturaUtilMain")||O.querySelector('div[tabindex="0"] .PinturaUtilMain');return!!Yt&&!!Yt.contains(nt.target)&&!Vd(nt.target)},Ue=(nt={})=>{const{pan:Yt=h,zoom:te=m}=nt;Rt(At,I={translation:Yt,zoom:te},I)},Xe=()=>h&&h.x===0&&h.y===0,he=()=>{Rt(zt,m=void 0,m),Xe()||Rt(pt,h=Or(),h),rt.set(void 0,{hard:!0})},_t=()=>{he(),Ue()},rt=ir(void 0,{precision:.01});rt.subscribe(nt=>{if(nt===void 0)return Rt(zt,m=void 0,m),void(Xe()||Rt(pt,h=Or(),h));const Yt=m;nt<=1?Xe()||Rt(pt,h=Or(),h):nt<=Yt&&Rt(pt,h=mn(h,.8),h),Rt(zt,m=nt,m)});const Zt=nt=>{rt.update(Yt=>{const te=nt(Yt||f);return Ue({zoom:te}),te})},mt=nt=>{nt?rt.set(nt,{hard:B===!1}):(nt=void 0,rt.set(void 0,{hard:!0})),Rt(zt,m=nt,m),Ue({zoom:nt})},Se=(nt,Yt)=>{const te=Y*Yt,Re=X({},qt),hr=1-Nr(Z,0,1);Ya(Re,te<hr?te:hr);const Ge=X({},qt);Ya(Ge,te),gi(Ge,nt);const zr=X({},Ge);return Ge.x>Re.x&&(zr.x=Re.x),Ge.y>Re.y&&(zr.y=Re.y),Ge.x+Ge.width<Re.x+Re.width&&(zr.x=Re.x+Re.width-Ge.width),Ge.y+Ge.height<Re.y+Re.height&&(zr.y=Re.y+Re.height-Ge.height),ha(Cr(zr),Cr(Re))},ht=({translation:nt,zoom:Yt=1,elastify:te=!0})=>{if(!se)return;let Re=nt;const hr=ot(se.x+Re.x,se.y+Re.y);if(!Q)return hr;const Ge=Se(hr,Yt);return te?G3(Ge,hr,bt):Ge};let Et,ee;const re=()=>{ee=void 0,Rt(St,S=!0,S),r(33,Xt=G),Et=!1,Ve=!1,se=X({},h),me=g?m||f:i?m||1:m||f},Wt=nt=>{const{scalar:Yt,translation:te,isMultiTouching:Re}=nt.detail;if(!se||!Re&&!G)return;Re&&mn(te,.5),(G||Re)&&(Et=!0),z||r(12,z=Re);const hr=a?Nr(me*Yt,s,l):1,Ge=ht({translation:te,zoom:hr,elastify:!0}),zr=Io(Ge);ke=Io(h),Ve=zr<ke,a&&zt.set(hr),pt.set(Ge),ee=z&&{translation:nt.detail.translation,scalar:Yt}},Ht=nt=>{Rt(St,S=!1,S),r(33,Xt=!1),r(12,z=!1),Ve&&ke<50&&(se=void 0,me=void 0,pt.set(Or()))},fe=nt=>{Rt(St,S=!1,S),r(33,Xt=!1),r(12,z=!1),Promise.resolve().then(()=>{if(Et&&se){const Yt=ee||nt.detail,te=a?Nr(me*Yt.scalar,s,l):1,Re=ht({elastify:!1,translation:Yt.translation,zoom:te});pt.set(Re)}se=void 0,me=void 0,G&&nt.detail.isDoubleTap&&_t(),Ue()})};let Le,mr=Date.now(),He=0,nr=!1,ve=!1;const ae=nt=>{if(!Dt(nt)||(nt.preventDefault(),nt.stopPropagation(),ve))return;clearTimeout(Le);const Yt=Hd(nt),te=Date.now(),Re=te-mr;mr=te;const hr=Math.abs(Yt/Re)>.2;He=hr?He+1:0;const Ge=1+-1*Yt*yt/(hr?50:100),zr=zm(nt,w,b);xe(zr,Ge,{isZoomingFast:hr})},xe=(nt,Yt,{isZoomingFast:te})=>{const Re=g?m||f:i?m||1:m||f,hr=Re*Yt,Ge=Or(),zr=h,Qa=g?f:i?1:f,Fa=Math.abs(hr-Qa),Ma=hr<Re,dr=Re>Qa&&Ma||Re<Qa&&hr>Re,wr=He>=5;if(te||(nr=!1),He>0&&!nr&&(nr=dr),wr&&nr)return _t(),ve=!0,void setTimeout(()=>{ve=!1},100);if(wr)return;!te&&dr&&Fa<=.05&&(Le=setTimeout(()=>{_t()},250)),Rt(zt,m=Nr(hr,s,l),m);const tn=yr(v);Ya(tn,Re),gi(tn,zr);const ur=Cr(tn),Fn=yr(tn);Ya(Fn,m-Re+1,nt);const gn=Cr(Fn),fr=d0(ha(gn,ur),Re);((Kr,Gr,Na)=>{Kr.x=Gr,Kr.y=Na})(Ge,zr.x+fr.x,zr.y+fr.y),Rt(pt,h=Ma&&te?mn(Fe(h),.85):Se(Ge,Re),h),Ue()},Ke=nt=>(nt?"add":"remove")+"EventListener";let Me,Pe,rr,Ae;const Je=nt=>{nt.preventDefault(),Pe=X({},h),Ae=yr(v),rr=zm(nt,w,b),Me=g?m||f:i?m||1:m||f},or=nt=>{nt.preventDefault(),Rt(zt,m=Nr(nt.scale*Me,s,l),m);const Yt=yr(Ae);Ya(Yt,Me),gi(Yt,Pe);const te=Cr(Yt),Re=yr(Yt);Ya(Re,m-Me+1,rr);const hr=Cr(Re),Ge=d0(ha(hr,te),Me),zr={x:Pe.x+Ge.x,y:Pe.y+Ge.y};Rt(pt,h=Se(zr,m),h)},Sr=nt=>{nt.preventDefault()},at=nt=>{O[Ke(nt)]("wheel",ae),zi()||(O[Ke(nt)]("gesturestart",Je),O[Ke(nt)]("gesturechange",or),O[Ke(nt)]("gestureend",Sr))},jt=nt=>{const Yt=Ke(nt);O[Yt]("interactionstart",re),O[Yt]("interactionupdate",Wt),O[Yt]("interactionrelease",Ht),O[Yt]("interactionend",fe)};let Ne;return Uo(()=>{Ne=Wo(O,{drag:!0,pinch:!0,inertia:!0,inertiaDurationMultiplier:10,shouldStartInteraction:Dt})}),ri(()=>{at(!1),jt(!1),Ne.destroy(),Ne=void 0}),t.$$set=nt=>{"root"in nt&&r(13,O=nt.root),"locale"in nt&&r(14,R=nt.locale),"stores"in nt&&r(15,E=nt.stores),"allowPan"in nt&&r(16,N=nt.allowPan),"allowZoom"in nt&&r(17,U=nt.allowZoom),"enablePan"in nt&&r(18,x=nt.enablePan),"enableZoom"in nt&&r(19,j=nt.enableZoom),"enableZoomControls"in nt&&r(20,A=nt.enableZoomControls),"enableZoomInput"in nt&&r(21,P=nt.enableZoomInput),"enablePanInput"in nt&&r(22,G=nt.enablePanInput),"enablePanLimit"in nt&&r(23,Q=nt.enablePanLimit),"panLimitGutterScalar"in nt&&r(24,Z=nt.panLimitGutterScalar),"zoomOptions"in nt&&r(25,ct=nt.zoomOptions),"zoomAdjustStep"in nt&&r(26,lt=nt.zoomAdjustStep),"zoomAdjustFactor"in nt&&r(27,xt=nt.zoomAdjustFactor),"zoomAdjustWheelFactor"in nt&&r(28,yt=nt.zoomAdjustWheelFactor),"elasticity"in nt&&r(29,bt=nt.elasticity),"imageSelectionRectCentered"in nt&&r(30,qt=nt.imageSelectionRectCentered),"imageSelectionRectScalar"in nt&&r(31,Y=nt.imageSelectionRectScalar),"zoomLevel"in nt&&r(32,et=nt.zoomLevel),"zoomControls"in nt&&r(11,Vt=nt.zoomControls),"zoomMultiTouching"in nt&&r(12,z=nt.zoomMultiTouching)},t.$$.update=()=>{var nt,Yt;2752512&t.$$.dirty[0]&&r(35,a=U&&j&&P),327680&t.$$.dirty[0]&&r(34,n=N&&x),196608&t.$$.dirty[0]&&(N||U?(Rt(zt,m=j?I.zoom:void 0,m),Rt(pt,h=x?Fe(I.translation):Xe()?h:Or(),h),rt.set(m)):he()),16384&t.$$.dirty[1]&&(i=T>=1),33570816&t.$$.dirty[0]|28672&t.$$.dirty[1]&&r(39,o=[(g||T<1)&&[f,Lo(f)+"%",{sublabel:R.labelZoomFit}],...ct.map(te=>[te,Lo(te)+"%"])].filter(Boolean).map(te=>(te[0]===1&&(te[2]={sublabel:R.labelZoomActual}),te)).sort((te,Re)=>{const hr=te[0]||f,Ge=Re[0]||f;return hr<Ge?-1:Ge<hr?1:0})),4352&t.$$.dirty[1]&&r(37,s=Math.min(o.reduce((te,[Re])=>Re<te?Re:te,Number.MAX_SAFE_INTEGER),f)),256&t.$$.dirty[1]&&r(36,l=o.reduce((te,[Re])=>Re>te?Re:te,Number.MIN_SAFE_INTEGER)),2&t.$$.dirty[1]&&et!==null&&mt(et),30720&t.$$.dirty[1]&&r(41,d=m||(g||T<1?f:1)),1280&t.$$.dirty[1]&&r(38,(nt=o.map(([te])=>te),Yt=d,c=nt.findIndex(te=>te===Yt))),1024&t.$$.dirty[1]&&r(40,p=Lo(d)+"%"),202522624&t.$$.dirty[0]|3040&t.$$.dirty[1]&&r(11,Vt=(U||U)&&A?[["Button","zoom-out",{hideLabel:!0,label:R.labelZoomOut,icon:R.iconZoomOut,disabled:m===s,onclick:()=>Zt(te=>Math.max(s,te-lt)),onhold:()=>Zt(te=>Math.max(s,te*(1-xt)))}],["Dropdown","zoom-level",{label:p,labelClass:"PinturaFixedWidthCharacters",options:o,selectedIndex:c,onchange:te=>mt(te.value)}],["Button","zoom-in",{hideLabel:!0,label:R.labelZoomIn,icon:R.iconZoomIn,disabled:m===l,onclick:()=>Zt(te=>Math.min(l,te+lt)),onhold:()=>Zt(te=>Math.min(l,te*(1+xt)))}]]:[]),8192&t.$$.dirty[0]|16&t.$$.dirty[1]&&O&&at(a),8192&t.$$.dirty[0]|8&t.$$.dirty[1]&&O&&jt(n),4202496&t.$$.dirty[0]|12&t.$$.dirty[1]&&O&&O.style.setProperty("--cursor",n&&G?Xt?"grabbing":"grab":"")},[vt,St,W,Lt,Ce,pt,zt,Te,ne,At,K,Vt,z,O,R,E,N,U,x,j,A,P,G,Q,Z,ct,lt,xt,yt,bt,qt,Y,et,Xt,n,a,l,s,c,o,p,d,m,f,g,T]}class PC extends er{constructor(e){super(),tr(this,e,MC,null,Ye,{root:13,locale:14,stores:15,allowPan:16,allowZoom:17,enablePan:18,enableZoom:19,enableZoomControls:20,enableZoomInput:21,enablePanInput:22,enablePanLimit:23,panLimitGutterScalar:24,zoomOptions:25,zoomAdjustStep:26,zoomAdjustFactor:27,zoomAdjustWheelFactor:28,elasticity:29,imageSelectionRectCentered:30,imageSelectionRectScalar:31,zoomLevel:32,zoomControls:11,zoomMultiTouching:12},null,[-1,-1,-1,-1])}}const IC=t=>new Promise(e=>{const r=new FileReader;r.onload=()=>e(r.result),r.readAsArrayBuffer(t)}),dm=(t,e=0,r=t.byteLength)=>{const a=[],n=e+r;for(;e<n;){const i=t.getUint32(e);if(i<0)break;const o=t.getUint32(e+4);if(a.push({type:o,size:i,offset:e,bodyOffset:e+8,bodySize:i-8}),i<8)break;e+=i}return a},AC=(t,{limit:e=1024}={})=>{let r=0;if(r+=4,t.getUint32(r)!==1718909296)return 0;r+=4;const a=t.getUint32(r);return a===1836069938?((n,i,o)=>{let s=!1,l=-1;for(let h=i;h<o;h++)if(s||n.getUint32(h)!==1953653099||(s=!0,h+=4),s&&n.getUint8(h)==64){l=h;break}if(l<0)return 0;const c=n.getUint32(l-28),d=n.getUint32(l-20),p=n.getUint32(l-32),m=n.getUint32(l-16);return c===65536&&d===4294901760?90:p===4294901760&&m===4294901760?180:c===4294901760&&d===65536?270:0})(t,r,e):a===1903435808?(n=>{const i=dm(n).find(c=>c.type===1836019574);if(!i)return 0;const o=dm(n,i.bodyOffset,i.bodySize);o.filter(c=>c.type===1953653099).forEach(c=>{o.push(...dm(n,c.bodyOffset,c.bodySize))});const s=[1836476516,1953196132],l=o.filter(c=>s.includes(c.type));for(const{type:c,bodyOffset:d}of l){const p=n.getUint8(d);let m=d+4;m+=c===1836476516?32:36,m+=p===1?12:0;const h=n.getInt32(m),f=n.getInt32(m+4);if(h===0&&f>0)return 90;if(h<0&&f===0)return 180;if(h===0&&f<0)return 270}return 0})(t):0},{window:us}=t2;function gy(t){let e,r,a,n=t[41]&&fy(t),i=t[38]&&vy(t);return{c(){n&&n.c(),e=ge(),i&&i.c(),r=ia()},m(o,s){n&&n.m(o,s),st(o,e,s),i&&i.m(o,s),st(o,r,s),a=!0},p(o,s){o[41]?n?(n.p(o,s),1024&s[1]&&V(n,1)):(n=fy(o),n.c(),V(n,1),n.m(e.parentNode,e)):n&&(ze(),_(n,1,1,()=>{n=null}),De()),o[38]?i?(i.p(o,s),128&s[1]&&V(i,1)):(i=vy(o),i.c(),V(i,1),i.m(r.parentNode,r)):i&&(ze(),_(i,1,1,()=>{i=null}),De())},i(o){a||(V(n),V(i),a=!0)},o(o){_(n),_(i),a=!1},d(o){n&&n.d(o),o&&it(e),i&&i.d(o),o&&it(r)}}}function fy(t){let e,r,a,n,i,o;const s=[VC,EC],l=[];function c(d,p){return d[39]?0:d[34]?1:-1}return~(a=c(t))&&(n=l[a]=s[a](t)),{c(){e=gt("div"),r=gt("p"),n&&n.c(),C(r,"style",t[68]),C(e,"class","PinturaStatus"),C(e,"style",i="opacity: "+t[53])},m(d,p){st(d,e,p),Pt(e,r),~a&&l[a].m(r,null),o=!0},p(d,p){let m=a;a=c(d),a===m?~a&&l[a].p(d,p):(n&&(ze(),_(l[m],1,1,()=>{l[m]=null}),De()),~a?(n=l[a],n?n.p(d,p):(n=l[a]=s[a](d),n.c()),V(n,1),n.m(r,null)):n=null),(!o||64&p[2])&&C(r,"style",d[68]),(!o||4194304&p[1]&&i!==(i="opacity: "+d[53]))&&C(e,"style",i)},i(d){o||(V(n),o=!0)},o(d){_(n),o=!1},d(d){d&&it(e),~a&&l[a].d()}}}function EC(t){let e,r,a,n;e=new k2({props:{text:t[34].text||"",onmeasure:t[204]}});let i=t[34].aside&&$y(t);return{c(){Ut(e.$$.fragment),r=ge(),i&&i.c(),a=ia()},m(o,s){Ot(e,o,s),st(o,r,s),i&&i.m(o,s),st(o,a,s),n=!0},p(o,s){const l={};8&s[1]&&(l.text=o[34].text||""),e.$set(l),o[34].aside?i?(i.p(o,s),8&s[1]&&V(i,1)):(i=$y(o),i.c(),V(i,1),i.m(a.parentNode,a)):i&&(ze(),_(i,1,1,()=>{i=null}),De())},i(o){n||(V(e.$$.fragment,o),V(i),n=!0)},o(o){_(e.$$.fragment,o),_(i),n=!1},d(o){Bt(e,o),o&&it(r),i&&i.d(o),o&&it(a)}}}function VC(t){let e,r,a,n;return e=new k2({props:{text:t[39],onmeasure:t[204]}}),a=new R2({props:{class:"PinturaStatusIcon",offset:t[78],opacity:t[79],$$slots:{default:[NC]},$$scope:{ctx:t}}}),{c(){Ut(e.$$.fragment),r=ge(),Ut(a.$$.fragment)},m(i,o){Ot(e,i,o),st(i,r,o),Ot(a,i,o),n=!0},p(i,o){const s={};256&o[1]&&(s.text=i[39]),e.$set(s);const l={};65536&o[2]&&(l.offset=i[78]),131072&o[2]&&(l.opacity=i[79]),8&o[0]|8192&o[18]&&(l.$$scope={dirty:o,ctx:i}),a.$set(l)},i(i){n||(V(e.$$.fragment,i),V(a.$$.fragment,i),n=!0)},o(i){_(e.$$.fragment,i),_(a.$$.fragment,i),n=!1},d(i){Bt(e,i),i&&it(r),Bt(a,i)}}}function $y(t){let e,r;return e=new R2({props:{class:"PinturaStatusButton",offset:t[78],opacity:t[79],$$slots:{default:[LC]},$$scope:{ctx:t}}}),{c(){Ut(e.$$.fragment)},m(a,n){Ot(e,a,n),r=!0},p(a,n){const i={};65536&n[2]&&(i.offset=a[78]),131072&n[2]&&(i.opacity=a[79]),8&n[1]|8192&n[18]&&(i.$$scope={dirty:n,ctx:a}),e.$set(i)},i(a){r||(V(e.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),r=!1},d(a){Bt(e,a)}}}function yy(t){let e,r;return e=new t5({props:{progress:t[34].progressIndicator.progress}}),{c(){Ut(e.$$.fragment)},m(a,n){Ot(e,a,n),r=!0},p(a,n){const i={};8&n[1]&&(i.progress=a[34].progressIndicator.progress),e.$set(i)},i(a){r||(V(e.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),r=!1},d(a){Bt(e,a)}}}function by(t){let e,r;const a=[t[34].closeButton,{hideLabel:!0}];let n={};for(let i=0;i<a.length;i+=1)n=la(n,a[i]);return e=new Bo({props:n}),{c(){Ut(e.$$.fragment)},m(i,o){Ot(e,i,o),r=!0},p(i,o){const s=8&o[1]?Ja(a,[Mn(i[34].closeButton),a[1]]):{};e.$set(s)},i(i){r||(V(e.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),r=!1},d(i){Bt(e,i)}}}function LC(t){let e,r,a,n=t[34].progressIndicator.visible&&yy(t),i=t[34].closeButton&&t[34].text&&by(t);return{c(){n&&n.c(),e=ge(),i&&i.c(),r=ia()},m(o,s){n&&n.m(o,s),st(o,e,s),i&&i.m(o,s),st(o,r,s),a=!0},p(o,s){o[34].progressIndicator.visible?n?(n.p(o,s),8&s[1]&&V(n,1)):(n=yy(o),n.c(),V(n,1),n.m(e.parentNode,e)):n&&(ze(),_(n,1,1,()=>{n=null}),De()),o[34].closeButton&&o[34].text?i?(i.p(o,s),8&s[1]&&V(i,1)):(i=by(o),i.c(),V(i,1),i.m(r.parentNode,r)):i&&(ze(),_(i,1,1,()=>{i=null}),De())},i(o){a||(V(n),V(i),a=!0)},o(o){_(n),_(i),a=!1},d(o){n&&n.d(o),o&&it(e),i&&i.d(o),o&&it(r)}}}function FC(t){let e,r=t[3].iconSupportError+"";return{c(){e=Xa("g")},m(a,n){st(a,e,n),e.innerHTML=r},p(a,n){8&n[0]&&r!==(r=a[3].iconSupportError+"")&&(e.innerHTML=r)},d(a){a&&it(e)}}}function NC(t){let e,r;return e=new ei({props:{$$slots:{default:[FC]},$$scope:{ctx:t}}}),{c(){Ut(e.$$.fragment)},m(a,n){Ot(e,a,n),r=!0},p(a,n){const i={};8&n[0]|8192&n[18]&&(i.$$scope={dirty:n,ctx:a}),e.$set(i)},i(a){r||(V(e.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),r=!1},d(a){Bt(e,a)}}}function vy(t){let e,r,a,n,i,o,s,l,c,d,p,m,h,f,g=t[10]&&xy(t),b=t[45]&&t[44]&&wy(t);const w=[UC,BC],v=[];function S(R,E){return R[45]?0:1}function T(R){t[413](R)}function B(R){t[414](R)}function I(R){t[415](R)}a=S(t),n=v[a]=w[a](t),o=new P3({props:{isAnimated:t[52],isTransparent:t[19],pixelRatio:t[56],textPixelRatio:t[6],backgroundColor:t[55],maskRect:t[57],maskOpacity:t[69]?t[69].maskOpacity:1,maskMarkupOpacity:t[7],maskFrameOpacity:t[5],clipAnnotationsToImage:t[81],images:t[54],interfaceImages:t[82],loadImageData:t[27],enableGrid:t[11],gridSize:t[83],gridColors:[t[84],t[85]],gridOpacity:t[86],willRequest:t[77]||t[87],willRender:t[410],didRender:t[411]}});let O={root:t[2],locale:t[3],stores:t[190],allowPan:t[89],enablePan:t[16],enablePanLimit:t[20],panLimitGutterScalar:t[21],enablePanInput:t[90],allowZoom:t[91],enableZoom:t[17],enableZoomInput:t[18]!==void 0?t[18]:t[92],enableZoomControls:t[93],zoomOptions:t[12]||t[22],zoomAdjustStep:t[13]||t[23],zoomAdjustFactor:t[14]||t[24],zoomAdjustWheelFactor:t[15]||t[25],imageSelectionRectCentered:t[94],imageSelectionRectScalar:t[95],elasticity:Dm*t[8]};return t[0]!==void 0&&(O.zoomLevel=t[0]),t[32]!==void 0&&(O.zoomControls=t[32]),t[33]!==void 0&&(O.zoomMultiTouching=t[33]),d=new PC({props:O}),xr.push(()=>hn(d,"zoomLevel",T)),xr.push(()=>hn(d,"zoomControls",B)),xr.push(()=>hn(d,"zoomMultiTouching",I)),{c(){g&&g.c(),e=ge(),b&&b.c(),r=ge(),n.c(),i=ge(),Ut(o.$$.fragment),s=ge(),l=gt("div"),c=ge(),Ut(d.$$.fragment),C(l,"class","PinturaRootPortal")},m(R,E){g&&g.m(R,E),st(R,e,E),b&&b.m(R,E),st(R,r,E),v[a].m(R,E),st(R,i,E),Ot(o,R,E),st(R,s,E),st(R,l,E),t[412](l),st(R,c,E),Ot(d,R,E),f=!0},p(R,E){R[10]?g?(g.p(R,E),1024&E[0]&&V(g,1)):(g=xy(R),g.c(),V(g,1),g.m(e.parentNode,e)):g&&(ze(),_(g,1,1,()=>{g=null}),De()),R[45]&&R[44]?b?(b.p(R,E),24576&E[1]&&V(b,1)):(b=wy(R),b.c(),V(b,1),b.m(r.parentNode,r)):b&&(ze(),_(b,1,1,()=>{b=null}),De());let N=a;a=S(R),a===N?v[a].p(R,E):(ze(),_(v[N],1,1,()=>{v[N]=null}),De(),n=v[a],n?n.p(R,E):(n=v[a]=w[a](R),n.c()),V(n,1),n.m(i.parentNode,i));const U={};2097152&E[1]&&(U.isAnimated=R[52]),524288&E[0]&&(U.isTransparent=R[19]),33554432&E[1]&&(U.pixelRatio=R[56]),64&E[0]&&(U.textPixelRatio=R[6]),16777216&E[1]&&(U.backgroundColor=R[55]),67108864&E[1]&&(U.maskRect=R[57]),128&E[2]&&(U.maskOpacity=R[69]?R[69].maskOpacity:1),128&E[0]&&(U.maskMarkupOpacity=R[7]),32&E[0]&&(U.maskFrameOpacity=R[5]),524288&E[2]&&(U.clipAnnotationsToImage=R[81]),8388608&E[1]&&(U.images=R[54]),1048576&E[2]&&(U.interfaceImages=R[82]),134217728&E[0]&&(U.loadImageData=R[27]),2048&E[0]&&(U.enableGrid=R[11]),2097152&E[2]&&(U.gridSize=R[83]),12582912&E[2]&&(U.gridColors=[R[84],R[85]]),16777216&E[2]&&(U.gridOpacity=R[86]),33587200&E[2]&&(U.willRequest=R[77]||R[87]),512&E[0]|1507344&E[1]|67108864&E[2]&&(U.willRender=R[410]),1879048192&E[1]|3&E[2]&&(U.didRender=R[411]),o.$set(U);const x={};4&E[0]&&(x.root=R[2]),8&E[0]&&(x.locale=R[3]),134217728&E[2]&&(x.allowPan=R[89]),65536&E[0]&&(x.enablePan=R[16]),1048576&E[0]&&(x.enablePanLimit=R[20]),2097152&E[0]&&(x.panLimitGutterScalar=R[21]),268435456&E[2]&&(x.enablePanInput=R[90]),536870912&E[2]&&(x.allowZoom=R[91]),131072&E[0]&&(x.enableZoom=R[17]),262144&E[0]|1073741824&E[2]&&(x.enableZoomInput=R[18]!==void 0?R[18]:R[92]),1&E[3]&&(x.enableZoomControls=R[93]),4198400&E[0]&&(x.zoomOptions=R[12]||R[22]),8396800&E[0]&&(x.zoomAdjustStep=R[13]||R[23]),16793600&E[0]&&(x.zoomAdjustFactor=R[14]||R[24]),33587200&E[0]&&(x.zoomAdjustWheelFactor=R[15]||R[25]),2&E[3]&&(x.imageSelectionRectCentered=R[94]),4&E[3]&&(x.imageSelectionRectScalar=R[95]),256&E[0]&&(x.elasticity=Dm*R[8]),!p&&1&E[0]&&(p=!0,x.zoomLevel=R[0],Rn(()=>p=!1)),!m&&2&E[1]&&(m=!0,x.zoomControls=R[32],Rn(()=>m=!1)),!h&&4&E[1]&&(h=!0,x.zoomMultiTouching=R[33],Rn(()=>h=!1)),d.$set(x)},i(R){f||(V(g),V(b),V(n),V(o.$$.fragment,R),V(d.$$.fragment,R),f=!0)},o(R){_(g),_(b),_(n),_(o.$$.fragment,R),_(d.$$.fragment,R),f=!1},d(R){g&&g.d(R),R&&it(e),b&&b.d(R),R&&it(r),v[a].d(R),R&&it(i),Bt(o,R),R&&it(s),R&&it(l),t[412](null),R&&it(c),Bt(d,R)}}}function xy(t){let e,r,a,n,i;return r=new Ji({props:{items:t[65]}}),{c(){e=gt("div"),Ut(r.$$.fragment),C(e,"class","PinturaNav PinturaNavTools")},m(o,s){st(o,e,s),Ot(r,e,null),a=!0,n||(i=[Mt(e,"measure",t[397]),Ir(qa.call(null,e))],n=!0)},p(o,s){const l={};8&s[2]&&(l.items=o[65]),r.$set(l)},i(o){a||(V(r.$$.fragment,o),a=!0)},o(o){_(r.$$.fragment,o),a=!1},d(o){o&&it(e),Bt(r),n=!1,Ar(i)}}}function wy(t){let e,r,a;return r=new Ki({props:{elasticity:t[8]*Om,scrollDirection:t[71]?"y":"x",$$slots:{default:[OC]},$$scope:{ctx:t}}}),{c(){e=gt("div"),Ut(r.$$.fragment),C(e,"class","PinturaNav PinturaNavMain")},m(n,i){st(n,e,i),Ot(r,e,null),a=!0},p(n,i){const o={};256&i[0]&&(o.elasticity=n[8]*Om),512&i[2]&&(o.scrollDirection=n[71]?"y":"x"),4096&i[1]|12288&i[2]|8192&i[18]&&(o.$$scope={dirty:i,ctx:n}),r.$set(o)},i(n){a||(V(r.$$.fragment,n),a=!0)},o(n){_(r.$$.fragment,n),a=!1},d(n){n&&it(e),Bt(r)}}}function zC(t){let e,r=t[570].icon+"";return{c(){e=Xa("g")},m(a,n){st(a,e,n),e.innerHTML=r},p(a,n){4096&n[18]&&r!==(r=a[570].icon+"")&&(e.innerHTML=r)},d(a){a&&it(e)}}}function DC(t){let e,r,a,n,i,o=t[570].label+"";return e=new ei({props:{$$slots:{default:[zC]},$$scope:{ctx:t}}}),{c(){Ut(e.$$.fragment),r=ge(),a=gt("span"),n=Hr(o)},m(s,l){Ot(e,s,l),st(s,r,l),st(s,a,l),Pt(a,n),i=!0},p(s,l){const c={};12288&l[18]&&(c.$$scope={dirty:l,ctx:s}),e.$set(c),(!i||4096&l[18])&&o!==(o=s[570].label+"")&&ca(n,o)},i(s){i||(V(e.$$.fragment,s),i=!0)},o(s){_(e.$$.fragment,s),i=!1},d(s){Bt(e,s),s&&it(r),s&&it(a)}}}function OC(t){let e,r;const a=[t[75],{tabs:t[74]}];let n={$$slots:{default:[DC,({tab:i})=>({570:i}),({tab:i})=>[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,i?4096:0]]},$$scope:{ctx:t}};for(let i=0;i<a.length;i+=1)n=la(n,a[i]);return e=new qd({props:n}),e.$on("select",t[398]),{c(){Ut(e.$$.fragment)},m(i,o){Ot(e,i,o),r=!0},p(i,o){const s=12288&o[2]?Ja(a,[8192&o[2]&&Mn(i[75]),4096&o[2]&&{tabs:i[74]}]):{};12288&o[18]&&(s.$$scope={dirty:o,ctx:i}),e.$set(s)},i(i){r||(V(e.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),r=!1},d(i){Bt(e,i)}}}function BC(t){let e,r,a;function n(o){t[406](o)}let i={class:"PinturaMain",content:de(X({},t[46].find(t[405])),{props:t[26][t[43]]}),locale:t[3],stores:t[190]};return t[1][t[43]]!==void 0&&(i.component=t[1][t[43]]),e=new x2({props:i}),xr.push(()=>hn(e,"component",n)),e.$on("measure",t[216]),e.$on("show",t[407]),e.$on("hide",t[408]),e.$on("fade",t[409]),{c(){Ut(e.$$.fragment)},m(o,s){Ot(e,o,s),a=!0},p(o,s){const l={};67108864&s[0]|36864&s[1]&&(l.content=de(X({},o[46].find(o[405])),{props:o[26][o[43]]})),8&s[0]&&(l.locale=o[3]),!r&&2&s[0]|4096&s[1]&&(r=!0,l.component=o[1][o[43]],Rn(()=>r=!1)),e.$set(l)},i(o){a||(V(e.$$.fragment,o),a=!0)},o(o){_(e.$$.fragment,o),a=!1},d(o){Bt(e,o)}}}function UC(t){let e,r;const a=[{class:"PinturaMain"},{visible:t[58]},t[75],{panels:t[73]}];let n={$$slots:{default:[_C,({panel:i,panelIsActive:o})=>({568:i,569:o}),({panel:i,panelIsActive:o})=>[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(i?1024:0)|(o?2048:0)]]},$$scope:{ctx:t}};for(let i=0;i<a.length;i+=1)n=la(n,a[i]);return e=new jd({props:n}),e.$on("measure",t[404]),{c(){Ut(e.$$.fragment)},m(i,o){Ot(e,i,o),r=!0},p(i,o){const s=134217728&o[1]|10240&o[2]?Ja(a,[a[0],134217728&o[1]&&{visible:i[58]},8192&o[2]&&Mn(i[75]),2048&o[2]&&{panels:i[73]}]):{};67108874&o[0]|134250560&o[1]|11264&o[18]&&(s.$$scope={dirty:o,ctx:i}),e.$set(s)},i(i){r||(V(e.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),r=!1},d(i){Bt(e,i)}}}function _C(t){let e,r,a;function n(...s){return t[399](t[568],...s)}function i(s){t[400](s,t[568])}let o={content:de(X({},t[46].find(n)),{props:t[26][t[568]]}),locale:t[3],isActive:t[569],stores:t[190]};return t[1][t[568]]!==void 0&&(o.component=t[1][t[568]]),e=new x2({props:o}),xr.push(()=>hn(e,"component",i)),e.$on("measure",t[216]),e.$on("show",function(){return t[401](t[568])}),e.$on("hide",function(){return t[402](t[568])}),e.$on("fade",function(...s){return t[403](t[568],...s)}),{c(){Ut(e.$$.fragment)},m(s,l){Ot(e,s,l),a=!0},p(s,l){t=s;const c={};67108864&l[0]|32768&l[1]|1024&l[18]&&(c.content=de(X({},t[46].find(n)),{props:t[26][t[568]]})),8&l[0]&&(c.locale=t[3]),2048&l[18]&&(c.isActive=t[569]),!r&&2&l[0]|1024&l[18]&&(r=!0,c.component=t[1][t[568]],Rn(()=>r=!1)),e.$set(c)},i(s){a||(V(e.$$.fragment,s),a=!0)},o(s){_(e.$$.fragment,s),a=!1},d(s){Bt(e,s)}}}function Sy(t){let e,r;return{c(){e=gt("span"),C(e,"class","PinturaEditorOverlay"),C(e,"style",r="opacity:"+t[96])},m(a,n){st(a,e,n)},p(a,n){8&n[3]&&r!==(r="opacity:"+a[96])&&C(e,"style",r)},d(a){a&&it(e)}}}function WC(t){let e,r,a,n,i;Js(t[396]);let o=t[40]&&gy(t),s=t[96]>0&&Sy(t);return{c(){e=gt("div"),o&&o.c(),r=ge(),s&&s.c(),C(e,"id",t[4]),C(e,"class",t[72]),C(e,"data-env",t[70])},m(l,c){st(l,e,c),o&&o.m(e,null),Pt(e,r),s&&s.m(e,null),t[416](e),a=!0,n||(i=[Mt(us,"keydown",t[207]),Mt(us,"keyup",t[208]),Mt(us,"blur",t[209]),Mt(us,"paste",t[213]),Mt(us,"resize",t[396]),Mt(e,"ping",function(){Vr(t[64])&&t[64].apply(this,arguments)}),Mt(e,"contextmenu",t[210]),Mt(e,"touchstart",t[205],{passive:!1}),Mt(e,"touchmove",function(){Vr(t[67])&&t[67].apply(this,arguments)}),Mt(e,"pointermove",function(){Vr(t[66])&&t[66].apply(this,arguments)}),Mt(e,"transitionend",t[195]),Mt(e,"dropfiles",t[211]),Mt(e,"measure",t[417]),Mt(e,"click",function(){Vr(t[42]?t[212]:be)&&(t[42]?t[212]:be).apply(this,arguments)}),Ir(qa.call(null,e,{observeViewRect:!0,isMeasureRoot:!0})),Ir(k3.call(null,e)),Ir(v2.call(null,e))],n=!0)},p(l,c){(t=l)[40]?o?(o.p(t,c),512&c[1]&&V(o,1)):(o=gy(t),o.c(),V(o,1),o.m(e,r)):o&&(ze(),_(o,1,1,()=>{o=null}),De()),t[96]>0?s?s.p(t,c):(s=Sy(t),s.c(),s.m(e,null)):s&&(s.d(1),s=null),(!a||16&c[0])&&C(e,"id",t[4]),(!a||1024&c[2])&&C(e,"class",t[72]),(!a||256&c[2])&&C(e,"data-env",t[70])},i(l){a||(V(o),a=!0)},o(l){_(o),a=!1},d(l){l&&it(e),o&&o.d(),s&&s.d(),t[416](null),n=!1,Ar(i)}}}const Dm=1,Om=10;function qC(t,e,r){let a,n,i,o,s,l,c,d,p,m,h,f,g,b,w,v,S,T,B,I,O,R,E,N,U,x,j,A,P,G,Q,Z,ct,lt,xt,yt,bt,qt,Y,et,Vt,z,vt,St,W,Lt,Ce,pt,zt,Te,ne,At,K,Xt,se,me,Ve,ke,Dt,Ue,Xe,he,_t,rt,Zt,mt,Se,ht,Et,ee,re,Wt,Ht,fe,Le,mr,He,nr,ve,ae,xe,Ke,Me,Pe,rr,Ae,Je,or,Sr,at,jt,Ne,nt,Yt,te,Re,hr,Ge,zr,Qa,Fa,Ma,dr,wr,tn,ur,Fn,gn,fr,Kr,Gr,Na,Pn,xa,Nn,Pa,sn,ai,Sa,Jr,da,zn,ra,ba,sr,Ur,_r,Wr,Dn,fn,en,On,ni,ln,za,lr,rn,Da,q,oe,we,Ie,Lr,kr,Pr,$r,ja,Zr,$n,yn,bn,Ri,Gn,Bn,Ia,va,Bi,Ui,_i,Qi,ii,ys,Zn,cn,Un,ho,to,vn,go,fo,oi,$o,Ti,Wi,In,k,tt,H,Ct,ft,Jt,ie,$e,pe,Nt,It,M,ut,kt,Ft,Kt,ye,Gt,ue,Oe,qe,Rr,gr,Qe,qr,pr,aa,Ha,dn=We,si=We;F(t,S3,$=>r(385,go=$)),t.$$.on_destroy.push(()=>dn()),t.$$.on_destroy.push(()=>si());const An=co(),Yn=Oi();let{class:un}=e,{layout:En}=e,{stores:li}=e,{locale:Tr}=e,{id:qi}=e,{util:oa}=e,{utils:Aa}=e,{animations:Dr="auto"}=e,{disabled:sa=!1}=e,{status:Er}=e,{previewUpscale:Mi=!1}=e,{previewPad:al=!1}=e,{previewMaskOpacity:Pi=.95}=e,{previewImageDataMaxSize:Xl}=e,{previewImageTextPixelRatio:_1}=e,{markupMaskOpacity:W1=1}=e,{zoomMaskOpacity:Kd=.85}=e,{elasticityMultiplier:Ho=10}=e,{willRevert:Jd=()=>Promise.resolve(!0)}=e,{willProcessImage:Qd=()=>Promise.resolve(!0)}=e,{willRenderCanvas:tu=Br}=e,{willRenderToolbar:eu=Br}=e,{willSetHistoryInitialState:ru=Br}=e,{enableButtonExport:au=!0}=e,{enableButtonRevert:nu=!0}=e,{enableNavigateHistory:iu=!0}=e,{enableToolbar:Kl=!0}=e,{enableUtils:ou=!0}=e,{enableButtonClose:su=!1}=e,{enableDropImage:lu=!1}=e,{enablePasteImage:cu=!1}=e,{enableBrowseImage:du=!1}=e,{enableTransparencyGrid:q1=!1}=e,{layoutDirectionPreference:uu="auto"}=e,{layoutHorizontalUtilsPreference:pu="left"}=e,{layoutVerticalUtilsPreference:mu="bottom"}=e,{layoutVerticalToolbarPreference:Jl="top"}=e,{layoutVerticalControlGroupsPreference:hu="bottom"}=e,{layoutVerticalControlTabsPreference:gu="bottom"}=e,{markupEditorZoomLevel:Ql=null}=e,{markupEditorZoomLevels:j1}=e,{markupEditorZoomAdjustStep:H1}=e,{markupEditorZoomAdjustFactor:G1}=e,{markupEditorZoomAdjustWheelFactor:Z1}=e,{markupEditorInteractionMode:fu=!1}=e,{muteAudio:tc=!0}=e,{willSetMediaInitialTimeOffset:$u=($,J)=>$*TC(J[0])}=e,{enablePan:Y1=!0}=e,{enableZoom:X1=!0}=e,{enableZoomControls:yu=!0}=e,{enableZoomInput:K1}=e,{enablePanInput:bu}=e,{enableCanvasAlpha:ec=!1}=e,{enablePanLimit:J1}=e,{panLimitGutterScalar:Q1}=e,{zoomPresetOptions:tg=[.25,.5,1,1.25,1.5,2,3,4,6,8,16]}=e,{zoomAdjustStep:eg=.25}=e,{zoomAdjustFactor:rg=.1}=e,{zoomAdjustWheelFactor:ag=1}=e,{zoomLevel:Go=null}=e,{imagePreviewSrc:vu}=e,{imageOrienter:rc={read:()=>1,apply:$=>$}}=e,{pluginComponents:bs}=e,{pluginOptions:Zo={}}=e;const X2=An.sub,Xn={};let{root:Ea}=e;const xu=()=>{fr.setAttribute("data-redraw","true"),xs.set({})},wu=le(!0);F(t,wu,$=>r(449,Nn=$));const nl=le(void 0);F(t,nl,$=>r(392,Jt=$));const yo=le(0);F(t,yo,$=>r(393,ie=$));const ng=le(0),ig=le(!1),ac=$=>{ig.set($.type==="play"),An.pub($.type)};let og,Su,sg,Cu,ku=!1;const Ru=()=>{if(!n||!vs())return;Cu=d,Rt(nl,Jt=void 0,Jt);const $=fr;ku=!1;const J=1/24,$t=Xo();(Math.abs(l*$t-ie*$t)<=J||$t-$t*ie<=J)&&Rt(yo,ie=s,ie),ic(Xo()*ie),$.play().catch(()=>{});const Tt=()=>{vs()||(sg=requestAnimationFrame(Tt),Rt(yo,ie=nc()/Xo(),ie),Cu>=0&&ie>=l&&(Rt(yo,ie=l,ie),Yo()),d>-1&&(ku=!0),ku&&d===-1&&p>0&&(Rt(yo,ie=o[p][0],ie),ic(ie*Xo())),xu())};Tt()},Yo=()=>{n&&!vs()&&(Rt(nl,Jt=void 0,Jt),Cu=void 0,fr.pause(),cancelAnimationFrame(sg),xu())},vs=()=>fr&&fr.paused,Tu=()=>{if(n)return vs()?Ru():Yo()},Mu=()=>{!n||(fr.muted=!0)},Pu=()=>{!n||(fr.muted=!1)},lg=()=>{n&&Rt(il,ft=!ft,ft)},il=le(tc);F(t,il,$=>r(391,ft=$));const Xo=()=>{if(n)return fr.duration},nc=()=>{if(!!n)return fr.currentTime},ic=$=>{!n||(fr.currentTime=$,ng.set($))};Ei("previewcontrols",{play:Ru,pause:Yo,togglePlayPause:Tu,mute:Mu,unmute:Pu,toggleMute:lg,setCurrentTime:ic,getCurrentTime:nc,getDuration:Xo,currentTime:ng,frameOffset:yo,framePeekOffset:nl,isPlaying:ig,isMuted:il});const xs=le({});F(t,xs,$=>r(51,ai=$)),Ei("redrawTrigger",xs);const oc=le(Ho);F(t,oc,$=>r(465,Ct=$)),Ei("elasticityMultiplier",oc);let ol=[];const Iu=ir();F(t,Iu,$=>r(96,Ha=$));const cg=u1()||1024,dg=ma(cg,cg),ug=c2(),K2=$=>Promise.resolve(H&&H($,{resourceType:"image"})).then(J=>{if(J===!1)return;const{headers:$t,credentials:Tt}=J||{};return fetch($,{headers:$t,credentials:Tt}).then(dt=>{if(dt.status!==200)throw`${dt.status} (${dt.statusText})`;return dt.blob()}).then(dt=>py(dt,rc,ug)).then(dt=>my(dt,f))});let{imageSourceToImageData:Au=$=>Be($)?K2($):Ys($)?new Promise(J=>J(Hl($))):Zh($)||Zl($)?py($,rc,ug).then(J=>my(J,f)):void 0}=e;const Eu=(()=>{let $,J;const $t=dy.reduce((Tt,dt)=>(Tt[dt]=function(wt,Qt,_e){let je=[];return{set:Qt,update:_e,publish:ce=>{je.forEach(cr=>cr(ce))},subscribe:ce=>(je.push(ce),wt(ce),()=>{je=je.filter(cr=>cr!==ce)})}}(wt=>{if(!J)return wt();J.stores[dt].subscribe(wt)()},wt=>{J&&J.stores[dt].set(wt)},wt=>{J&&J.stores[dt].update(wt)}),Tt),{});return{update:Tt=>{if(J=Tt,$&&($.forEach(dt=>dt()),$=void 0),!Tt)return $t.file.publish(void 0),void $t.loadState.publish(void 0);$=dy.map(dt=>Tt.stores[dt].subscribe(wt=>{$t[dt].publish(wt)}))},stores:$t,destroy:()=>{$&&$.forEach(Tt=>Tt())}}})(),{file:Vu,size:Ko,duration:Lu,trim:Fu,minDuration:J2,maxDuration:Nu,loadState:sc,processState:zu,cropAspectRatio:lc,cropLimitToImage:Du,crop:Ii,cropMinSize:Q2,cropMaxSize:tx,cropRange:ex,cropOrigin:rx,cropRectAspectRatio:ax,rotation:ws,rotationRange:nx,targetSize:ix,flipX:cc,flipY:dc,backgroundColor:uc,backgroundImage:pg,colorMatrix:mg,convolutionMatrix:hg,gamma:gg,vignette:fg,noise:$g,decoration:Ou,annotation:Bu,redaction:Uu,frame:Jo,state:pc}=Eu.stores;F(t,Vu,$=>r(369,Da=$)),F(t,Ko,$=>r(341,Ge=$)),F(t,Lu,$=>r(394,$e=$)),F(t,Fu,$=>r(390,tt=$)),F(t,Nu,$=>r(395,pe=$)),F(t,sc,$=>r(361,Wr=$)),F(t,zu,$=>r(360,_r=$)),F(t,lc,$=>r(462,oi=$)),F(t,Du,$=>r(81,ut=$)),F(t,Ii,$=>r(380,va=$)),F(t,ws,$=>r(344,Fa=$)),F(t,cc,$=>r(343,Qa=$)),F(t,dc,$=>r(342,zr=$)),F(t,uc,$=>r(351,Na=$)),F(t,Ou,$=>r(48,hr=$)),F(t,Bu,$=>r(49,Ma=$)),F(t,Uu,$=>r(349,Kr=$)),F(t,Jo,$=>r(47,Re=$)),F(t,pc,$=>r(451,we=$));const yg=($,J,$t=0)=>new Promise((Tt,dt)=>{if(rl($))return void(Zi()?(async je=>{const ce=await IC(je),cr=new DataView(ce);return AC(cr)})($):Promise.resolve()).then(je=>{const ce=document.createElement("video");ce.onerror=()=>console.error(ce.error),ce.playsInline=!0,ce.preload="auto",ce.onloadeddata=()=>{ce.onloadeddata=void 0,ce.dataset.rotation=je,u2(ce).then(()=>{const cr=$u(ce.duration,tt||[[0,1]]);cr>0?(ce.onseeked=()=>{ce.onseeked=void 0,Tt(ce)},ce.currentTime=cr):(ce.currentTime=cr,Tt(ce))})},ce.src=URL.createObjectURL($),ce.load()});let wt,Qt=!1;J.cancel=()=>Qt=!0;const _e=Date.now();Au($).then(je=>{const ce=Date.now()-_e;clearTimeout(wt),wt=setTimeout(()=>{Qt||Tt(je)},Math.max(0,$t-ce))}).catch(dt)}),{images:bg,shapePreprocessor:vg,imageScrambler:xg,imageRedactionRendering:wg,willRequest:Sg,willRequestResource:Cg}=li;let sl;F(t,bg,$=>r(389,k=$)),F(t,vg,$=>r(388,In=$)),F(t,xg,$=>r(352,Pn=$)),F(t,wg,$=>r(350,Gr=$)),F(t,Sg,$=>r(77,H=$)),F(t,Cg,$=>r(87,ue=$));const ox=vr(pg,($,J)=>{if(!$)return J(void 0);sl&&(sl.cancel(),sl=void 0),sl={cancel:be},yg($,sl).then(J).catch($t=>{})}),sx=pc.subscribe($=>An.pub("update",$)),lx=le();Ei("ui",le({}));const _u=le(!0);F(t,_u,$=>r(89,qe=$));const Wu=le(!0);F(t,Wu,$=>r(91,gr=$));const qu=le(!0);F(t,qu,$=>r(387,Wi=$));const mc=le(!0);F(t,mc,$=>r(463,$o=$));const ju=le(!0);F(t,ju,$=>r(92,Qe=$));const Hu=le();F(t,Hu,$=>r(93,qr=$));const hc=le();F(t,hc,$=>r(464,Ti=$));const Gu=vr([hc,mc],()=>Ti!==void 0?Ti:$o);F(t,Gu,$=>r(90,Rr=$));const ll=le([0,0,0]);F(t,ll,$=>r(55,$r=$));const gc=le([1,1,1]);F(t,gc,$=>r(447,gn=$));const cl=ir([1,1,1]);F(t,cl,$=>r(446,Fn=$));const kg=le(),Zu=le();F(t,Zu,$=>r(50,Pa=$));const Ss=le();F(t,Ss,$=>r(346,wr=$));const Cs=le(Ao());F(t,Cs,$=>r(76,Ie=$));const Yu=le(0);F(t,Yu,$=>r(386,fo=$));const dl=le(Ao());F(t,dl,$=>r(80,M=$));const Qo=le();F(t,Qo,$=>r(444,te=$));const fc=uy("(pointer: fine)",$=>$?"pointer-fine":"pointer-coarse");F(t,fc,$=>r(367,lr=$));const $c=uy("(hover: hover)",$=>$?"pointer-hover":"pointer-no-hover");F(t,$c,$=>r(366,za=$));const Rg=le(!1),ul=le(!1);F(t,ul,$=>r(347,ur=$));const Xu=Bs(void 0,$=>{const J=ir(0),$t=[ul.subscribe(Tt=>{J.set(Tt?1:0)}),J.subscribe($)];return()=>$t.forEach(Tt=>Tt())});F(t,Xu,$=>r(445,tn=$));const yc=le();F(t,yc,$=>r(450,On=$));const bc=le();let Ku;F(t,bc,$=>r(52,Jr=$)),Ei("isAnimated",bc);const vc=le(Mi);F(t,vc,$=>r(370,q=$));const ts=le(!1);F(t,ts,$=>r(456,Qi=$)),Ei("imageIsStatic",ts);const pl=le();F(t,pl,$=>r(457,ii=$));const Ju=le();F(t,Ju,$=>r(454,Ui=$));const Tg=Bs(void 0,$=>{const J=le(void 0),$t=[Ii.subscribe(()=>{if(!va)return;if(Qi)return J.set(yr(va));const Tt=R$(va,Ui,5*Ho);J.set(Tt)}),J.subscribe($)];return()=>$t.forEach(Tt=>Tt())}),ci=le();F(t,ci,$=>r(453,Ia=$));const xc=le();F(t,xc,$=>r(455,_i=$));const Qu=le(void 0);F(t,Qu,$=>r(460,ho=$));const Mg=le(Or());F(t,Mg,$=>r(461,to=$));const Pg=($,J)=>{if(!J||!$)return{top:0,right:0,bottom:0,left:0};const $t=zv(J,$,g),Tt=Nv($t,$);return{top:Math.abs(Tt.top),right:Math.abs(Tt.right),bottom:Math.abs(Tt.bottom),left:Math.abs(Tt.left)}},Ig=le({}),tp=vr([Qo,Cs,dl,Ig],([$,J,$t,Tt],dt)=>{if(!$)return dt(void 0);let wt=0;A.length!==1||m||Jl==="bottom"||(wt=$t.y+$t.height),dt(na($.x+J.x,$.y+J.y+wt,$.width,$.height))});let ml={left:0,right:0,top:0,bottom:0};const wc=le(!1),ks=vr([wc,Jo,tp,ul],([$,J,$t,Tt],dt)=>{if(!$t)return dt({left:0,right:0,top:0,bottom:0});if(!$)return;const wt=Math.min($t.width,$t.height),Qt=Pg({width:wt,height:wt},J);Ze(ml.top,4)===Ze(Qt.top,4)&&Ze(ml.bottom,4)===Ze(Qt.bottom,4)&&Ze(ml.right,4)===Ze(Qt.right,4)&&Ze(ml.left,4)===Ze(Qt.left,4)||(ml=Qt,dt(Qt))});F(t,ks,$=>r(378,Ri=$));const Rs=vr([wc,ks],([$,J],$t)=>{if(!$)return $t(!1);$t(Object.values(J).some(Tt=>Tt>0))});F(t,Rs,$=>r(379,Gn=$));const cx=vr([wc,Qo,Rs,ks],([$,J,$t,Tt],dt)=>{if(J)return $&&$t?void dt(na(J.x+Tt.left,J.y+Tt.top,J.width-Tt.left-Tt.right,J.height-Tt.top-Tt.bottom)):dt(X({},J))}),ji=vr([tp,Rs,ks],([$,J,$t],Tt)=>$?J?void Tt(na($.x+$t.left,$.y+$t.top,$.width-$t.left-$t.right,$.height-$t.top-$t.bottom)):Tt($):Tt(void 0));F(t,ji,$=>r(345,dr=$));const dx=vr([ts,Ko,ws],([$,J,$t],Tt)=>{if(!$||!J)return Tt(void 0);const dt=nn(J);Tt(Za(dt,$t))}),ep=vr([dx],([$],J)=>{if(!$)return J(void 0);const $t=Sn($);J(_l($t))});F(t,ep,$=>r(381,Bi=$));const eo=vr([ji,Ii,ep,vc],([$,J,$t,Tt],dt)=>{if(!$||!J||!(!ii&&!Ui))return;const{width:wt,height:Qt}=$t||J,_e=Math.min($.width/wt,$.height/Qt);dt(Tt?_e:Math.min(1,_e))});F(t,eo,$=>r(382,Zn=$)),Ei("imageStaticVisualCorners",vr([ts,Ko,ws,ji,Qo,eo],([$,J,$t,Tt,dt,wt],Qt)=>{if(!($&&Tt&&dt&&J))return Qt(void 0);const _e=nn(J),je=_l(Ya(_e,wt)),ce=gd(Tt,je);je.x=ce.x,je.y=ce.y,Qt(Za(je,$t))}));const Ts=le(void 0);F(t,Ts,$=>r(384,vn=$));const Ag=vr([Ii,ji],([$,J])=>{if(J&&$)return Math.min(J.width/$.width,J.height/$.height)}),rp=vr([Ii,ci],([$,J])=>$&&J?Math.min($.width/J.width,$.height/J.height):1);F(t,rp,$=>r(95,aa=$));const hl=vr([Ts,rp],([$,J])=>$&&J?J*$:1);F(t,hl,$=>r(459,cn=$));const Ms=le(Or());F(t,Ms,$=>r(383,Un=$));const Eg=le({scalar:cn,translation:Un}),Vg=()=>{Eg.set({scalar:void 0,translation:Or()})},Sc=Bs(void 0,$=>{const J=ir(void 0,{precision:1e-4}),$t=Vl()===1?wt=>Jn(wt,Math.round):Br,Tt=()=>{if(!Ia)return;const wt=ur||!On;if(Qi){const _e=yr(Ia);return gi(_e,to),gi(_e,dr),J.set(_e,{hard:wt})}const Qt=R$(Ia,ho,Dm*Ho);Qt.width<0&&(Qt.width=0,Qt.x=Ia.x),Qt.height<0&&(Qt.height=0,Qt.y=Ia.y),gi(Qt,dr),gi(Qt,Un),Ya(Qt,cn),!wt&&$t(Qt),J.set(Qt,{hard:wt})},dt=[ji.subscribe(Tt),ci.subscribe(Tt),hl.subscribe(Tt),Ms.subscribe(Tt),Jo.subscribe(Tt),J.subscribe($)];return()=>dt.forEach(wt=>wt())});F(t,Sc,$=>r(57,bn=$));const ap=le(1);F(t,ap,$=>r(452,Bn=$));const np=()=>{if(!va||!dr)return;let $=Eo(yr(va),Zn||1);const J=gd(dr,Eo(yr(Bi),Zn));gi($,J);const $t=te.width/$.width,Tt=te.height/$.height,dt=Math.min(1,$t,Tt);ap.set(dt),Ya($,dt),((wt,Qt)=>{const[_e,je,ce,cr]=hs(wt);_e<Qt.y&&(wt.y=Math.max(Qt.y,wt.y)),je>Qt.width&&(wt.x=Qt.width-wt.width),ce>Qt.height&&(wt.y=Qt.height-wt.height),cr<Qt.x&&(wt.x=Math.max(Qt.x,wt.x))})($,de(X({},te),{x:0,y:0})),ci.set($)},Lg=vr([ji,eo,Ii,Ko],([$,J,$t,Tt],dt)=>{$&&($t||Tt)&&dt(Fg($,J||1,$t||Tt))});F(t,Lg,$=>r(94,pr=$));const Fg=($,J,$t)=>$t.width<=$.width&&$t.height<=$.height?gd($,Eo(yr($t),J)):Cn($,Ta($t));let ip,Ng;const op=$=>{if(m&&ip&&Ni(ip,$)&&Ng===Zn)return;if(Qi)return np();ip=$,Ng=Zn;const J=Fg($,Zn,va||Ge);ci.set(J)};let zg=!1;const ux=eo.subscribe($=>{!zg&&$!==void 0&&va&&(op(dr),zg=!0)}),px=ji.subscribe($=>{$&&Zn!==void 0&&va&&op($)}),mx=ts.subscribe($=>{!$&&dr&&op(dr)});let sp;const hx=xc.subscribe($=>{if(!$)return sp=void 0,void Rt(pl,ii=void 0,ii);sp=ys;const J=yr(va);pl.set(J)}),gx=ci.subscribe($=>{if(!$||!_i)return;const J=($t=yr($),Tt=_i,$t.x-=Tt.x,$t.y-=Tt.y,$t.width-=Tt.width,$t.height-=Tt.height,$t);var $t,Tt;((wt,Qt)=>{wt.x/=Qt,wt.y/=Qt,wt.width/=Qt,wt.height/=Qt})(J,sp);const dt=((wt,Qt)=>(wt.x+=Qt.x,wt.y+=Qt.y,wt.width+=Qt.width,wt.height+=Qt.height,wt))(yr(ii),J);Ii.set(dt)}),fx=Ii.subscribe($=>{if(!$||!Ia)return;if(Qi)return void(_i||np());if(ur||_i||Ui)return;const J=Ta(Ia),$t=Ta($);if(Ze(J,6)===Ze($t,6))return;const{width:Tt,height:dt}=Bi||va,wt=Math.min(dr.width/Tt,dr.height/dt),Qt=ma($.width*wt,$.height*wt),_e=.5*(Ia.width-Qt.width),je=.5*(Ia.height-Qt.height),ce=na(Ia.x+_e,Ia.y+je,Qt.width,Qt.height);ci.set(ce)}),Dg=vr([eo,Ii,ci,ts],([$,J,$t,Tt],dt)=>{if(!$||!J||!$t)return;if(Tt)return dt(Bn);const wt=$t.width/J.width,Qt=$t.height/J.height;dt(Math.max(wt,Qt)/$)}),Cc=vr([eo,Dg],([$,J],$t)=>{!J||$t($*J)});F(t,Cc,$=>r(458,ys=$));let Ps={left:0,right:0,top:0,bottom:0};const Og=vr([Jo,ci],([$,J],$t)=>{if(!J)return $t(Ps);const Tt=Pg(J,$);Ze(Ps.top,4)===Ze(Tt.top,4)&&Ze(Ps.bottom,4)===Ze(Tt.bottom,4)&&Ze(Ps.right,4)===Ze(Tt.right,4)&&Ze(Ps.left,4)===Ze(Tt.left,4)||(Ps=Tt,$t(Tt))}),$x=vr([Og],([$],J)=>{J(Object.values($).some($t=>$t>0))}),lp=ir(.075,{stiffness:.03,damping:.4,precision:.001}),yx=vr([cl,ll,lp,Sc,hl,Jo,$x,Og,Rs],([$,J,$t,Tt,dt,wt,Qt,_e,je],ce)=>{if(!Tt||m)return ce([]);let{x:cr,y:ua,width:_n,height:Fr}=Tt;cr+=.5,ua+=.5,_n-=.5,Fr-=.5;const Ca=[];if(wt){if(Qt){let{left:Va,right:xo,top:rs,bottom:jc}=_e;Va*=dt,xo*=dt,rs*=dt,jc*=dt;const Ep=cm(J)?[1,1,1,.125]:[0,0,0,.075];Ca.push({x:cr-Va-.5,y:ua-rs-.5,width:_n+Va+xo+1,height:Fr+rs+jc+1,strokeWidth:1,strokeColor:Ep,opacity:je?1:.5})}const jr=cm($);wt&&wt.frameColor&&cm(wt.frameColor)||jr||(Ca.push({x:cr-1,y:ua-1,width:_n+2,height:Fr+2,strokeWidth:2,strokeColor:[0,0,0,.1],opacity:$t}),Ca.push({x:cr+1,y:ua+1,width:_n-2,height:Fr-2,strokeWidth:2,strokeColor:[0,0,0,.1],opacity:$t}))}ce([...Ca,{x:cr,y:ua,width:_n,height:Fr,strokeWidth:1,strokeColor:$,opacity:$t}])}),gl=le([]);F(t,gl,$=>r(372,Lr=$));const Bg=vr([yx,gl],([$,J],$t)=>{$t([...$,...J])});F(t,Bg,$=>r(88,Oe=$));const cp=ir(0,{precision:.001});F(t,cp,$=>r(374,Pr=$));const dp=ir();F(t,dp,$=>r(377,$n=$));const up=ir();F(t,up,$=>r(376,Zr=$));const pp=ir();F(t,pp,$=>r(375,ja=$));const mp=ir();F(t,mp,$=>r(373,kr=$));const fl=le(!1);F(t,fl,$=>r(359,Ur=$));const $l=le();let bo;F(t,$l,$=>r(362,Dn=$));const hp=vr([fl,$l],([$,J],$t)=>{if(!$||!J)return void $t(void 0);if(bo&&(bo.cancel(),r(270,bo=void 0)),Yl(J))return $t(ev(J));const Tt=di.length?0:Jr?250:0;r(270,bo={cancel:be}),yg(J,bo,Tt).then($t).catch(dt=>{Rt(sc,Wr.error=dt,Wr)}).finally(()=>{r(270,bo=void 0)})});dn(),dn=pn(hp,$=>r(348,fr=$));let{imagePreviewCurrent:yl}=e;const gp=le({});F(t,gp,$=>r(364,ni=$));const kc=le([]);F(t,kc,$=>r(82,kt=$));const Rc=vr([ji,Ss,Ko,Tg,ci,Cc,ws,cc,dc,hl,Ms,Rg],([$,J,$t,Tt,dt,wt,Qt,_e,je,ce,cr,ua],_n)=>{if(!$||!dt)return;const Fr=l3($,J,$t,Tt,dt,ce,cr,wt,Qt,_e,je);!ua&&U(Fr),_n(Fr)});F(t,Rc,$=>r(365,ln=$));const Ug=vr([mg,hg,gg,fg,$g],([$,J,$t,Tt,dt],wt)=>{const Qt=$&&Object.keys($).map(_e=>$[_e]).filter(Boolean);wt({gamma:$t||void 0,vignette:Tt||void 0,noise:dt||void 0,convolutionMatrix:J||void 0,colorMatrix:Qt&&Qt.length&&r1(Qt)})});let Tc,fp;const _g=(()=>{if(!zi())return!1;const $=navigator.userAgent.match(/OS (\d+)_(\d+)_?(\d+)?/i)||[],[,J,$t]=$.map(Tt=>parseInt(Tt,10)||0);return J>13||J===13&&$t>=4})(),Mc=le({});F(t,Mc,$=>r(353,sn=$));const Wg=Vl(),$p=Bs(Wg,$=>{const J=()=>$(Vl()),$t=matchMedia(`(resolution: ${Wg}dppx)`);return $t.addListener(J),()=>$t.removeListener(J)});F(t,$p,$=>r(56,yn=$));const Hi=(($,J)=>{const{sub:$t,pub:Tt}=co(),dt=[],wt=le(0),Qt=[],_e=()=>Qt.forEach(ce=>ce({index:oo(wt),length:dt.length})),je={get index(){return oo(wt)},set index(ce){ce=Number.isInteger(ce)?ce:0,ce=Nr(ce,0,dt.length-1),wt.set(ce),J(dt[je.index]),_e()},get state(){return dt[dt.length-1]},length:()=>dt.length,undo(){const ce=je.index--;return Tt("undo",ce),ce},redo(){const ce=je.index++;return Tt("redo",je.index),ce},revert(){dt.length=1,je.index=0,Tt("revert")},write(ce){ce&&J(X(X({},$()),ce));const cr=$(),ua=dt[dt.length-1];JSON.stringify(cr)!==JSON.stringify(ua)&&(dt.length=je.index+1,dt.push(cr),wt.set(dt.length-1),_e(),Tt("writehistory"))},set(ce={}){dt.length=0,je.index=0;const cr=Array.isArray(ce)?ce:[ce];dt.push(...cr),je.index=dt.length-1},get:()=>[...dt],subscribe:ce=>(Qt.push(ce),ce({index:je.index,length:dt.length}),()=>Qt.splice(Qt.indexOf(ce),1)),on:$t};return je})(()=>we,$=>{Rt(pc,we=$,we),Cs.set(Ie)});si(),si=pn(Hi,$=>r(371,oe=$));const qg=()=>{const $=X({x:0,y:0},Ge),J=Jn(Cn($,we.cropAspectRatio),Math.round),$t=ru(de(X({},we),{rotation:0,crop:J}),we),Tt=[$t];JSON.stringify($t)!==JSON.stringify(we)&&Tt.push(X({},we)),Hi.set(Tt)},bx=sc.subscribe($=>{$&&$.complete&&qg()}),vx=()=>Jd().then($=>$&&Hi.revert()),vo=le(!1);F(t,vo,$=>r(354,Sa=$));const xx=()=>{Rt(vo,Sa=!0,Sa),Qd().then($=>{if(!$)return void Rt(vo,Sa=!1,Sa);let J;J=bl.subscribe($t=>{$t===1&&(J&&J(),Yn("processImage"))})})},wx=zu.subscribe($=>{if(!$)return void Rt(vo,Sa=!1,Sa);Rt(vo,Sa=!0,Sa);const{complete:J,abort:$t}=$;(J||$t)&&Rt(vo,Sa=!1,Sa)}),di=RC();F(t,di,$=>r(54,fn=$));const Sx=vr([di],([$],J)=>{if(!$.length)return J();const{origin:$t,translation:Tt,rotation:dt,scale:wt}=$[0];J({origin:$t,translation:Tt,rotation:dt,scale:wt})}),Pc=le();F(t,Pc,$=>r(368,rn=$));let Ic,Ac=[];const jg=le(),yp=le(),Cx=vr([Ts,yp,eo,Ag],([$,J,$t,Tt])=>$||(J||$t<1?Tt:1)),Hg=de(X({},li),{imageFile:Vu,imageSize:Ko,mediaDuration:Lu,mediaMinDuration:J2,mediaMaxDuration:Nu,mediaTrim:Fu,imageBackgroundColor:uc,imageBackgroundImage:pg,imageCropAspectRatio:lc,imageCropMinSize:Q2,imageCropMaxSize:tx,imageCropLimitToImage:Du,imageCropRect:Ii,imageCropRectOrigin:rx,imageCropRectSnapshot:pl,imageCropRectAspectRatio:ax,imageCropRange:ex,imageRotation:ws,imageRotationRange:nx,imageFlipX:cc,imageFlipY:dc,imageOutputSize:ix,imageColorMatrix:mg,imageConvolutionMatrix:hg,imageGamma:gg,imageVignette:fg,imageNoise:$g,imageDecoration:Ou,imageAnnotation:Bu,imageRedaction:Uu,imageFrame:Jo,imagePreview:hp,imagePreviewSource:$l,imageTransforms:Rc,imagePreviewModifiers:gp,history:Hi,animation:yc,pixelRatio:$p,elasticityMultiplier:Ho,scrollElasticity:Om,rangeInputElasticity:5,redrawTrigger:xs,pointerAccuracy:fc,pointerHoverable:$c,env:Mc,rootRect:Ss,stageRect:ji,stageRectBase:tp,stageRecenter:Ig,stageScalar:eo,stagePadding:ks,stagePadded:Rs,presentationScalar:Cc,imagePreviewUpscale:yp,utilRect:Qo,utilRectPadded:cx,allowPlayPause:wu,allowPan:_u,allowZoom:Wu,allowZoomControls:qu,enableZoomInput:ju,enablePanInput:mc,enablePanInputStatus:Gu,imageSelectionMultiTouching:jg,rootBackgroundColor:ll,rootForegroundColor:gc,rootLineColor:cl,rootColorSecondary:kg,imageOutlineOpacity:lp,utilTools:Pc,imageSelectionPan:Ms,imageSelectionZoom:Ts,imageSelectionZoomCurrent:Cx,imageSelectionStageFitScalar:Ag,imageSelectionStoredState:Eg,imageOverlayMarkup:gl,interfaceImages:kc,isInteracting:ul,isTransformingImage:Rg,isInteractingFraction:Xu,imageCropRectIntent:Ju,imageCropRectPresentation:Tg,imageSelectionRect:ci,imageSelectionRectIntent:Qu,imageSelectionRectPresentation:Sc,imageSelectionRectSnapshot:xc,imageScalar:Dg,imageTransformsInterpolated:Sx,imageEffects:Ug});delete Hg.image;const kx="util-"+bi();let bp=[];const Gg=$=>P.find(([J])=>$===J);let ro=[],Zg=zi();const Yg=($,J,$t)=>{let Tt=Dt.getPropertyValue($);Tt=$t?$t(Tt):/^[0-9]+$/.test(Tt)?parseFloat(Tt):void 0,J.set(Tt,{hard:!Jr})},Is=($,J,$t=!1)=>{const Tt=(dt=>{const wt=Dt.getPropertyValue(dt);return V2(wt)})($);Tt&&Tt[3]!==0&&($t||(Tt.length=3),J.set(Tt,{hard:!Jr}))},vp=le();F(t,vp,$=>r(83,Ft=$));const xp=le();F(t,xp,$=>r(84,Kt=$));const wp=le();F(t,wp,$=>r(85,ye=$));const Ec=ir(0,{damping:.9});F(t,Ec,$=>r(86,Gt=$));const Xg=()=>{Is("color",gc),Is(ec?"--color-background":"background-color",ll),Is("outline-color",cl),Is("--color-secondary",kg),Is("--grid-color-even",xp,!0),Is("--grid-color-odd",wp,!0),Yg("--grid-size",vp),Yg("--editor-inset-top",Yu,$=>parseInt($,10))},Kg=vr([Rc,Ug,uc,ox],([$,J,$t,Tt])=>$&&de(X(X({},$),J),{backgroundColor:$t,backgroundImage:Tt}));F(t,Kg,$=>r(363,en=$));const Rx=()=>{const $=di.length?void 0:{resize:1.05},J=(($t,Tt,dt={})=>{const{resize:wt=1,opacity:Qt=0}=dt,_e={opacity:[ir(Qt,de(X({},ds),{stiffness:.1})),Br],resize:[ir(wt,de(X({},ds),{stiffness:.1})),Br],translation:[ir(void 0,ds),Br],rotation:[ir(void 0,cd),Br],origin:[ir(void 0,ds),Br],scale:[ir(void 0,cd),Br],gamma:[ir(void 0,cd),Fr=>Fr||1],vignette:[ir(void 0,cd),Fr=>Fr||0],colorMatrix:[ir([...hy],ds),Fr=>Fr||[...hy]],convolutionMatrix:[le(void 0),Fr=>Fr&&Fr.clarity||void 0],backgroundColor:[ir(void 0,ds),(Fr,Ca,jr)=>{if(Array.isArray(Fr)){if(Array.isArray(Ca)){const Va=[...Fr];Ca[3]===0?(Va[3]=0,jr(Va)):Va[3]===0&&((Fr=[...Ca])[3]=0)}return Fr}}],backgroundImage:[le(void 0),Br]},je=Object.entries(_e).map(([Fr,Ca])=>[Fr,Ca[0]]),ce=je.map(([,Fr])=>Fr),cr=Object.entries(_e).reduce((Fr,[Ca,jr])=>{const[Va,xo]=jr;return Fr[Ca]=(rs,jc)=>Va.set(xo(rs,ua[Ca],Ep=>{Va.set(Ep,{hard:!0})}),jc),Fr},{});let ua;const _n=vr(ce,Fr=>(ua=Fr.reduce((Ca,jr,Va)=>(Ca[je[Va][0]]=jr,Ca),{}),ua.data=$t,ua.size=Tt,ua.scale*=Fr[1],ua));return _n.get=()=>ua,_n.set=(Fr,Ca)=>{const jr={hard:!Ca};Object.entries(Fr).forEach(([Va,xo])=>{cr[Va]&&cr[Va](xo,jr)})},_n})(fr,Ge,$);di.unshift(J),Jg(en)},Jg=$=>{di.forEach((J,$t)=>{const Tt=$t===0?1:0;J.set(de(X({},$),{opacity:Tt,resize:1}),On)})};let Vc;const bl=m1(void 0,{duration:500});let Sp;F(t,bl,$=>r(53,ba=$));const Lc=le(!1);let ao;F(t,Lc,$=>r(358,sr=$));const Fc=ir(void 0,{stiffness:.1,damping:.7,precision:.25});F(t,Fc,$=>r(78,Nt=$));const Nc=ir(0,{stiffness:.1,precision:.05});F(t,Nc,$=>r(79,It=$));const vl=ir(0,{stiffness:.02,damping:.5,precision:.25});F(t,vl,$=>r(356,zn=$));const Cp=ir(void 0,{stiffness:.02,damping:.5,precision:.25});F(t,Cp,$=>r(357,ra=$));const zc=ir(void 0,{stiffness:.02,damping:.5,precision:.25});let Dc;F(t,zc,$=>r(355,da=$));const Tx=()=>{Yn("abortLoadImage")},Mx=()=>{Yn("abortProcessImage"),Rt(vo,Sa=!1,Sa)},Qg=$=>$.preventDefault(),Px=_g?$=>{const J=$.touches?$.touches[0]:$;J.pageX>20&&J.pageX<window.innerWidth-20||Qg($)}:be,es=le([]);F(t,es,$=>r(448,xa=$)),Ei("keysPressed",es);const kp=$=>{!$||Xs($)&&!(J=>/^image/.test(J.type)&&!/svg/.test(J.type))($)||!Xs($)&&!/^http/.test($)||Yn("loadImage",$)},Ix=$=>{$&&kp($)};let As,xl,Rp=[];const tf=le();Ei("rootPortal",tf),Ei("rootRect",Ss);const ef=()=>({foregroundColor:[...gn],lineColor:[...Fn],utilVisibility:X({},ct),isInteracting:ur,isInteractingFraction:tn,rootRect:yr(wr),stageRect:yr(dr),annotationShapesDirty:Bc,decorationShapesDirty:_c,frameShapesDirty:Wc,blendShapesDirty:qc}),rf=($,J,$t)=>Ga($,ma(J.width/$t,J.height/$t)),af=($,J,$t)=>{var Tt;return $._translate=ot((Tt=J).x,Tt.y),$._scale=$t,$},Oc=$=>{const J=[];return $.forEach($t=>J.push(Ax($t))),J.filter(Boolean)},Ax=$=>ka($)?($.points=[ot($.x1,$.y1),ot($.x2,$.y2)],$):(!(J=>Ra(J)&&!J.text.length)($)||$.backgroundColor&&$.backgroundColor[3]!==0||(Md($)&&($.width=5,$.height=$.lineHeight),$.strokeWidth=1,$.strokeColor=[1,1,1,.5],$.backgroundColor=[0,0,0,.1]),$);let nf,Tp=[],Mp=[],Pp=[],Ip=[],Ap=[],of={};const sf=($,J,$t,Tt,dt,wt)=>{const{annotationShapesDirty:Qt,decorationShapesDirty:_e,frameShapesDirty:je,blendShapesDirty:ce,selectionRect:cr,scale:ua}=$,_n=nf!==ua,Fr=_n||!Ni(of,cr);Fr&&(nf=ua,of=cr),(Qt||$t!==Ma)&&(Tp=$t.filter(Qc).map(wa).sort((jr,Va)=>jr.alwaysOnTop?1:Va.alwaysOnTop?-1:0).map(jr=>Ga(jr,Ge))),(_n||Uc||Qt||$t!==Ma)&&(Mp=Oc(Tp.map(jr=>g(jr,{flipX:Qa,flipY:zr,rotation:Fa,scale:ua,context:nn(Ge)})).flat())),ce&&(Pp=J.filter(Qc).map(jr=>Ga(jr,Ge))),(_e||Tt!==hr||Fr)&&(Ip=Oc(Tt.filter(Qc).map(wa).sort((jr,Va)=>jr.alwaysOnTop?1:Va.alwaysOnTop?-1:0).map(jr=>rf(jr,cr,ua)).map(jr=>g(jr,{context:cr})).flat().map(jr=>af(jr,cr,ua)))),(je||wt!==Re||Fr)&&(Ap=wt?Oc([wt].map(wa).map(jr=>rf(jr,cr,ua)).map(g).flat().map(jr=>af(jr,cr,ua))):[]);let Ca=Oc(dt.filter(Qc));return typeof window!="undefined"&&(jr=>{if(jr&&jr._h0af2t5)return;const[Va]=[[85,110,108,105,99,101,110,115,101,100,32,80,105,110,116,117,114,97,32,105,110,115,116,97,110,99,101]].map(xo=>xo.map(rs=>String.fromCharCode(rs)).join(""));Ca=[...Ca,{x:cr.x+.5*cr.width-82,y:cr.y+cr.height-16-12,width:164,height:16,text:Va,fontWeight:900,fontSize:12,color:[1,1,1,.25]}]})(window),{blendShapesDirty:ce,blendShapes:Pp,annotationShapesDirty:Qt,annotationShapes:Mp,decorationShapesDirty:_e,decorationShapes:Ip,frameShapesDirty:je,frameShapes:Ap,interfaceShapes:Ca}};let Bc=!0,Uc=!0,_c=!0,Wc=!0,qc=!0;return ri(()=>{Yo(),sx(),px(),ux(),mx(),hx(),gx(),fx(),bx(),wx(),fc.destroy(),$c.destroy(),Eu.destroy(),di.clear(),Tp.length=0,Mp.length=0,Pp.length=0,Ip.length=0,Ap.length=0;try{r(218,yl=void 0),r(271,Vc=void 0)}catch{}}),t.$$set=$=>{"class"in $&&r(219,un=$.class),"layout"in $&&r(220,En=$.layout),"stores"in $&&r(221,li=$.stores),"locale"in $&&r(3,Tr=$.locale),"id"in $&&r(4,qi=$.id),"util"in $&&r(222,oa=$.util),"utils"in $&&r(223,Aa=$.utils),"animations"in $&&r(224,Dr=$.animations),"disabled"in $&&r(225,sa=$.disabled),"status"in $&&r(217,Er=$.status),"previewUpscale"in $&&r(226,Mi=$.previewUpscale),"previewPad"in $&&r(227,al=$.previewPad),"previewMaskOpacity"in $&&r(5,Pi=$.previewMaskOpacity),"previewImageDataMaxSize"in $&&r(228,Xl=$.previewImageDataMaxSize),"previewImageTextPixelRatio"in $&&r(6,_1=$.previewImageTextPixelRatio),"markupMaskOpacity"in $&&r(7,W1=$.markupMaskOpacity),"zoomMaskOpacity"in $&&r(229,Kd=$.zoomMaskOpacity),"elasticityMultiplier"in $&&r(8,Ho=$.elasticityMultiplier),"willRevert"in $&&r(230,Jd=$.willRevert),"willProcessImage"in $&&r(231,Qd=$.willProcessImage),"willRenderCanvas"in $&&r(9,tu=$.willRenderCanvas),"willRenderToolbar"in $&&r(232,eu=$.willRenderToolbar),"willSetHistoryInitialState"in $&&r(233,ru=$.willSetHistoryInitialState),"enableButtonExport"in $&&r(234,au=$.enableButtonExport),"enableButtonRevert"in $&&r(235,nu=$.enableButtonRevert),"enableNavigateHistory"in $&&r(236,iu=$.enableNavigateHistory),"enableToolbar"in $&&r(10,Kl=$.enableToolbar),"enableUtils"in $&&r(237,ou=$.enableUtils),"enableButtonClose"in $&&r(238,su=$.enableButtonClose),"enableDropImage"in $&&r(239,lu=$.enableDropImage),"enablePasteImage"in $&&r(240,cu=$.enablePasteImage),"enableBrowseImage"in $&&r(241,du=$.enableBrowseImage),"enableTransparencyGrid"in $&&r(11,q1=$.enableTransparencyGrid),"layoutDirectionPreference"in $&&r(242,uu=$.layoutDirectionPreference),"layoutHorizontalUtilsPreference"in $&&r(243,pu=$.layoutHorizontalUtilsPreference),"layoutVerticalUtilsPreference"in $&&r(244,mu=$.layoutVerticalUtilsPreference),"layoutVerticalToolbarPreference"in $&&r(245,Jl=$.layoutVerticalToolbarPreference),"layoutVerticalControlGroupsPreference"in $&&r(246,hu=$.layoutVerticalControlGroupsPreference),"layoutVerticalControlTabsPreference"in $&&r(247,gu=$.layoutVerticalControlTabsPreference),"markupEditorZoomLevel"in $&&r(248,Ql=$.markupEditorZoomLevel),"markupEditorZoomLevels"in $&&r(12,j1=$.markupEditorZoomLevels),"markupEditorZoomAdjustStep"in $&&r(13,H1=$.markupEditorZoomAdjustStep),"markupEditorZoomAdjustFactor"in $&&r(14,G1=$.markupEditorZoomAdjustFactor),"markupEditorZoomAdjustWheelFactor"in $&&r(15,Z1=$.markupEditorZoomAdjustWheelFactor),"markupEditorInteractionMode"in $&&r(249,fu=$.markupEditorInteractionMode),"muteAudio"in $&&r(250,tc=$.muteAudio),"willSetMediaInitialTimeOffset"in $&&r(251,$u=$.willSetMediaInitialTimeOffset),"enablePan"in $&&r(16,Y1=$.enablePan),"enableZoom"in $&&r(17,X1=$.enableZoom),"enableZoomControls"in $&&r(252,yu=$.enableZoomControls),"enableZoomInput"in $&&r(18,K1=$.enableZoomInput),"enablePanInput"in $&&r(253,bu=$.enablePanInput),"enableCanvasAlpha"in $&&r(19,ec=$.enableCanvasAlpha),"enablePanLimit"in $&&r(20,J1=$.enablePanLimit),"panLimitGutterScalar"in $&&r(21,Q1=$.panLimitGutterScalar),"zoomPresetOptions"in $&&r(22,tg=$.zoomPresetOptions),"zoomAdjustStep"in $&&r(23,eg=$.zoomAdjustStep),"zoomAdjustFactor"in $&&r(24,rg=$.zoomAdjustFactor),"zoomAdjustWheelFactor"in $&&r(25,ag=$.zoomAdjustWheelFactor),"zoomLevel"in $&&r(0,Go=$.zoomLevel),"imagePreviewSrc"in $&&r(254,vu=$.imagePreviewSrc),"imageOrienter"in $&&r(255,rc=$.imageOrienter),"pluginComponents"in $&&r(256,bs=$.pluginComponents),"pluginOptions"in $&&r(26,Zo=$.pluginOptions),"root"in $&&r(2,Ea=$.root),"imageSourceToImageData"in $&&r(27,Au=$.imageSourceToImageData),"imagePreviewCurrent"in $&&r(218,yl=$.imagePreviewCurrent)},t.$$.update=()=>{if(1&t.$$.dirty[0]|1&t.$$.dirty[8]&&r(0,Go=Go===null?Ql:Go),2&t.$$.dirty[0]|256&t.$$.dirty[8]){let dt=!1;bs.forEach(([wt])=>{Xn[wt]||(r(1,Xn[wt]={},Xn),dt=!0)}),dt&&r(268,ol=[...bs])}var $,J,$t,Tt;if(8&t.$$.dirty[0]|64&t.$$.dirty[7]|1048576&t.$$.dirty[8]&&r(322,A=Tr&&ol.length?Aa||ol.map(([dt])=>dt):[]),67108864&t.$$.dirty[0]|1048576&t.$$.dirty[8]|4096&t.$$.dirty[10]|268435456&t.$$.dirty[11]&&r(323,P=((dt,wt,Qt,_e)=>{const je=wt.filter(([ce])=>dt.includes(ce)).filter(([ce,{isSupported:cr}])=>cr(X(X({},_e),Qt[ce]))).map(([ce,cr])=>[ce,cr.Component]);return mo(je,bp,(ce,cr)=>ce[0]===cr[0]&&ce[1]===cr[1])?bp:(bp=je,je)})(A,ol,Zo,{src:Da})),8192&t.$$.dirty[10]&&r(278,G=P.length),8&t.$$.dirty[0]|1073741824&t.$$.dirty[8]|4096&t.$$.dirty[10]&&r(46,Q=G&&A.map(dt=>{const wt=Gg(dt);if(wt)return{id:dt,view:wt[1],tabIcon:Tr[dt+"Icon"],tabLabel:Tr[dt+"Label"]}}).filter(Boolean)||[]),32768&t.$$.dirty[1]&&r(340,a=!!Q.find(dt=>dt.id==="trim")),1073741824&t.$$.dirty[10]|128&t.$$.dirty[11]|4194304&t.$$.dirty[12]&&r(277,n=!!($e&&fr&&a)),32&t.$$.dirty[7]|1073741824&t.$$.dirty[8]&&r(43,Z=G&&oa&&typeof oa=="string"&&Gg(oa)?oa:G>0?P[0][0]:void 0),4096&t.$$.dirty[1]|536870912&t.$$.dirty[8]&&n&&Z&&Yo(),536870912&t.$$.dirty[8]|128&t.$$.dirty[11]&&(n?(fr.addEventListener("play",ac),fr.addEventListener("pause",ac)):fr&&fr.nodeName==="video"&&(fr.removeEventListener("play",ac),fr.removeEventListener("pause",ac))),536870912&t.$$.dirty[8]&&n&&yo.set(nc()/Xo()),3145728&t.$$.dirty[12]&&(dt=>{if(!vs())return;const wt=Date.now();if(Su&&wt-Su<16)return;Su=wt;const Qt=$e*dt;if(Qt.toFixed(1)===og)return;og=Qt.toFixed(1);const _e=fr,je=()=>{_e.removeEventListener("seeked",je),xu()};_e.addEventListener("seeked",je),((ce,cr)=>{ce.fastSeek&&ce.fastSeek(cr),ce.currentTime=cr})(_e,Qt)})(Jt||ie),2097152&t.$$.dirty[12]&&r(338,i=ie&&Ze(ie,6)),12845056&t.$$.dirty[12]&&r(336,o=tt||[[0,Math.min($e,pe)/$e]]),67108864&t.$$.dirty[10]&&(s=o[0][0]),67108864&t.$$.dirty[10]&&(l=o[o.length-1][1]),67108864&t.$$.dirty[10]&&r(339,c=o.map(([dt,wt])=>[Ze(dt,6),Ze(wt,6)])),805306368&t.$$.dirty[10]&&r(337,d=c.findIndex(([dt,wt])=>i>=dt&&i<=wt)),939524096&t.$$.dirty[10]&&(p=d===-1&&c.findIndex((dt,wt,Qt)=>{const _e=Qt[wt-1];return _e?i<=dt[0]&&i>=_e[1]:i<=dt[0]})),4&t.$$.dirty[8]&&il.set(tc),128&t.$$.dirty[11]|524288&t.$$.dirty[12]&&(fr&&ft?Mu():Pu()),256&t.$$.dirty[0]&&Rt(oc,Ct=Ho,Ct),8&t.$$.dirty[7]&&r(332,m=En==="overlay"),1048576&t.$$.dirty[7]|4194304&t.$$.dirty[10]&&r(44,h=ou&&!m),67108866&t.$$.dirty[0]&&Zo&&Object.entries(Zo).forEach(([dt,wt])=>{Object.entries(wt).forEach(([Qt,_e])=>{Xn[dt]&&r(1,Xn[dt][Qt]=_e,Xn)})}),256&t.$$.dirty[7]&&Iu.set(sa?1:0),2048&t.$$.dirty[7]&&(f=Xl?($=Xl,J=dg,ma(Math.min($.width,J.width),Math.min($.height,J.height))):dg),131072&t.$$.dirty[12]&&Eu.update(k[0]),65536&t.$$.dirty[12]&&(g=In?(dt,wt)=>In(dt,de(X({flipX:void 0,flipY:void 0,rotation:void 0},wt),{isPreview:!0})):Br),16&t.$$.dirty[8]|32768&t.$$.dirty[12]&&Hu.set(Wi&&yu),34&t.$$.dirty[8]&&hc.set(fu==="pan"||bu),524288&t.$$.dirty[1]&&Pa&&Ss.set(na(Pa.x,Pa.y,Pa.width,Pa.height)),4194304&t.$$.dirty[10]|1048608&t.$$.dirty[11]&&wr&&m&&Wr&&Wr.complete&&(()=>{const dt=oi,wt=Ta(wr);dt&&dt===wt||(lc.set(Ta(wr)),qg())})(),4096&t.$$.dirty[10]&&r(45,bt=A.length>1),16384&t.$$.dirty[1]&&(bt||Cs.set(Ao())),1024&t.$$.dirty[0]|16384&t.$$.dirty[12]&&(Kl||dl.set(na(0,fo,0,0))),16777216&t.$$.dirty[10]|64&t.$$.dirty[11]&&r(335,w=!ur&&b),8192&t.$$.dirty[12]&&r(333,v=!go),524288&t.$$.dirty[1]&&r(279,Sr=Pa&&Pa.width>0&&Pa.height>0),8&t.$$.dirty[0]|1073741824&t.$$.dirty[8]|1&t.$$.dirty[9]&&r(40,at=Sr&&Tr&&!!G),512&t.$$.dirty[1]&&setTimeout(()=>r(269,Ku=at),1),128&t.$$.dirty[7]|2097152&t.$$.dirty[8]|41943040&t.$$.dirty[10]&&Rt(yc,On=Dr==="always"?w:Dr!=="never"&&w&&Ku&&v,On),128&t.$$.dirty[7]|25165824&t.$$.dirty[10]&&Rt(bc,Jr=Dr==="always"?b:Dr!=="never"&&b&&v,Jr),512&t.$$.dirty[7]|4194304&t.$$.dirty[10]&&vc.set(Mi||m),1024&t.$$.dirty[7]&&wc.set(al),4&t.$$.dirty[0]|5120&t.$$.dirty[12]&&Ea&&(Ea.dispatchEvent(Co("markupzoom",vn)),Ea.dispatchEvent(Co("zoom",Mr(vn)?vn:Zn))),4&t.$$.dirty[0]|2048&t.$$.dirty[12]&&Ea&&(Ea.dispatchEvent(Co("markuppan",Un)),Ea.dispatchEvent(Co("pan",Un))),256&t.$$.dirty[12]&&va&&Vg(),512&t.$$.dirty[12]&&Bi&&np(),2101248&t.$$.dirty[1]&&Z&&lp.set(.075,{hard:!Jr}),4096&t.$$.dirty[7]&&r(330,S=Kd),192&t.$$.dirty[12]&&r(331,T=Gn?-Math.max(...Object.values(Ri)):0),69206016&t.$$.dirty[1]|3145728&t.$$.dirty[10]|16&t.$$.dirty[11]&&bn){let dt=bn.x-dr.x,wt=dr.x+dr.width-(bn.x+bn.width),Qt=bn.y-dr.y,_e=dr.y+dr.height-(bn.y+bn.height),je=Math.min(dt,Qt,wt,_e);cp.set(je>T?0:Math.min(S,Math.abs(je/64)),{hard:!Jr})}if(33554432&t.$$.dirty[1]&&r(329,B=.55/yn),2097152&t.$$.dirty[1]|524288&t.$$.dirty[10]|16&t.$$.dirty[11]&&dr&&dp.set({x:0,y:dr.y,width:dr.x<64?0:dr.x,height:dr.height+B},{hard:!Jr}),2097152&t.$$.dirty[1]|524288&t.$$.dirty[10]|48&t.$$.dirty[11]&&dr&&up.set({x:0,y:0,width:wr.width,height:dr.y+B},{hard:!Jr}),2097152&t.$$.dirty[1]|524288&t.$$.dirty[10]|48&t.$$.dirty[11]&&dr){let dt=dr.x+dr.width,wt=wr.width-(dr.x+dr.width);wt<64&&(dt+=wt,wt=0),pp.set({x:dt,y:dr.y,width:wt,height:dr.height+B},{hard:!Jr})}if(2097152&t.$$.dirty[1]|48&t.$$.dirty[11]&&dr&&mp.set({x:0,y:dr.y+dr.height,width:wr.width,height:wr.height-(dr.y+dr.height)},{hard:!Jr}),16777216&t.$$.dirty[1]|36&t.$$.dirty[12]&&r(325,I=$n&&X({id:"stage-overlay",backgroundColor:$r,opacity:Pr},$n)),16777216&t.$$.dirty[1]|20&t.$$.dirty[12]&&r(328,O=Zr&&X({id:"stage-overlay",backgroundColor:$r,opacity:Pr},Zr)),16777216&t.$$.dirty[1]|12&t.$$.dirty[12]&&r(327,R=ja&&X({id:"stage-overlay",backgroundColor:$r,opacity:Pr},ja)),16777216&t.$$.dirty[1]|6&t.$$.dirty[12]&&r(326,E=kr&&X({id:"stage-overlay",backgroundColor:$r,opacity:Pr},kr)),491520&t.$$.dirty[10]&&r(324,N=[O,R,E,I].filter(Boolean)),16384&t.$$.dirty[10]|1&t.$$.dirty[12]&&N&&Lr){const dt=Lr.filter(wt=>wt.id!=="stage-overlay");gl.set([...dt,...N])}if(64&t.$$.dirty[8]|268435456&t.$$.dirty[11]&&$l.set(vu||Da||void 0),4&t.$$.dirty[0]|2&t.$$.dirty[7]|128&t.$$.dirty[11]&&(r(218,yl=fr),fr&&Ea.dispatchEvent(Co("loadpreview",yl))),2097152&t.$$.dirty[11]&&Dn&&(Ms.set(Or()),Ts.set(void 0),Vg(),kc.set([])),1073741824&t.$$.dirty[11]&&r(283,x=oe.index>0),1073741824&t.$$.dirty[11]&&r(282,j=oe.index<oe.length-1),4&t.$$.dirty[1]&&jg.set(Ic),536870912&t.$$.dirty[11]&&yp.set(q),4096&t.$$.dirty[1]&&lx.set(Z),32832&t.$$.dirty[1]&&r(37,ct=Q.reduce((dt,wt)=>(dt[wt.id]=ct&&ct[wt.id]||0,dt),{})),4096&t.$$.dirty[1]&&r(75,lt={name:kx,selected:Z}),32768&t.$$.dirty[1]&&r(74,xt=Q.map(dt=>({id:dt.id,icon:dt.tabIcon,label:dt.tabLabel}))),32768&t.$$.dirty[1]&&r(73,yt=Q.map(dt=>dt.id)),4&t.$$.dirty[7]&&r(72,qt=ar(["PinturaRoot","PinturaRootComponent",un])),32&t.$$.dirty[11]&&r(318,Y=wr&&(wr.width>1e3?"wide":wr.width<600?"narrow":void 0)),32&t.$$.dirty[11]&&r(305,et=wr&&(wr.width<=320||wr.height<=460)),32&t.$$.dirty[11]&&r(317,Vt=wr&&(wr.height>1e3?"tall":wr.height<600?"short":void 0)),4&t.$$.dirty[0]&&r(285,z=Ea&&Ea.parentNode&&Ea.parentNode.classList.contains("PinturaModal")),1073741824&t.$$.dirty[0]|64&t.$$.dirty[9]|32&t.$$.dirty[11]&&r(310,vt=z&&wr&&Tc>wr.width),1&t.$$.dirty[1]|64&t.$$.dirty[9]|32&t.$$.dirty[11]&&r(309,St=z&&wr&&fp>wr.height),1073741824&t.$$.dirty[9]|1&t.$$.dirty[10]&&r(311,W=vt&&St),524288&t.$$.dirty[0]&&r(308,Lt=ec),256&t.$$.dirty[10]&&r(280,Ce=Y==="narrow"),33554432&t.$$.dirty[7]|32&t.$$.dirty[11]&&r(319,($t=wr,Tt=uu,pt=wr?Tt==="auto"?$t.width>$t.height?"landscape":"portrait":Tt==="horizontal"?$t.width<500?"portrait":"landscape":Tt==="vertical"?$t.height<400?"landscape":"portrait":void 0:"landscape")),512&t.$$.dirty[10]&&r(71,zt=pt==="landscape"),2&t.$$.dirty[9]|128&t.$$.dirty[10]&&r(307,Te=Ce||Vt==="short"),1073741824&t.$$.dirty[0]|32&t.$$.dirty[11]&&r(306,ne=Zg&&wr&&Tc===wr.width&&!_g),2&t.$$.dirty[1]|134217728&t.$$.dirty[11]&&r(281,At=[...rn||[],...Ac].filter(Boolean)),67108864&t.$$.dirty[7]&&r(316,K="has-navigation-preference-"+pu),134217728&t.$$.dirty[7]&&r(315,Xt="has-navigation-preference-"+mu),268435456&t.$$.dirty[7]&&r(312,se="has-toolbar-preference-"+Jl),536870912&t.$$.dirty[7]&&r(314,me="has-controlgroups-preference-"+hu),1073741824&t.$$.dirty[7]&&r(313,Ve="has-controltabs-preference-"+gu),32&t.$$.dirty[11]&&r(321,ke=wr!==void 0&&wr.width>0&&wr.height>0),4&t.$$.dirty[0]|2048&t.$$.dirty[10]&&r(320,Dt=ke&&Ea&&getComputedStyle(Ea)),1024&t.$$.dirty[10]&&Dt&&Xg(),1024&t.$$.dirty[0]|2121728&t.$$.dirty[1]|264&t.$$.dirty[7]|2080374848&t.$$.dirty[9]|1023&t.$$.dirty[10]|100667392&t.$$.dirty[11]&&Mc.set(de(X({},sn),{layoutMode:En,orientation:pt,horizontalSpace:Y,verticalSpace:Vt,navigationHorizontalPreference:K,navigationVerticalPreference:Xt,controlGroupsVerticalPreference:me,controlTabsVerticalpreference:Ve,toolbarVerticalPreference:se,isModal:z,isDisabled:sa,isCentered:W,isCenteredHorizontally:vt,isCenteredVertically:St,isAnimated:Jr,isTransparent:Lt,pointerAccuracy:lr,pointerHoverable:za,isCompact:Te,hasSwipeNavigation:ne,hasLimitedSpace:et,hasToolbar:Kl,hasNavigation:bt&&h,isIOS:Zg,browserVersion:p1()?"chrome-"+(navigator.userAgent.match(/Chrome\/([0-9]+)/)||[])[1]:void 0})),4096&t.$$.dirty[11]&&r(70,Ue=Object.entries(sn).map(([dt,wt])=>/^is|has/.test(dt)?wt?L2(dt):void 0:wt).filter(Boolean).join(" ")),4096&t.$$.dirty[1]&&Z&&Pc.set([]),25165824&t.$$.dirty[11]&&r(69,Xe=ln&&Object.entries(ni).filter(([,dt])=>dt!=null).reduce((dt,[,wt])=>dt=X(X({},dt),wt),{})),1048576&t.$$.dirty[11]&&r(302,Zt=Wr&&Wr.task==="any-to-file"),8388608&t.$$.dirty[9]&&Zt&&di&&di.clear(),4194304&t.$$.dirty[11]&&r(304,he=!!en&&!!en.translation),8388608&t.$$.dirty[8]|33554432&t.$$.dirty[9]|128&t.$$.dirty[11]&&he&&fr&&fr!==Vc&&(r(271,Vc=fr),Rx()),33554432&t.$$.dirty[9]|4194304&t.$$.dirty[11]&&he&&Jg(en),8388608&t.$$.dirty[1]&&fn&&fn.length>1){let dt=[];di.forEach((wt,Qt)=>{Qt!==0&&wt.get().opacity<=0&&dt.push(wt)}),dt.forEach(wt=>di.remove(wt))}if(8&t.$$.dirty[0]|16777216&t.$$.dirty[9]&&r(39,rt=Tr&&_t.length&&Tr.labelSupportError(_t)),1048576&t.$$.dirty[11]&&r(294,mt=Wr&&!!Wr.error),1048576&t.$$.dirty[11]&&r(42,Se=!Wr||!Wr.complete&&Wr.task===void 0),1048576&t.$$.dirty[11]&&r(295,ht=Wr&&(Wr.taskLengthComputable?Wr.taskProgress:1/0)),8388608&t.$$.dirty[9]&&Zt&&Rt(fl,Ur=!1,Ur),2097152&t.$$.dirty[1]|16777216&t.$$.dirty[8]|1048576&t.$$.dirty[11]&&Wr&&Wr.complete){const dt=Jr?250:0;clearTimeout(Sp),r(272,Sp=setTimeout(()=>{Rt(fl,Ur=!0,Ur)},dt))}if(2048&t.$$.dirty[1]|32768&t.$$.dirty[9]|1310720&t.$$.dirty[11]&&r(299,Et=Wr&&!mt&&!Se&&!Ur),4194304&t.$$.dirty[8]|2097280&t.$$.dirty[11]&&r(298,ee=!(!Dn||fr&&!bo)),2097152&t.$$.dirty[1]|262144&t.$$.dirty[11]&&(Ur?setTimeout(()=>Ec.set(1),Jr?500:0):Ec.set(0)),532480&t.$$.dirty[11]&&r(293,re=!!(Sa||_r&&_r.progress!==void 0&&!_r.complete)),16384&t.$$.dirty[9]&&re&&Yo(),2048&t.$$.dirty[1]|1048576&t.$$.dirty[11]&&r(296,Wt=Wr&&!(Wr.error||Se)),8&t.$$.dirty[0]|1048576&t.$$.dirty[11]&&r(297,Ht=Tr&&(Wr?!Wr.complete||Wr.error?d1(Tr.statusLabelLoadImage(Wr),Wr.error&&Wr.error.metadata,"{","}"):Tr.statusLabelLoadImage({progress:1/0,task:"blob-to-bitmap"}):Tr.statusLabelLoadImage(Wr))),8&t.$$.dirty[0]|524288&t.$$.dirty[11]&&r(292,fe=_r&&Tr&&Tr.statusLabelProcessImage(_r)),524288&t.$$.dirty[11]&&r(290,Le=_r&&(_r.taskLengthComputable?_r.taskProgress:1/0)),524288&t.$$.dirty[11]&&r(291,mr=_r&&!_r.error),524288&t.$$.dirty[11]&&r(289,He=!(!_r||!_r.error)),8&t.$$.dirty[0]|2048&t.$$.dirty[1]|1&t.$$.dirty[7]|2096128&t.$$.dirty[9])if(Er){let dt,wt,Qt,_e,je;Be(Er)&&(dt=Er),Mr(Er)?wt=Er:Array.isArray(Er)&&([dt,wt,je]=Er,wt===!1&&(_e=!0),Mr(wt)&&(Qt=!0)),r(34,ao=(dt||wt)&&{text:dt,aside:_e||Qt,progressIndicator:{visible:Qt,progress:wt},closeButton:_e&&{label:Tr.statusLabelButtonClose,icon:Tr.statusIconButtonClose,onclick:je||(()=>r(217,Er=void 0))}})}else r(34,ao=Tr&&Se||mt||Et||ee?{text:Ht,aside:mt||Wt,progressIndicator:{visible:Wt,progress:ht},closeButton:mt&&{label:Tr.statusLabelButtonClose,icon:Tr.statusIconButtonClose,onclick:Tx}}:Tr&&re&&fe?{text:fe,aside:He||mr,progressIndicator:{visible:mr,progress:Le},closeButton:He&&{label:Tr.statusLabelButtonClose,icon:Tr.statusIconButtonClose,onclick:Mx}}:void 0);if(1&t.$$.dirty[7]&&r(301,nr=Er!==void 0),2097152&t.$$.dirty[1]|64&t.$$.dirty[9]|524288&t.$$.dirty[11]&&z&&_r&&_r.complete&&(Lc.set(!0),setTimeout(()=>Lc.set(!1),Jr?100:0)),4&t.$$.dirty[0]|4096&t.$$.dirty[1]|262144&t.$$.dirty[11]&&Ur&&Ea&&Ea.dispatchEvent(Co("selectutil",Z)),2304&t.$$.dirty[1]|5816320&t.$$.dirty[9]|131072&t.$$.dirty[11]&&r(300,ve=sr||rt||Se||mt||Et||ee||re||nr),2097152&t.$$.dirty[9]&&Rt(bl,ba=ve?1:0,ba),2097152&t.$$.dirty[1]|2097152&t.$$.dirty[9]&&bl.set(ve?1:0,{duration:Jr?500:1}),4194304&t.$$.dirty[1]&&r(41,ae=ba>0),8&t.$$.dirty[1]&&r(288,xe=!(!ao||!ao.aside)),2098184&t.$$.dirty[1]|33554432&t.$$.dirty[8]|512&t.$$.dirty[9]|65536&t.$$.dirty[11]&&ae&&ao){clearTimeout(Dc);const dt={hard:Jr===!1};if(xe){const wt=!!ao.error||!Jr;Nc.set(1,dt),Fc.set(ra,{hard:wt}),r(273,Dc=setTimeout(()=>{vl.set(16,dt)},1))}else Nc.set(0,dt),r(273,Dc=setTimeout(()=>{vl.set(0,dt)},1))}if(1024&t.$$.dirty[1]&&(ae||(zc.set(void 0,{hard:!0}),Fc.set(void 0,{hard:!0}),vl.set(0,{hard:!0}))),32768&t.$$.dirty[11]&&r(287,Ke=.5*zn),256&t.$$.dirty[9]|16384&t.$$.dirty[11]&&r(68,Me=`transform: translateX(${da-Ke}px)`),256&t.$$.dirty[1]|128&t.$$.dirty[11]&&r(38,Yt=fr&&!rt),128&t.$$.dirty[1]|192&t.$$.dirty[9]&&r(284,rr=Pe&&(Yt||z)?Qg:be),32&t.$$.dirty[9]&&r(67,Ae=rr),32&t.$$.dirty[9]&&r(66,Je=rr),8&t.$$.dirty[0]|1048576&t.$$.dirty[1]|3047424&t.$$.dirty[7]|30&t.$$.dirty[9]|4096&t.$$.dirty[11]&&r(65,or=Tr&&ai&&jl(()=>eu([["div","alpha",{class:"PinturaNavGroup"},[["div","alpha-set",{class:"PinturaNavSet"},[su&&["Button","close",{label:Tr.labelClose,icon:Tr.iconButtonClose,onclick:()=>Yn("close"),hideLabel:!0}],nu&&["Button","revert",{label:Tr.labelButtonRevert,icon:Tr.iconButtonRevert,disabled:!x,onclick:vx,hideLabel:!0}]]]]],["div","beta",{class:"PinturaNavGroup PinturaNavGroupFloat"},[iu&&["div","history",{class:"PinturaNavSet"},[["Button","undo",{label:Tr.labelButtonUndo,icon:Tr.iconButtonUndo,disabled:!x,onclick:Hi.undo,hideLabel:!0}],["Button","redo",{label:Tr.labelButtonRedo,icon:Tr.iconButtonRedo,disabled:!j,onclick:Hi.redo,hideLabel:!0}]]],At.length&&["div","plugin-tools",{class:"PinturaNavSet"},At.filter(Boolean).map(([dt,wt,Qt])=>[dt,wt,X({},Qt)])]]],["div","gamma",{class:"PinturaNavGroup"},[au&&["Button","export",{label:Tr.labelButtonExport,icon:Ce&&Tr.iconButtonExport,class:"PinturaButtonExport",onclick:xx,hideLabel:Ce}]]]],X({},sn),()=>xs.set({})))),256&t.$$.dirty[11]&&r(276,jt=Kr&&!!Kr.length),268435456&t.$$.dirty[8]|257&t.$$.dirty[11]&&r(275,Ne=jt&&Wv(Ge,Kr)),402653184&t.$$.dirty[8]|3200&t.$$.dirty[11]&&jt&&((dt,wt,Qt,_e)=>{if(!wt)return;const je={dataSizeScalar:Qt};_e&&_e[3]>0&&(je.backgroundColor=[..._e]),wt(dt,je).then(ce=>{As&&Wa(As),r(274,As=ce)})})(fr,Pn,Ne,Na),67108864&t.$$.dirty[8]|769&t.$$.dirty[11]&&Kr&&As&&Ge){const{width:dt,height:wt}=Ge,Qt=po()?"pixelated":Gr==="auto"?"auto":"pixelated";r(35,Rp=Kr.map(_e=>{const je=na(_e.x,_e.y,_e.width,_e.height),ce=Za(yr(je),_e.rotation).map(cr=>ot(cr.x/dt,cr.y/wt));return de(X({},_e),{id:"redaction",flipX:!1,flipY:!1,cornerRadius:0,strokeWidth:0,strokeColor:void 0,backgroundColor:[0,0,0,0],backgroundImage:As,backgroundImageRendering:Qt,backgroundCorners:ce})}))}32&t.$$.dirty[1]&&xl&&tf.set(xl),4&t.$$.dirty[0]|128&t.$$.dirty[1]&&Yt&&Ea.dispatchEvent(Co("ready")),262144&t.$$.dirty[1]&&r(59,Bc=!0),15&t.$$.dirty[11]&&r(60,Uc=!0),131072&t.$$.dirty[1]&&r(61,_c=!0),65536&t.$$.dirty[1]&&r(62,Wc=!0),16&t.$$.dirty[1]&&r(63,qc=!0)},r(334,b=!h1()),U=Vl()===1?$=>{$&&(qn($.origin,Math.round),qn($.translation,Math.round))}:Br,r(303,_t=[!kC()&&"WebGL"].filter(Boolean)),r(286,Pe=zi()||Dd()&&Zi()),r(64,nt=(($,J=!0)=>$t=>{$t.type==="ping"&&(J&&$t.stopPropagation(),$($t.detail.type,$t.detail.data))})(An.pub)),[Go,Xn,Ea,Tr,qi,Pi,_1,W1,Ho,tu,Kl,q1,j1,H1,G1,Z1,Y1,X1,K1,ec,J1,Q1,tg,eg,rg,ag,Zo,Au,hp,Hi,Tc,fp,Ac,Ic,ao,Rp,xl,ct,Yt,rt,at,ae,Se,Z,h,bt,Q,Re,hr,Ma,Pa,ai,Jr,ba,fn,$r,yn,bn,ro,Bc,Uc,_c,Wc,qc,nt,or,Je,Ae,Me,Xe,Ue,zt,qt,yt,xt,lt,Ie,H,Nt,It,M,ut,kt,Ft,Kt,ye,Gt,ue,Oe,qe,Rr,gr,Qe,qr,pr,aa,Ha,wu,nl,yo,il,xs,oc,Iu,Vu,Ko,Lu,Fu,Nu,sc,zu,lc,Du,Ii,ws,cc,dc,uc,Ou,Bu,Uu,Jo,pc,bg,vg,xg,wg,Sg,Cg,_u,Wu,qu,mc,ju,Hu,hc,Gu,ll,gc,cl,Zu,Ss,Cs,Yu,dl,Qo,fc,$c,ul,Xu,yc,bc,vc,ts,pl,Ju,ci,xc,Qu,Mg,ks,Rs,ji,ep,eo,Ts,rp,hl,Ms,Sc,ap,Lg,Cc,gl,Bg,cp,dp,up,pp,mp,fl,$l,gp,kc,Rc,Mc,$p,vo,di,Pc,Hg,vp,xp,wp,Ec,({target:$,propertyName:J})=>{$===Ea&&/background|outline/.test(J)&&Dt&&Xg()},Kg,bl,Lc,Fc,Nc,vl,Cp,zc,$=>{const J=!(!ao||!ao.closeButton)||!Jr;Cp.set($.detail.width,{hard:J}),zc.set(Math.round(.5*-$.detail.width),{hard:J})},Px,es,$=>{const{keyCode:J,metaKey:$t,ctrlKey:Tt,shiftKey:dt}=$;if(J===9&&sa)return void $.preventDefault();if($.target&&J===32&&Ea.contains($.target)&&!Vd($.target)&&(Nn&&n&&Tu(),$.preventDefault()),J===90&&($t||Tt))return void(dt&&$t?Hi.redo():Hi.undo());if(J===89&&Tt)return void Hi.redo();if(J===229||$t||Tt)return;const wt=new Set([...xa,J]);es.set(Array.from(wt))},({key:$,keyCode:J})=>{if($==="Meta")return es.set([]);es.set(xa.filter($t=>$t!==J))},()=>{es.set([])},$=>{Vd($.target)||$.preventDefault()},$=>{lu&&kp($.detail.resources[0])},()=>{du&&F2().then(Ix)},$=>{if(!cu)return;const J=Nr((window.innerWidth-Math.abs(wr.x))/wr.width,0,1),$t=Nr((window.innerHeight-Math.abs(wr.y))/wr.height,0,1);J<.75&&$t<.75||kp(($.clipboardData||window.clipboardData).files[0])},ef,sf,$=>{te&&Ni($.detail,te)||Rt(Qo,te=$.detail,te)},Er,yl,un,En,li,oa,Aa,Dr,sa,Mi,al,Xl,Kd,Jd,Qd,eu,ru,au,nu,iu,ou,su,lu,cu,du,uu,pu,mu,Jl,hu,gu,Ql,fu,tc,$u,yu,bu,vu,rc,bs,X2,Ru,Yo,vs,Tu,Mu,Pu,lg,Xo,nc,ic,ol,Ku,bo,Vc,Sp,Dc,As,Ne,jt,n,G,Sr,Ce,At,j,x,rr,z,Pe,Ke,xe,He,Le,mr,fe,re,mt,ht,Wt,Ht,ee,Et,ve,nr,Zt,_t,he,et,ne,Te,Lt,St,vt,W,se,Ve,me,Xt,K,Vt,Y,pt,Dt,ke,A,P,N,I,E,R,O,B,S,T,m,v,b,w,o,d,i,c,a,Ge,zr,Qa,Fa,dr,wr,ur,fr,Kr,Gr,Na,Pn,sn,Sa,da,zn,ra,sr,Ur,_r,Wr,Dn,en,ni,ln,za,lr,rn,Da,q,oe,Lr,kr,Pr,ja,Zr,$n,Ri,Gn,va,Bi,Zn,Un,vn,go,fo,Wi,In,k,tt,ft,Jt,ie,$e,pe,function(){r(30,Tc=us.innerWidth),r(31,fp=us.innerHeight)},$=>Rt(dl,M=$.detail,M),({detail:$})=>r(43,Z=$),($,J)=>J.id===$,function($,J){t.$$.not_equal(Xn[J],$)&&(Xn[J]=$,r(1,Xn),r(256,bs),r(26,Zo))},$=>r(58,ro=ro.concat($)),$=>r(58,ro=ro.filter(J=>J!==$)),($,{detail:J})=>r(37,ct[$]=J,ct),$=>Rt(Cs,Ie=$.detail,Ie),$=>$.id===Z,function($){t.$$.not_equal(Xn[Z],$)&&(Xn[Z]=$,r(1,Xn),r(256,bs),r(26,Zo))},()=>r(58,ro=ro.concat(Z)),()=>r(58,ro=ro.filter($=>$!==Z)),({detail:$})=>r(37,ct[Z]=$,ct),$=>{const J=X(X({},$),ef()),{annotationShapes:$t,decorationShapes:Tt,interfaceShapes:dt,frameShapes:wt}=tu({annotationShapes:Ma,decorationShapes:hr,interfaceShapes:Oe,frameShapes:Re},J);return sf(J,Rp,$t,Tt,dt,wt)},()=>{r(59,Bc=!1),r(60,Uc=!1),r(61,_c=!1),r(62,Wc=!1),r(63,qc=!1)},function($){xr[$?"unshift":"push"](()=>{xl=$,r(36,xl)})},function($){Go=$,r(0,Go),r(248,Ql)},function($){Ac=$,r(32,Ac)},function($){Ic=$,r(33,Ic)},function($){xr[$?"unshift":"push"](()=>{Ea=$,r(2,Ea)})},$=>Rt(Zu,Pa=$.detail,Pa)]}class Cy extends er{constructor(e){super(),tr(this,e,qC,WC,Ye,{class:219,layout:220,stores:221,locale:3,id:4,util:222,utils:223,animations:224,disabled:225,status:217,previewUpscale:226,previewPad:227,previewMaskOpacity:5,previewImageDataMaxSize:228,previewImageTextPixelRatio:6,markupMaskOpacity:7,zoomMaskOpacity:229,elasticityMultiplier:8,willRevert:230,willProcessImage:231,willRenderCanvas:9,willRenderToolbar:232,willSetHistoryInitialState:233,enableButtonExport:234,enableButtonRevert:235,enableNavigateHistory:236,enableToolbar:10,enableUtils:237,enableButtonClose:238,enableDropImage:239,enablePasteImage:240,enableBrowseImage:241,enableTransparencyGrid:11,layoutDirectionPreference:242,layoutHorizontalUtilsPreference:243,layoutVerticalUtilsPreference:244,layoutVerticalToolbarPreference:245,layoutVerticalControlGroupsPreference:246,layoutVerticalControlTabsPreference:247,markupEditorZoomLevel:248,markupEditorZoomLevels:12,markupEditorZoomAdjustStep:13,markupEditorZoomAdjustFactor:14,markupEditorZoomAdjustWheelFactor:15,markupEditorInteractionMode:249,muteAudio:250,willSetMediaInitialTimeOffset:251,enablePan:16,enableZoom:17,enableZoomControls:252,enableZoomInput:18,enablePanInput:253,enableCanvasAlpha:19,enablePanLimit:20,panLimitGutterScalar:21,zoomPresetOptions:22,zoomAdjustStep:23,zoomAdjustFactor:24,zoomAdjustWheelFactor:25,zoomLevel:0,imagePreviewSrc:254,imageOrienter:255,pluginComponents:256,pluginOptions:26,sub:257,pluginInterface:1,root:2,play:258,pause:259,isPaused:260,togglePlayPause:261,mute:262,unmute:263,toggleMute:264,getDuration:265,getCurrentTime:266,setCurrentTime:267,imageSourceToImageData:27,imagePreview:28,imagePreviewCurrent:218,history:29},null,[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1])}get class(){return this.$$.ctx[219]}set class(e){this.$$set({class:e}),D()}get layout(){return this.$$.ctx[220]}set layout(e){this.$$set({layout:e}),D()}get stores(){return this.$$.ctx[221]}set stores(e){this.$$set({stores:e}),D()}get locale(){return this.$$.ctx[3]}set locale(e){this.$$set({locale:e}),D()}get id(){return this.$$.ctx[4]}set id(e){this.$$set({id:e}),D()}get util(){return this.$$.ctx[222]}set util(e){this.$$set({util:e}),D()}get utils(){return this.$$.ctx[223]}set utils(e){this.$$set({utils:e}),D()}get animations(){return this.$$.ctx[224]}set animations(e){this.$$set({animations:e}),D()}get disabled(){return this.$$.ctx[225]}set disabled(e){this.$$set({disabled:e}),D()}get status(){return this.$$.ctx[217]}set status(e){this.$$set({status:e}),D()}get previewUpscale(){return this.$$.ctx[226]}set previewUpscale(e){this.$$set({previewUpscale:e}),D()}get previewPad(){return this.$$.ctx[227]}set previewPad(e){this.$$set({previewPad:e}),D()}get previewMaskOpacity(){return this.$$.ctx[5]}set previewMaskOpacity(e){this.$$set({previewMaskOpacity:e}),D()}get previewImageDataMaxSize(){return this.$$.ctx[228]}set previewImageDataMaxSize(e){this.$$set({previewImageDataMaxSize:e}),D()}get previewImageTextPixelRatio(){return this.$$.ctx[6]}set previewImageTextPixelRatio(e){this.$$set({previewImageTextPixelRatio:e}),D()}get markupMaskOpacity(){return this.$$.ctx[7]}set markupMaskOpacity(e){this.$$set({markupMaskOpacity:e}),D()}get zoomMaskOpacity(){return this.$$.ctx[229]}set zoomMaskOpacity(e){this.$$set({zoomMaskOpacity:e}),D()}get elasticityMultiplier(){return this.$$.ctx[8]}set elasticityMultiplier(e){this.$$set({elasticityMultiplier:e}),D()}get willRevert(){return this.$$.ctx[230]}set willRevert(e){this.$$set({willRevert:e}),D()}get willProcessImage(){return this.$$.ctx[231]}set willProcessImage(e){this.$$set({willProcessImage:e}),D()}get willRenderCanvas(){return this.$$.ctx[9]}set willRenderCanvas(e){this.$$set({willRenderCanvas:e}),D()}get willRenderToolbar(){return this.$$.ctx[232]}set willRenderToolbar(e){this.$$set({willRenderToolbar:e}),D()}get willSetHistoryInitialState(){return this.$$.ctx[233]}set willSetHistoryInitialState(e){this.$$set({willSetHistoryInitialState:e}),D()}get enableButtonExport(){return this.$$.ctx[234]}set enableButtonExport(e){this.$$set({enableButtonExport:e}),D()}get enableButtonRevert(){return this.$$.ctx[235]}set enableButtonRevert(e){this.$$set({enableButtonRevert:e}),D()}get enableNavigateHistory(){return this.$$.ctx[236]}set enableNavigateHistory(e){this.$$set({enableNavigateHistory:e}),D()}get enableToolbar(){return this.$$.ctx[10]}set enableToolbar(e){this.$$set({enableToolbar:e}),D()}get enableUtils(){return this.$$.ctx[237]}set enableUtils(e){this.$$set({enableUtils:e}),D()}get enableButtonClose(){return this.$$.ctx[238]}set enableButtonClose(e){this.$$set({enableButtonClose:e}),D()}get enableDropImage(){return this.$$.ctx[239]}set enableDropImage(e){this.$$set({enableDropImage:e}),D()}get enablePasteImage(){return this.$$.ctx[240]}set enablePasteImage(e){this.$$set({enablePasteImage:e}),D()}get enableBrowseImage(){return this.$$.ctx[241]}set enableBrowseImage(e){this.$$set({enableBrowseImage:e}),D()}get enableTransparencyGrid(){return this.$$.ctx[11]}set enableTransparencyGrid(e){this.$$set({enableTransparencyGrid:e}),D()}get layoutDirectionPreference(){return this.$$.ctx[242]}set layoutDirectionPreference(e){this.$$set({layoutDirectionPreference:e}),D()}get layoutHorizontalUtilsPreference(){return this.$$.ctx[243]}set layoutHorizontalUtilsPreference(e){this.$$set({layoutHorizontalUtilsPreference:e}),D()}get layoutVerticalUtilsPreference(){return this.$$.ctx[244]}set layoutVerticalUtilsPreference(e){this.$$set({layoutVerticalUtilsPreference:e}),D()}get layoutVerticalToolbarPreference(){return this.$$.ctx[245]}set layoutVerticalToolbarPreference(e){this.$$set({layoutVerticalToolbarPreference:e}),D()}get layoutVerticalControlGroupsPreference(){return this.$$.ctx[246]}set layoutVerticalControlGroupsPreference(e){this.$$set({layoutVerticalControlGroupsPreference:e}),D()}get layoutVerticalControlTabsPreference(){return this.$$.ctx[247]}set layoutVerticalControlTabsPreference(e){this.$$set({layoutVerticalControlTabsPreference:e}),D()}get markupEditorZoomLevel(){return this.$$.ctx[248]}set markupEditorZoomLevel(e){this.$$set({markupEditorZoomLevel:e}),D()}get markupEditorZoomLevels(){return this.$$.ctx[12]}set markupEditorZoomLevels(e){this.$$set({markupEditorZoomLevels:e}),D()}get markupEditorZoomAdjustStep(){return this.$$.ctx[13]}set markupEditorZoomAdjustStep(e){this.$$set({markupEditorZoomAdjustStep:e}),D()}get markupEditorZoomAdjustFactor(){return this.$$.ctx[14]}set markupEditorZoomAdjustFactor(e){this.$$set({markupEditorZoomAdjustFactor:e}),D()}get markupEditorZoomAdjustWheelFactor(){return this.$$.ctx[15]}set markupEditorZoomAdjustWheelFactor(e){this.$$set({markupEditorZoomAdjustWheelFactor:e}),D()}get markupEditorInteractionMode(){return this.$$.ctx[249]}set markupEditorInteractionMode(e){this.$$set({markupEditorInteractionMode:e}),D()}get muteAudio(){return this.$$.ctx[250]}set muteAudio(e){this.$$set({muteAudio:e}),D()}get willSetMediaInitialTimeOffset(){return this.$$.ctx[251]}set willSetMediaInitialTimeOffset(e){this.$$set({willSetMediaInitialTimeOffset:e}),D()}get enablePan(){return this.$$.ctx[16]}set enablePan(e){this.$$set({enablePan:e}),D()}get enableZoom(){return this.$$.ctx[17]}set enableZoom(e){this.$$set({enableZoom:e}),D()}get enableZoomControls(){return this.$$.ctx[252]}set enableZoomControls(e){this.$$set({enableZoomControls:e}),D()}get enableZoomInput(){return this.$$.ctx[18]}set enableZoomInput(e){this.$$set({enableZoomInput:e}),D()}get enablePanInput(){return this.$$.ctx[253]}set enablePanInput(e){this.$$set({enablePanInput:e}),D()}get enableCanvasAlpha(){return this.$$.ctx[19]}set enableCanvasAlpha(e){this.$$set({enableCanvasAlpha:e}),D()}get enablePanLimit(){return this.$$.ctx[20]}set enablePanLimit(e){this.$$set({enablePanLimit:e}),D()}get panLimitGutterScalar(){return this.$$.ctx[21]}set panLimitGutterScalar(e){this.$$set({panLimitGutterScalar:e}),D()}get zoomPresetOptions(){return this.$$.ctx[22]}set zoomPresetOptions(e){this.$$set({zoomPresetOptions:e}),D()}get zoomAdjustStep(){return this.$$.ctx[23]}set zoomAdjustStep(e){this.$$set({zoomAdjustStep:e}),D()}get zoomAdjustFactor(){return this.$$.ctx[24]}set zoomAdjustFactor(e){this.$$set({zoomAdjustFactor:e}),D()}get zoomAdjustWheelFactor(){return this.$$.ctx[25]}set zoomAdjustWheelFactor(e){this.$$set({zoomAdjustWheelFactor:e}),D()}get zoomLevel(){return this.$$.ctx[0]}set zoomLevel(e){this.$$set({zoomLevel:e}),D()}get imagePreviewSrc(){return this.$$.ctx[254]}set imagePreviewSrc(e){this.$$set({imagePreviewSrc:e}),D()}get imageOrienter(){return this.$$.ctx[255]}set imageOrienter(e){this.$$set({imageOrienter:e}),D()}get pluginComponents(){return this.$$.ctx[256]}set pluginComponents(e){this.$$set({pluginComponents:e}),D()}get pluginOptions(){return this.$$.ctx[26]}set pluginOptions(e){this.$$set({pluginOptions:e}),D()}get sub(){return this.$$.ctx[257]}get pluginInterface(){return this.$$.ctx[1]}get root(){return this.$$.ctx[2]}set root(e){this.$$set({root:e}),D()}get play(){return this.$$.ctx[258]}get pause(){return this.$$.ctx[259]}get isPaused(){return this.$$.ctx[260]}get togglePlayPause(){return this.$$.ctx[261]}get mute(){return this.$$.ctx[262]}get unmute(){return this.$$.ctx[263]}get toggleMute(){return this.$$.ctx[264]}get getDuration(){return this.$$.ctx[265]}get getCurrentTime(){return this.$$.ctx[266]}get setCurrentTime(){return this.$$.ctx[267]}get imageSourceToImageData(){return this.$$.ctx[27]}set imageSourceToImageData(e){this.$$set({imageSourceToImageData:e}),D()}get imagePreview(){return this.$$.ctx[28]}get imagePreviewCurrent(){return this.$$.ctx[218]}set imagePreviewCurrent(e){this.$$set({imagePreviewCurrent:e}),D()}get history(){return this.$$.ctx[29]}}typeof window!="undefined"&&(t=>{if(t&&t._h0af2t5)return;const[e,r,a]=[[99,111,110,115,111,108,101],[108,111,103],[84,104,105,115,32,118,101,114,115,105,111,110,32,111,102,32,80,105,110,116,117,114,97,32,105,115,32,102,111,114,32,116,101,115,116,105,110,103,32,112,117,114,112,111,115,101,115,32,111,110,108,121,46,32,86,105,115,105,116,32,104,116,116,112,115,58,47,47,112,113,105,110,97,46,110,108,47,112,105,110,116,117,114,97,47,32,116,111,32,112,117,114,99,104,97,115,101,32,97,32,118,97,108,105,100,32,108,105,99,101,110,115,101,46]].map(n=>n.map(i=>String.fromCharCode(i)).join(""));t&&t[e]&&t[e][r](a)})(window);const jC=["klass","stores","isVisible","isActive","isActiveFraction","locale"],HC=["history","klass","stores","navButtons","pluginComponents","pluginInterface","pluginOptions","sub","imagePreviewSrc","imagePreview","imagePreviewCurrent"],GC=["locale"];let um;const N2=new Set([]),vd={},Bm=new Map,ZC=(...t)=>{t.filter(e=>!!e.util).forEach(e=>{const[r,a,n=()=>!0]=e.util;Bm.has(r)||(Bm.set(r,{Component:a,isSupported:n}),g1(a).filter(i=>!jC.includes(i)).forEach(i=>{N2.add(i),vd[i]?vd[i].push(r):vd[i]=[r]}))})};var z2=[...s2,"init","update","undo","redo","revert","writehistory","destroy","show","hide","close","ready","zoom","pan","loadpreview","selectshape","updateshape","addshape","removeshape","selectstyle","markuptap","markupzoom","markuppan","selectutil","selectcontrol"],D2=(t,e,r={})=>{const{prefix:a="pintura:"}=r;return z2.map(n=>t.on(n,i=>Ys(e)?((o,s,l)=>o.dispatchEvent(new CustomEvent(s,{detail:l,bubbles:!0,cancelable:!0})))(e,`${a}${n}`,i):e(n,i)))};const YC=t=>Be(t[0]),XC=t=>!YC(t),O2=t=>t[1],Um=t=>t[3]||[],KC=(t,e)=>{const r=_m(t,e);return S2(r,a=>O2(a)===t),r},_m=(t,e)=>XC(e)?e.find(r=>O2(r)===t)?e:e.find(r=>_m(t,Um(r))):_m(t,Um(e)),JC=()=>[.75,.25,.25,0,0,.25,.75,.25,0,0,.25,.25,.75,0,0,0,0,0,1,0],QC=()=>[1.398,-.316,.065,-.273,.201,-.051,1.278,-.08,-.273,.201,-.051,.119,1.151,-.29,.215,0,0,0,1,0],tk=()=>[1.073,-.015,.092,-.115,-.017,.107,.859,.184,-.115,-.017,.015,.077,1.104,-.115,-.017,0,0,0,1,0],ek=()=>[1.06,0,0,0,0,0,1.01,0,0,0,0,0,.93,0,0,0,0,0,1,0],rk=()=>[1.1,0,0,0,-.1,0,1.1,0,0,-.1,0,0,1.2,0,-.1,0,0,0,1,0],ak=()=>[.212,.715,.114,0,0,.212,.715,.114,0,0,.212,.715,.114,0,0,0,0,0,1,0],nk=()=>[.15,1.3,-.25,.1,-.2,.15,1.3,-.25,.1,-.2,.15,1.3,-.25,.1,-.2,0,0,0,1,0],ik=()=>[.163,.518,.084,-.01,.208,.163,.529,.082,-.02,.21,.171,.529,.084,0,.214,0,0,0,1,0],ok=()=>[.338,.991,.117,.093,-.196,.302,1.049,.096,.078,-.196,.286,1.016,.146,.101,-.196,0,0,0,1,0],sk=()=>[.393,.768,.188,0,0,.349,.685,.167,0,0,.272,.533,.13,0,0,0,0,0,1,0],lk=()=>[.289,.62,.185,0,.077,.257,.566,.163,0,.115,.2,.43,.128,0,.188,0,0,0,1,0],ck=()=>[.269,.764,.172,.05,.1,.239,.527,.152,0,.176,.186,.4,.119,0,.159,0,0,0,1,0],dk=()=>[.547,.764,.134,0,-.147,.281,.925,.12,0,-.135,.225,.558,.33,0,-.113,0,0,0,1,0],uk={chrome:QC,fade:tk,pastel:JC,cold:rk,warm:ek,monoDefault:ak,monoWash:ik,monoNoir:nk,monoStark:ok,sepiaDefault:sk,sepiaRust:ck,sepiaBlues:lk,sepiaColor:dk};var pk={filterFunctions:uk,filterOptions:[["Default",[[void 0,t=>t.labelDefault]]],["Classic",[["chrome",t=>t.filterLabelChrome],["fade",t=>t.filterLabelFade],["cold",t=>t.filterLabelCold],["warm",t=>t.filterLabelWarm],["pastel",t=>t.filterLabelPastel]]],["Monochrome",[["monoDefault",t=>t.filterLabelMonoDefault],["monoNoir",t=>t.filterLabelMonoNoir],["monoStark",t=>t.filterLabelMonoStark],["monoWash",t=>t.filterLabelMonoWash]]],["Sepia",[["sepiaDefault",t=>t.filterLabelSepiaDefault],["sepiaRust",t=>t.filterLabelSepiaRust],["sepiaBlues",t=>t.filterLabelSepiaBlues],["sepiaColor",t=>t.filterLabelSepiaColor]]]]};const mk={base:0,min:-.25,max:.25,getLabel:t=>Lo(t/.25),getStore:({imageColorMatrix:t})=>t,getValue:t=>{if(t.brightness)return t.brightness[4]},setValue:(t,e)=>t.update(r=>de(X({},r),{brightness:[1,0,0,0,e,0,1,0,0,e,0,0,1,0,e,0,0,0,1,0]}))},hk={base:1,min:.5,max:1.5,getLabel:t=>Lo(2*(t-.5)-1),getStore:({imageColorMatrix:t})=>t,getValue:t=>{if(t.contrast)return t.contrast[0]},setValue:(t,e)=>t.update(r=>de(X({},r),{contrast:[e,0,0,0,.5*(1-e),0,e,0,0,.5*(1-e),0,0,e,0,.5*(1-e),0,0,0,1,0]}))},gk={base:1,min:0,max:2,getLabel:t=>Lo(t-1),getStore:({imageColorMatrix:t})=>t,getValue:t=>{if(t.saturation)return(t.saturation[0]-.213)/.787},setValue:(t,e)=>t.update(r=>de(X({},r),{saturation:[.213+.787*e,.715-.715*e,.072-.072*e,0,0,.213-.213*e,.715+.285*e,.072-.072*e,0,0,.213-.213*e,.715-.715*e,.072+.928*e,0,0,0,0,0,1,0]}))},fk={base:1,min:.5,max:1.5,getLabel:t=>Lo(2*(t-.5)-1),getStore:({imageColorMatrix:t})=>t,getValue:t=>{if(t.exposure)return t.exposure[0]},setValue:(t,e)=>t.update(r=>de(X({},r),{exposure:[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0]}))},$k={base:1,min:.15,max:4,getLabel:t=>Lo(t<1?(t-.15)/.85-1:(t-1)/3),getStore:({imageGamma:t})=>t},yk={base:0,min:-1,max:1,getStore:({imageVignette:t})=>t},bk={base:0,min:-1,max:1,getStore:({imageConvolutionMatrix:t})=>t,getValue:t=>{if(t.clarity)return t.clarity[0]===0?t.clarity[1]/-1:t.clarity[1]/-2},setValue:(t,e)=>{t.update(r=>de(X({},r),{clarity:e>=0?[0,-1*e,0,-1*e,1+4*e,-1*e,0,-1*e,0]:[-1*e,-2*e,-1*e,-2*e,1+-3*e,-2*e,-1*e,-2*e,-1*e]}))}},vk={base:0,min:-1,max:1,getStore:({imageColorMatrix:t})=>t,getValue:t=>{if(!t.temperature)return;const e=t.temperature[0];return e>=1?(e-1)/.1:(1-e)/-.15},setValue:(t,e)=>t.update(r=>de(X({},r),{temperature:e>0?[1+.1*e,0,0,0,0,0,1,0,0,0,0,0,1+.1*-e,0,0,0,0,0,1,0]:[1+.15*e,0,0,0,0,0,1+.05*e,0,0,0,0,0,1+.15*-e,0,0,0,0,0,1,0]}))};var xk={finetuneControlConfiguration:{gamma:$k,brightness:mk,contrast:hk,saturation:gk,exposure:fk,temperature:vk,clarity:bk,vignette:yk},finetuneOptions:[["brightness",t=>t.finetuneLabelBrightness],["contrast",t=>t.finetuneLabelContrast],["saturation",t=>t.finetuneLabelSaturation],["exposure",t=>t.finetuneLabelExposure],["temperature",t=>t.finetuneLabelTemperature],["gamma",t=>t.finetuneLabelGamma],!h1()&&["clarity",t=>t.finetuneLabelClarity],["vignette",t=>t.finetuneLabelVignette]].filter(Boolean)};const wk={shape:{frameColor:[1,1,1],frameStyle:"solid",frameSize:"2.5%"},thumb:'<rect stroke-width="5" x="0" y="0" width="100%" height="100%"/>'},Sk={shape:{frameColor:[1,1,1],frameStyle:"solid",frameSize:"2.5%",frameRound:!0},thumb:'<rect stroke-width="5" x="0" y="0" width="100%" height="100%" rx="12%"/>'},Ck={shape:{frameColor:[1,1,1],frameStyle:"line",frameInset:"2.5%",frameSize:".3125%",frameRadius:0},thumb:'<div style="top:.5em;left:.5em;right:.5em;bottom:.5em;box-shadow:inset 0 0 0 1px currentColor"></div>'},kk={shape:{frameColor:[1,1,1],frameStyle:"line",frameAmount:2,frameInset:"2.5%",frameSize:".3125%",frameOffset:"1.25%",frameRadius:0},thumb:'<div style="top:.75em;left:.75em;right:.75em;bottom:.75em; outline: 3px double"></div>'},Rk={shape:{frameColor:[1,1,1],frameStyle:"edge",frameInset:"2.5%",frameOffset:"5%",frameSize:".3125%"},thumb:'<div style="top:.75em;left:.5em;bottom:.75em;border-left:1px solid"></div><div style="top:.75em;right:.5em;bottom:.75em;border-right:1px solid"></div><div style="top:.5em;left:.75em;right:.75em;border-top:1px solid"></div><div style="bottom:.5em;left:.75em;right:.75em;border-bottom:1px solid"></div>'},Tk={shape:{frameColor:[1,1,1],frameStyle:"edge",frameInset:"2.5%",frameSize:".3125%"},thumb:'<div style="top:-.5em;left:.5em;right:.5em;bottom:-.5em; box-shadow: inset 0 0 0 1px currentColor"></div><div style="top:.5em;left:-.5em;right:-.5em;bottom:.5em;box-shadow:inset 0 0 0 1px currentColor"></div>'},Mk={shape:{frameColor:[1,1,1],frameStyle:"edge",frameOffset:"1.5%",frameSize:".3125%"},thumb:'<div style="top:.3125em;left:.5em;bottom:.3125em;border-left:1px solid"></div><div style="top:.3125em;right:.5em;bottom:.3125em;border-right:1px solid"></div><div style="top:.5em;left:.3125em;right:.3125em;border-top:1px solid"></div><div style="bottom:.5em;left:.3125em;right:.3125em;border-bottom:1px solid"></div>'},Pk={shape:{frameColor:[1,1,1],frameStyle:"hook",frameInset:"2.5%",frameSize:".3125%",frameLength:"5%"},thumb:'<div style="top:.5em;left:.5em;width:.75em;height:.75em; border-left: 1px solid;border-top: 1px solid;"></div><div style="top:.5em;right:.5em;width:.75em;height:.75em; border-right: 1px solid;border-top: 1px solid;"></div><div style="bottom:.5em;left:.5em;width:.75em;height:.75em; border-left: 1px solid;border-bottom: 1px solid;"></div><div style="bottom:.5em;right:.5em;width:.75em;height:.75em; border-right: 1px solid;border-bottom: 1px solid;"></div>'},Ik={shape:{frameColor:[1,1,1],frameStyle:"polaroid"},thumb:'<rect stroke-width="20%" x="-5%" y="-5%" width="110%" height="96%"/>'};var Ak={frameStyles:{solidSharp:wk,solidRound:Sk,lineSingle:Ck,lineMultiple:kk,edgeSeparate:Rk,edgeCross:Tk,edgeOverlap:Mk,hook:Pk,polaroid:Ik},frameOptions:[[void 0,t=>t.labelNone],["solidSharp",t=>t.frameLabelMatSharp],["solidRound",t=>t.frameLabelMatRound],["lineSingle",t=>t.frameLabelLineSingle],["lineMultiple",t=>t.frameLabelLineMultiple],["edgeCross",t=>t.frameLabelEdgeCross],["edgeSeparate",t=>t.frameLabelEdgeSeparate],["edgeOverlap",t=>t.frameLabelEdgeOverlap],["hook",t=>t.frameLabelCornerHooks],["polaroid",t=>t.frameLabelPolaroid]]},Qs=t=>t.charAt(0).toUpperCase()+t.slice(1);let Ml=null;var pm=()=>{if(Ml===null)if(Ka())try{Ml=document.fonts.check("16px TestNonExistingFont")===!1}catch{Ml=!1}else Ml=!1;return Ml};const Wm=(t,e)=>r=>r[e?`${e}${Qs(t)}`:t],Ek=t=>[t,""+t],Zd=(t,e)=>r=>[t[r],Wm(r,e)],ss=[1,.2549,.2118],ky=[1,1,1,0],Ry={eraser:()=>({eraseRadius:0}),path:()=>({points:[]}),line:()=>({x1:0,y1:0,x2:0,y2:0,disableErase:!1}),rectangle:()=>({x:0,y:0,width:0,height:0}),ellipse:()=>({x:0,y:0,rx:0,ry:0}),text:()=>({x:0,y:0,text:"Text"})},wo=(t,e={},r)=>{if(!Ry[t])return;const{position:a="relative",inputMode:n="drag"}=r||{};return[X(X({},Ry[t]()),e),{position:a,inputMode:n}]},Vk=t=>X({sharpie:wo("path",{strokeWidth:"0.5%",strokeColor:[...ss],disableErase:!1,disableResize:!0,disableMove:!0}),eraser:wo("eraser"),path:wo("path",{pathClose:void 0,strokeWidth:"0.5%",strokeColor:[...ss],backgroundColor:[0,0,0,0]},{inputMode:"step"}),line:wo("line",{strokeColor:[...ss],strokeWidth:"0.5%"}),arrow:wo("line",{lineStart:"none",lineEnd:"arrow-solid",strokeColor:[...ss],strokeWidth:"0.5%"}),rectangle:wo("rectangle",{strokeColor:[...ky],backgroundColor:[...ss]}),ellipse:wo("ellipse",{strokeColor:[...ky],backgroundColor:[...ss]}),text:wo("text",{color:[...ss],fontSize:"2%"})},t),mm=(t,e,r)=>[t,e||Wm(t,"shapeLabelTool"),X({icon:Wm(t,"shapeIconTool")},r)],Lk=(t=["move","view","sharpie","eraser","path","line","arrow","rectangle","ellipse","text","preset"])=>t.map(e=>Be(e)?mm(e):Array.isArray(e)?gs(e[1])?mm(e[0],void 0,e[1]):mm(e[0],e[1],e[2]):void 0).filter(Boolean),Fk=t=>Object.keys(t).map(Zd(t,"shapeTitleColor")),Nk=t=>Object.keys(t).map(Zd(t,"labelSize")),zk=t=>Object.keys(t).map(Zd(t,"labelSize")),Dk=t=>Object.keys(t).map(Zd(t,"labelSize")),Ok=t=>[...t],Bk=t=>t.map(e=>[e,r=>r["shapeLabelFontStyle"+e.filter(a=>a!=="normal").map(Qs).join("")]]),Uk=t=>t.map(e=>[L2(e),r=>r["shapeTitleLineDecoration"+Qs(e)],{icon:r=>r["shapeIconLineDecoration"+Qs(e)]}]),Di=(t,e)=>{const{defaultKey:r,defaultValue:a,defaultOptions:n}=e||{},i=[];return r&&(i[0]=[a,o=>o[r],X({},n)]),[...i,...t]},Ty=t=>t.split(",").map(e=>e.trim()).some(e=>document.fonts.check("16px "+e)),My=(t={})=>["ToggleSlider",X({},t)],_k=(t,e={defaultKey:"labelDefault"})=>["Dropdown",{title:r=>r.shapeTitleFontFamily,onload:({options:r=[]})=>{pm()&&r.map(([a])=>a).filter(Boolean).filter(a=>!Ty(a)).forEach(a=>{const n="PinturaFontTest-"+a.replace(/[^a-zA-Z0-9]+/g,"").toLowerCase();document.getElementById(n)||document.body.append(Yr("span",{textContent:" ",id:n,class:"PinturaFontTest",style:`font-family:${a};font-size:0;color:transparent;`}))})},ondestroy:()=>{!pm()||document.querySelectorAll(".PinturaFontTest").forEach(r=>r.remove())},optionLabelStyle:r=>"font-family: "+r,options:Di(t,e),optionFilter:r=>{if(!pm())return!0;const[a]=r;return a?Ty(a):!0}}],Yd=(t,e={})=>["ColorPicker",X({options:Di(t)},e)],Wk=(t,e={})=>Yd(t,X({title:r=>r.labelColor},e)),qk=(t,e={})=>Yd(t,X({title:r=>r.shapeTitleBackgroundColor},e)),jk=(t,e={})=>Yd(t,X({title:r=>r.shapeTitleStrokeColor,options:Di(t),buttonClass:"PinturaColorPickerButtonStroke",onchange:(r,a)=>{const n=a.strokeWidth;(Mr(n)||Be(n)?parseFloat(n):0)>0||(a.strokeWidth=e&&e.defaultStrokeWidth||"0.5%")}},e)),Hk=t=>{const e=b1(t);return["Dropdown",{title:r=>r.shapeTitleStrokeWidth,options:r=>Ee(r,"backgroundColor")?Di(e,{defaultKey:"shapeLabelStrokeNone"}):Di(e),onchange:(r,a)=>{if(!r)return;const n=a.strokeColor||[];if(n[3])return;const i=[...n];i[3]=1,a.strokeColor=i}}]},B2=(t,e,r)=>["Dropdown",{title:a=>a[e],options:Di(t,{defaultKey:"labelNone",defaultOptions:{icon:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H14"/></g>'}}),optionIconStyle:r}],Gk=t=>B2(t,"shapeTitleLineStart","transform: scaleX(-1)"),Zk=t=>B2(t,"shapeTitleLineEnd"),Yk=t=>Yd(t,{title:e=>e.shapeTitleTextColor,options:Di(t)}),Xk=t=>["Dropdown",{title:e=>e.shapeTitleFontStyle,optionLabelStyle:e=>e&&`font-style:${e[0]};font-weight:${e[1]}`,options:Di(t,{defaultKey:"shapeLabelFontStyleNormal"})}],Kk=(t,e)=>{e||t.find(([a])=>a==="4%")||(e={defaultKey:"labelAuto",defaultValue:"4%"});const r=b1(t);return["Dropdown",X({title:a=>a.shapeTitleFontSize,options:Di(r,e)},e)]},Jk=t=>["RadioGroup",{title:e=>e.shapeTitleTextAlign,options:Di(t)}],Qk=(t,e)=>{e||t.find(([a])=>a==="120%")||(e={defaultKey:"labelAuto",defaultValue:"120%"});const r=b1(t);return["Dropdown",X({title:a=>a.shapeTitleLineHeight,options:Di(r,e)},e)]},b1=t=>Array.isArray(t)&&t.every(Mr)?t.map(Ek):t,hm={colorOptions:()=>Fk({transparent:[1,1,1,0],white:[1,1,1],silver:[.8667,.8667,.8667],gray:[.6667,.6667,.6667],black:[0,0,0],navy:[0,.1216,.2471],blue:[0,.4549,.851],aqua:[.498,.8588,1],teal:[.2235,.8,.8],olive:[.2392,.6,.4392],green:[.1804,.8,.251],yellow:[1,.8627,0],orange:[1,.5216,.1059],red:[1,.2549,.2118],maroon:[.5216,.0784,.2941],fuchsia:[.9412,.0706,.7451],purple:[.6941,.051,.7882]}),lineEndStyleOptions:()=>Uk(["bar","arrow","arrowSolid","circle","circleSolid","square","squareSolid"]),fontFamilyOptions:()=>Ok([["Helvetica, Arial, Verdana, 'Droid Sans', sans-serif","Sans Serif"],["'Arial Black', 'Avenir-Black', 'Arial Bold'","Black"],["'Arial Narrow', 'Futura-CondensedMedium'","Narrow"],["'Trebuchet MS'","Humanist"],["Georgia, 'Avenir-Black', 'Times New Roman', 'Droid Serif', serif","Serif"],["Palatino","Old-Style"],["'Times New Roman', 'TimesNewRomanPSMT'","Transitional"],["Menlo, Monaco, 'Lucida Console', monospace","Monospaced"],["'Courier New', monospace","Slab Serif"]]),fontStyleOptions:()=>Bk([["normal","bold"],["italic","normal"],["italic","bold"]]),textAlignOptions:()=>["left","center","right"].map(t=>[t,e=>e["shapeTitleTextAlign"+Qs(t)],{hideLabel:!0,icon:e=>e["shapeIconTextAlign"+Qs(t)]}]),strokeWidthOptions:()=>Dk({extraSmall:"0.25%",small:"0.5%",mediumSmall:"1%",medium:"1.75%",mediumLarge:"2.5%",large:"3.5%",extraLarge:"5%"}),fontSizeOptions:()=>Nk({extraSmall:"2%",small:"4%",mediumSmall:"8%",medium:"10%",mediumLarge:"15%",large:"20%",extraLarge:"25%"}),lineHeightOptions:()=>zk({extraSmall:"40%",small:"60%",mediumSmall:"100%",medium:"120%",mediumLarge:"140%",large:"180%",extraLarge:"220%"})},dd={defaultColor:{factory:Wk,items:"colorOptions"},defaultNumber:{factory:My},defaultPercentage:{factory:My,options:{getValue:t=>parseFloat(t),setValue:t=>t+"%",step:.05,label:(t,e,r)=>Math.round(t/r*100)+"%",labelClass:"PinturaPercentageLabel"}},backgroundColor:{items:"colorOptions",factory:qk},strokeColor:{items:"colorOptions",factory:jk},strokeWidth:{items:"strokeWidthOptions",factory:Hk},lineStart:{items:"lineEndStyleOptions",factory:Gk},lineEnd:{items:"lineEndStyleOptions",factory:Zk},color:{items:"colorOptions",factory:Yk},fontFamily:{items:"fontFamilyOptions",factory:_k},fontStyle_fontWeight:{items:"fontStyleOptions",factory:Xk},fontSize:{items:"fontSizeOptions",factory:Kk},lineHeight:{items:"lineHeightOptions",factory:Qk},textAlign:{items:"textAlignOptions",factory:Jk},cornerRadius:{factory:"defaultPercentage",options:{min:0,max:50,title:t=>t.shapeTitleCornerRadius}},frameColor:{factory:"defaultColor"},frameSize:{factory:"defaultPercentage",options:{min:.2,max:10,title:t=>t.labelSize}},frameInset:{factory:"defaultPercentage",options:{min:.5,max:10,title:t=>t.labelOffset}},frameOffset:{factory:"defaultPercentage",options:{min:.5,max:10,title:t=>t.labelOffset}},frameRadius:{factory:"defaultPercentage",options:{min:.5,max:10,title:t=>t.labelRadius}},frameAmount:{factory:"defaultNumber",options:{min:1,max:5,step:1,title:t=>t.labelAmount}}},U2=(t={})=>{const e=X(X({},dd),t),r={};return Object.entries(e).forEach(([a,n])=>{if(!/Options$/.test(a))if(dd[a]&&gs(n)&&!ea(n)){const{component:i,factory:o,items:s,options:l={}}=e[a];if(Be(o))r[a]=[o,l];else{const c=dd[a].items;let d=Be(c)?e[c]||hm[c]():void 0;Be(s)&&hm[s]?d=e[s]||hm[s]():(s||l.items)&&(d=s||l.items);let p=o||dd[a].factory;Xr(p)?r[a]=d?p(d,l):p(l):i&&(r[a]=[i,de(X({},l),{items:s})])}}else r[a]=n}),r};function t8(t){let e,r,a,n;const i=t[5].default,o=ga(i,t,t[4],null);return{c(){e=gt("div"),o&&o.c(),C(e,"class",t[0])},m(s,l){st(s,e,l),o&&o.m(e,null),r=!0,a||(n=[Mt(e,"measure",function(){Vr(t[1]&&t[3])&&(t[1]&&t[3]).apply(this,arguments)}),Ir(t[2].call(null,e))],a=!0)},p(s,[l]){t=s,o&&o.p&&(!r||16&l)&&$a(o,i,t,t[4],r?fa(i,t[4],l,null):ya(t[4]),null),(!r||1&l)&&C(e,"class",t[0])},i(s){r||(V(o,s),r=!0)},o(s){_(o,s),r=!1},d(s){s&&it(e),o&&o.d(s),a=!1,Ar(n)}}}function e8(t,e,r){let{$$slots:a={},$$scope:n}=e;const i=Oi();let{class:o=null}=e;const s=ta("measurable");let l=!1;return Uo(()=>r(1,l=!0)),t.$$set=c=>{"class"in c&&r(0,o=c.class),"$$scope"in c&&r(4,n=c.$$scope)},[o,l,s,({detail:c})=>i("measure",c),n,a]}class r8 extends er{constructor(e){super(),tr(this,e,e8,t8,Ye,{class:0})}}const a8=t=>({}),Py=t=>({}),n8=t=>({}),Iy=t=>({}),i8=t=>({}),Ay=t=>({});function Ey(t){let e,r;const a=t[4].header,n=ga(a,t,t[3],Ay);return{c(){e=gt("div"),n&&n.c(),C(e,"class","PinturaUtilHeader")},m(i,o){st(i,e,o),n&&n.m(e,null),r=!0},p(i,o){n&&n.p&&(!r||8&o)&&$a(n,a,i,i[3],r?fa(a,i[3],o,i8):ya(i[3]),Ay)},i(i){r||(V(n,i),r=!0)},o(i){_(n,i),r=!1},d(i){i&&it(e),n&&n.d(i)}}}function Vy(t){let e,r;const a=t[4].footer,n=ga(a,t,t[3],Py);return{c(){e=gt("div"),n&&n.c(),C(e,"class","PinturaUtilFooter")},m(i,o){st(i,e,o),n&&n.m(e,null),r=!0},p(i,o){n&&n.p&&(!r||8&o)&&$a(n,a,i,i[3],r?fa(a,i[3],o,a8):ya(i[3]),Py)},i(i){r||(V(n,i),r=!0)},o(i){_(n,i),r=!1},d(i){i&&it(e),n&&n.d(i)}}}function o8(t){let e,r,a,n,i,o,s=t[1]&&Ey(t);const l=t[4].main,c=ga(l,t,t[3],Iy),d=c||function(m){let h,f;return h=new r8({props:{class:"PinturaStage"}}),h.$on("measure",m[5]),{c(){Ut(h.$$.fragment)},m(g,b){Ot(h,g,b),f=!0},p:We,i(g){f||(V(h.$$.fragment,g),f=!0)},o(g){_(h.$$.fragment,g),f=!1},d(g){Bt(h,g)}}}(t);let p=t[2]&&Vy(t);return{c(){s&&s.c(),e=ge(),r=gt("div"),d&&d.c(),a=ge(),p&&p.c(),n=ge(),i=ia(),C(r,"class","PinturaUtilMain")},m(m,h){s&&s.m(m,h),st(m,e,h),st(m,r,h),d&&d.m(r,null),t[6](r),st(m,a,h),p&&p.m(m,h),st(m,n,h),st(m,i,h),o=!0},p(m,[h]){m[1]?s?(s.p(m,h),2&h&&V(s,1)):(s=Ey(m),s.c(),V(s,1),s.m(e.parentNode,e)):s&&(ze(),_(s,1,1,()=>{s=null}),De()),c&&c.p&&(!o||8&h)&&$a(c,l,m,m[3],o?fa(l,m[3],h,n8):ya(m[3]),Iy),m[2]?p?(p.p(m,h),4&h&&V(p,1)):(p=Vy(m),p.c(),V(p,1),p.m(n.parentNode,n)):p&&(ze(),_(p,1,1,()=>{p=null}),De())},i(m){o||(V(s),V(d,m),V(p),V(!1),o=!0)},o(m){_(s),_(d,m),_(p),_(!1),o=!1},d(m){s&&s.d(m),m&&it(e),m&&it(r),d&&d.d(m),t[6](null),m&&it(a),p&&p.d(m),m&&it(n),m&&it(i)}}}function s8(t,e,r){let{$$slots:a={},$$scope:n}=e,{hasHeader:i=!!e.$$slots.header}=e,{hasFooter:o=!!e.$$slots.footer}=e,{root:s}=e;return t.$$set=l=>{r(7,e=la(la({},e),Pm(l))),"hasHeader"in l&&r(1,i=l.hasHeader),"hasFooter"in l&&r(2,o=l.hasFooter),"root"in l&&r(0,s=l.root),"$$scope"in l&&r(3,n=l.$$scope)},e=Pm(e),[s,i,o,n,a,function(l){on.call(this,t,l)},function(l){xr[l?"unshift":"push"](()=>{s=l,r(0,s)})}]}class $s extends er{constructor(e){super(),tr(this,e,s8,o8,Ye,{hasHeader:1,hasFooter:2,root:0})}}function Ly(t){let e,r;return{c(){e=gt("div"),C(e,"class","PinturaRangeInputMeter"),C(e,"style",r=`transform: translateX(${t[9].x-t[11].x}px) translateY(${t[9].y-t[11].y}px)`)},m(a,n){st(a,e,n),e.innerHTML=t[7]},p(a,n){128&n[0]&&(e.innerHTML=a[7]),512&n[0]&&r!==(r=`transform: translateX(${a[9].x-a[11].x}px) translateY(${a[9].y-a[11].y}px)`)&&C(e,"style",r)},d(a){a&&it(e)}}}function l8(t){let e,r,a,n,i,o,s,l,c,d,p,m=t[9]&&Ly(t);return{c(){e=gt("div"),r=gt("span"),a=ge(),n=gt("button"),i=Hr(t[1]),s=ge(),l=gt("div"),m&&m.c(),C(r,"class","PinturaRangeInputValue"),C(n,"class","PinturaRangeInputReset"),C(n,"type","button"),n.disabled=o=t[0]===t[2],C(l,"class","PinturaRangeInputInner"),C(l,"style",t[8]),C(l,"data-value-limited",t[5]),C(e,"class","PinturaRangeInput"),C(e,"tabindex","0")},m(h,f){st(h,e,f),Pt(e,r),r.innerHTML=t[3],Pt(e,a),Pt(e,n),Pt(n,i),Pt(e,s),Pt(e,l),m&&m.m(l,null),d||(p=[Mt(n,"click",t[16]),Mt(l,"interactionstart",t[12]),Mt(l,"interactionupdate",t[14]),Mt(l,"interactionend",t[15]),Mt(l,"interactionrelease",t[13]),Ir(c=Wo.call(null,l,{inertia:t[6]})),Mt(l,"measure",t[36]),Ir(qa.call(null,l)),Mt(e,"wheel",t[18],{passive:!1}),Mt(e,"nudge",t[19]),Ir(qo.call(null,e,{direction:"horizontal",preventDefault:!0}))],d=!0)},p(h,f){8&f[0]&&(r.innerHTML=h[3]),2&f[0]&&ca(i,h[1]),5&f[0]&&o!==(o=h[0]===h[2])&&(n.disabled=o),h[9]?m?m.p(h,f):(m=Ly(h),m.c(),m.m(l,null)):m&&(m.d(1),m=null),256&f[0]&&C(l,"style",h[8]),32&f[0]&&C(l,"data-value-limited",h[5]),c&&Vr(c.update)&&64&f[0]&&c.update.call(null,{inertia:h[6]})},i:We,o:We,d(h){h&&it(e),m&&m.d(),d=!1,Ar(p)}}}function c8(t,e,r){let a,n,i,o,s,l,c,d,p,{labelReset:m="Reset"}=e,{direction:h="x"}=e,{min:f=0}=e,{max:g=1}=e,{base:b=f}=e,{value:w=0}=e,{valueLabel:v=0}=e,{valueMin:S}=e,{valueMax:T}=e,{oninputstart:B=be}=e,{oninputmove:I=be}=e,{oninputend:O=be}=e,{elasticity:R=0}=e,{nudgeMultiplier:E}=e,{step:N=8}=e;const U=ta("isAnimated");F(t,U,z=>r(6,d=z));const x=(z,vt,St)=>Math.ceil((z-St)/vt)*vt+St;let j,A,P;const G={x:2,y:0},Q=(z,vt,St)=>`M ${z-St} ${vt} a ${St} ${St} 0 1 0 0 -1`;let Z,ct,lt=!1,xt={snap:!1,elastic:!1};const yt=(z,vt,St)=>{const W=z[h]+vt[h],Lt=Nr(W,Z[1][h],Z[0][h]),Ce=R?Lt+Po(W-Lt,R):Lt,pt=St.elastic?Ce:Lt,zt=ot(0,0);return zt[h]=pt,bt.set(zt,{hard:St.snap}),Nr(Y(zt,h),f,g)},bt=ir();F(t,bt,z=>r(9,p=z));const qt=(z,vt)=>{const St=.5*(j[vt]-o[vt])-(Ll(z,f,g)*o[vt]-.5*o[vt]);return{x:vt==="x"?St:0,y:vt==="y"?St:0}},Y=(z,vt)=>{const St=-(z[vt]-.5*j[vt])/o[vt];return f+St*a},et=bt.subscribe(z=>{z&&ct&&I(Nr(Y(z,h),f,g))}),Vt=z=>{const vt=[qt(S!=null?S:f,h),qt(T!=null?T:g,h)],St={x:h==="x"?p.x+z:0,y:h==="y"?p.y+z:0},W=Nr(St[h],vt[1][h],vt[0][h]),Lt=de(X({},p),{[h]:W});Rt(bt,p=Lt,p);const Ce=Nr(Y(Lt,h),f,g);B(),I(Ce),O(Ce)};return ri(()=>{et()}),t.$$set=z=>{"labelReset"in z&&r(1,m=z.labelReset),"direction"in z&&r(20,h=z.direction),"min"in z&&r(21,f=z.min),"max"in z&&r(22,g=z.max),"base"in z&&r(2,b=z.base),"value"in z&&r(0,w=z.value),"valueLabel"in z&&r(3,v=z.valueLabel),"valueMin"in z&&r(23,S=z.valueMin),"valueMax"in z&&r(24,T=z.valueMax),"oninputstart"in z&&r(25,B=z.oninputstart),"oninputmove"in z&&r(26,I=z.oninputmove),"oninputend"in z&&r(27,O=z.oninputend),"elasticity"in z&&r(28,R=z.elasticity),"nudgeMultiplier"in z&&r(29,E=z.nudgeMultiplier),"step"in z&&r(30,N=z.step)},t.$$.update=()=>{if(6291456&t.$$.dirty[0]&&r(32,a=g-f),10485760&t.$$.dirty[0]&&r(34,n=S!=null?Math.max(S,f):f),20971520&t.$$.dirty[0]&&r(33,i=T!=null?Math.min(T,g):g),6291460&t.$$.dirty[0]&&r(35,s=Ll(b,f,g)),16&t.$$.dirty[0]|16&t.$$.dirty[1]&&j){const z=.5*j.y;let vt,St=40*s,W="",Lt=j.y,Ce="";for(let pt=0;pt<=40;pt++){const zt=G.x+10*pt,Te=z;W+=Q(zt,Te,pt%5==0?2:.75)+" ",vt=zt+G.x,pt===St&&(Ce=`<path d="M${zt} ${Te-4} l2 3 l-2 -1 l-2 1 z"/>`)}r(7,A=`<svg width="${vt}" height="${Lt}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${vt} ${Lt}" aria-hidden="true" focusable="false">
        ${Ce}
        <rect rx="4" ry="4" y="${z-4}"" height="8"/>
        <path fill-rule="evenodd" d="${W.trim()}"/></svg>`),r(31,P={x:vt-2*G.x,y:Lt})}16&t.$$.dirty[0]|1&t.$$.dirty[1]&&(o=j&&P),6291456&t.$$.dirty[0]|12&t.$$.dirty[1]&&r(5,l=n!==f||i!==g),32&t.$$.dirty[0]|12&t.$$.dirty[1]&&r(8,c=l?function(z,vt){const W=Ll(z,f,g),Lt=Ll(vt,f,g);return`--range-mask-from:${100*Ze(x(W,.025,0)-.0125)}%;--range-mask-to:${100*Ze(x(Lt,.025,0)-.0125)}%`}(n,i):""),1048657&t.$$.dirty[0]|2&t.$$.dirty[1]&&a&&j&&j.x&&j.y&&bt.set(qt(w,h),{hard:d===!1})},[w,m,b,v,j,l,d,A,c,p,U,G,()=>{lt=!1,ct=oo(bt),Z=[qt(S!=null?S:f,h),qt(T!=null?T:g,h)],B()},()=>{lt=!0},({detail:z})=>{xt.snap=!lt,xt.elastic=!lt,yt(ct,z.translation,xt)},({detail:z})=>{xt.snap=!1,xt.elastic=!1;const vt=yt(ct,z.translation,xt);if(ct=void 0,Z=void 0,Math.abs(vt-b)<.01)return O(b);O(vt)},()=>{r(0,w=Nr(b,n,i)),B(),O(w)},bt,z=>{z.preventDefault(),z.stopPropagation();const vt=Hd(z)*N;Vt(vt)},({detail:z})=>{Vt(z[h]*Math.abs(E||8))},h,f,g,S,T,B,I,O,R,E,N,P,a,i,n,s,z=>r(4,j=(vt=>ot(vt.width,vt.height))(z.detail))]}class v1 extends er{constructor(e){super(),tr(this,e,c8,l8,Ye,{labelReset:1,direction:20,min:21,max:22,base:2,value:0,valueLabel:3,valueMin:23,valueMax:24,oninputstart:25,oninputmove:26,oninputend:27,elasticity:28,nudgeMultiplier:29,step:30},null,[-1,-1])}}function d8(t){let e,r,a,n,i;const o=t[7].default,s=ga(o,t,t[6],null);return{c(){e=gt("div"),r=gt("div"),s&&s.c(),C(r,"class","PinturaToolbarInner"),C(e,"class","PinturaToolbar"),C(e,"data-layout",t[1]),C(e,"data-overflow",t[0])},m(l,c){st(l,e,c),Pt(e,r),s&&s.m(r,null),a=!0,n||(i=[Mt(r,"measure",t[3]),Ir(qa.call(null,r)),Mt(e,"measure",t[2]),Ir(qa.call(null,e))],n=!0)},p(l,[c]){s&&s.p&&(!a||64&c)&&$a(s,o,l,l[6],a?fa(o,l[6],c,null):ya(l[6]),null),(!a||2&c)&&C(e,"data-layout",l[1]),(!a||1&c)&&C(e,"data-overflow",l[0])},i(l){a||(V(s,l),a=!0)},o(l){_(s,l),a=!1},d(l){l&&it(e),s&&s.d(l),n=!1,Ar(i)}}}function u8(t,e,r){let a,n,{$$slots:i={},$$scope:o}=e,s=0,l=0,c=0;const d=()=>{r(0,n=a==="compact"&&s>c?"overflow":void 0)};return t.$$set=p=>{"$$scope"in p&&r(6,o=p.$$scope)},t.$$.update=()=>{48&t.$$.dirty&&r(1,a=l>c?"compact":"default")},[n,a,({detail:p})=>{const{width:m}=p;r(5,c=m),d()},({detail:p})=>{const{width:m}=p;m>l&&r(4,l=m),s=m,n||d()},l,c,o,i]}class p8 extends er{constructor(e){super(),tr(this,e,u8,d8,Ye,{})}}var m8={[Fo]:t=>({x:t.x,y:t.y}),[xi]:t=>({x:t.x+t.width,y:t.y}),[No]:t=>({x:t.x+t.width,y:t.y}),[wi]:t=>({x:t.x+t.width,y:t.y+t.height}),[zo]:t=>({x:t.x,y:t.y+t.height}),[Si]:t=>({x:t.x,y:t.y+t.height}),[Do]:t=>({x:t.x,y:t.y}),[vi]:t=>({x:t.x,y:t.y})};function Fy(t,e,r){const a=t.slice();return a[14]=e[r].key,a[15]=e[r].translate,a[16]=e[r].scale,a[17]=e[r].type,a[18]=e[r].opacity,a}function Ny(t,e){let r,a,n,i,o,s,l,c;return{key:t,first:null,c(){r=gt("div"),C(r,"role","button"),C(r,"aria-label",a=`Drag ${e[17]} ${e[14]}`),C(r,"tabindex",n=e[17]==="edge"?-1:0),C(r,"class","PinturaRectManipulator"),C(r,"data-direction",i=e[14]),C(r,"data-shape",o=e[17]==="edge"?"edge":""+e[0]),C(r,"style",s=`--tx:${e[15].x};--ty:${e[15].y};--sx:${e[16].x};--sy:${e[16].y};opacity:${e[18]}`),this.first=r},m(d,p){st(d,r,p),l||(c=[Mt(r,"nudge",function(){Vr(e[6](e[14]))&&e[6](e[14]).apply(this,arguments)}),Ir(qo.call(null,r,{preventDefault:!0})),Mt(r,"interactionstart",function(){Vr(e[5]("resizestart",e[14]))&&e[5]("resizestart",e[14]).apply(this,arguments)}),Mt(r,"interactionupdate",function(){Vr(e[5]("resizemove",e[14]))&&e[5]("resizemove",e[14]).apply(this,arguments)}),Mt(r,"interactionend",function(){Vr(e[5]("resizeend",e[14]))&&e[5]("resizeend",e[14]).apply(this,arguments)}),Ir(Wo.call(null,r))],l=!0)},p(d,p){e=d,2&p&&a!==(a=`Drag ${e[17]} ${e[14]}`)&&C(r,"aria-label",a),2&p&&n!==(n=e[17]==="edge"?-1:0)&&C(r,"tabindex",n),2&p&&i!==(i=e[14])&&C(r,"data-direction",i),3&p&&o!==(o=e[17]==="edge"?"edge":""+e[0])&&C(r,"data-shape",o),2&p&&s!==(s=`--tx:${e[15].x};--ty:${e[15].y};--sx:${e[16].x};--sy:${e[16].y};opacity:${e[18]}`)&&C(r,"style",s)},d(d){d&&it(r),l=!1,Ar(c)}}}function h8(t){let e,r=[],a=new Map,n=t[1];const i=o=>o[14];for(let o=0;o<n.length;o+=1){let s=Fy(t,n,o),l=i(s);a.set(l,r[o]=Ny(l,s))}return{c(){for(let o=0;o<r.length;o+=1)r[o].c();e=ia()},m(o,s){for(let l=0;l<r.length;l+=1)r[l].m(o,s);st(o,e,s)},p(o,[s]){99&s&&(n=o[1],r=Xi(r,s,i,1,o,n,a,e.parentNode,e2,Ny,e,Fy))},i:We,o:We,d(o){for(let s=0;s<r.length;s+=1)r[s].d(o);o&&it(e)}}}function g8(t,e,r){let a,n,i,o,{rect:s=null}=e,{visible:l=!1}=e,{style:c}=e;const d=ta("isAnimated");F(t,d,g=>r(11,o=g));const p=ir(void 0,{precision:1e-4,stiffness:.2,damping:.4});F(t,p,g=>r(10,i=g));const m=ir(0,{precision:.001});let h;F(t,m,g=>r(9,n=g));const f=Oi();return t.$$set=g=>{"rect"in g&&r(7,s=g.rect),"visible"in g&&r(8,l=g.visible),"style"in g&&r(0,c=g.style)},t.$$.update=()=>{2304&t.$$.dirty&&p.set(l?1:.5,{hard:o===!1}),2304&t.$$.dirty&&m.set(l?1:0,{hard:o===!1}),1664&t.$$.dirty&&r(1,a=Object.keys(xm).map((g,b)=>{const w=xm[g],v=m8[w](s),S=w.length===1?"edge":"corner",T=S==="corner";return{key:w,type:S,scale:{x:/^(t|b)$/.test(w)?s.width:T?Nr(i,.5,1.25):1,y:/^(r|l)$/.test(w)?s.height:T?Nr(i,.5,1.25):1},translate:{x:v.x,y:v.y},opacity:n}}))},[c,a,d,p,m,(g,b)=>({detail:w})=>{h&&b!==h||g!=="resizestart"&&h===void 0||(g==="resizestart"&&(h=b),g==="resizeend"&&(h=void 0),f(g,{direction:b,translation:w&&w.translation}))},g=>({detail:b})=>{f("resizestart",{direction:g,translation:{x:0,y:0}}),f("resizemove",{direction:g,translation:b}),f("resizeend",{direction:g,translation:{x:0,y:0}})},s,l,n,i,o]}class f8 extends er{constructor(e){super(),tr(this,e,g8,h8,Ye,{rect:7,visible:8,style:0})}}var $8=t=>{function e(o,s){t.dispatchEvent(new CustomEvent(o,{detail:s}))}const r=o=>{o.preventDefault(),t.addEventListener("gesturechange",a),t.addEventListener("gestureend",n),e("gesturedown")},a=o=>{o.preventDefault(),e("gestureupdate",o.scale)},n=o=>{e("gestureup",o.scale),o.preventDefault(),i()},i=()=>{t.removeEventListener("gesturechange",a),t.removeEventListener("gestureend",n)};return t.addEventListener("gesturestart",r),{destroy:()=>{i(),t.removeEventListener("gesturestart",r)}}},x1={[Fo]:zo,[No]:Do,[zo]:Fo,[Do]:No,[vi]:wi,[xi]:Si,[wi]:vi,[Si]:xi},w1=t=>{const e=t===Do||t===No,r=t===Fo||t===zo;return[t===No||t===xi||t===wi,t===Do||t===Si||t===vi,t===Fo||t===xi||t===vi,t===zo||t===wi||t===Si,e,r,e||r]},zy=(t,e,r,a={})=>{const{target:n,translate:i}=e,{aspectRatio:o,minSize:s,maxSize:l}=a,c=Bl[x1[n]],d=pa(ot(t.x,t.y),ot(c[0]*t.width,c[1]*t.height)),p=Bl[n],m=pa(yr(t),ot(p[0]*t.width,p[1]*t.height)),[h,f,g,b,w,v,S]=w1(n);let T=i.x,B=i.y;w?B=0:v&&(T=0);const{inner:I,outer:O}=y8(d,n,r,{aspectRatio:o,minSize:s,maxSize:l});let[R,E,N,U]=hs(t);if(h?U=d.x:f&&(E=d.x),b?R=d.y:g&&(N=d.y),h){const x=I.x+I.width,j=O.x+O.width;E=Nr(m.x+T,x,j)}else if(f){const x=O.x,j=I.x;U=Nr(m.x+T,x,j)}if(b){const x=I.y+I.height,j=O.y+O.height;N=Nr(m.y+B,x,j)}else if(g){const x=O.y,j=I.y;R=Nr(m.y+B,x,j)}if(U>I.x&&(U=I.x),E<I.x+I.width&&(E=I.x+I.width),R>I.y&&(R=I.y),N<I.y+I.height&&(N=I.y+I.height),U<O.x){const x=O.x-U;U=O.x,E+=x}if(E>O.x+O.width){const x=E-(O.x+O.width);E=O.x+O.width,U-=x}if(R<O.y){const x=O.y-R;R=O.y,N+=x}if(N>O.y+O.height){const x=N-(O.y+O.height);N=O.y+O.height,R-=x}if(o)if(S){let x=E-U,j=N-R;w?(j=x/o,R=d.y-.5*j,N=d.y+.5*j):v&&(x=j*o,U=d.x-.5*x,E=d.x+.5*x)}else{const x=ot(m.x+T-d.x,m.y+B-d.y);n===xi?(x.x=Math.max(0,x.x),x.y=Math.min(0,x.y)):n===wi?(x.x=Math.max(0,x.x),x.y=Math.max(0,x.y)):n===Si?(x.x=Math.min(0,x.x),x.y=Math.max(0,x.y)):n===vi&&(x.x=Math.min(0,x.x),x.y=Math.min(0,x.y));const j=Io(x),A=Io(ot(I.width,I.height)),P=Io(ot(O.width,O.height)),G=Nr(j,A,P),Q=ot(o,1),Z=mn(jn(Q),G);n===xi?(E=d.x+Z.x,R=d.y-Z.y):n===wi?(E=d.x+Z.x,N=d.y+Z.y):n===Si?(U=d.x-Z.x,N=d.y+Z.y):n===vi&&(U=d.x-Z.x,R=d.y-Z.y)}return na(U,R,E-U,N-R)};const y8=(t,e,r,a)=>{const{aspectRatio:n,minSize:i,maxSize:o}=a,s=e===No||e===xi||e===wi,l=e===Do||e===Si||e===vi,c=e===Fo||e===xi||e===vi,d=e===zo||e===wi||e===Si,p=e===Do||e===No,m=e===Fo||e===zo,h=yr(r);s?(h.x=t.x,h.width-=t.x):l&&(h.width=t.x),d?(h.y=t.y,h.height-=t.y):c&&(h.height=t.y);const f=((I,O)=>ki(0,0,I,O))(Math.min(h.width,o.width),Math.min(h.height,o.height));if(n){if(p){const I=Math.min(t.y,r.height-t.y);f.height=Math.min(2*I,f.height)}else if(m){const I=Math.min(t.x,r.width-t.x);f.width=Math.min(2*I,f.width)}}const g=n?ms(uo(nn(i),n)):i,b=n?ms(Cn(f,n)):f;let w,v,S,T;s?w=t.x:l&&(v=t.x),d?S=t.y:c&&(T=t.y),s?v=w+g.width:l&&(w=v-g.width),d?T=S+g.height:c&&(S=T-g.height),p?(S=t.y-.5*g.height,T=t.y+.5*g.height):m&&(w=t.x-.5*g.width,v=t.x+.5*g.width);const B=Sn([ot(w,S),ot(v,T)]);return s?v=w+b.width:l&&(w=v-b.width),d?T=S+b.height:c&&(S=T-b.height),p?(S=t.y-.5*b.height,T=t.y+.5*b.height):m&&(w=t.x-.5*b.width,v=t.x+.5*b.width),w=Math.max(r.x,w),v=Math.min(r.x+r.width,v),S=Math.max(r.y,S),T=Math.min(r.y+r.height,T),{inner:B,outer:Sn([ot(w,S),ot(v,T)])}};var Dy=t=>180*t/Math.PI;function b8(t){let e,r,a;return r=new v1({props:{elasticity:t[5],min:t[9],max:t[10],value:t[11],valueMin:Math.max(t[9],t[0]),valueMax:Math.min(t[10],t[1]),labelReset:t[6],base:t[12],valueLabel:Math.round(Dy(t[11]))+"&deg;",oninputstart:t[2],oninputmove:t[17],oninputend:t[18]}}),{c(){e=gt("div"),Ut(r.$$.fragment),C(e,"class","PinturaImageRotator")},m(n,i){st(n,e,i),Ot(r,e,null),a=!0},p(n,[i]){const o={};32&i&&(o.elasticity=n[5]),512&i&&(o.min=n[9]),1024&i&&(o.max=n[10]),2048&i&&(o.value=n[11]),513&i&&(o.valueMin=Math.max(n[9],n[0])),1026&i&&(o.valueMax=Math.min(n[10],n[1])),64&i&&(o.labelReset=n[6]),4096&i&&(o.base=n[12]),2048&i&&(o.valueLabel=Math.round(Dy(n[11]))+"&deg;"),4&i&&(o.oninputstart=n[2]),392&i&&(o.oninputmove=n[17]),400&i&&(o.oninputend=n[18]),r.$set(o)},i(n){a||(V(r.$$.fragment,n),a=!0)},o(n){_(r.$$.fragment,n),a=!1},d(n){n&&it(e),Bt(r)}}}function v8(t,e,r){let a,n,i,o,s,l,c,{rotation:d}=e,{valueMin:p}=e,{valueMax:m}=e,{oninputstart:h=be}=e,{oninputmove:f=be}=e,{oninputend:g=be}=e,{elasticity:b=0}=e,{labelReset:w}=e,{rotationMin:v}=e,{rotationMax:S}=e;return t.$$set=T=>{"rotation"in T&&r(13,d=T.rotation),"valueMin"in T&&r(0,p=T.valueMin),"valueMax"in T&&r(1,m=T.valueMax),"oninputstart"in T&&r(2,h=T.oninputstart),"oninputmove"in T&&r(3,f=T.oninputmove),"oninputend"in T&&r(4,g=T.oninputend),"elasticity"in T&&r(5,b=T.elasticity),"labelReset"in T&&r(6,w=T.labelReset),"rotationMin"in T&&r(14,v=T.rotationMin),"rotationMax"in T&&r(15,S=T.rotationMax)},t.$$.update=()=>{16384&t.$$.dirty&&r(9,a=v+1e-9),32768&t.$$.dirty&&r(10,n=S-1e-9),1536&t.$$.dirty&&r(12,i=a+.5*(n-a)),32768&t.$$.dirty&&r(16,o=2*S),8192&t.$$.dirty&&r(8,s=Math.sign(d)),73728&t.$$.dirty&&r(7,l=Math.round(Math.abs(d)/o)*o),8576&t.$$.dirty&&r(11,c=d-s*l)},[p,m,h,f,g,b,w,l,s,a,n,c,i,d,v,S,o,T=>f(s*l+T),T=>g(s*l+T)]}class x8 extends er{constructor(e){super(),tr(this,e,v8,b8,Ye,{rotation:13,valueMin:0,valueMax:1,oninputstart:2,oninputmove:3,oninputend:4,elasticity:5,labelReset:6,rotationMin:14,rotationMax:15})}}function w8(t){let e,r,a,n,i;return{c(){e=gt("div"),r=gt("p"),a=Hr(t[0]),n=Hr(" \xD7 "),i=Hr(t[1]),C(e,"class","PinturaImageInfo")},m(o,s){st(o,e,s),Pt(e,r),Pt(r,a),Pt(r,n),Pt(r,i)},p(o,[s]){1&s&&ca(a,o[0]),2&s&&ca(i,o[1])},i:We,o:We,d(o){o&&it(e)}}}function S8(t,e,r){let{width:a}=e,{height:n}=e;return t.$$set=i=>{"width"in i&&r(0,a=i.width),"height"in i&&r(1,n=i.height)},[a,n]}class C8 extends er{constructor(e){super(),tr(this,e,S8,w8,Ye,{width:0,height:1})}}function k8(t){let e,r;return e=new jo({props:{class:"PinturaPresetListFilter",layout:"row",options:t[8],selectedIndex:t[7],onchange:t[10]}}),{c(){Ut(e.$$.fragment)},m(a,n){Ot(e,a,n),r=!0},p(a,n){const i={};256&n&&(i.options=a[8]),128&n&&(i.selectedIndex=a[7]),e.$set(i)},i(a){r||(V(e.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),r=!1},d(a){Bt(e,a)}}}function R8(t){let e,r;return e=new E2({props:{icon:t[0],label:t[1],labelClass:t[2],hideLabel:t[3],options:t[9],selectedIndex:t[4],onchange:t[5],optionMapper:t[6],$$slots:{controls:[k8]},$$scope:{ctx:t}}}),{c(){Ut(e.$$.fragment)},m(a,n){Ot(e,a,n),r=!0},p(a,[n]){const i={};1&n&&(i.icon=a[0]),2&n&&(i.label=a[1]),4&n&&(i.labelClass=a[2]),8&n&&(i.hideLabel=a[3]),512&n&&(i.options=a[9]),16&n&&(i.selectedIndex=a[4]),32&n&&(i.onchange=a[5]),64&n&&(i.optionMapper=a[6]),262528&n&&(i.$$scope={dirty:n,ctx:a}),e.$set(i)},i(a){r||(V(e.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),r=!1},d(a){Bt(e,a)}}}const Oy='fill="none" stroke="currentColor"';function T8(t,e,r){let a,n,i,{icon:o}=e,{label:s}=e,{labelClass:l}=e,{hideLabel:c}=e,{options:d}=e,{selectedIndex:p}=e,{onchange:m}=e,{optionMapper:h}=e,{filter:f="landscape"}=e,{onfilterchange:g=be}=e;const b=(v,S,T,B,I)=>`
    <rect ${Oy} x="${v}" y="${S}" width="${T}" height="${B}" rx="${I}"/>`,w=(v,S)=>`<path ${Oy} d="M${v} ${S} l2 2 l3 -4"/>`;return t.$$set=v=>{"icon"in v&&r(0,o=v.icon),"label"in v&&r(1,s=v.label),"labelClass"in v&&r(2,l=v.labelClass),"hideLabel"in v&&r(3,c=v.hideLabel),"options"in v&&r(12,d=v.options),"selectedIndex"in v&&r(4,p=v.selectedIndex),"onchange"in v&&r(5,m=v.onchange),"optionMapper"in v&&r(6,h=v.optionMapper),"filter"in v&&r(11,f=v.filter),"onfilterchange"in v&&r(13,g=v.onfilterchange)},t.$$.update=()=>{6144&t.$$.dirty&&r(9,a=((v,S)=>(v||[]).map(T=>Be(T[0])?(T[1]=T[1].map(S),T):S(T)))(d,(v=>S=>{const[T,B,I={}]=S;return Mr(T)&&(I.hidden=v==="landscape"?T<1:T>1),[T,B,I]})(f))),2048&t.$$.dirty&&r(7,n=f==="landscape"?0:1),128&t.$$.dirty&&r(8,i=[["landscape","Landscape",{hideLabel:!0,icon:b(2,6,19,12,2)+(n===0?w(9,12):"")}],["portrait","Portrait",{hideLabel:!0,icon:b(5,3,13,18,2)+(n===1?w(9,12):"")}]])},[o,s,l,c,p,m,h,n,i,a,v=>{r(11,f=v.value),g(v.value)},f,d,g]}class M8 extends er{constructor(e){super(),tr(this,e,T8,R8,Ye,{icon:0,label:1,labelClass:2,hideLabel:3,options:12,selectedIndex:4,onchange:5,optionMapper:6,filter:11,onfilterchange:13})}}const By=t=>qn(t,e=>Ze(e,6)),Uy=t=>Jn(t,e=>Ze(e,6)),So=(t,e,r=1e-4)=>Math.abs(t-e)<r;var P8=(t,e,r,a,n={})=>{const{aspectRatio:i}=n;t=Uy(t),a=a.map(By);const o=m0(t,x1[r.target]),s=qn(o,v=>Ze(v,6)),l=i?uo(n.minSize,i):n.minSize,c=i?Cn(n.maxSize,i):n.maxSize,d=m0(e,r.target);if(Vn(d,o)<1){e=yr(t);const v=Math.min(l.width/t.width,l.height/t.height);Ya(e,v,o)}e=p0(yr(e),l,c,o);let p=yr(e);e=Uy(e);const m=$v(a,1),h=$i(t),f=$i(e),g=h.findIndex(v=>Mo(qn(v,S=>Ze(S,6)),s)),b=v=>m.map(S=>qh(S,v)).filter(Boolean).pop();if(i){const v=f.map((S,T)=>{if(T===g)return;const B=ot(o.x-S.x,o.y-S.y);jn(B),mn(B,.5);const I=ot(o.x-B.x,o.y-B.y),O=Oo(I,By(S)),R=b(O);if(!R)return;const E=h[T];return{intersection:R,cornerDist:Vn(o,E),intersectionDist:Vn(o,R)}}).filter(Boolean);if(v.length){const S=v.reduce((T,B)=>{const I=B.intersectionDist/B.cornerDist;return I<T?I:T},Number.MAX_SAFE_INTEGER);p=yr(t),Ya(p,S,o)}}else{const v=r.target.length===1,S=!(a[0].y===a[1].y||a[0].x===a[1].x),T=h.map((B,I)=>{if(I===g)return;const O=f[I],R=!So(O.x,s.x)&&!So(O.y,s.y);if(!v&&!S&&R||v&&(So(O.x,s.x)||So(O.y,s.y)))return;const E=Fe(v?B:o),N=ha(Fe(E),O);jn(N),mn(N,.5),v?pa(E,N):ha(E,N);const U=Oo(E,O);return b(U)||void 0}).filter(Boolean);if(T.length){const[B,I,O,R]=w1(r.target);let[E,N,U,x]=hs(e);T.forEach(({x:j,y:A})=>{const P=Ze(j,6),G=Ze(A,6);O&&!So(G,s.y)&&(E=Math.max(E,A)),B&&!So(P,s.x)&&(N=Math.min(N,j)),R&&!So(G,s.y)&&(U=Math.min(U,A)),I&&!So(P,s.x)&&(x=Math.max(x,j))}),p=ki((w=[E,N,U,x])[3],w[0],w[1]-w[3],w[2]-w[0]),Ya(p,.9999,o)}}var w;return p0(p,l,c,o),p};function I8(t){let e,r;return e=new Ji({props:{items:t[11]}}),{c(){Ut(e.$$.fragment)},m(a,n){Ot(e,a,n),r=!0},p(a,n){const i={};2048&n[0]&&(i.items=a[11]),e.$set(i)},i(a){r||(V(e.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),r=!1},d(a){Bt(e,a)}}}function A8(t){let e,r,a;return r=new p8({props:{$$slots:{default:[I8]},$$scope:{ctx:t}}}),{c(){e=gt("div"),Ut(r.$$.fragment),C(e,"slot","header")},m(n,i){st(n,e,i),Ot(r,e,null),a=!0},p(n,i){const o={};2048&i[0]|2&i[7]&&(o.$$scope={dirty:i,ctx:n}),r.$set(o)},i(n){a||(V(r.$$.fragment,n),a=!0)},o(n){_(r.$$.fragment,n),a=!1},d(n){n&&it(e),Bt(r)}}}function _y(t){let e,r;return e=new Bo({props:{onclick:t[88],label:t[4].cropLabelButtonRecenter,icon:t[4].cropIconButtonRecenter,class:"PinturaButtonCenter",disabled:!t[9],hideLabel:!0,style:`opacity: ${t[29]}; transform: translate3d(${t[30].x}px, ${t[30].y}px, 0)`}}),{c(){Ut(e.$$.fragment)},m(a,n){Ot(e,a,n),r=!0},p(a,n){const i={};16&n[0]&&(i.label=a[4].cropLabelButtonRecenter),16&n[0]&&(i.icon=a[4].cropIconButtonRecenter),512&n[0]&&(i.disabled=!a[9]),1610612736&n[0]&&(i.style=`opacity: ${a[29]}; transform: translate3d(${a[30].x}px, ${a[30].y}px, 0)`),e.$set(i)},i(a){r||(V(e.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),r=!1},d(a){Bt(e,a)}}}function Wy(t){let e,r;return e=new f8({props:{rect:t[8],visible:t[12],style:t[1]}}),e.$on("resizestart",t[68]),e.$on("resizemove",t[69]),e.$on("resizeend",t[70]),{c(){Ut(e.$$.fragment)},m(a,n){Ot(e,a,n),r=!0},p(a,n){const i={};256&n[0]&&(i.rect=a[8]),4096&n[0]&&(i.visible=a[12]),2&n[0]&&(i.style=a[1]),e.$set(i)},i(a){r||(V(e.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),r=!1},d(a){Bt(e,a)}}}function qy(t){let e,r;return e=new C8({props:{width:Math.round(t[13].width),height:Math.round(t[13].height)}}),{c(){Ut(e.$$.fragment)},m(a,n){Ot(e,a,n),r=!0},p(a,n){const i={};8192&n[0]&&(i.width=Math.round(a[13].width)),8192&n[0]&&(i.height=Math.round(a[13].height)),e.$set(i)},i(a){r||(V(e.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),r=!1},d(a){Bt(e,a)}}}function E8(t){let e,r,a,n,i,o,s,l,c=t[21]&&t[10]&&_y(t),d=t[21]&&Wy(t),p=t[22]&&qy(t);return{c(){e=gt("div"),r=gt("div"),c&&c.c(),a=ge(),d&&d.c(),i=ge(),p&&p.c(),C(r,"class","PinturaStage"),C(e,"slot","main")},m(m,h){st(m,e,h),Pt(e,r),c&&c.m(r,null),Pt(r,a),d&&d.m(r,null),t[162](r),Pt(e,i),p&&p.m(e,null),o=!0,s||(l=[Ir(qa.call(null,r)),Mt(r,"measure",t[160]),Mt(r,"wheel",function(){Vr(t[2]&&t[87])&&(t[2]&&t[87]).apply(this,arguments)},{passive:!1}),Mt(r,"interactionstart",t[74]),Mt(r,"interactionupdate",t[75]),Mt(r,"interactionrelease",t[77]),Mt(r,"interactionend",t[76]),Ir(n=Wo.call(null,r,{drag:!0,inertia:!0,pinch:t[2],shouldStartInteraction:Hy,getEventPosition:t[163]})),Mt(r,"gesturedown",t[84]),Mt(r,"gestureupdate",t[85]),Mt(r,"gestureup",t[86]),Ir($8.call(null,r))],s=!0)},p(m,h){(t=m)[21]&&t[10]?c?(c.p(t,h),2098176&h[0]&&V(c,1)):(c=_y(t),c.c(),V(c,1),c.m(r,a)):c&&(ze(),_(c,1,1,()=>{c=null}),De()),t[21]?d?(d.p(t,h),2097152&h[0]&&V(d,1)):(d=Wy(t),d.c(),V(d,1),d.m(r,null)):d&&(ze(),_(d,1,1,()=>{d=null}),De()),n&&Vr(n.update)&&16777220&h[0]&&n.update.call(null,{drag:!0,inertia:!0,pinch:t[2],shouldStartInteraction:Hy,getEventPosition:t[163]}),t[22]?p?(p.p(t,h),4194304&h[0]&&V(p,1)):(p=qy(t),p.c(),V(p,1),p.m(e,null)):p&&(ze(),_(p,1,1,()=>{p=null}),De())},i(m){o||(V(c),V(d),V(p),o=!0)},o(m){_(c),_(d),_(p),o=!1},d(m){m&&it(e),c&&c.d(),d&&d.d(),t[162](null),p&&p.d(),s=!1,Ar(l)}}}function jy(t){let e,r,a,n;const i=[{class:"PinturaControlList"},{tabs:t[7]},t[18]];let o={$$slots:{default:[V8,({tab:c})=>({217:c}),({tab:c})=>[0,0,0,0,0,0,0,c?1:0]]},$$scope:{ctx:t}};for(let c=0;c<i.length;c+=1)o=la(o,i[c]);e=new qd({props:o}),e.$on("select",t[161]);const s=[{class:"PinturaControlPanels"},{panelClass:"PinturaControlPanel"},{panels:t[17]},t[18]];let l={$$slots:{default:[N8,({panel:c})=>({216:c}),({panel:c})=>[0,0,0,0,0,0,c?1073741824:0]]},$$scope:{ctx:t}};for(let c=0;c<s.length;c+=1)l=la(l,s[c]);return a=new jd({props:l}),{c(){Ut(e.$$.fragment),r=ge(),Ut(a.$$.fragment)},m(c,d){Ot(e,c,d),st(c,r,d),Ot(a,c,d),n=!0},p(c,d){const p=262272&d[0]?Ja(i,[i[0],128&d[0]&&{tabs:c[7]},262144&d[0]&&Mn(c[18])]):{};3&d[7]&&(p.$$scope={dirty:d,ctx:c}),e.$set(p);const m=393216&d[0]?Ja(s,[s[0],s[1],131072&d[0]&&{panels:c[17]},262144&d[0]&&Mn(c[18])]):{};511721496&d[0]|1073741824&d[6]|2&d[7]&&(m.$$scope={dirty:d,ctx:c}),a.$set(m)},i(c){n||(V(e.$$.fragment,c),V(a.$$.fragment,c),n=!0)},o(c){_(e.$$.fragment,c),_(a.$$.fragment,c),n=!1},d(c){Bt(e,c),c&&it(r),Bt(a,c)}}}function V8(t){let e,r,a=t[217].label+"";return{c(){e=gt("span"),r=Hr(a)},m(n,i){st(n,e,i),Pt(e,r)},p(n,i){1&i[7]&&a!==(a=n[217].label+"")&&ca(r,a)},d(n){n&&it(e)}}}function L8(t){let e,r;return e=new v1({props:{elasticity:t[25]*t[43],base:B8,min:t[23],max:O8,valueMin:t[27][0],valueMax:t[27][1],value:t[28],labelReset:t[4].labelReset,valueLabel:Math.round(100*t[28])+"%",oninputstart:t[81],oninputmove:t[82],oninputend:t[83]}}),{c(){Ut(e.$$.fragment)},m(a,n){Ot(e,a,n),r=!0},p(a,n){const i={};33554432&n[0]&&(i.elasticity=a[25]*a[43]),8388608&n[0]&&(i.min=a[23]),134217728&n[0]&&(i.valueMin=a[27][0]),134217728&n[0]&&(i.valueMax=a[27][1]),268435456&n[0]&&(i.value=a[28]),16&n[0]&&(i.labelReset=a[4].labelReset),268435456&n[0]&&(i.valueLabel=Math.round(100*a[28])+"%"),e.$set(i)},i(a){r||(V(e.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),r=!1},d(a){Bt(e,a)}}}function F8(t){let e,r;return e=new x8({props:{elasticity:t[25]*t[43],rotation:t[14],labelReset:t[4].labelReset,valueMin:t[26][0],valueMax:t[26][1],rotationMin:-t[3],rotationMax:t[3],oninputstart:t[71],oninputmove:t[72],oninputend:t[73]}}),{c(){Ut(e.$$.fragment)},m(a,n){Ot(e,a,n),r=!0},p(a,n){const i={};33554432&n[0]&&(i.elasticity=a[25]*a[43]),16384&n[0]&&(i.rotation=a[14]),16&n[0]&&(i.labelReset=a[4].labelReset),67108864&n[0]&&(i.valueMin=a[26][0]),67108864&n[0]&&(i.valueMax=a[26][1]),8&n[0]&&(i.rotationMin=-a[3]),8&n[0]&&(i.rotationMax=a[3]),e.$set(i)},i(a){r||(V(e.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),r=!1},d(a){Bt(e,a)}}}function N8(t){let e,r,a,n;const i=[F8,L8],o=[];function s(l,c){return l[216]===l[93]+"-rotation"?0:l[216]===l[93]+"-zoom"?1:-1}return~(e=s(t))&&(r=o[e]=i[e](t)),{c(){r&&r.c(),a=ia()},m(l,c){~e&&o[e].m(l,c),st(l,a,c),n=!0},p(l,c){let d=e;e=s(l),e===d?~e&&o[e].p(l,c):(r&&(ze(),_(o[d],1,1,()=>{o[d]=null}),De()),~e?(r=o[e],r?r.p(l,c):(r=o[e]=i[e](l),r.c()),V(r,1),r.m(a.parentNode,a)):r=null)},i(l){n||(V(r),n=!0)},o(l){_(r),n=!1},d(l){~e&&o[e].d(l),l&&it(a)}}}function z8(t){let e,r,a=t[19]&&jy(t);return{c(){e=gt("div"),a&&a.c(),C(e,"slot","footer"),C(e,"style",t[16])},m(n,i){st(n,e,i),a&&a.m(e,null),r=!0},p(n,i){n[19]?a?(a.p(n,i),524288&i[0]&&V(a,1)):(a=jy(n),a.c(),V(a,1),a.m(e,null)):a&&(ze(),_(a,1,1,()=>{a=null}),De()),(!r||65536&i[0])&&C(e,"style",n[16])},i(n){r||(V(a),r=!0)},o(n){_(a),r=!1},d(n){n&&it(e),a&&a.d()}}}function D8(t){let e,r,a;function n(o){t[164](o)}let i={hasHeader:t[20],$$slots:{footer:[z8],main:[E8],header:[A8]},$$scope:{ctx:t}};return t[15]!==void 0&&(i.root=t[15]),e=new $s({props:i}),xr.push(()=>hn(e,"root",n)),e.$on("measure",t[165]),{c(){Ut(e.$$.fragment)},m(o,s){Ot(e,o,s),a=!0},p(o,s){const l={};1048576&s[0]&&(l.hasHeader=o[20]),2146402302&s[0]|2&s[7]&&(l.$$scope={dirty:s,ctx:o}),!r&&32768&s[0]&&(r=!0,l.root=o[15],Rn(()=>r=!1)),e.$set(l)},i(o){a||(V(e.$$.fragment,o),a=!0)},o(o){_(e.$$.fragment,o),a=!1},d(o){Bt(e,o)}}}const O8=1,B8=0,Hy=(t,e)=>t.target===e;function U8(t,e,r){let a,n,i,o,s,l,c,d,p,m,h,f,g,b,w,v,S,T,B,I,O,R,E,N,U,x,j,A,P,G,Q,Z,ct,lt,xt,yt,bt,qt,Y,et,Vt,z,vt,St,W,Lt,Ce,pt,zt,Te,ne,At,K,Xt,se,me,Ve,ke,Dt,Ue,Xe,he,_t,rt,Zt,mt,Se,ht,Et,ee,re,Wt,Ht=We,fe=()=>(Ht(),Ht=pn(Le,M=>r(12,P=M)),Le);t.$$.on_destroy.push(()=>Ht());let{isActive:Le}=e;fe();let{stores:mr}=e,{cropImageSelectionCornerStyle:He="circle"}=e,{cropWillRenderImageSelectionGuides:nr=(M,ut)=>{const kt=M=="rotate";return{rows:kt?5:3,cols:kt?5:3,opacity:.25*ut}}}=e,{cropAutoCenterImageSelectionTimeout:ve}=e,{cropEnableZoomMatchImageAspectRatio:ae=!0}=e,{cropEnableRotateMatchImageAspectRatio:xe="never"}=e,{cropEnableRotationInput:Ke=!0}=e,{cropEnableZoom:Me=!0}=e,{cropEnableZoomInput:Pe=!0}=e,{cropEnableZoomAutoHide:rr=!0}=e,{cropEnableImageSelection:Ae=!0}=e,{cropEnableInfoIndicator:Je=!1}=e,{cropEnableZoomTowardsWheelPosition:or=!0}=e,{cropEnableLimitWheelInputToCropSelection:Sr=!0}=e,{cropEnableCenterImageSelection:at=!0}=e,{cropEnableButtonRotateLeft:jt=!0}=e,{cropEnableButtonRotateRight:Ne=!1}=e,{cropEnableButtonFlipHorizontal:nt=!0}=e,{cropEnableButtonFlipVertical:Yt=!1}=e,{cropSelectPresetOptions:te}=e,{cropEnableSelectPreset:Re=!0}=e,{cropEnableFilterMatchAspectRatio:hr=!0}=e,{cropSelectPresetFilter:Ge=!1}=e,{cropEnableButtonToggleCropLimit:zr=!1}=e,{cropWillRenderTools:Qa=Br}=e,{cropActiveTransformTool:Fa="rotation"}=e,{cropMinimizeToolbar:Ma="auto"}=e,{cropInteractionFocus:dr="image"}=e,{cropRotationRange:wr=mi}=e,{cropMaskOpacity:tn=.85}=e,{locale:ur={}}=e;const Fn=ta("isAnimated");F(t,Fn,M=>r(139,G=M));const gn=ta("elasticityMultiplier");F(t,gn,M=>r(25,Se=M));const fr=ta("redrawTrigger");F(t,fr,M=>r(159,mt=M));const Kr=ta("imageIsStatic");F(t,Kr,M=>r(145,qt=M));const Gr=ta("imageStaticVisualCorners");F(t,Gr,M=>r(181,ke=M));let Na="idle";const Pn=le();F(t,Pn,M=>r(156,_t=M));const xa=()=>me===void 0,Nn=M=>1/M,Pa=M=>{hr&&Ge!==M&&(r(95,Ge=M),me&&me!==1&&sn()&&Rt(Bn,me=Nn(me),me))},sn=()=>{if(me===1||!a)return!1;const M=Nn(me);return!!Vo(_t).find(([ut])=>ut===M)},ai=(M,ut,kt)=>Gi(kt)?ut.width===Math.round(M.height)||ut.height===Math.round(M.width):ut.width===Math.round(M.width)||ut.height===Math.round(M.height),Sa=()=>(xa()||xe==="always"&&sn())&&((M,ut,kt)=>{const Ft=lo(dv(wn(ut),kt),Gt=>Math.abs(Math.round(Gt))),Kt=Zs(Ft),ye=Cr(M);return Mo(Kt,ye)})(Y,pt,zt)&&ai(Y,pt,zt),Jr=M=>{if(xe!=="never"&&Sa()){Rt(we,zt+=M,zt);const ut=Gi(zt),kt=ut?pt.height:pt.width,Ft=ut?pt.width:pt.height;Rt(yn,Y=na(0,0,kt,Ft),Y),xa()||Rt(Bn,me=pi(kt,Ft),me)}else Rt(we,zt+=M,zt)},{history:da,env:zn,isInteracting:ra,isInteractingFraction:ba,isTransformingImage:sr,rootRect:Ur,stageRect:_r,utilRect:Wr,utilRectPadded:Dn,rootLineColor:fn,allowPan:en,allowZoom:On,allowPlayPause:ni,rangeInputElasticity:ln,presentationScalar:za,utilTools:lr,imagePreviewModifiers:rn,imageOutlineOpacity:Da,imageFlipX:q,imageFlipY:oe,imageRotation:we,imageRotationRange:Ie,imageOutputSize:Lr,imageSelectionRect:kr,imageSelectionRectSnapshot:Pr,imageSelectionRectIntent:$r,imageSelectionRectPresentation:ja,imageCropRectIntent:Zr,imageCropRectOrigin:$n,imageCropRect:yn,imageCropMinSize:bn,imageCropMaxSize:Ri,imageCropRange:Gn,imageCropAspectRatio:Bn,imageCropLimitToImage:Ia,imageSize:va,imageScalar:Bi,imageOverlayMarkup:Ui,stagePadded:_i,stageRecenter:Qi}=mr;let ii;F(t,zn,M=>r(140,Q=M)),F(t,ra,M=>r(144,bt=M)),F(t,sr,M=>r(174,Lt=M)),F(t,Ur,M=>r(24,At=M)),F(t,_r,M=>r(151,W=M)),F(t,Dn,M=>r(148,z=M)),F(t,za,M=>r(147,Vt=M)),F(t,lr,M=>r(183,Ue=M)),F(t,rn,M=>r(173,xt=M)),F(t,q,M=>r(158,Zt=M)),F(t,oe,M=>r(157,rt=M)),F(t,we,M=>r(14,zt=M)),F(t,Ie,M=>r(26,ht=M)),F(t,Lr,M=>r(184,Xe=M)),F(t,kr,M=>r(150,St=M)),F(t,Pr,M=>r(149,vt=M)),F(t,$r,M=>r(182,Dt=M)),F(t,ja,M=>r(143,yt=M)),F(t,Zr,M=>r(176,K=M)),F(t,$n,M=>r(178,se=M)),F(t,yn,M=>r(13,Y=M)),F(t,bn,M=>r(154,ne=M)),F(t,Ri,M=>r(180,Ve=M)),F(t,Gn,M=>r(177,Xt=M)),F(t,Bn,M=>r(179,me=M)),F(t,Ia,M=>r(153,Te=M)),F(t,va,M=>r(152,pt=M)),F(t,Bi,M=>r(146,et=M)),F(t,Ui,M=>r(172,ct=M)),F(t,_i,M=>r(142,lt=M));const ys=(M,ut)=>{const kt={target:M,translate:ut},Ft=Kc(wn(ne),Vt),Kt=Kc(wn(Ve),Vt);let ye=zy(vt,kt,de(X({},z),{x:0,y:0}),{aspectRatio:me,minSize:Ft,maxSize:Kt});if(ye=((ue,Oe,qe)=>{const[Rr,gr,Qe,qr]=hs(ue),pr=X({},ue);if(Rr<Oe.y&&(ue.height=ue.height-(Oe.y-Rr),ue.y=Oe.y),gr>Oe.x+Oe.width&&(ue.width=Oe.x+Oe.width-ue.x),Qe>Oe.y+Oe.height&&(ue.height=Oe.y+Oe.height-ue.y),qr<Oe.x&&(ue.width=ue.width-(Oe.x-qr),ue.x=Oe.x),qe){const aa=Math.min(1,pr.width/ue.width,pr.height/ue.height);return Eo(pr,aa)}return ue})(ye,de(X({},z),{x:0,y:0}),me),!Te)return{boundsLimited:ye,boundsIntent:ye};let Gt=P8(vt,ye,kt,ke,{aspectRatio:me,minSize:Ft,maxSize:Kt});return{boundsLimited:Gt,boundsIntent:Gt}},Zn=(M,ut)=>{const kt={target:M,translate:ut},Ft=Kc(wn(ne),Vt),Kt=Kc(wn(Ve),Vt),ye=((Gt,ue,Oe={})=>{const{target:qe,translate:Rr}=ue,{aspectRatio:gr,minSize:Qe}=Oe,qr=Bl[x1[qe]],pr=pa(yr(Gt),ot(qr[0]*Gt.width,qr[1]*Gt.height)),aa=Bl[qe],Ha=pa(yr(Gt),ot(aa[0]*Gt.width,aa[1]*Gt.height)),[dn,si,An,Yn,un,En,li]=w1(qe);let Tr=Rr.x,qi=Rr.y;un?qi=0:En&&(Tr=0);let[oa,Aa,Dr,sa]=hs(Gt);if(dn?sa=pr.x:si&&(Aa=pr.x),Yn?oa=pr.y:An&&(Dr=pr.y),dn?Aa=Ha.x+Tr:si&&(sa=Ha.x+Tr),Yn?Dr=Ha.y+qi:An&&(oa=Ha.y+qi),Qe&&un&&Dr-oa<Qe.height){const Er=Qe.height-(Dr-oa);oa-=.5*Er,Dr+=.5*Er}if(Qe&&En&&Aa-sa<Qe.width){const Er=Qe.width-(Aa-sa);sa-=.5*Er,Aa+=.5*Er}if(gr)if(li){let Er=Aa-sa,Mi=Dr-oa;un?(Mi=Er/gr,oa=pr.y-.5*Mi,Dr=pr.y+.5*Mi):En&&(Er=Mi*gr,sa=pr.x-.5*Er,Aa=pr.x+.5*Er)}else{const Er=ot(Ha.x+Tr-pr.x,Ha.y+qi-pr.y);qe===xi?(Er.x=Math.max(0,Er.x),Er.y=Math.min(0,Er.y)):qe===wi?(Er.x=Math.max(0,Er.x),Er.y=Math.max(0,Er.y)):qe===Si?(Er.x=Math.min(0,Er.x),Er.y=Math.max(0,Er.y)):qe===vi&&(Er.x=Math.min(0,Er.x),Er.y=Math.min(0,Er.y));const Mi=Io(Er),al=ot(gr,1),Pi=mn(jn(al),Mi);qe===xi?(Aa=pr.x+Pi.x,oa=pr.y-Pi.y):qe===wi?(Aa=pr.x+Pi.x,Dr=pr.y+Pi.y):qe===Si?(sa=pr.x-Pi.x,Dr=pr.y+Pi.y):qe===vi&&(sa=pr.x-Pi.x,oa=pr.y-Pi.y)}return na(sa,oa,Aa-sa,Dr-oa)})(vt,kt,{aspectRatio:me,minSize:Ft});return{boundsLimited:zy(vt,kt,de(X({},z),{x:0,y:0}),{aspectRatio:me,minSize:Ft,maxSize:Kt}),boundsIntent:ye}};let cn,Un;const ho=({translation:M,scalar:ut})=>{qt&&(ut=1,M=_s(Fe(M)));const kt=Math.min(St.width/Y.width,St.height/Y.height),Ft=mn(Fe(M),1/kt);let Kt;if(Un){const ye=ha(Fe(Un),M);Un=M,Kt=gi(yr(Y),ye)}else Kt=gi(yr(cn),_s(Fe(Ft))),ut!==void 0&&Ya(Kt,1/ut);Rt(Zr,K=Kt,K),Rt(yn,Y=Kt,Y)},to=vr([Gn,yn],([M,ut],kt)=>{if(!ut)return;const[Ft,Kt]=M,ye=Ta(ut);kt([ms(Jn(uo(Ft,ye),Ze)),ms(Jn(Cn(Kt,ye),Ze))])});F(t,to,M=>r(175,Ce=M));const vn=vr([va,Ia,bn,Ri,Gn,we],([M,ut,kt,Ft,Kt,ye],Gt)=>{if(!M)return;const ue=Kt[0],Oe=Kt[1];let qe,Rr;ut?(qe=((gr,Qe,qr)=>Gi(qr)?1-1/Math.min(gr.height/Qe.width,gr.width/Qe.height):1-1/Math.min(gr.width/Qe.width,gr.height/Qe.height))(M,Oe,ye),Rr=Math.min(ue.width/kt.width,ue.height/kt.height)):(qe=-1,Rr=1),Gt([qe,Rr].map(gr=>Ze(gr)))});F(t,vn,M=>r(27,Et=M));const go=vr([va,yn,Gn,we],([M,ut,kt,Ft],Kt)=>{if(!M||!ut)return Kt(0);let ye;const Gt=kt[0],ue=kt[1],Oe=ut.width,qe=ut.height,Rr=Ta(ut),gr=Gi(Ft)?ma(M.height,M.width):M,Qe=Cn(gr,Rr);if(Oe<=Qe.width||qe<=Qe.height){const qr=Qe.width-Gt.width,pr=Qe.height-Gt.height;ye=qr===0||pr===0?1:1-Math.min((Oe-Gt.width)/qr,(qe-Gt.height)/pr)}else{const qr=ue.width-Qe.width,pr=ue.height-Qe.height,aa=Cn({width:qr,height:pr},Rr);ye=-Math.min((Oe-Qe.width)/aa.width,(qe-Qe.height)/aa.height)}Kt(ye)});F(t,go,M=>r(28,ee=M));const fo=M=>{const ut=Ta(cn);let kt,Ft,Kt;const ye=Gi(zt)?ma(pt.height,pt.width):pt,Gt=Cn(ye,ut);if(M>=0){const qe=Gt.width-Xt[0].width,Rr=Gt.height-Xt[0].height;kt=Gt.width-qe*M,Ft=Gt.height-Rr*M,Kt=uo({width:kt,height:Ft},ut)}else{const qe=Xt[1].width-Gt.width,Rr=Xt[1].height-Gt.height;kt=Gt.width+qe*-M,Ft=Gt.height+Rr*-M,Kt=Cn({width:kt,height:Ft},ut)}kt=Kt.width,Ft=Kt.height;const ue=cn.x+.5*cn.width-.5*kt,Oe=cn.y+.5*cn.height-.5*Ft;Rt(yn,Y={x:ue,y:Oe,width:kt,height:Ft},Y)};let oi;const $o=M=>{const ut=Ya(yr(oi),1/M);Rt(Zr,K=ut,K),Rt(yn,Y=ut,Y)};let Ti;const Wi=()=>{Qi.set({})};let In;const k=ir(0,{precision:1e-4});F(t,k,M=>r(29,re=M));const tt=ir();F(t,tt,M=>r(30,Wt=M));const H=vr([Bn,Lr,Pn],([M,ut,kt],Ft)=>{if(!a)return;const Kt=Vo(kt),ye=[...Kt].map(Gt=>Gt[0]).sort((Gt,ue)=>ea(Gt[0])&&!ea(ue[0])?1:-1).find(Gt=>{if(ea(Gt)&&ut){const[ue,Oe]=Gt,qe=ut.width===ue&&ut.height===Oe,Rr=M===pi(ue,Oe);return qe&&Rr}return Gt===M});if(!ye)return Ft(void 0);Ft(Kt.map(Gt=>Gt[0]).findIndex(Gt=>ea(Gt)?mo(Gt,ye):Gt===ye))});F(t,H,M=>r(155,he=M));const Ct=(M,ut)=>{if(!a||M===-1||M===void 0)return;const kt=Vo(ut)[M][0];return kt?ea(kt)?pi(kt[0],kt[1]):kt:void 0},ft=vr([fn,ja,ba],([M,ut,kt],Ft)=>{const{rows:Kt,cols:ye,opacity:Gt}=nr(Na,kt);if(!ut||Gt<=0)return Ft([]);const{x:ue,y:Oe,width:qe,height:Rr}=ut,gr=qe/ye,Qe=Rr/Kt,qr=[];for(let pr=1;pr<=Kt-1;pr++){const aa=Oe+Qe*pr;qr.push({id:"image-selection-guide-row-"+pr,points:[ot(ue,aa),ot(ue+qe,aa)],opacity:Gt,strokeWidth:1,strokeColor:M})}for(let pr=1;pr<=ye-1;pr++){const aa=ue+gr*pr;qr.push({id:"image-selection-guide-col-"+pr,points:[ot(aa,Oe),ot(aa,Oe+Rr)],opacity:Gt,strokeWidth:1,strokeColor:M})}Ft(qr)});F(t,ft,M=>r(141,Z=M));const Jt="crop-"+bi();let ie,$e=Jt+"-"+(Ke?Fa:"zoom"),pe=$e,Nt;const It=ir(G?20:0);return F(t,It,M=>r(138,A=M)),t.$$set=M=>{"isActive"in M&&fe(r(0,Le=M.isActive)),"stores"in M&&r(97,mr=M.stores),"cropImageSelectionCornerStyle"in M&&r(1,He=M.cropImageSelectionCornerStyle),"cropWillRenderImageSelectionGuides"in M&&r(98,nr=M.cropWillRenderImageSelectionGuides),"cropAutoCenterImageSelectionTimeout"in M&&r(99,ve=M.cropAutoCenterImageSelectionTimeout),"cropEnableZoomMatchImageAspectRatio"in M&&r(100,ae=M.cropEnableZoomMatchImageAspectRatio),"cropEnableRotateMatchImageAspectRatio"in M&&r(101,xe=M.cropEnableRotateMatchImageAspectRatio),"cropEnableRotationInput"in M&&r(102,Ke=M.cropEnableRotationInput),"cropEnableZoom"in M&&r(2,Me=M.cropEnableZoom),"cropEnableZoomInput"in M&&r(103,Pe=M.cropEnableZoomInput),"cropEnableZoomAutoHide"in M&&r(104,rr=M.cropEnableZoomAutoHide),"cropEnableImageSelection"in M&&r(105,Ae=M.cropEnableImageSelection),"cropEnableInfoIndicator"in M&&r(106,Je=M.cropEnableInfoIndicator),"cropEnableZoomTowardsWheelPosition"in M&&r(107,or=M.cropEnableZoomTowardsWheelPosition),"cropEnableLimitWheelInputToCropSelection"in M&&r(108,Sr=M.cropEnableLimitWheelInputToCropSelection),"cropEnableCenterImageSelection"in M&&r(109,at=M.cropEnableCenterImageSelection),"cropEnableButtonRotateLeft"in M&&r(110,jt=M.cropEnableButtonRotateLeft),"cropEnableButtonRotateRight"in M&&r(111,Ne=M.cropEnableButtonRotateRight),"cropEnableButtonFlipHorizontal"in M&&r(112,nt=M.cropEnableButtonFlipHorizontal),"cropEnableButtonFlipVertical"in M&&r(113,Yt=M.cropEnableButtonFlipVertical),"cropSelectPresetOptions"in M&&r(114,te=M.cropSelectPresetOptions),"cropEnableSelectPreset"in M&&r(115,Re=M.cropEnableSelectPreset),"cropEnableFilterMatchAspectRatio"in M&&r(116,hr=M.cropEnableFilterMatchAspectRatio),"cropSelectPresetFilter"in M&&r(95,Ge=M.cropSelectPresetFilter),"cropEnableButtonToggleCropLimit"in M&&r(117,zr=M.cropEnableButtonToggleCropLimit),"cropWillRenderTools"in M&&r(118,Qa=M.cropWillRenderTools),"cropActiveTransformTool"in M&&r(119,Fa=M.cropActiveTransformTool),"cropMinimizeToolbar"in M&&r(120,Ma=M.cropMinimizeToolbar),"cropInteractionFocus"in M&&r(121,dr=M.cropInteractionFocus),"cropRotationRange"in M&&r(3,wr=M.cropRotationRange),"cropMaskOpacity"in M&&r(122,tn=M.cropMaskOpacity),"locale"in M&&r(4,ur=M.locale)},t.$$.update=()=>{4096&t.$$.dirty[0]|268435456&t.$$.dirty[3]&&Kr.set(dr==="selection"&&P),2097152&t.$$.dirty[3]&&r(129,a=te&&Array.isArray(te)&&te.length),2097152&t.$$.dirty[3]|32&t.$$.dirty[4]&&Pn.set(a?te:[]),4096&t.$$.dirty[0]&&P&&Da.set(1),4096&t.$$.dirty[0]&&en.set(!P),4096&t.$$.dirty[0]&&On.set(!P),4096&t.$$.dirty[0]&&P&&ni.set(!0),65536&t.$$.dirty[4]&&r(124,h=Q.layoutMode==="overlay"),4194304&t.$$.dirty[3]|1&t.$$.dirty[4]&&r(128,B=Re&&!h),83886080&t.$$.dirty[4]&&r(137,l=z&&St&&gd(z,St)),67117056&t.$$.dirty[4]&&r(135,c=!(!St||!l)),67119104&t.$$.dirty[4]&&r(133,d=c&&Ni(St,l,M=>Ze(M,5))),16400&t.$$.dirty[0]|52297732&t.$$.dirty[3]|1879114288&t.$$.dirty[4]|31&t.$$.dirty[5]&&r(11,n=mt&&Qa([jt&&["Button","rotate-left",{label:ur.cropLabelButtonRotateLeft,labelClass:"PinturaToolbarContentWide",icon:ur.cropIconButtonRotateLeft,onclick:()=>{Jr(-Math.PI/2),da.write()}}],Ne&&["Button","rotate-right",{label:ur.cropLabelButtonRotateRight,labelClass:"PinturaToolbarContentWide",icon:ur.cropIconButtonRotateRight,onclick:()=>{Jr(Math.PI/2),da.write()}}],nt&&["Button","flip-horizontal",{label:ur.cropLabelButtonFlipHorizontal,labelClass:"PinturaToolbarContentWide",icon:ur.cropIconButtonFlipHorizontal,onclick:()=>{Gi(zt)?Rt(oe,rt=!rt,rt):Rt(q,Zt=!Zt,Zt),da.write()}}],Yt&&["Button","flip-vertical",{label:ur.cropLabelButtonFlipVertical,labelClass:"PinturaToolbarContentWide",icon:ur.cropIconButtonFlipVertical,onclick:()=>{Gi(zt)?Rt(q,Zt=!Zt,Zt):Rt(oe,rt=!rt,rt),da.write()}}],B&&a&&[Ge===!1?"Dropdown":M8,"select-preset",{icon:Ua(ur.cropIconSelectPreset,ur,Ct(he,_t)),label:Ua(ur.cropLabelSelectPreset,ur,Ct(he,_t)),labelClass:"PinturaToolbarContentWide",options:_t,filter:Ge,onfilterchange:Pa,selectedIndex:he,onchange:({value:M})=>{ea(M)?(Rt(Bn,me=pi(M[0],M[1]),me),Rt(Lr,Xe=cv(M),Xe)):Rt(Bn,me=M,me),d&&Wi(),da.write()},optionMapper:M=>{let ut=!1;const kt=ea(M.value)?M.value[0]/M.value[1]:M.value;if(kt){const Ft=Us(pt,zt,kt);ut=Ft.width<ne.width||Ft.height<ne.height}return M.icon=((Ft,Kt={})=>{const{width:ye=24,height:Gt=24,bounds:ue=16,radius:Oe=3}=Kt;let qe,Rr,gr,Qe,qr=ea(Ft)?pi(Ft[0],Ft[1]):Ft,pr=!!qr;return qr=pr?qr:1,gr=qr>1?ue:qr*ue,Qe=gr/qr,qe=Math.round(.5*(ye-gr)),Rr=Math.round(.5*(Gt-Qe)),`<rect fill="${pr?"currentColor":"none"}" stroke="${pr?"none":"currentColor"}" stroke-width="${ye/16}" stroke-dasharray="${[ye/12,ye/6].join(" ")}" x="${qe}" y="${Rr}" width="${gr}" height="${Qe}" rx="${Oe}"/>`})(M.value,{bounds:14}),de(X({},M),{disabled:ut})}}],zr&&["Dropdown","select-crop-limit",{icon:Ua(ur.cropIconCropBoundary,ur,Te),label:ur.cropLabelCropBoundary,labelClass:"PinturaToolbarContentWide",onchange:({value:M})=>{Rt(Ia,Te=M,Te),da.write()},options:[[!0,ur.cropLabelCropBoundaryEdge,{icon:Ua(ur.cropIconCropBoundary,ur,!0)}],[!1,ur.cropLabelCropBoundaryNone,{icon:Ua(ur.cropIconCropBoundary,ur,!1)}]]}]].filter(Boolean),Q,()=>fr.set({})).filter(Boolean)),6144&t.$$.dirty[0]|134217728&t.$$.dirty[3]|65537&t.$$.dirty[4]&&Rt(lr,Ue=P&&Ma!=="never"&&(Ma==="always"||Q.verticalSpace==="short"||h)?n.map(([M,ut,kt])=>Array.isArray(kt)?[M,ut,kt]:[M,ut,de(X({},kt),{hideLabel:!0})]):[],Ue),536870912&t.$$.dirty[4]&&r(23,i=Te?0:-1),150994944&t.$$.dirty[4]&&r(130,o=z&&ot(-(W.x-z.x),-(W.y-z.y))),524352&t.$$.dirty[4]&&r(131,s=yt&&ot(ql(yt.x+.5*yt.width+o.x),ql(yt.y+.5*yt.height+o.y))),33554432&t.$$.dirty[4]&&r(134,p=vt!=null),16785408&t.$$.dirty[4]&&r(136,m=z&&l&&(l.height===z.height||l.width===z.width)),12587008&t.$$.dirty[4]&&r(132,f=!m&&Vt<1&&et<1),3840&t.$$.dirty[4]&&r(9,g=c&&!p&&(!d||f)),8192&t.$$.dirty[0]|8192&t.$$.dirty[3]|1&t.$$.dirty[4]&&r(22,b=Je&&!!Y&&!h),524352&t.$$.dirty[4]&&r(8,S=yt&&o&&{x:yt.x+o.x,y:yt.y+o.y,width:yt.width,height:yt.height}),256&t.$$.dirty[0]|4096&t.$$.dirty[3]|1&t.$$.dirty[4]&&r(21,w=Ae&&!!S&&!h),65600&t.$$.dirty[3]|2097280&t.$$.dirty[4]&&r(10,v=at&&!!s&&!ve&&!qt),512&t.$$.dirty[0]|1073741888&t.$$.dirty[3]|1048576&t.$$.dirty[4]&&g&&ve&&!bt&&(clearTimeout(In),r(123,In=setTimeout(Wi,ve))),1073741824&t.$$.dirty[3]|1048576&t.$$.dirty[4]&&bt&&clearTimeout(In),1536&t.$$.dirty[0]|32768&t.$$.dirty[4]&&k.set(v&&g?1:0,{hard:G===!1}),32896&t.$$.dirty[4]&&tt.set(s,{hard:G===!1}),4096&t.$$.dirty[0]|262144&t.$$.dirty[4]&&(P&&!lt?(Rt(rn,xt.crop={maskOpacity:tn,maskMarkupOpacity:tn},xt),rn.set(xt)):(delete xt.crop,rn.set(xt))),131072&t.$$.dirty[4]&&Z&&(()=>{const M=ct.filter(ut=>!/^image\-selection\-guide/.test(ut.id));Rt(Ui,ct=P?[...M,...Z]:M,ct)})(),65536&t.$$.dirty[4]&&r(127,T=Q.verticalSpace!=="short"),134217728&t.$$.dirty[3]|9&t.$$.dirty[4]&&r(20,I=Ma==="never"&&!h||T&&Ma!=="always"),4&t.$$.dirty[0]|1024&t.$$.dirty[3]&&r(126,O=Me&&Pe),2048&t.$$.dirty[3]|12&t.$$.dirty[4]&&r(125,R=rr?T&&O:O),512&t.$$.dirty[3]|2&t.$$.dirty[4]&&r(19,E=Ke||R),2&t.$$.dirty[4]&&(R||r(5,pe=$e)),32&t.$$.dirty[0]&&r(18,N={name:Jt,selected:pe}),16&t.$$.dirty[0]|512&t.$$.dirty[3]|2&t.$$.dirty[4]&&r(7,U=[Ke&&{id:Jt+"-rotation",label:ur.cropLabelTabRotation},R&&{id:Jt+"-zoom",label:ur.cropLabelTabZoom}].filter(Boolean)),128&t.$$.dirty[0]&&r(17,x=U.map(M=>M.id)),64&t.$$.dirty[0]|1&t.$$.dirty[4]&&ie&&!ie.children.length&&h&&ie.dispatchEvent(new CustomEvent("measure",{detail:ie.rect})),4096&t.$$.dirty[0]|32768&t.$$.dirty[4]&&G&&It.set(P?0:20),16384&t.$$.dirty[4]&&r(16,j=A?`transform: translateY(${A}px)`:void 0)},[Le,He,Me,wr,ur,pe,ie,U,S,g,v,n,P,Y,zt,Nt,j,x,N,E,I,w,b,i,At,Se,ht,Et,ee,re,Wt,Fn,gn,fr,Kr,Gr,Pn,zn,ra,sr,Ur,_r,Dn,ln,za,lr,rn,q,oe,we,Ie,Lr,kr,Pr,$r,ja,Zr,$n,yn,bn,Ri,Gn,Bn,Ia,va,Bi,Ui,_i,()=>{Na="select",Rt(ra,bt=!0,bt),Rt(Pr,vt=yr(St),vt),ii=qt?ys:Zn},({detail:M})=>{const{boundsLimited:ut,boundsIntent:kt}=ii(M.direction,M.translation);Rt(sr,Lt=!0,Lt),Rt($r,Dt=kt,Dt),Rt(kr,St=ut,St)},({detail:M})=>{const{boundsLimited:ut}=ii(M.direction,M.translation);Rt(sr,Lt=!1,Lt),Rt(ra,bt=!1,bt),Rt($r,Dt=void 0,Dt),Io(M.translation)&&(Rt(kr,St=ut,St),da.write()),Rt(Pr,vt=void 0,vt),Na=void 0},()=>{Na="rotate",Rt(ra,bt=!0,bt),Rt($n,se=yr(Y),se)},M=>{Rt(sr,Lt=!0,Lt),Rt(we,zt=M,zt)},M=>{Rt(sr,Lt=!1,Lt),Rt(ra,bt=!1,bt),Rt(we,zt=M,zt),da.write(),Rt($n,se=void 0,se)},()=>{Na="pan",Un=void 0,Rt(ra,bt=!0,bt),cn=yr(Y)},({detail:M})=>{Rt(sr,Lt=!0,Lt),ho(M)},({detail:M})=>{Rt(sr,Lt=!1,Lt),Rt(ra,bt=!1,bt),(Io(M.translation)>0||M.scalar!==0)&&(ho(M),da.write()),Rt(Zr,K=void 0,K),cn=void 0},({detail:{translation:M}})=>{qt&&(M=_s(Fe(M))),Un=M,Rt(ra,bt=!1,bt)},to,vn,go,()=>{Na="zoom",Rt(ra,bt=!0,bt),cn=yr(Y)},M=>{Rt(sr,Lt=!1,Lt),fo(M)},M=>{fo(M),da.write(),Rt(sr,Lt=!1,Lt),Rt(ra,bt=!1,bt),cn=void 0},()=>{Na="zoom",cn||(oi=yr(Y),Rt(ra,bt=!0,bt))},({detail:M})=>{oi&&(Rt(sr,Lt=!0,Lt),$o(M))},({detail:M})=>{oi&&(Rt(sr,Lt=!1,Lt),Rt(ra,bt=!1,bt),$o(M),Rt(Zr,K=void 0,K),oi=void 0,da.write())},M=>{const ut=zm(M,At,W);if(Sr&&!kd(St,ut))return;Na="zoom",Rt(ra,bt=!0,bt),Rt(sr,Lt=!0,Lt),M.preventDefault(),M.stopPropagation();const kt=Hd(M),Ft=1+kt/100,Kt=yr(Y),ye=Math.min(Y.width/ne.width,Y.height/ne.height)===1;if(ae&&Te){const Oe=ai(Y,pt,zt);if(xa()&&Oe&&kt>0&&d){Rt(ra,bt=!1,bt),Rt(sr,Lt=!1,Lt);const qe=Gi(zt)?nn({height:pt.width,width:pt.height}):nn(pt);return Ni(Kt,qe)||(clearTimeout(Ti),Ni(da.state.crop,qe))?void 0:(Rt(yn,Y=qe,Y),void da.write())}}let Gt=Cr(Y);if(or&&dr!=="selection"&&kt<0&&!ye){const Oe=ha(Fe(ut),St),qe=Math.min(St.width/Y.width,St.height/Y.height),Rr=Ya(yr(St),1.1);Gt=kd(Rr,ut)?pa(yr(Y),mn(Oe,1/qe)):Gt}let ue=Ya(yr(Y),Ft,Gt);if(Cd(Ce[1],ue)||(ue=u0(Cr(ue),Ce[1])),Cd(ue,Ce[0])||(ue=u0(Cr(ue),Ce[0])),Ni(Kt,ue,Ze))return Rt(ra,bt=!1,bt),void Rt(sr,Lt=!1,Lt);Rt(yn,Y=Jn(ue,Oe=>Ze(Oe,5)),Y),Rt(ra,bt=!1,bt),Rt(sr,Lt=!1,Lt),clearTimeout(Ti),Ti=setTimeout(()=>{da.write()},500)},Wi,k,tt,H,ft,Jt,It,Ge,"crop",mr,nr,ve,ae,xe,Ke,Pe,rr,Ae,Je,or,Sr,at,jt,Ne,nt,Yt,te,Re,hr,zr,Qa,Fa,Ma,dr,tn,In,h,R,O,T,B,a,o,s,f,d,p,c,m,l,A,G,Q,Z,lt,yt,bt,qt,et,Vt,z,vt,St,W,pt,Te,ne,he,_t,rt,Zt,mt,function(M){on.call(this,t,M)},({detail:M})=>r(5,pe=M),function(M){xr[M?"unshift":"push"](()=>{ie=M,r(6,ie)})},M=>y1(M),function(M){Nt=M,r(15,Nt)},function(M){on.call(this,t,M)}]}var _8={util:["crop",class extends er{constructor(t){super(),tr(this,t,U8,D8,Ye,{name:96,isActive:0,stores:97,cropImageSelectionCornerStyle:1,cropWillRenderImageSelectionGuides:98,cropAutoCenterImageSelectionTimeout:99,cropEnableZoomMatchImageAspectRatio:100,cropEnableRotateMatchImageAspectRatio:101,cropEnableRotationInput:102,cropEnableZoom:2,cropEnableZoomInput:103,cropEnableZoomAutoHide:104,cropEnableImageSelection:105,cropEnableInfoIndicator:106,cropEnableZoomTowardsWheelPosition:107,cropEnableLimitWheelInputToCropSelection:108,cropEnableCenterImageSelection:109,cropEnableButtonRotateLeft:110,cropEnableButtonRotateRight:111,cropEnableButtonFlipHorizontal:112,cropEnableButtonFlipVertical:113,cropSelectPresetOptions:114,cropEnableSelectPreset:115,cropEnableFilterMatchAspectRatio:116,cropSelectPresetFilter:95,cropEnableButtonToggleCropLimit:117,cropWillRenderTools:118,cropActiveTransformTool:119,cropMinimizeToolbar:120,cropInteractionFocus:121,cropRotationRange:3,cropMaskOpacity:122,locale:4},null,[-1,-1,-1,-1,-1,-1,-1,-1])}get name(){return this.$$.ctx[96]}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$$set({isActive:t}),D()}get stores(){return this.$$.ctx[97]}set stores(t){this.$$set({stores:t}),D()}get cropImageSelectionCornerStyle(){return this.$$.ctx[1]}set cropImageSelectionCornerStyle(t){this.$$set({cropImageSelectionCornerStyle:t}),D()}get cropWillRenderImageSelectionGuides(){return this.$$.ctx[98]}set cropWillRenderImageSelectionGuides(t){this.$$set({cropWillRenderImageSelectionGuides:t}),D()}get cropAutoCenterImageSelectionTimeout(){return this.$$.ctx[99]}set cropAutoCenterImageSelectionTimeout(t){this.$$set({cropAutoCenterImageSelectionTimeout:t}),D()}get cropEnableZoomMatchImageAspectRatio(){return this.$$.ctx[100]}set cropEnableZoomMatchImageAspectRatio(t){this.$$set({cropEnableZoomMatchImageAspectRatio:t}),D()}get cropEnableRotateMatchImageAspectRatio(){return this.$$.ctx[101]}set cropEnableRotateMatchImageAspectRatio(t){this.$$set({cropEnableRotateMatchImageAspectRatio:t}),D()}get cropEnableRotationInput(){return this.$$.ctx[102]}set cropEnableRotationInput(t){this.$$set({cropEnableRotationInput:t}),D()}get cropEnableZoom(){return this.$$.ctx[2]}set cropEnableZoom(t){this.$$set({cropEnableZoom:t}),D()}get cropEnableZoomInput(){return this.$$.ctx[103]}set cropEnableZoomInput(t){this.$$set({cropEnableZoomInput:t}),D()}get cropEnableZoomAutoHide(){return this.$$.ctx[104]}set cropEnableZoomAutoHide(t){this.$$set({cropEnableZoomAutoHide:t}),D()}get cropEnableImageSelection(){return this.$$.ctx[105]}set cropEnableImageSelection(t){this.$$set({cropEnableImageSelection:t}),D()}get cropEnableInfoIndicator(){return this.$$.ctx[106]}set cropEnableInfoIndicator(t){this.$$set({cropEnableInfoIndicator:t}),D()}get cropEnableZoomTowardsWheelPosition(){return this.$$.ctx[107]}set cropEnableZoomTowardsWheelPosition(t){this.$$set({cropEnableZoomTowardsWheelPosition:t}),D()}get cropEnableLimitWheelInputToCropSelection(){return this.$$.ctx[108]}set cropEnableLimitWheelInputToCropSelection(t){this.$$set({cropEnableLimitWheelInputToCropSelection:t}),D()}get cropEnableCenterImageSelection(){return this.$$.ctx[109]}set cropEnableCenterImageSelection(t){this.$$set({cropEnableCenterImageSelection:t}),D()}get cropEnableButtonRotateLeft(){return this.$$.ctx[110]}set cropEnableButtonRotateLeft(t){this.$$set({cropEnableButtonRotateLeft:t}),D()}get cropEnableButtonRotateRight(){return this.$$.ctx[111]}set cropEnableButtonRotateRight(t){this.$$set({cropEnableButtonRotateRight:t}),D()}get cropEnableButtonFlipHorizontal(){return this.$$.ctx[112]}set cropEnableButtonFlipHorizontal(t){this.$$set({cropEnableButtonFlipHorizontal:t}),D()}get cropEnableButtonFlipVertical(){return this.$$.ctx[113]}set cropEnableButtonFlipVertical(t){this.$$set({cropEnableButtonFlipVertical:t}),D()}get cropSelectPresetOptions(){return this.$$.ctx[114]}set cropSelectPresetOptions(t){this.$$set({cropSelectPresetOptions:t}),D()}get cropEnableSelectPreset(){return this.$$.ctx[115]}set cropEnableSelectPreset(t){this.$$set({cropEnableSelectPreset:t}),D()}get cropEnableFilterMatchAspectRatio(){return this.$$.ctx[116]}set cropEnableFilterMatchAspectRatio(t){this.$$set({cropEnableFilterMatchAspectRatio:t}),D()}get cropSelectPresetFilter(){return this.$$.ctx[95]}set cropSelectPresetFilter(t){this.$$set({cropSelectPresetFilter:t}),D()}get cropEnableButtonToggleCropLimit(){return this.$$.ctx[117]}set cropEnableButtonToggleCropLimit(t){this.$$set({cropEnableButtonToggleCropLimit:t}),D()}get cropWillRenderTools(){return this.$$.ctx[118]}set cropWillRenderTools(t){this.$$set({cropWillRenderTools:t}),D()}get cropActiveTransformTool(){return this.$$.ctx[119]}set cropActiveTransformTool(t){this.$$set({cropActiveTransformTool:t}),D()}get cropMinimizeToolbar(){return this.$$.ctx[120]}set cropMinimizeToolbar(t){this.$$set({cropMinimizeToolbar:t}),D()}get cropInteractionFocus(){return this.$$.ctx[121]}set cropInteractionFocus(t){this.$$set({cropInteractionFocus:t}),D()}get cropRotationRange(){return this.$$.ctx[3]}set cropRotationRange(t){this.$$set({cropRotationRange:t}),D()}get cropMaskOpacity(){return this.$$.ctx[122]}set cropMaskOpacity(t){this.$$set({cropMaskOpacity:t}),D()}get locale(){return this.$$.ctx[4]}set locale(t){this.$$set({locale:t}),D()}}]};function W8(t){let e,r,a,n,i,o,s,l=t[77],c=(Xr(t[77].label)?t[77].label(t[2]):t[77].label)+"";function d(...h){return t[51](t[77],...h)}const p=()=>t[52](r,l),m=()=>t[52](null,l);return{c(){e=gt("div"),r=gt("div"),a=ge(),n=gt("span"),i=Hr(c),C(r,"class",_2),C(e,"slot","option"),C(e,"class","PinturaFilterOption")},m(h,f){st(h,e,f),Pt(e,r),p(),Pt(e,a),Pt(e,n),Pt(n,i),o||(s=[Mt(r,"measure",d),Ir(qa.call(null,r))],o=!0)},p(h,f){l!==(t=h)[77]&&(m(),l=t[77],p()),4&f[0]|32768&f[2]&&c!==(c=(Xr(t[77].label)?t[77].label(t[2]):t[77].label)+"")&&ca(i,c)},d(h){h&&it(e),m(),o=!1,Ar(s)}}}function q8(t){let e,r;return e=new jo({props:{locale:t[2],layout:"row",options:t[3],selectedIndex:t[12],onchange:t[32],$$slots:{option:[W8,({option:a})=>({77:a}),({option:a})=>[0,0,a?32768:0]]},$$scope:{ctx:t}}}),{c(){Ut(e.$$.fragment)},m(a,n){Ot(e,a,n),r=!0},p(a,n){const i={};4&n[0]&&(i.locale=a[2]),8&n[0]&&(i.options=a[3]),4096&n[0]&&(i.selectedIndex=a[12]),1028&n[0]|98304&n[2]&&(i.$$scope={dirty:n,ctx:a}),e.$set(i)},i(a){r||(V(e.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),r=!1},d(a){Bt(e,a)}}}function j8(t){let e,r,a,n,i,o,s,l;function c(h){t[54](h)}function d(h){t[55](h)}function p(h){t[56](h)}let m={elasticity:t[13]*t[19],onscroll:t[53],$$slots:{default:[q8]},$$scope:{ctx:t}};return t[4]!==void 0&&(m.maskFeatherStartOpacity=t[4]),t[5]!==void 0&&(m.maskFeatherEndOpacity=t[5]),t[6]!==void 0&&(m.maskFeatherSize=t[6]),r=new Ki({props:m}),xr.push(()=>hn(r,"maskFeatherStartOpacity",c)),xr.push(()=>hn(r,"maskFeatherEndOpacity",d)),xr.push(()=>hn(r,"maskFeatherSize",p)),r.$on("measure",t[57]),{c(){e=gt("div"),Ut(r.$$.fragment),C(e,"slot","footer"),C(e,"style",t[11])},m(h,f){st(h,e,f),Ot(r,e,null),o=!0,s||(l=[Mt(e,"transitionend",t[30]),Mt(e,"measure",t[58]),Ir(qa.call(null,e,{observePosition:!0}))],s=!0)},p(h,f){const g={};8192&f[0]&&(g.elasticity=h[13]*h[19]),128&f[0]&&(g.onscroll=h[53]),5132&f[0]|65536&f[2]&&(g.$$scope={dirty:f,ctx:h}),!a&&16&f[0]&&(a=!0,g.maskFeatherStartOpacity=h[4],Rn(()=>a=!1)),!n&&32&f[0]&&(n=!0,g.maskFeatherEndOpacity=h[5],Rn(()=>n=!1)),!i&&64&f[0]&&(i=!0,g.maskFeatherSize=h[6],Rn(()=>i=!1)),r.$set(g),(!o||2048&f[0])&&C(e,"style",h[11])},i(h){o||(V(r.$$.fragment,h),o=!0)},o(h){_(r.$$.fragment,h),o=!1},d(h){h&&it(e),Bt(r),s=!1,Ar(l)}}}function H8(t){let e,r;return e=new $s({props:{$$slots:{footer:[j8]},$$scope:{ctx:t}}}),e.$on("measure",t[59]),{c(){Ut(e.$$.fragment)},m(a,n){Ot(e,a,n),r=!0},p(a,n){const i={};16380&n[0]|65536&n[2]&&(i.$$scope={dirty:n,ctx:a}),e.$set(i)},i(a){r||(V(e.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),r=!1},d(a){Bt(e,a)}}}let _2="PinturaFilterPreview";function G8(t,e,r){let a,n,i,o,s,l,c,d,p,m,h,f,g,b,w,v,S,T,B,I,O=We,R=()=>(O(),O=pn(x,ht=>r(43,d=ht)),x),E=We,N=()=>(E(),E=pn(U,ht=>r(49,S=ht)),U);t.$$.on_destroy.push(()=>O()),t.$$.on_destroy.push(()=>E());let{isActive:U}=e;N();let{isActiveFraction:x}=e;R();let{stores:j}=e,{locale:A}=e,{filterFunctions:P}=e,{filterOptions:G}=e;const Q=ta("elasticityMultiplier");F(t,Q,ht=>r(13,I=ht));const{history:Z,interfaceImages:ct,stageRectBase:lt,utilRect:xt,animation:yt,scrollElasticity:bt,imageSize:qt,imagePreview:Y,imageCropRect:et,imageRotation:Vt,imageFlipX:z,imageFlipY:vt,imageBackgroundColor:St,imageGamma:W,imageColorMatrix:Lt,allowPan:Ce,allowZoom:pt,allowZoomControls:zt,allowPlayPause:Te}=j;F(t,ct,ht=>r(60,p=ht)),F(t,lt,ht=>r(48,v=ht)),F(t,xt,ht=>r(47,w=ht)),F(t,yt,ht=>r(50,T=ht)),F(t,qt,ht=>r(62,h=ht)),F(t,Y,ht=>r(42,c=ht)),F(t,St,ht=>r(61,m=ht)),F(t,W,ht=>r(44,f=ht)),F(t,Lt,ht=>r(40,s=ht));const ne=le({});F(t,ne,ht=>r(46,b=ht));const At=(ht,Et)=>Rt(ne,b[ht.value]=Et,b),K=vr(ne,ht=>{if(!ht[void 0])return;const Et=ht[void 0];return B&&Ul(B,Et)?B:wn(Et)});F(t,K,ht=>r(63,B=ht));const Xt=vr([U,K,et,qt,Vt,z,vt],([ht,Et,ee,re,Wt,Ht,fe],Le)=>{if(!ht||!Et||!re)return g;const mr=nn(re),He=Cr(mr),nr=o1(re,ee,Wt),ve=Cr(nr),ae=ha(Fe(He),ve),xe=_s(Fe(ae)),Ke=Math.max(Et.width/ee.width,Et.height/ee.height);Le({origin:xe,translation:ae,rotation:{x:fe?Math.PI:0,y:Ht?Math.PI:0,z:Wt},scale:Ke})});F(t,Xt,ht=>r(45,g=ht));const se=ir(T?20:0);let me;F(t,se,ht=>r(39,o=ht));const Ve={};let ke,Dt,Ue,Xe,he,_t,rt={x:0,y:0};const Zt=le([]);F(t,Zt,ht=>r(41,l=ht));const mt=ht=>{const Et=de(X({},ht),{data:c,size:h,offset:X({},ht.offset),mask:X({},ht.mask),backgroundColor:m});return Et.opacity=d,Et.offset.y+=o,Et.mask.y+=o,Et.id="filter",Et},Se=()=>p.filter(ht=>ht.id!=="filter");return ri(()=>{ct.set([])}),t.$$set=ht=>{"isActive"in ht&&N(r(0,U=ht.isActive)),"isActiveFraction"in ht&&R(r(1,x=ht.isActiveFraction)),"stores"in ht&&r(34,j=ht.stores),"locale"in ht&&r(2,A=ht.locale),"filterFunctions"in ht&&r(35,P=ht.filterFunctions),"filterOptions"in ht&&r(3,G=ht.filterOptions)},t.$$.update=()=>{if(262144&t.$$.dirty[1]&&Ce.set(S),262144&t.$$.dirty[1]&&pt.set(S),262144&t.$$.dirty[1]&&zt.set(S),262144&t.$$.dirty[1]&&S&&Te.set(!1),8&t.$$.dirty[0]&&r(38,a=Vo(G)),640&t.$$.dirty[1]&&r(12,n=((ht,Et)=>{if(!ht||!ht.filter||!Et)return 0;const ee=ht.filter;return Et.findIndex(([re])=>{if(!P[re])return!1;const Wt=P[re]();return mo(Wt,ee)})})(s,a)),786432&t.$$.dirty[1]&&T&&se.set(S?0:20),512&t.$$.dirty[0]|458752&t.$$.dirty[1]&&S&&w&&v&&_t&&r(37,he={x:v.x-w.x,y:v.y-w.y+_t.y}),496&t.$$.dirty[0]|58096&t.$$.dirty[1]&&g&&he&&rt&&Xe&&me){const ht=he.x+Xe.x+rt.x,Et=he.y,ee=Xe.x+he.x,re=ee+Xe.width;Zt.set(a.map(([Wt],Ht)=>{const fe=b[Wt],Le=rt.x+fe.x,mr=Le+fe.width;if(mr<0||Le>Xe.width)return!1;const He=ht+fe.x,nr=Et+fe.y,ve=(xe=>({origin:Fe(xe.origin),translation:Fe(xe.translation),rotation:X({},xe.rotation),scale:xe.scale}))(g);ve.offset=ot(.5*fe.width+He,.5*fe.height+nr),ve.maskOpacity=1,ve.mask=na(He+0,nr,fe.width+0,fe.height),ve.maskFeather=[1,0,1,0,1,re,1,re],Le<Ue&&ke<1&&(ve.maskFeather[0]=ke,ve.maskFeather[1]=ee,ve.maskFeather[2]=1,ve.maskFeather[3]=ee+Ue),mr>Xe.width-Ue&&Dt<1&&(ve.maskFeather[4]=Dt,ve.maskFeather[5]=re-Ue,ve.maskFeather[6]=1,ve.maskFeather[7]=re),ve.maskCornerRadius=me[Wt];let ae=s&&Object.keys(s).filter(xe=>xe!="filter").map(xe=>s[xe])||[];return Xr(P[Wt])&&ae.push(P[Wt]()),ve.colorMatrix=ae.length?r1(ae):void 0,ve.gamma=f,ve}).filter(Boolean))}if(7424&t.$$.dirty[1])if(d>0&&l){const ht=[...Se(),...l.map(mt)];ct.set(ht)}else ct.set(Se());256&t.$$.dirty[1]&&r(11,i=o?`transform: translateY(${o}px)`:void 0)},[U,x,A,G,ke,Dt,Ue,rt,Xe,_t,Ve,i,n,I,Q,ct,lt,xt,yt,bt,qt,Y,St,W,Lt,ne,At,K,Xt,se,ht=>{ht.target.className===_2&&r(36,me=Object.keys(Ve).reduce((Et,ee)=>{const re=Ve[ee],Wt=getComputedStyle(re),Ht=["top-left","top-right","bottom-left","bottom-right"].map(fe=>Wt.getPropertyValue(`border-${fe}-radius`)).map(C2).map(fe=>1.25*fe);return Et[ee]=Ht,Et},{}))},Zt,({value:ht})=>{Rt(Lt,s=de(X({},s),{filter:Xr(P[ht])?P[ht]():void 0}),s),Z.write()},"filter",j,P,me,he,a,o,s,l,c,d,f,g,b,w,v,S,T,(ht,Et)=>At(ht,Et.detail),function(ht,Et){xr[ht?"unshift":"push"](()=>{Ve[Et.value]=ht,r(10,Ve)})},ht=>r(7,rt=ht),function(ht){ke=ht,r(4,ke)},function(ht){Dt=ht,r(5,Dt)},function(ht){Ue=ht,r(6,Ue)},ht=>r(8,Xe=ht.detail),ht=>r(9,_t=ht.detail),function(ht){on.call(this,t,ht)}]}var Z8={util:["filter",class extends er{constructor(t){super(),tr(this,t,G8,H8,Ye,{name:33,isActive:0,isActiveFraction:1,stores:34,locale:2,filterFunctions:35,filterOptions:3},null,[-1,-1,-1])}get name(){return this.$$.ctx[33]}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$$set({isActive:t}),D()}get isActiveFraction(){return this.$$.ctx[1]}set isActiveFraction(t){this.$$set({isActiveFraction:t}),D()}get stores(){return this.$$.ctx[34]}set stores(t){this.$$set({stores:t}),D()}get locale(){return this.$$.ctx[2]}set locale(t){this.$$set({locale:t}),D()}get filterFunctions(){return this.$$.ctx[35]}set filterFunctions(t){this.$$set({filterFunctions:t}),D()}get filterOptions(){return this.$$.ctx[3]}set filterOptions(t){this.$$set({filterOptions:t}),D()}}]};function Y8(t){let e,r,a=t[43].label+"";return{c(){e=gt("span"),r=Hr(a)},m(n,i){st(n,e,i),Pt(e,r)},p(n,i){4096&i[1]&&a!==(a=n[43].label+"")&&ca(r,a)},d(n){n&&it(e)}}}function X8(t){let e,r;const a=[{class:"PinturaControlList"},{tabs:t[1]},t[5]];let n={$$slots:{default:[Y8,({tab:i})=>({43:i}),({tab:i})=>[0,i?4096:0]]},$$scope:{ctx:t}};for(let i=0;i<a.length;i+=1)n=la(n,a[i]);return e=new qd({props:n}),e.$on("select",t[24]),{c(){Ut(e.$$.fragment)},m(i,o){Ot(e,i,o),r=!0},p(i,o){const s=34&o[0]?Ja(a,[a[0],2&o[0]&&{tabs:i[1]},32&o[0]&&Mn(i[5])]):{};12288&o[1]&&(s.$$scope={dirty:o,ctx:i}),e.$set(s)},i(i){r||(V(e.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),r=!1},d(i){Bt(e,i)}}}function K8(t){let e,r;const a=[t[7][t[42]]];let n={};for(let i=0;i<a.length;i+=1)n=la(n,a[i]);return e=new v1({props:n}),{c(){Ut(e.$$.fragment)},m(i,o){Ot(e,i,o),r=!0},p(i,o){const s=128&o[0]|2048&o[1]?Ja(a,[Mn(i[7][i[42]])]):{};e.$set(s)},i(i){r||(V(e.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),r=!1},d(i){Bt(e,i)}}}function J8(t){let e,r,a,n,i;r=new Ki({props:{elasticity:t[6]*t[9],class:"PinturaControlListScroller",$$slots:{default:[X8]},$$scope:{ctx:t}}});const o=[{class:"PinturaControlPanels"},{panelClass:"PinturaControlPanel"},{panels:t[4]},t[5]];let s={$$slots:{default:[K8,({panel:l})=>({42:l}),({panel:l})=>[0,l?2048:0]]},$$scope:{ctx:t}};for(let l=0;l<o.length;l+=1)s=la(s,o[l]);return n=new jd({props:s}),{c(){e=gt("div"),Ut(r.$$.fragment),a=ge(),Ut(n.$$.fragment),C(e,"slot","footer"),C(e,"style",t[3])},m(l,c){st(l,e,c),Ot(r,e,null),Pt(e,a),Ot(n,e,null),i=!0},p(l,c){const d={};64&c[0]&&(d.elasticity=l[6]*l[9]),38&c[0]|8192&c[1]&&(d.$$scope={dirty:c,ctx:l}),r.$set(d);const p=48&c[0]?Ja(o,[o[0],o[1],16&c[0]&&{panels:l[4]},32&c[0]&&Mn(l[5])]):{};128&c[0]|10240&c[1]&&(p.$$scope={dirty:c,ctx:l}),n.$set(p),(!i||8&c[0])&&C(e,"style",l[3])},i(l){i||(V(r.$$.fragment,l),V(n.$$.fragment,l),i=!0)},o(l){_(r.$$.fragment,l),_(n.$$.fragment,l),i=!1},d(l){l&&it(e),Bt(r),Bt(n)}}}function Q8(t){let e,r;return e=new $s({props:{$$slots:{footer:[J8]},$$scope:{ctx:t}}}),e.$on("measure",t[25]),{c(){Ut(e.$$.fragment)},m(a,n){Ot(e,a,n),r=!0},p(a,n){const i={};254&n[0]|8192&n[1]&&(i.$$scope={dirty:n,ctx:a}),e.$set(i)},i(a){r||(V(e.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),r=!1},d(a){Bt(e,a)}}}function tR(t,e,r){let a,n,i,o,s,l,c,d,p,m,h,f=We,g=()=>(f(),f=pn(w,et=>r(21,c=et)),w);t.$$.on_destroy.push(()=>f());let{stores:b}=e,{isActive:w}=e;g();let{locale:v={}}=e,{finetuneControlConfiguration:S}=e,{finetuneOptions:T}=e,{finetuneNudgePrecision:B}=e;const{history:I,animation:O,scrollElasticity:R,rangeInputElasticity:E,imageColorMatrix:N,imageConvolutionMatrix:U,imageGamma:x,imageVignette:j,imageNoise:A,allowPan:P,allowZoom:G,allowZoomControls:Q,allowPlayPause:Z}=b;F(t,O,et=>r(22,d=et));const ct={imageColorMatrix:N,imageConvolutionMatrix:U,imageGamma:x,imageVignette:j,imageNoise:A},lt=ta("elasticityMultiplier");F(t,lt,et=>r(6,m=et));const xt="finetune-"+bi(),yt=le({});F(t,yt,et=>r(23,p=et));const bt=le({});F(t,bt,et=>r(7,h=et));let qt=[];const Y=ir(d?20:0);return F(t,Y,et=>r(20,l=et)),t.$$set=et=>{"stores"in et&&r(15,b=et.stores),"isActive"in et&&g(r(0,w=et.isActive)),"locale"in et&&r(16,v=et.locale),"finetuneControlConfiguration"in et&&r(17,S=et.finetuneControlConfiguration),"finetuneOptions"in et&&r(18,T=et.finetuneOptions),"finetuneNudgePrecision"in et&&r(19,B=et.finetuneNudgePrecision)},t.$$.update=()=>{var et;2097152&t.$$.dirty[0]&&P.set(c),2097152&t.$$.dirty[0]&&G.set(c),2097152&t.$$.dirty[0]&&Q.set(c),2097152&t.$$.dirty[0]&&c&&Z.set(!0),327680&t.$$.dirty[0]&&r(1,a=T?T.map(([Vt,z])=>({id:Vt,label:Xr(z)?z(v):z})):[]),2&t.$$.dirty[0]&&r(2,n=a.length&&a[0].id),4&t.$$.dirty[0]&&r(5,i={name:xt,selected:n}),2&t.$$.dirty[0]&&r(4,o=a.map(Vt=>Vt.id)),131072&t.$$.dirty[0]&&S&&(et=S,qt&&qt.forEach(Vt=>Vt()),qt=o.map(Vt=>{const{getStore:z,getValue:vt=Br}=et[Vt];return z(ct).subscribe(St=>{const W=St!=null?vt(St):St;Rt(yt,p=de(X({},p),{[Vt]:W}),p)})})),8519680&t.$$.dirty[0]&&S&&p&&Rt(bt,h=Object.keys(p).reduce((Vt,z)=>{const{base:vt,min:St,max:W,getLabel:Lt,getStore:Ce,setValue:pt=(ne,At)=>ne.set(At)}=S[z],zt=Ce(ct),Te=p[z]!=null?p[z]:vt;return Vt[z]={base:vt,min:St,max:W,value:Te,valueLabel:Lt?Lt(Te,St,W,W-St):Math.round(100*Te),oninputmove:ne=>{pt(zt,ne)},oninputend:ne=>{pt(zt,ne),I.write()},elasticity:m*E,labelReset:v.labelReset,nudgeMultiplier:B},Vt},{}),h),6291456&t.$$.dirty[0]&&d&&Y.set(c?0:20),1048576&t.$$.dirty[0]&&r(3,s=l?`transform: translateY(${l}px)`:void 0)},[w,a,n,s,o,i,m,h,O,R,lt,yt,bt,Y,"finetune",b,v,S,T,B,l,c,d,p,({detail:et})=>r(2,n=et),function(et){on.call(this,t,et)}]}var eR={util:["finetune",class extends er{constructor(t){super(),tr(this,t,tR,Q8,Ye,{name:14,stores:15,isActive:0,locale:16,finetuneControlConfiguration:17,finetuneOptions:18,finetuneNudgePrecision:19},null,[-1,-1])}get name(){return this.$$.ctx[14]}get stores(){return this.$$.ctx[15]}set stores(t){this.$$set({stores:t}),D()}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$$set({isActive:t}),D()}get locale(){return this.$$.ctx[16]}set locale(t){this.$$set({locale:t}),D()}get finetuneControlConfiguration(){return this.$$.ctx[17]}set finetuneControlConfiguration(t){this.$$set({finetuneControlConfiguration:t}),D()}get finetuneOptions(){return this.$$.ctx[18]}set finetuneOptions(t){this.$$set({finetuneOptions:t}),D()}get finetuneNudgePrecision(){return this.$$.ctx[19]}set finetuneNudgePrecision(t){this.$$set({finetuneNudgePrecision:t}),D()}}]},Ld=(t,e)=>{const r=e.length;return t<0?t%r+r:t>=r?t%r:t};function Gy(t,e,r){const a=t.slice();return a[48]=e[r].key,a[49]=e[r].index,a[50]=e[r].translate,a[51]=e[r].scale,a[14]=e[r].rotate,a[52]=e[r].dir,a[53]=e[r].center,a[54]=e[r].type,a[2]=e[r].visible,a}function Zy(t){let e,r;return{c(){e=gt("div"),C(e,"class","PinturaShapeManipulator"),C(e,"data-control","point"),C(e,"style",r=`pointer-events:none;transform: translate3d(${t[53].x}px, ${t[53].y}px, 0) scale(${t[5]}, ${t[5]}); opacity: ${t[4]}`)},m(a,n){st(a,e,n)},p(a,n){56&n[0]&&r!==(r=`pointer-events:none;transform: translate3d(${a[53].x}px, ${a[53].y}px, 0) scale(${a[5]}, ${a[5]}); opacity: ${a[4]}`)&&C(e,"style",r)},d(a){a&&it(e)}}}function Yy(t,e){let r,a,n,i,o,s,l,c,d;function p(...h){return e[19](e[49],...h)}let m=e[54]==="edge"&&e[2]&&Zy(e);return{key:t,first:null,c(){r=gt("div"),s=ge(),m&&m.c(),l=ia(),C(r,"role","button"),C(r,"aria-label",a=`Drag ${e[54]} ${e[48]}`),C(r,"tabindex",n=e[54]==="edge"?-1:0),C(r,"class","PinturaShapeManipulator"),C(r,"data-control",i=e[54]),C(r,"style",o=`cursor:${e[52]?e[52]+"-resize":"move"};opacity:${e[4]};--tx:${e[50].x};--ty:${e[50].y};--r:${e[54]==="edge"?e[14]:0}rad;--sx:${e[54]==="point"?e[5]:e[51].x};--sy:${e[54]==="point"?e[5]:e[51].y};`),this.first=r},m(h,f){st(h,r,f),st(h,s,f),m&&m.m(h,f),st(h,l,f),c||(d=[Mt(r,"keydown",e[7]),Mt(r,"keyup",e[8]),Mt(r,"nudge",p),Ir(qo.call(null,r,{preventDefault:!0})),Mt(r,"interactionstart",function(){Vr(e[11]("start",e[49]))&&e[11]("start",e[49]).apply(this,arguments)}),Mt(r,"interactionupdate",function(){Vr(e[11]("move",e[49]))&&e[11]("move",e[49]).apply(this,arguments)}),Mt(r,"interactionend",function(){Vr(e[11]("end",e[49]))&&e[11]("end",e[49]).apply(this,arguments)}),Ir(Wo.call(null,r))],c=!0)},p(h,f){e=h,8&f[0]&&a!==(a=`Drag ${e[54]} ${e[48]}`)&&C(r,"aria-label",a),8&f[0]&&n!==(n=e[54]==="edge"?-1:0)&&C(r,"tabindex",n),8&f[0]&&i!==(i=e[54])&&C(r,"data-control",i),56&f[0]&&o!==(o=`cursor:${e[52]?e[52]+"-resize":"move"};opacity:${e[4]};--tx:${e[50].x};--ty:${e[50].y};--r:${e[54]==="edge"?e[14]:0}rad;--sx:${e[54]==="point"?e[5]:e[51].x};--sy:${e[54]==="point"?e[5]:e[51].y};`)&&C(r,"style",o),e[54]==="edge"&&e[2]?m?m.p(e,f):(m=Zy(e),m.c(),m.m(l.parentNode,l)):m&&(m.d(1),m=null)},d(h){h&&it(r),h&&it(s),m&&m.d(h),h&&it(l),c=!1,Ar(d)}}}function Xy(t){let e,r,a,n;return{c(){e=gt("div"),C(e,"role","button"),C(e,"aria-label","Drag rotator"),C(e,"tabindex","0"),C(e,"class","PinturaShapeManipulator"),C(e,"data-control","rotate"),C(e,"style",r=`transform: translate3d(${t[0].x}px, ${t[0].y}px, 0) scale(${t[5]}, ${t[5]}); opacity: ${t[4]}`)},m(i,o){st(i,e,o),a||(n=[Mt(e,"keydown",t[7]),Mt(e,"keyup",t[8]),Mt(e,"nudge",t[13]),Ir(qo.call(null,e,{preventDefault:!0})),Mt(e,"interactionstart",t[14]("start")),Mt(e,"interactionupdate",t[14]("move")),Mt(e,"interactionend",t[14]("end")),Ir(Wo.call(null,e))],a=!0)},p(i,o){49&o[0]&&r!==(r=`transform: translate3d(${i[0].x}px, ${i[0].y}px, 0) scale(${i[5]}, ${i[5]}); opacity: ${i[4]}`)&&C(e,"style",r)},d(i){i&&it(e),a=!1,Ar(n)}}}function rR(t){let e,r,a=[],n=new Map,i=t[3];const o=l=>l[48];for(let l=0;l<i.length;l+=1){let c=Gy(t,i,l),d=o(c);n.set(d,a[l]=Yy(d,c))}let s=t[1]&&Xy(t);return{c(){for(let l=0;l<a.length;l+=1)a[l].c();e=ge(),s&&s.c(),r=ia()},m(l,c){for(let d=0;d<a.length;d+=1)a[d].m(l,c);st(l,e,c),s&&s.m(l,c),st(l,r,c)},p(l,c){6584&c[0]&&(i=l[3],a=Xi(a,c,o,1,l,i,n,e.parentNode,e2,Yy,e,Gy)),l[1]?s?s.p(l,c):(s=Xy(l),s.c(),s.m(r.parentNode,r)):s&&(s.d(1),s=null)},i:We,o:We,d(l){for(let c=0;c<a.length;c+=1)a[c].d(l);l&&it(e),s&&s.d(l),l&&it(r)}}}function aR(t,e,r){let a,n,i,o;const s=Oi(),l=.5*mi,c=Qn-l,d=Qn+l,p=-Qn,m=p-l,h=p+l,f=zp-l,g=-zp+l,b=l,w=-l,v=Qn-mi,S=v-l,T=v+l,B=zp-mi,I=B-l,O=B+l,R=p-mi,E=R+l,N=R-l,U=p+mi,x=U+l,j=U-l;let{visible:A=!1}=e,{points:P=[]}=e,{rotatorPoint:G}=e,{enableDragEdges:Q=!0}=e,{enableDragPoints:Z=!0}=e,{enableRotatePoints:ct=!0}=e;const lt=ta("isAnimated");F(t,lt,et=>r(18,n=et));let xt=!1;const yt=ir(.5,{precision:1e-4,stiffness:.3,damping:.7});F(t,yt,et=>r(5,o=et));const bt=ir(0,{precision:.001,stiffness:.3,damping:.7});F(t,bt,et=>r(4,i=et));const qt=et=>{let Vt="";return(et<=d&&et>=c||et>=m&&et<=h)&&(Vt="ns"),(et<=g||et>=f||et>=w&&et<=b)&&(Vt="ew"),(et>=I&&et<=O||et<=x&&et>=j)&&(Vt="nesw"),(et>=S&&et<=T||et<=E&&et>=N)&&(Vt="nwse"),Vt},Y=(et,Vt)=>{s("resizestart",{indexes:et,translation:Or()}),s("resizemove",{indexes:et,translation:Vt}),s("resizeend",{indexes:et,translation:Or()})};return t.$$set=et=>{"visible"in et&&r(2,A=et.visible),"points"in et&&r(15,P=et.points),"rotatorPoint"in et&&r(0,G=et.rotatorPoint),"enableDragEdges"in et&&r(16,Q=et.enableDragEdges),"enableDragPoints"in et&&r(17,Z=et.enableDragPoints),"enableRotatePoints"in et&&r(1,ct=et.enableRotatePoints)},t.$$.update=()=>{262148&t.$$.dirty[0]&&yt.set(A?1:.5,{hard:n===!1}),262148&t.$$.dirty[0]&&bt.set(A?1:0,{hard:n===!1}),32768&t.$$.dirty[0]&&r(3,a=((et,Vt)=>{let z=0;const vt=Kn(et),St=[],W=et.length;for(;z<W;z++){const Lt=Ld(z-1,et),Ce=Ld(z+1,et),pt=et[Lt],zt=et[z],Te=et[Ce],ne=Math.atan2(Te.y-zt.y,Te.x-zt.x);if(Z){const K=jn(ot(pt.x-zt.x,pt.y-zt.y)),Xt=jn(ot(Te.x-zt.x,Te.y-zt.y)),se=ot(K.x+Xt.x,K.y+Xt.y),me=Q?Z&&qt(Math.atan2(se.y,se.x)):void 0;St.push({index:[z],key:"point-"+z,type:"point",scale:{x:1,y:1},translate:{x:zt.x,y:zt.y},angle:void 0,rotate:ct,center:zt,dir:me})}if(!Q||Array.isArray(Q)&&!Q.some(([K,Xt])=>z===K&&Ce===Xt))continue;const At=ot(zt.x+.5*(Te.x-zt.x),zt.y+.5*(Te.y-zt.y));St.push({index:[z,Ce],key:"edge-"+z,type:"edge",scale:{x:Vn(zt,Te),y:1},translate:{x:zt.x,y:zt.y},angle:ne,rotate:ne,center:At,visible:Array.isArray(Q),dir:qt(Math.atan2(vt.y-At.y,vt.x-At.x))})}return St})(P))},[G,ct,A,a,i,o,lt,et=>xt=et.shiftKey,et=>xt=!1,yt,bt,(et,Vt)=>({detail:z})=>{const vt=z&&z.translation?z.translation:ot(0,0);s("resize"+et,de(X({},z),{indexes:Vt,translation:vt,shiftKey:xt}))},Y,({detail:et})=>{s("rotatestart",{translation:Or()}),s("rotatemove",{translation:et}),s("rotateend",{translation:Or()})},et=>({detail:Vt})=>{const z=Vt&&Vt.translation?Vt.translation:ot(0,0);s("rotate"+et,{translation:z,shiftKey:xt})},P,Q,Z,n,(et,{detail:Vt})=>Y(et,Vt)]}class nR extends er{constructor(e){super(),tr(this,e,aR,rR,Ye,{visible:2,points:15,rotatorPoint:0,enableDragEdges:16,enableDragPoints:17,enableRotatePoints:1},null,[-1,-1])}}var qm=(t,e)=>{const r=y1(t);return ha(r,e)};let gm=null;var iR=t=>{if(gm===null&&(gm=Ka()&&"visualViewport"in window),!gm)return!1;const e=visualViewport.height,r=()=>{t(visualViewport.height<e?"visible":"hidden")};return visualViewport.addEventListener("resize",r),()=>visualViewport.removeEventListener("resize",r)};function oR(t){let e,r,a,n,i,o,s,l,c,d;a=new Bo({props:{onclick:t[1],label:t[5],icon:t[7],hideLabel:!t[6]}});const p=t[20].default,m=ga(p,t,t[19],null);return s=new Bo({props:{onclick:t[0],label:t[2],icon:t[4],hideLabel:!t[3],class:"PinturaInputFormButtonConfirm"}}),{c(){e=gt("div"),r=gt("div"),Ut(a.$$.fragment),n=ge(),i=gt("div"),m&&m.c(),o=ge(),Ut(s.$$.fragment),C(i,"class","PinturaInputFormFields"),C(r,"class","PinturaInputFormInner"),C(e,"class","PinturaInputForm"),C(e,"style",t[9])},m(h,f){st(h,e,f),Pt(e,r),Ot(a,r,null),Pt(r,n),Pt(r,i),m&&m.m(i,null),Pt(r,o),Ot(s,r,null),t[21](e),l=!0,c||(d=[Mt(e,"focusin",t[10]),Mt(e,"focusout",t[11]),Mt(e,"measure",t[12]),Ir(qa.call(null,e))],c=!0)},p(h,f){const g={};2&f[0]&&(g.onclick=h[1]),32&f[0]&&(g.label=h[5]),128&f[0]&&(g.icon=h[7]),64&f[0]&&(g.hideLabel=!h[6]),a.$set(g),m&&m.p&&(!l||524288&f[0])&&$a(m,p,h,h[19],l?fa(p,h[19],f,null):ya(h[19]),null);const b={};1&f[0]&&(b.onclick=h[0]),4&f[0]&&(b.label=h[2]),16&f[0]&&(b.icon=h[4]),8&f[0]&&(b.hideLabel=!h[3]),s.$set(b),(!l||512&f[0])&&C(e,"style",h[9])},i(h){l||(V(a.$$.fragment,h),V(m,h),V(s.$$.fragment,h),l=!0)},o(h){_(a.$$.fragment,h),_(m,h),_(s.$$.fragment,h),l=!1},d(h){h&&it(e),Bt(a),m&&m.d(h),Bt(s),t[21](null),c=!1,Ar(d)}}}function sR(t,e,r){let a,n,i,o,{$$slots:s={},$$scope:l}=e,{onconfirm:c}=e,{oncancel:d}=e,{autoFocus:p=!0}=e,{autoPositionCursor:m=!0}=e,{labelConfirm:h}=e,{labelConfirmShow:f=!0}=e,{iconConfirm:g}=e,{labelCancel:b}=e,{labelCancelShow:w=!1}=e,{iconCancel:v}=e,{panelOffset:S=Or()}=e,T=!1,B,I,O="",R=0;const E=()=>{const j=o.querySelector("input, textarea");j.focus(),R>=1||j.select()},N=()=>{T=!0,x||!zi()&&!Dd()||r(16,O="top:1em;bottom:auto;"),zi()&&(j=>{let A;const P=Q=>A=Q.touches[0].screenY,G=Q=>{const Z=Q.touches[0].screenY,ct=Q.target;/textarea/i.test(ct.nodeName)?(Z>A?ct.scrollTop==0&&Q.preventDefault():Z<A?ct.scrollTop+ct.offsetHeight==ct.scrollHeight&&Q.preventDefault():Q.preventDefault(),A=Z):Q.preventDefault()};j.addEventListener("touchstart",P),j.addEventListener("touchmove",G)})(o),r(17,R=1)};let U;const x=iR(j=>{n?j!=="hidden"||T?(clearTimeout(I),I=void 0,r(16,O=`top:${visualViewport.height-B-S.y}px`),j==="visible"?(r(8,o.dataset.layout="stick",o),E(),N()):(T=!1,r(17,R=0))):E():r(16,O="top: 4.5em; bottom: auto")});return Uo(()=>{p&&E()}),ri(()=>{x&&x()}),t.$$set=j=>{"onconfirm"in j&&r(0,c=j.onconfirm),"oncancel"in j&&r(1,d=j.oncancel),"autoFocus"in j&&r(13,p=j.autoFocus),"autoPositionCursor"in j&&r(14,m=j.autoPositionCursor),"labelConfirm"in j&&r(2,h=j.labelConfirm),"labelConfirmShow"in j&&r(3,f=j.labelConfirmShow),"iconConfirm"in j&&r(4,g=j.iconConfirm),"labelCancel"in j&&r(5,b=j.labelCancel),"labelCancelShow"in j&&r(6,w=j.labelCancelShow),"iconCancel"in j&&r(7,v=j.iconCancel),"panelOffset"in j&&r(15,S=j.panelOffset),"$$scope"in j&&r(19,l=j.$$scope)},t.$$.update=()=>{256&t.$$.dirty[0]&&r(18,a=o&&getComputedStyle(o)),262144&t.$$.dirty[0]&&(n=a&&a.getPropertyValue("--editor-modal")==="1"),196608&t.$$.dirty[0]&&r(9,i=`opacity:${R};${O}`)},[c,d,h,f,g,b,w,v,o,i,j=>{var A;(P=>/textarea/i.test(P))(j.target)&&(U=Date.now(),m&&((A=j.target).selectionStart=A.selectionEnd=A.value.length),clearTimeout(I),I=setTimeout(N,200))},j=>{Date.now()-U>50||(j.stopPropagation(),E())},({detail:j})=>{B=j.height},p,m,S,O,R,a,l,s,function(j){xr[j?"unshift":"push"](()=>{o=j,r(8,o)})}]}class lR extends er{constructor(e){super(),tr(this,e,sR,oR,Ye,{onconfirm:0,oncancel:1,autoFocus:13,autoPositionCursor:14,labelConfirm:2,labelConfirmShow:3,iconConfirm:4,labelCancel:5,labelCancelShow:6,iconCancel:7,panelOffset:15},null,[-1,-1])}}var ud=t=>document.createTextNode(t),W2=t=>(po()&&t.endsWith("<div><br></div>")?t.replace(/<div><br><\/div>$/,"<br><br>"):t).replace(/<div><br><\/div>/g,"<br>").replace(/<\/div>/g,"").replace(/<div>/g,"<br>");function cR(t){let e,r,a,n;return{c(){e=gt("pre"),C(e,"class","PinturaContentEditable"),C(e,"data-wrap-content",r=t[3]||t[4]?"wrap":"nowrap"),C(e,"contenteditable",""),C(e,"spellcheck",t[0]),C(e,"autocorrect",t[1]),C(e,"autocapitalize",t[2]),C(e,"style",t[6])},m(i,o){st(i,e,o),t[24](e),a||(n=[Mt(e,"input",t[11]),Mt(e,"compositionend",t[10]),Mt(e,"paste",t[12]),Mt(e,"keydown",t[8]),Mt(e,"keyup",t[9]),Mt(e,"blur",t[7])],a=!0)},p(i,o){24&o[0]&&r!==(r=i[3]||i[4]?"wrap":"nowrap")&&C(e,"data-wrap-content",r),1&o[0]&&C(e,"spellcheck",i[0]),2&o[0]&&C(e,"autocorrect",i[1]),4&o[0]&&C(e,"autocapitalize",i[2]),64&o[0]&&C(e,"style",i[6])},i:We,o:We,d(i){i&&it(e),t[24](null),a=!1,Ar(n)}}}function dR(t,e,r){let a,{spellcheck:n="false"}=e,{autocorrect:i="off"}=e,{autocapitalize:o="off"}=e,{wrapLines:s=!0}=e,{allowNewline:l=!0}=e,{textFormat:c="text"}=e,{formatInput:d=Br}=e,{formatPaste:p=Br}=e,{style:m}=e,{innerHTML:h}=e,{oninput:f=be}=e,{enableTextStyleShortcuts:g=!1}=e;const b=()=>{if(!v)return;const A=document.createRange();A.selectNodeContents(v);const P=E();P.removeAllRanges(),P.addRange(A)},w=Oi();let v;document.execCommand("defaultParagraphSeparator",!1,"br");const S=A=>A.replace(/<\/?(?:i|b|em|u|s|strike|strong|font)>/,"").replace(/style=".*?"/g,"").replace(/\n/gim,"<br>"),T=()=>{r(13,h=v.innerHTML);const A=W2(h);w("input",A),f(A),requestAnimationFrame(()=>v&&v.scrollTo(0,0))},B=()=>{N(v);const A=c==="html"?v.innerHTML:S(v.innerHTML);r(5,v.innerHTML=d(A),v),U(v),T()},I={b:"bold",i:"italic",u:"underline",s:"strikethrough"},O=A=>{const P=Yr("span");return P.dataset.bookmark=A,P},R=(A,P,G)=>{const Q=O(G);if(A.nodeType===Node.TEXT_NODE){const Z=A.textContent;if(G==="start"){const ct=ud(Z.substr(0,P)),lt=ud(Z.substr(P));A.replaceWith(ct,Q,lt)}else{const ct=ud(Z.substr(0,P)),lt=ud(Z.substr(P));A.replaceWith(ct,Q,lt)}}else A.nodeType===Node.ELEMENT_NODE&&A.insertBefore(Q,A.childNodes[P])},E=()=>{const A=v.getRootNode();return"getSelection"in A?A.getSelection():document.getSelection()},N=A=>{const P=E();if(!P.getRangeAt||!P.rangeCount)return;const G=P.getRangeAt(0),{startOffset:Q,endOffset:Z,startContainer:ct,endContainer:lt}=G;if(A.contains(G.startContainer)&&A.contains(G.endContainer))if(ct.nodeType===Node.TEXT_NODE&&ct===lt){const xt=ct.textContent,yt=xt.substr(0,Q),bt=O("start"),qt=Z-Q>0?xt.substr(Q,Z):"",Y=O("end"),et=xt.substr(Z);ct.replaceWith(yt,bt,qt,Y,et)}else R(ct,Q,"start"),R(lt,Z+(ct===lt?1:0),"end")},U=A=>{const P=x(A,"start"),G=x(A,"end");if(!P||!G)return;const Q=document.createRange();Q.setStart(P,0),Q.setEnd(G,0);const Z=E();Z.removeAllRanges(),Z.addRange(Q),P.remove(),G.remove()},x=(A,P)=>{const G=A.children;for(let Q=0;Q<G.length;Q++){const Z=G[Q];if(Z.dataset.bookmark===P)return Z;if(Z.children.length){const ct=x(Z,P);if(ct)return ct}}};let j;return t.$$set=A=>{"spellcheck"in A&&r(0,n=A.spellcheck),"autocorrect"in A&&r(1,i=A.autocorrect),"autocapitalize"in A&&r(2,o=A.autocapitalize),"wrapLines"in A&&r(3,s=A.wrapLines),"allowNewline"in A&&r(4,l=A.allowNewline),"textFormat"in A&&r(14,c=A.textFormat),"formatInput"in A&&r(15,d=A.formatInput),"formatPaste"in A&&r(16,p=A.formatPaste),"style"in A&&r(17,m=A.style),"innerHTML"in A&&r(13,h=A.innerHTML),"oninput"in A&&r(18,f=A.oninput),"enableTextStyleShortcuts"in A&&r(19,g=A.enableTextStyleShortcuts)},t.$$.update=()=>{var A;if(32&t.$$.dirty[0]&&r(23,a=!!v),8396800&t.$$.dirty[0]&&a&&h&&(A=h)!==v.innerHTML&&(r(5,v.innerHTML=A,v),v===document.activeElement&&b()),131096&t.$$.dirty[0])if(!s&&l){const P=m.includes(":right")?"text-indent:-100px!important":m.includes(":center")?"":"min-width:calc(100% + 100px)!important";r(6,j=m+";overflow:visible;"+P)}else r(6,j=m)},[n,i,o,s,l,v,j,()=>{w("blur")},A=>{if(/escape/i.test(A.code))return A.stopPropagation(),void w("cancel");const P=A.ctrlKey||A.metaKey;if(c==="html"&&P&&/b|i|u|s/.test(A.key))return g&&(G=>{const Q=I[G];Q&&document.execCommand(Q)})(A.key),void A.preventDefault();/enter/i.test(A.code)&&(A.stopPropagation(),P?w("confirm"):(l||A.preventDefault(),document.execCommand("insertLineBreak"),A.preventDefault()))},()=>{},A=>{A.data!==""&&B()},A=>{const{inputType:P}=A;P!=="insertCompositionText"&&P!=="deleteCompositionText"&&B()},A=>{A.preventDefault();const P=A.clipboardData.getData("text/plain"),G=c==="html"?P:S(P),Q=p(G);if(!Q.length)return;const Z=E().getRangeAt(0);Z.deleteContents(),Z.insertNode(document.createTextNode(Q)),T()},h,c,d,p,m,f,g,()=>B(),()=>v&&v.focus(),b,a,function(A){xr[A?"unshift":"push"](()=>{v=A,r(5,v)})}]}class uR extends er{constructor(e){super(),tr(this,e,dR,cR,Ye,{spellcheck:0,autocorrect:1,autocapitalize:2,wrapLines:3,allowNewline:4,textFormat:14,formatInput:15,formatPaste:16,style:17,innerHTML:13,oninput:18,enableTextStyleShortcuts:19,confirm:20,focus:21,select:22},null,[-1,-1])}get spellcheck(){return this.$$.ctx[0]}set spellcheck(e){this.$$set({spellcheck:e}),D()}get autocorrect(){return this.$$.ctx[1]}set autocorrect(e){this.$$set({autocorrect:e}),D()}get autocapitalize(){return this.$$.ctx[2]}set autocapitalize(e){this.$$set({autocapitalize:e}),D()}get wrapLines(){return this.$$.ctx[3]}set wrapLines(e){this.$$set({wrapLines:e}),D()}get allowNewline(){return this.$$.ctx[4]}set allowNewline(e){this.$$set({allowNewline:e}),D()}get textFormat(){return this.$$.ctx[14]}set textFormat(e){this.$$set({textFormat:e}),D()}get formatInput(){return this.$$.ctx[15]}set formatInput(e){this.$$set({formatInput:e}),D()}get formatPaste(){return this.$$.ctx[16]}set formatPaste(e){this.$$set({formatPaste:e}),D()}get style(){return this.$$.ctx[17]}set style(e){this.$$set({style:e}),D()}get innerHTML(){return this.$$.ctx[13]}set innerHTML(e){this.$$set({innerHTML:e}),D()}get oninput(){return this.$$.ctx[18]}set oninput(e){this.$$set({oninput:e}),D()}get enableTextStyleShortcuts(){return this.$$.ctx[19]}set enableTextStyleShortcuts(e){this.$$set({enableTextStyleShortcuts:e}),D()}get confirm(){return this.$$.ctx[20]}get focus(){return this.$$.ctx[21]}get select(){return this.$$.ctx[22]}}const Ky=["i","b","u","strike"].map(t=>({tag:t,tagOpen:new RegExp(`<${t}>`,"g"),tagClose:new RegExp(`</${t}>`,"g"),placeholderOpen:new RegExp(`___${t}O___`,"g"),placeholderClose:new RegExp(`___${t}C___`,"g")}));var pR=t=>t=((e,r=Ky)=>(r.forEach(({tag:a,placeholderOpen:n,placeholderClose:i})=>{e=e.replace(n,`<${a}>`).replace(i,`</${a}>`)}),e))(t=(t=((e,r=Ky)=>(r.forEach(({tag:a,tagOpen:n,tagClose:i})=>{e=e.replace(n,`___${a}O___`).replace(i,`___${a}C___`)}),e))(t)).replace(/ {2,}/g," ").replace(/\u00a0/g,"&nbsp;").split(`
`).join("<br>")),pd=(t,e)=>Be(t)?parseFloat(t)/100*e:t,Pl=(t,e)=>({x:an(t.x,e.width),y:an(t.y,e.height)});function Jy(t,e,r){const a=t.slice();return a[225]=e[r],a[227]=r,a}function Qy(t,e){let r,a,n,i,o,s,l,c,d,p,m,h=e[225].name+"";function f(){return e[153](e[227])}return n=new $1({props:{color:e[225].color}}),{key:t,first:null,c(){r=gt("li"),a=gt("button"),Ut(n.$$.fragment),i=ge(),o=gt("span"),s=Hr(h),c=ge(),C(a,"class","PinturaShapeListItem"),C(a,"type","button"),C(a,"aria-label",l="Select shape "+e[225].name),this.first=r},m(g,b){st(g,r,b),Pt(r,a),Ot(n,a,null),Pt(a,i),Pt(a,o),Pt(o,s),Pt(r,c),d=!0,p||(m=Mt(a,"click",f),p=!0)},p(g,b){e=g;const w={};1048576&b[0]&&(w.color=e[225].color),n.$set(w),(!d||1048576&b[0])&&h!==(h=e[225].name+"")&&ca(s,h),(!d||1048576&b[0]&&l!==(l="Select shape "+e[225].name))&&C(a,"aria-label",l)},i(g){d||(V(n.$$.fragment,g),d=!0)},o(g){_(n.$$.fragment,g),d=!1},d(g){g&&it(r),Bt(n),p=!1,m()}}}function tb(t){let e,r;return e=new nR({props:{visible:!0,points:t[12],rotatorPoint:t[26],enableDragEdges:t[16],enableDragPoints:t[28],enableRotatePoints:t[14]}}),e.$on("resizestart",t[36]),e.$on("resizemove",t[37]),e.$on("resizeend",t[38]),e.$on("rotatestart",t[39]),e.$on("rotatemove",t[40]),e.$on("rotateend",t[41]),{c(){Ut(e.$$.fragment)},m(a,n){Ot(e,a,n),r=!0},p(a,n){const i={};4096&n[0]&&(i.points=a[12]),67108864&n[0]&&(i.rotatorPoint=a[26]),65536&n[0]&&(i.enableDragEdges=a[16]),268435456&n[0]&&(i.enableDragPoints=a[28]),16384&n[0]&&(i.enableRotatePoints=a[14]),e.$set(i)},i(a){r||(V(e.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),r=!1},d(a){Bt(e,a)}}}function eb(t){let e,r,a,n;const i=[hR,mR],o=[];function s(l,c){return l[4]==="modal"?0:l[4]==="inline"?1:-1}return~(e=s(t))&&(r=o[e]=i[e](t)),{c(){r&&r.c(),a=ia()},m(l,c){~e&&o[e].m(l,c),st(l,a,c),n=!0},p(l,c){let d=e;e=s(l),e===d?~e&&o[e].p(l,c):(r&&(ze(),_(o[d],1,1,()=>{o[d]=null}),De()),~e?(r=o[e],r?r.p(l,c):(r=o[e]=i[e](l),r.c()),V(r,1),r.m(a.parentNode,a)):r=null)},i(l){n||(V(r),n=!0)},o(l){_(r),n=!1},d(l){~e&&o[e].d(l),l&&it(a)}}}function mR(t){let e,r,a,n,i,o={formatInput:t[43],wrapLines:!!t[13].width,textFormat:t[13].format,enableTextStyleShortcuts:t[5],allowNewline:t[27],style:t[25]};return r=new uR({props:o}),t[156](r),r.$on("input",t[44]),r.$on("keyup",t[47]),r.$on("cancel",t[49]),r.$on("confirm",t[48]),{c(){e=gt("div"),Ut(r.$$.fragment),C(e,"class","PinturaInlineInput"),C(e,"style",t[24])},m(s,l){st(s,e,l),Ot(r,e,null),a=!0,n||(i=Mt(e,"focusout",t[157]),n=!0)},p(s,l){const c={};8192&l[0]&&(c.wrapLines=!!s[13].width),8192&l[0]&&(c.textFormat=s[13].format),32&l[0]&&(c.enableTextStyleShortcuts=s[5]),134217728&l[0]&&(c.allowNewline=s[27]),33554432&l[0]&&(c.style=s[25]),r.$set(c),(!a||16777216&l[0])&&C(e,"style",s[24])},i(s){a||(V(r.$$.fragment,s),a=!0)},o(s){_(r.$$.fragment,s),a=!1},d(s){s&&it(e),t[156](null),Bt(r),n=!1,i()}}}function hR(t){let e,r;return e=new lR({props:{panelOffset:t[2],onconfirm:t[48],oncancel:t[49],labelCancel:t[6].shapeLabelInputCancel,iconCancel:t[6].shapeIconInputCancel,labelConfirm:t[6].shapeLabelInputConfirm,iconConfirm:t[6].shapeIconInputConfirm,$$slots:{default:[gR]},$$scope:{ctx:t}}}),{c(){Ut(e.$$.fragment)},m(a,n){Ot(e,a,n),r=!0},p(a,n){const i={};4&n[0]&&(i.panelOffset=a[2]),64&n[0]&&(i.labelCancel=a[6].shapeLabelInputCancel),64&n[0]&&(i.iconCancel=a[6].shapeIconInputCancel),64&n[0]&&(i.labelConfirm=a[6].shapeLabelInputConfirm),64&n[0]&&(i.iconConfirm=a[6].shapeIconInputConfirm),41943296&n[0]|2048&n[7]&&(i.$$scope={dirty:n,ctx:a}),e.$set(i)},i(a){r||(V(e.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),r=!1},d(a){Bt(e,a)}}}function gR(t){let e,r,a;return{c(){e=gt("textarea"),C(e,"spellcheck","false"),C(e,"autocorrect","off"),C(e,"autocapitalize","off"),C(e,"style",t[25])},m(n,i){st(n,e,i),t[154](e),W0(e,t[23]),r||(a=[Mt(e,"keydown",t[46]),Mt(e,"keypress",t[45]),Mt(e,"keyup",t[47]),Mt(e,"input",t[44]),Mt(e,"input",t[155])],r=!0)},p(n,i){33554432&i[0]&&C(e,"style",n[25]),8388608&i[0]&&W0(e,n[23])},d(n){n&&it(e),t[154](null),r=!1,Ar(a)}}}function rb(t){let e,r,a,n,i;return r=new Ji({props:{items:t[21],key:t[10]}}),{c(){e=gt("div"),Ut(r.$$.fragment),C(e,"class","PinturaShapeControls"),C(e,"style",t[22])},m(o,s){st(o,e,s),Ot(r,e,null),a=!0,n||(i=[Mt(e,"measure",t[158]),Ir(qa.call(null,e))],n=!0)},p(o,s){const l={};2097152&s[0]&&(l.items=o[21]),1024&s[0]&&(l.key=o[10]),r.$set(l),(!a||4194304&s[0])&&C(e,"style",o[22])},i(o){a||(V(r.$$.fragment,o),a=!0)},o(o){_(r.$$.fragment,o),a=!1},d(o){o&&it(e),Bt(r),n=!1,Ar(i)}}}function fR(t){let e,r,a,n,i,o,s,l,c,d,p=[],m=new Map,h=t[20];const f=v=>v[225].id;for(let v=0;v<h.length;v+=1){let S=Jy(t,h,v),T=f(S);m.set(T,p[v]=Qy(T,S))}let g=t[15]&&tb(t),b=t[11]&&eb(t),w=t[17]>0&&rb(t);return{c(){e=gt("div"),r=gt("nav"),a=gt("ul");for(let v=0;v<p.length;v+=1)p[v].c();n=ge(),g&&g.c(),i=ge(),b&&b.c(),o=ge(),w&&w.c(),C(r,"class","PinturaShapeList"),C(r,"data-visible",t[18]),C(e,"class","PinturaShapeEditor"),C(e,"tabindex","0")},m(v,S){st(v,e,S),Pt(e,r),Pt(r,a);for(let T=0;T<p.length;T+=1)p[T].m(a,null);Pt(e,n),g&&g.m(e,null),Pt(e,i),b&&b.m(e,null),Pt(e,o),w&&w.m(e,null),t[159](e),l=!0,c||(d=[Mt(r,"focusin",t[52]),Mt(r,"focusout",t[53]),Mt(e,"keydown",function(){Vr(t[1]?be:t[42])&&(t[1]?be:t[42]).apply(this,arguments)}),Mt(e,"nudge",function(){Vr(t[1]?be:t[51])&&(t[1]?be:t[51]).apply(this,arguments)}),Mt(e,"measure",t[152]),Mt(e,"pointermove",function(){Vr(t[1]?be:t[54])&&(t[1]?be:t[54]).apply(this,arguments)}),Mt(e,"interactionstart",function(){Vr(t[1]?be:t[31])&&(t[1]?be:t[31]).apply(this,arguments)}),Mt(e,"interactionupdate",function(){Vr(t[1]?be:t[33])&&(t[1]?be:t[33]).apply(this,arguments)}),Mt(e,"interactioncancel",function(){Vr(t[1]?be:t[32])&&(t[1]?be:t[32]).apply(this,arguments)}),Mt(e,"interactionrelease",function(){Vr(t[1]?be:t[34])&&(t[1]?be:t[34]).apply(this,arguments)}),Mt(e,"interactionend",function(){Vr(t[1]?be:t[35])&&(t[1]?be:t[35]).apply(this,arguments)}),Ir(qa.call(null,e)),Ir(qo.call(null,e)),Ir(s=Wo.call(null,e,{drag:!0,inertia:!0,multiTouch:!1,shouldStartInteraction:ab,getEventPosition:t[160]}))],c=!0)},p(v,S){t=v,1048705&S[0]&&(h=t[20],ze(),p=Xi(p,S,f,1,t,h,m,a,_o,Qy,null,Jy),De()),(!l||262144&S[0])&&C(r,"data-visible",t[18]),t[15]?g?(g.p(t,S),32768&S[0]&&V(g,1)):(g=tb(t),g.c(),V(g,1),g.m(e,i)):g&&(ze(),_(g,1,1,()=>{g=null}),De()),t[11]?b?(b.p(t,S),2048&S[0]&&V(b,1)):(b=eb(t),b.c(),V(b,1),b.m(e,o)):b&&(ze(),_(b,1,1,()=>{b=null}),De()),t[17]>0?w?(w.p(t,S),131072&S[0]&&V(w,1)):(w=rb(t),w.c(),V(w,1),w.m(e,null)):w&&(ze(),_(w,1,1,()=>{w=null}),De()),s&&Vr(s.update)&&8&S[0]&&s.update.call(null,{drag:!0,inertia:!0,multiTouch:!1,shouldStartInteraction:ab,getEventPosition:t[160]})},i(v){if(!l){for(let S=0;S<h.length;S+=1)V(p[S]);V(g),V(b),V(w),l=!0}},o(v){for(let S=0;S<p.length;S+=1)_(p[S]);_(g),_(b),_(w),l=!1},d(v){v&&it(e);for(let S=0;S<p.length;S+=1)p[S].d();g&&g.d(),b&&b.d(),w&&w.d(),t[159](null),c=!1,Ar(d)}}}const ab=(t,e)=>t.target===e;function $R(t,e,r){let a,n,i,o,s,l,c,d,p,m,h,f,g,b,w,v,S,T,B,I,O,R,E,N,U,x,j,A,P,G,Q,Z,ct,lt,xt,yt,bt,qt,Y,et,Vt,z,vt,St,W,Lt,Ce,{uid:pt=bi()}=e,{ui:zt}=e,{disabled:Te=!1}=e,{markup:ne}=e,{offset:At}=e,{contextRotation:K=0}=e,{contextFlipX:Xt=!1}=e,{contextFlipY:se=!1}=e,{contextZoom:me=1}=e,{active:Ve=!1}=e,{opacity:ke=1}=e,{parentRect:Dt}=e,{rootRect:Ue}=e,{utilRect:Xe}=e,{hoverColor:he}=e,{textInputMode:_t="inline"}=e,{oninteractionstart:rt=be}=e,{oninteractionupdate:Zt=be}=e,{oninteractionrelease:mt=be}=e,{oninteractionend:Se=be}=e,{oninteractioncancel:ht=be}=e,{onaddshape:Et=be}=e,{onupdateshape:ee=be}=e,{onselectshape:re=be}=e,{onremoveshape:Wt=be}=e,{ontapshape:Ht=be}=e,{onhovershape:fe=be}=e,{onhovercanvas:Le=be}=e,{ontapcanvas:mr=be}=e,{beforeSelectShape:He=()=>!0}=e,{beforeDeselectShape:nr=()=>!0}=e,{beforeRemoveShape:ve=()=>!0}=e,{beforeUpdateShape:ae=(k,tt)=>tt}=e,{willRenderShapeControls:xe=Br}=e,{willRenderShapeTextControls:Ke=Br}=e,{willStartInteraction:Me=(k,tt)=>!0}=e,{mapEditorPointToImagePoint:Pe}=e,{mapImagePointToEditorPoint:rr}=e,{eraseRadius:Ae}=e,{selectRadius:Je}=e,{enableButtonFlipVertical:or=!1}=e,{enableTapToAddText:Sr=!0}=e,{enableTextStyleControls:at=!0}=e,{locale:jt}=e;const Ne=ta("isAnimated");F(t,Ne,k=>r(150,Lt=k));const nt=(k,tt,H)=>{let Ct=ae(X({},k),tt,X({},H));Fi(k,Ct,H)},Yt=(k,tt)=>{const H=Vn(k,tt),Ct=Xc(k,tt),ft=Math.PI/8,Jt=ft*Math.round(Ct/ft)-K%ft;tt.x=k.x+H*Math.cos(Jt),tt.y=k.y+H*Math.sin(Jt)},te=(k,tt,H,Ct)=>{const ft=ot(k.x-H.x,k.y-H.y),Jt=ot(Ct.x-H.x,Ct.y-H.y),ie=md(Jt,Jt);let $e=md(ft,Jt)/ie;$e=$e<0?0:$e,$e=$e>1?1:$e;const pe=ot(Jt.x*$e+H.x-k.x,Jt.y*$e+H.y-k.y);return md(pe,pe)<=tt*tt},Re=(k,tt,H)=>{const Ct=H.length;for(let ft=0;ft<Ct-1;ft++)if(te(k,tt,H[ft],H[ft+1]))return!0;return!1},hr=(k,tt,H)=>!!Op(k,H)||!!Re(k,tt,H)||te(k,tt,H[0],H[H.length-1]),Ge=(k,tt,H,Ct,ft)=>hr(k,tt,Za(H,Ct,ft||Cr(H))),zr=ta("keysPressed");F(t,zr,k=>r(151,Ce=k));const Qa=(k,tt,H)=>k===0||tt&&H?k:tt||H?-k:k,Fa=(k,tt)=>{const H=rr(k);return Pe(pa(H,tt))},Ma=(k,tt,H)=>{if(ka(k)){const Ct=Fa(ko(tt),H),ft=Fa(Ro(tt),H);nt(k,{x1:Ct.x,y1:Ct.y,x2:ft.x,y2:ft.y},Dt)}else if(k.points)nt(k,{points:tt.points.map(Ct=>Fa(Ct,H))},Dt);else if(fi(k)||Ra(k)||Ba(k)){const Ct=Fa(tt,H);nt(k,Ct,Dt)}Gr()},dr={0:1,1:0,2:3,3:2},wr={0:3,1:2,2:1,3:0};let tn;const ur=()=>{if(ne.length)return ne.find(io)},Fn=()=>{if(ne.length)return ne.findIndex(io)},gn=(k,tt=!0)=>{if(!ur())return Vv(k),Na(k,tt)},fr=()=>{const k=ur();if(k)return k._isDraft=!1,Gr(),k},Kr=()=>{ur()&&(ne.splice(Fn(),1),Gr())},Gr=()=>r(0,ne),Na=(k,tt=!0)=>(ne.push(k),tt&&Gr(),k),Pn=(k,tt=[],H=!0)=>{tt.filter(Boolean).forEach(Ct=>delete k[Ct]),H&&Gr()},xa=(k,tt,H=!0)=>{k=Object.assign(k,tt),H&&Gr()},Nn=(k,tt,H,Ct=!0)=>{k[tt]=H,Ct&&Gr()},Pa=(k,tt=!0)=>{ne.forEach(H=>xa(H,k,!1)),tt&&Gr()},sn=()=>[...ne].reverse().find(To),ai=()=>!!sn(),Sa=k=>{if(!ve(k))return!1;r(0,ne=ne.filter(tt=>tt!==k)),Wt(k)},Jr=()=>{const k=sn();if(!k)return;const tt=ne.filter(ft=>E0(ft)&&Ls(ft)),H=tt.findIndex(ft=>ft===k);if(Sa(k)===!1)return;if(da=k,tt.length-1<=0)return zn();const Ct=H-1<0?tt.length-1:H-1;ba(tt[Ct])};let da;const zn=(k={})=>{const{storePrevious:tt=!0}=k;Object.keys(va).forEach(H=>va[H]={}),tt&&(da=ra()),Pa({isSelected:!1,isEditing:!1,_prerender:!1})},ra=()=>ne.find(To),ba=(k,tt=!0)=>{if(io(k))return;const H=ra()||da,Ct=To(k);da=void 0,He(H,k)&&(zn(),(ft=>{ft.isSelected=!0})(k),!Ct&&re(k),tt&&Gr())},sr=k=>{Zr&&Zr.confirm&&k.isEditing&&Zr.confirm(),xa(k,{isSelected:!1,isEditing:!1,_prerender:!1})},Ur=k=>{xa(k,{isSelected:!0,isEditing:!0,_prerender:_t==="inline"})},_r=k=>{xa(k,{isSelected:!0,isEditing:!1,_prerender:!1})},Wr=k=>{if(!k.length)return[];const tt=k.filter(ve);return r(0,ne=ne.filter(H=>!tt.includes(H))),tt},Dn=k=>{const tt=Vi(k.text,k);return na(k.x,k.y,k.width?Math.min(k.width,tt.width):tt.width,k.height?Math.min(k.height,tt.height):tt.height)},fn=k=>{if(cs(k))return Ds(k);if(Ba(k))return Dp(k);const tt=Dn(k);return tt.width=Math.max(10,k.width||tt.width),tt},en=(k,tt=0,H=()=>!0)=>[...ne].reverse().filter(H).map(Ct=>({shape:Ct,priority:1})).filter(Ct=>{const{shape:ft}=Ct,Jt=Ga(wa(ft),Dt),ie=tt+(Jt.strokeWidth||0);if(fi(Jt))return Ge(k,ie,Jt,ft.rotation);if(Ra(Jt)){const $e=fn(Jt),pe=Ge(k,ie,$e,ft.rotation);let Nt=!1;if(pe&&!To(ft)){const It=Dn(Jt);ft.textAlign!=="right"||ft.flipX||(It.x=$e.x+$e.width-It.width),ft.textAlign==="center"&&(It.x=$e.x+.5*$e.width-.5*It.width),Nt=Ge(k,ie,It,ft.rotation,Cr($e)),Nt||(Ct.priority=-1)}return pe}return Ba(Jt)?(($e,pe,Nt,It,M,ut)=>{const kt=wm(ot(Nt.x,Nt.y),Nt.rx,Nt.ry,It,M,ut,12);return hr($e,pe,kt)})(k,ie,Jt,ft.rotation,ft.flipX,ft.flipY):ka(Jt)?te(k,Math.max(16,ie),ko(Jt),Ro(Jt)):Oa(Jt)&&Jt.pathClose?hr(k,ie,Jt.points):!!Oa(Jt)&&Re(k,Math.max(16,ie),Jt.points)}).sort((Ct,ft)=>Ct.priority<ft.priority?1:Ct.priority>ft.priority?-1:0).map(Ct=>Ct.shape),On=(k,tt,H,Ct=0)=>{const ft=Math.abs(Ct),Jt=Oo(tt,H),ie=Wh(Jt,ft),$e=(({start:pe,end:Nt},It)=>{if(It===0)return[ot(pe.x,pe.y),ot(pe.x,pe.y),ot(Nt.x,Nt.y),ot(Nt.x,Nt.y)];const M=Math.atan2(Nt.y-pe.y,Nt.x-pe.x),ut=Math.sin(M)*It,kt=Math.cos(M)*It;return[ot(ut+pe.x,-kt+pe.y),ot(-ut+pe.x,kt+pe.y),ot(-ut+Nt.x,kt+Nt.y),ot(ut+Nt.x,-kt+Nt.y)]})(ie,ft);return k.filter(pe=>{const Nt=Ga(wa(pe),Dt);if(ka(Nt)||Oa(Nt)){const It=Nt.points?[...Nt.points]:[ko(Nt),Ro(Nt)];return!!gv(ie,It)}return((It,M)=>!!It.find(ut=>Op(ut,M))||!!M.find(ut=>Op(ut,It)))($e,((It,M=12)=>{if(fi(It))return Za(It,It.rotation,Cr(It));if(Ra(It)){const ut=fn(It);return Za(ut,It.rotation,Cr(ut))}return Ba(It)?wm(ot(It.x,It.y),It.rx,It.ry,It.rotation,It.flipX,It.flipY,M):[]})(Nt))})};let ni,ln,za,lr,rn,Da,q=!1,oe=!1;const we=()=>{clearTimeout(ln),ln=void 0,r(120,oe=!1)},Ie=k=>{if(fi(k)){if(k.width<1&&k.height<1)return;const tt=Cr(k),H=$i(k);return(k.flipX||k.flipY)&&Ws(H,k.flipX,k.flipY,tt.x,tt.y),qs(H,k.rotation,tt.x,tt.y)}if(Ba(k)){if(k.rx<1&&k.ry<1)return;const tt=k,H=$i(Dp(k));return(k.flipX||k.flipY)&&Ws(H,k.flipX,k.flipY,tt.x,tt.y),qs(H,k.rotation,tt.x,tt.y)}if(ka(k))return[ko(k),Ro(k)];if(Oa(k))return[...k.points];if(Ra(k)){if(k.width<5&&k.height<5)return;const tt=fn(k);tt.width=Math.max(10,tt.width);const H=Cr(tt),Ct=$i(tt);return(k.flipX||k.flipY)&&Ws(Ct,k.flipX,k.flipY,H.x,H.y),qs(Ct,k.rotation,H.x,H.y)}return[]},Lr=k=>{const tt=Ie(k);let H,Ct;return k.flipY?(H=Kn([tt[0],tt[1]]),Ct=jn(ot(tt[1].x-tt[2].x,tt[1].y-tt[2].y))):(H=Kn([tt[2],tt[3]]),Ct=jn(ot(tt[2].x-tt[1].x,tt[2].y-tt[1].y))),mn(Ct,20/me),{origin:H,dir:Ct}},kr=()=>{const k=zt.filter(tt=>tt.id!=="markup-hover");k.length!==zt.length&&r(55,zt=k)};let Pr;const $r="markup-manipulator-segment-"+pt,ja=()=>{r(55,zt=zt.filter(k=>k.id!==$r))};let Zr;const $n=k=>{r(8,Zr.innerHTML=pR(k),Zr)},yn=k=>{const tt=k.value===void 0?k.innerHTML:k.value,H=a.format==="text"?W2(tt).split(/<br>|<br\/>/g).join(`
`).replace(/&nbsp;/g,String.fromCharCode(160)).replace(/&amp;/g,"&"):tt;return Md(a)&&a.disableNewline!==!1?(Ct=>{const ft=Ct.split(/[\n\r]/g);return ft.length>1?ft.map(Jt=>Jt.trim()).filter(Jt=>Jt.length).join(" "):ft[0]})(H):H},bn=()=>{const k=yn(Zr),tt=Fs(a,k),H=tt===!0?k:tt;let Ct=R.x,ft=R.y;if(!a.height){const Jt=Za(X({},N),a.rotation),ie=Vi(H,s),$e=Za(X({x:Ct,y:ft},ie),a.rotation),[pe,,Nt]=Jt,[It,,M]=$e;let ut=pe,kt=It;a.flipX&&(ut=Nt,kt=M);const Ft=ha(Fe(ut),kt);Ct+=Ft.x,ft+=Ft.y}xa(a,{x:Be(O.x)?an(Ct,Dt.width):Ct,y:Be(O.y)?an(ft,Dt.height):ft,text:H})},Ri=()=>{let k=i;i&&fr(),Zr&&Zr.confirm&&Zr.confirm(),bn(),_r(a),k?Et(a):ee(a)},Gn=()=>{i?Kr():(xa(a,{text:O.text,x:O.x,y:O.y}),_r(a))},Bn=(k,tt,{flipX:H,flipY:Ct,rotation:ft},Jt="top left")=>{let ie,$e;const[pe,Nt,It,M]=Za(k,ft),[ut,kt,Ft,Kt]=Za(tt,ft);return Jt==="top center"?(ie=Kn(Ct?[M,It]:[pe,Nt]),$e=Kn(Ct?[Kt,Ft]:[ut,kt])):Jt==="top right"&&!H||Jt==="top left"&&H?(ie=Ct?It:Nt,$e=Ct?Ft:kt):(ie=Ct?M:pe,$e=Ct?Kt:ut),ha(Fe(ie),$e)},Ia=(k,tt,H)=>ot(Be(k.x)?an(tt.x+H.x,Dt.width):tt.x+H.x,Be(k.y)?an(tt.y+H.y,Dt.height):tt.y+H.y),va={},Bi=()=>Ur(a),Ui=()=>{const k=lo(Vi(a.text,s),pe=>Math.ceil(pe)),tt=Ee(a,"height"),H=!tt&&Ee(a,"width"),Ct=a.id;let ft=va[Ct];ft||(va[Ct]={},ft=va[Ct]);const Jt=pe=>{const Ft=s,{width:Nt}=Ft,It=Gc(Ft,["width"]),M=Vi(a.text,It),ut=Bn(na(s.x,s.y,pe.width,pe.height),na(s.x,s.y,M.width,M.height),s,"top "+a.textAlign),kt=s.disableNewline!==!1;Pn(a,["width","height",kt&&"textAlign"]),xa(a,X({},Ia(a,s,ut)))},ie=pe=>{const Nt=ma(ft.width||s.width||k.width,k.height),It=ft.textAlign||"left",M=Bn(na(s.x,s.y,pe.width,pe.height),na(s.x,s.y,Nt.width,Nt.height),s,"top "+It);Pn(a,["height"]),xa(a,de(X({},Ia(a,s,M)),{width:Be(a.width)?an(Nt.width,Dt.width):Nt.width,textAlign:It}))},$e=pe=>{const Nt=ma(ft.width||k.width,ft.height||k.height),It=ft.textAlign||"left",M=Bn(na(s.x,s.y,pe.width,pe.height),na(s.x,s.y,Nt.width,Nt.height),s,"top "+It);xa(a,de(X({},Ia(a,s,M)),{width:Be(a.width)?an(Nt.width,Dt.width):Nt.width,height:Be(a.width)?an(Nt.height,Dt.height):Nt.height,textAlign:It}))};if(tt){ft.textAlign=a.textAlign,ft.width=s.width,ft.height=s.height;const pe=ma(s.width,s.height);as(a,"auto-height")?ie(pe):as(a,"auto-width")&&Jt(pe)}else if(H){ft.textAlign=a.textAlign,ft.width=s.width;const pe=ma(s.width,k.height);as(a,"auto-width")?Jt(pe):as(a,"fixed-size")&&$e(pe)}else{ft.textAlign=a.textAlign;const pe=ma(Math.ceil(k.width),Math.ceil(k.height));as(a,"fixed-size")?$e(pe):as(a,"auto-height")&&ie(pe)}},_i=k=>{k.stopPropagation();const tt=a.flipX||!1;Nn(a,"flipX",!tt),ee(a)},Qi=k=>{k.stopPropagation();const tt=a.flipY||!1;Nn(a,"flipY",!tt),ee(a)},ii=k=>{Nn(a,"opacity",k)},ys=k=>{ii(k),ee(a)},Zn=k=>{k.stopPropagation(),k.target.blur(),Jr()},cn=k=>{k.stopPropagation(),ne.findIndex(tt=>tt===a)!==ne.length-1&&(r(0,ne=ne.filter(tt=>tt!==a).concat([a])),ee(a))},Un=k=>{k.stopPropagation(),ho()},ho=()=>{const k=wa(a);k.id=bi();const tt=ot(50,-50);if(Ee(k,"points")){const H=js(k,["points"],Dt);H.points.forEach(Ct=>{Ct.x+=tt.x,Ct.y+=tt.y}),Fi(k,H,Dt)}else if(ka(k)){const H=js(k,["x1","y1","x2","y2"],Dt);H.x1+=tt.x,H.y1+=tt.y,H.x2+=tt.x,H.y2+=tt.y,Fi(k,H,Dt)}else{const H=js(k,["x","y"],Dt);H.x+=50,H.y-=50,Fi(k,H,Dt)}ne.push(k),Et(k),ba(k)},to=ir(0,{stiffness:.2,damping:.7});let vn;F(t,to,k=>r(17,W=k));const go=(k,tt)=>{const{disableTextLayout:H=[]}=tt;return"height"in tt?H.includes("auto-height")?k.shapeIconButtonTextLayoutAutoWidth:k.shapeIconButtonTextLayoutAutoHeight:"width"in tt?H.includes("auto-width")?k.shapeIconButtonTextLayoutFixedSize:k.shapeIconButtonTextLayoutAutoWidth:H.includes("fixed-size")?k.shapeIconButtonTextLayoutAutoHeight:k.shapeIconButtonTextLayoutFixedSize},fo=(k,tt)=>{const{disableTextLayout:H=[]}=tt;return"height"in tt?H.includes("auto-height")?k.shapeTitleButtonTextLayoutAutoWidth:k.shapeTitleButtonTextLayoutAutoHeight:"width"in tt?H.includes("auto-width")?k.shapeTitleButtonTextLayoutFixedSize:k.shapeTitleButtonTextLayoutAutoWidth:H.includes("fixed-size")?k.shapeTitleButtonTextLayoutAutoHeight:k.shapeTitleButtonTextLayoutFixedSize};let oi=!1,$o=Or(),Ti;const Wi=k=>{fe(k),r(121,Pr=k)};let In;return ri(()=>{ja(),kr()}),t.$$set=k=>{"uid"in k&&r(56,pt=k.uid),"ui"in k&&r(55,zt=k.ui),"disabled"in k&&r(1,Te=k.disabled),"markup"in k&&r(0,ne=k.markup),"offset"in k&&r(2,At=k.offset),"contextRotation"in k&&r(57,K=k.contextRotation),"contextFlipX"in k&&r(58,Xt=k.contextFlipX),"contextFlipY"in k&&r(59,se=k.contextFlipY),"contextZoom"in k&&r(60,me=k.contextZoom),"active"in k&&r(61,Ve=k.active),"opacity"in k&&r(62,ke=k.opacity),"parentRect"in k&&r(63,Dt=k.parentRect),"rootRect"in k&&r(3,Ue=k.rootRect),"utilRect"in k&&r(64,Xe=k.utilRect),"hoverColor"in k&&r(65,he=k.hoverColor),"textInputMode"in k&&r(4,_t=k.textInputMode),"oninteractionstart"in k&&r(66,rt=k.oninteractionstart),"oninteractionupdate"in k&&r(67,Zt=k.oninteractionupdate),"oninteractionrelease"in k&&r(68,mt=k.oninteractionrelease),"oninteractionend"in k&&r(69,Se=k.oninteractionend),"oninteractioncancel"in k&&r(70,ht=k.oninteractioncancel),"onaddshape"in k&&r(71,Et=k.onaddshape),"onupdateshape"in k&&r(72,ee=k.onupdateshape),"onselectshape"in k&&r(73,re=k.onselectshape),"onremoveshape"in k&&r(74,Wt=k.onremoveshape),"ontapshape"in k&&r(75,Ht=k.ontapshape),"onhovershape"in k&&r(76,fe=k.onhovershape),"onhovercanvas"in k&&r(77,Le=k.onhovercanvas),"ontapcanvas"in k&&r(78,mr=k.ontapcanvas),"beforeSelectShape"in k&&r(79,He=k.beforeSelectShape),"beforeDeselectShape"in k&&r(80,nr=k.beforeDeselectShape),"beforeRemoveShape"in k&&r(81,ve=k.beforeRemoveShape),"beforeUpdateShape"in k&&r(82,ae=k.beforeUpdateShape),"willRenderShapeControls"in k&&r(83,xe=k.willRenderShapeControls),"willRenderShapeTextControls"in k&&r(84,Ke=k.willRenderShapeTextControls),"willStartInteraction"in k&&r(85,Me=k.willStartInteraction),"mapEditorPointToImagePoint"in k&&r(86,Pe=k.mapEditorPointToImagePoint),"mapImagePointToEditorPoint"in k&&r(87,rr=k.mapImagePointToEditorPoint),"eraseRadius"in k&&r(88,Ae=k.eraseRadius),"selectRadius"in k&&r(89,Je=k.selectRadius),"enableButtonFlipVertical"in k&&r(90,or=k.enableButtonFlipVertical),"enableTapToAddText"in k&&r(91,Sr=k.enableTapToAddText),"enableTextStyleControls"in k&&r(5,at=k.enableTextStyleControls),"locale"in k&&r(6,jt=k.locale)},t.$$.update=()=>{var k,tt;3&t.$$.dirty[0]&&r(125,a=!Te&&ne&&(ur()||sn())),2&t.$$.dirty[4]&&r(148,n=!!a),2&t.$$.dirty[4]&&r(139,i=a&&io(a)),32770&t.$$.dirty[4]&&r(10,o=a&&!i?a.id:void 0),8&t.$$.dirty[0]|2&t.$$.dirty[2]|2&t.$$.dirty[4]&&r(13,s=Ue&&a&&Ga(wa(a),Dt)),32770&t.$$.dirty[4]&&r(123,l=!(!a||!i)),8192&t.$$.dirty[0]|1&t.$$.dirty[2]|2&t.$$.dirty[4]&&r(147,c=a&&ke&&Ie(s)||[]),2&t.$$.dirty[4]&&r(149,d=a&&km(k=a)&&Il(k)&&k.disableResize!==!0&&(cs(k)||fd(k)||Ba(k)||ka(k)||Oa(k)&&Ee(k,"pathClose"))&&!no(a)),2&t.$$.dirty[4]&&r(14,p=a&&(H=>km(H)&&H.disableRotate!==!0&&(cs(H)||Ee(H,"text")||Ba(H)))(a)&&!no(a)),33554434&t.$$.dirty[4]&&r(16,m=d&&Ee(a,"text")&&!a.height?[[1,2],[3,0]]:(!a||!ka(a)&&!Oa(a))&&d),65536&t.$$.dirty[0]|33554434&t.$$.dirty[4]&&r(28,h=!!a&&!Array.isArray(m)&&d),8388610&t.$$.dirty[4]&&r(15,f=a&&c.length>1),33554432&t.$$.dirty[2]|8388608&t.$$.dirty[4]&&r(145,g=c.map(rr)),4&t.$$.dirty[0]|2097152&t.$$.dirty[4]&&r(12,b=g.map(H=>ot(H.x-At.x,H.y-At.y))),16777218&t.$$.dirty[4]&&r(27,w=n&&(fd(a)?!Ee(a,"disableNewline")||!a.disableNewline:a.disableNewline===!1)),33554432&t.$$.dirty[2]|268435456&t.$$.dirty[3]&&(Pr&&rr&&!To(Pr)&&Ls(Pr)?(H=>{const Ct=Ie(Ga(wa(H),Dt));if(!Ct)return;const ft=Ct.map(rr),Jt=!!H.pathClose||!Oa(H)&&!ka(H),ie={id:"markup-hover",points:ft.map(Nt=>ot(Nt.x+1,Nt.y+1)),strokeColor:[0,0,0,.1],strokeWidth:2,pathClose:Jt},$e={id:"markup-hover",points:ft,strokeColor:he,strokeWidth:2,pathClose:Jt},pe=zt.filter(Nt=>Nt.id!=="markup-hover");r(55,zt=[...pe,ie,$e])})(Pr):kr()),61440&t.$$.dirty[0]|1&t.$$.dirty[2]&&r(146,v=f&&p&&ke&&b&&(H=>{const Ct=Lr(H),ft=rr({x:Ct.origin.x+Ct.dir.x,y:Ct.origin.y+Ct.dir.y});return{origin:rr(Ct.origin),position:ft}})(s)),4&t.$$.dirty[0]|4194304&t.$$.dirty[4]&&r(26,S=v&&ot(v.position.x-At.x,v.position.y-At.y)),536870912&t.$$.dirty[3]|32770&t.$$.dirty[4]&&r(144,T=i&&Oa(a)&&Ti),1&t.$$.dirty[2]|3145730&t.$$.dirty[4]&&a&&g&&ke>0&&((H,Ct,ft)=>{const Jt=Oa(Ct),ie=Jt&&Ee(Ct,"pathClose"),$e=ie&&(Qe=>Qe.strokeWidth&&((qr,pr)=>{const aa=qr.strokeColor;return!!aa&&(aa.length===3||aa[3]>0)})(Qe))(Ct),pe=io(Ct),Nt=no(Ct);if(pe&&Jt&&!ie)return;const It=[],M=[...g],ut=M[M.length-1],kt=M[0],Ft=(Nt?.05:.1)*H,Kt=(Nt?.5:1)*H,ye=[0,0,0],Gt=[1,1,1],ue=Nt?1:1.5;Ce.includes(16)&&ut&&ft&&Yt(ut,ft);const Oe=(M.length&&ie&&pe&&ft?hi(kt,ft):1/0)<=256,qe=(M.length&&ie&&pe&&ft?hi(ut,ft):1/0)<=256;!Oe&&ft&&M.push(ft);const Rr=M.length>1,gr=!!Ct.pathClose||!Oa(Ct)&&!ka(Ct)||M.length>2&&Oe;Rr&&It.push({id:$r,points:M.map(Qe=>ot(Qe.x+1,Qe.y+1)),pathClose:gr,strokeColor:ye,strokeWidth:2,opacity:Ft}),ie&&It.push(...M.map(Qe=>de(X({id:$r},Qe),{rx:2*ue,ry:2*ue,backgroundColor:ye,opacity:Ft}))),v&&It.push({id:$r,points:[ot(v.origin.x+1,v.origin.y+1),ot(v.position.x+1,v.position.y+1)],strokeColor:ye,strokeWidth:2,opacity:Ft}),Rr&&It.push({id:$r,points:M,pathClose:gr,strokeColor:Gt,strokeWidth:ue,backgroundColor:pe&&ie&&Ct.backgroundColor&&Ct.backgroundColor[3]>0?Ct.backgroundColor:[0,0,0,0],opacity:Kt}),ie&&It.push(...M.map(Qe=>de(X({id:$r},Qe),{rx:3*ue,ry:3*ue,backgroundColor:[.5,.5,.5],strokeWidth:ue,strokeColor:Gt}))),ie&&pe&&g.length>=3&&It.push(de(X({},kt),{id:$r,rx:ue*(Oe?5:4),ry:ue*(Oe?5:4),backgroundColor:Oe?he:[.5,.5,.5],strokeWidth:ue,strokeColor:Gt})),ie&&pe&&$e&&!Oe&&c.length>=2&&It.push(de(X({},ut),{id:$r,rx:ue*(qe?5:4),ry:ue*(qe?5:4),backgroundColor:qe?he:[.5,.5,.5],strokeWidth:ue,strokeColor:Gt})),v&&It.push({id:$r,points:[{x:v.origin.x,y:v.origin.y},{x:v.position.x,y:v.position.y}],strokeColor:Gt,strokeWidth:ue,opacity:Kt}),r(55,zt=zt.filter(Qe=>Qe.id!==$r).concat(It))})(ke,a,T),2&t.$$.dirty[4]&&(a||ja()),1073741824&t.$$.dirty[1]&&(H=>{if(!H)return Pa({_prerender:!1});const Ct=ne.find(ft=>ft.isEditing);Ct&&xa(Ct,{_prerender:_t==="inline"})})(Ve),134217728&t.$$.dirty[4]&&Ce&&Ce.length&&(()=>{const[H]=Ce;H!==8&&H!==46||ai()&&(a.isEditing||Jr())})(),272&t.$$.dirty[0]&&Zr&&_t==="inline"&&Zr.focus(),2&t.$$.dirty[4]&&r(143,B=a&&Ra(a)),524290&t.$$.dirty[4]&&r(11,I=B&&Fs(a)!==!1&&no(a)),2048&t.$$.dirty[0]&&r(138,O=I?X({},a):void 0),2&t.$$.dirty[2]|16384&t.$$.dirty[4]&&r(140,R=O&&Ga(X({},O),Dt)),65536&t.$$.dirty[4]&&r(142,E=R&&Vi(R.text,R)),327680&t.$$.dirty[4]&&(N=R&&na(R.x,R.y,E.width,E.height)),2048&t.$$.dirty[0]|2&t.$$.dirty[4]&&r(23,U=I?a.text:""),2056&t.$$.dirty[0]|2&t.$$.dirty[2]|2&t.$$.dirty[4]&&r(141,x=Ue&&a&&I&&Ga(de(X({},wa(a)),{width:Mr(a.width)?Math.floor(a.width):void 0,height:Mr(a.height)?Math.floor(a.height):void 0}),Dt)),2064&t.$$.dirty[0]|131072&t.$$.dirty[4]&&r(25,j=I&&((H,Ct)=>{const{textAlign:ft="left",fontFamily:Jt="sans-serif",fontWeight:ie="normal",fontStyle:$e="normal"}=H,pe="!important",Nt=`text-align:${ft}${pe};font-family:${Jt}${pe};font-weight:${ie}${pe};font-style:${$e}${pe};`;if(Ct==="modal")return Nt;let It=H.fontSize,M=1,ut="";It>1e3&&Zi()&&(M=It/1e3,ut=`transform-origin:0 0;transform:scale(${M})`,It=1e3);let kt=H.lineHeight/M;const Ft=kn(H.color),Kt=.5*Math.max(0,It-kt);return`--font-scalar:${M};--bottom-inset:${Kt}px;padding:${Kt}px 0 0${pe};color:${Ft}${pe};font-size:${It}px${pe};line-height:${kt}px${pe};${Nt};${ut}`})(x,_t)),2052&t.$$.dirty[0]|603979776&t.$$.dirty[1]|131072&t.$$.dirty[4]&&r(24,A=I&&((H,Ct,ft,Jt)=>{let ie,$e;H.width&&H.height?(ie=Cr(H),$e=Yi(H)):($e=Vi(a.text,s),$e.width=s.width||$e.width,ie=ot(H.x+.5*$e.width,H.y+.5*$e.height));const pe=Math.max(0,H.fontSize-H.lineHeight)+H.lineHeight,Nt=rr(ie);let It=Nt.x-Ct.x-.5*$e.width,M=Nt.y-Ct.y-.5*$e.height,ut=H.flipX,kt=H.flipY,Ft=H.rotation;Xt&&se?(ut=!ut,kt=!kt):Xt?(ut=!ut,Ft=-Ft):se&&(kt=!kt,Ft=-Ft),Ft+=Jt;const Kt=ft*(ut?-1:1),ye=ft*(kt?-1:1);return`--line-height:${pe}px;width:${$e.width}px;height:${$e.height}px;transform:translate(${It}px,${M}px) rotate(${Ft}rad) scale(${Kt}, ${ye})`})(x,At,me,K)),2320&t.$$.dirty[0]&&I&&Zr&&_t==="inline"&&$n(U),1073741824&t.$$.dirty[3]|34&t.$$.dirty[4]&&r(129,P=a&&!l?a:P),32&t.$$.dirty[4]&&r(131,G=P&&d4(P)),32&t.$$.dirty[4]&&r(126,Q=P&&as(P)),32&t.$$.dirty[4]&&r(128,Z=P&&(H=>H.disableDuplicate!==!0&&Il(H))(P)),32&t.$$.dirty[4]&&r(127,ct=P&&E0(P)),32&t.$$.dirty[4]&&r(130,lt=P&&(H=>H.disableReorder!==!0)(P)),32&t.$$.dirty[4]&&r(124,xt=P&&Fs(P)!==!1),32&t.$$.dirty[4]&&r(132,yt=P&&Ee(P,"backgroundImage")&&Cm(P,"opacity")),2&t.$$.dirty[4]&&r(134,bt=a&&a.format==="html"),1073741824&t.$$.dirty[3]|1026&t.$$.dirty[4]&&r(137,qt=a&&(!l||bt)),134217728&t.$$.dirty[3]|67117056&t.$$.dirty[4]&&to.set(qt&&!oe?1:0,{hard:Lt===!1}),4096&t.$$.dirty[0]|12288&t.$$.dirty[4]&&r(136,Y=qt&&b.length?(tt=Sn(b),qn(ot(tt.x+.5*tt.width,tt.y),ql)):Y),512&t.$$.dirty[0]|4&t.$$.dirty[2]|4096&t.$$.dirty[4]&&r(135,et=Y&&vn&&Xe&&(H=>{const Ct=Xe.x,ft=Xe.y,Jt=Ct+Xe.width;let ie=Math.max(H.x-.5*vn.width,Ct),$e=Math.max(H.y-vn.height-16,ft);return ie+vn.width>Jt&&(ie=Jt-vn.width),ot(ie,$e)})(Y)),131072&t.$$.dirty[0]|2048&t.$$.dirty[4]&&r(22,Vt=et&&`transform: translate(${et.x}px, ${et.y}px);opacity:${W}`),2048&t.$$.dirty[0]&&r(133,z=I?"text":"shape"),1089&t.$$.dirty[0]|274726912&t.$$.dirty[2]|2047&t.$$.dirty[4]&&r(21,vt=z==="text"&&Ke&&bt?jl(()=>Ke([["div","text-styles",{class:"PinturaShapeControlsGroup"},[...[["bold",{label:"B",style:"font-weight:900;",title:"Bold",shortcut:["CMD","B"]}],["italic",{label:"I",style:"font-family:Times New Roman;font-style:italic;",title:"Italic",shortcut:["CMD","I"]}],["underline",{label:"U",style:"text-decoration:underline;",title:"Underline",shortcut:["CMD","U"]}],["strikeThrough",{label:"S",style:"text-decoration:line-through;",title:"Strikethrough",shortcut:["CMD","S"]}]].map(([H,Ct])=>["Button","style-"+H,de(X({onclick:()=>document.execCommand(H)},Ct),{style:"font-size:1.25em;text-underline-offset:1px;text-decoration-thickness:1.5px;font-weight:400;"+Ct.style})])]],["div","text-reset",{class:"PinturaShapeControlsGroup"},[["Button","style-reset",{onclick:()=>document.execCommand("removeFormat"),style:"font-weight:400;",label:'<span style="font-size:1.25em;font-style:italic;font-family:Times New Roman;text-decoration:underline;">T</span><span style="position:relative;top:.175rem;">&times;</span>',title:"Remove styles"}]]]],o)):z==="shape"&&xe&&o?jl(()=>xe([yt&&["div","alpha",{class:"PinturaShapeControlsGroup"},[["ToggleSlider","adjust-opacity",{onrelease:ys,onchange:ii,step:.01,value:Ee(a,"opacity")?a.opacity:1,label:(H,Ct,ft)=>Math.round(H/ft*100)+"%",min:0,max:1,direction:"x"}]]],["div","beta",{class:"PinturaShapeControlsGroup"},[G&&["Button","flip-horizontal",{onclick:_i,label:jt.shapeTitleButtonFlipHorizontal,icon:jt.shapeIconButtonFlipHorizontal,hideLabel:!0}],G&&or&&["Button","flip-vertical",{onclick:Qi,label:jt.shapeTitleButtonFlipVertical,icon:jt.shapeIconButtonFlipVertical,hideLabel:!0}],lt&&["Button","to-front",{onclick:cn,label:jt.shapeTitleButtonMoveToFront,icon:jt.shapeIconButtonMoveToFront,hideLabel:!0,disabled:ne[ne.length-1]===P}],Z&&["Button","duplicate",{onclick:Un,label:jt.shapeTitleButtonDuplicate,icon:jt.shapeIconButtonDuplicate,shortcut:["CMD","D"],hideLabel:!0}],ct&&["Button","remove",{onclick:Zn,label:jt.shapeTitleButtonRemove,icon:jt.shapeIconButtonRemove,shortcut:["Backspace"],hideLabel:!0}]].filter(Boolean)],xt&&Q&&["div","gamma",{class:"PinturaShapeControlsGroup"},[["Button","text-layout",{onclick:Ui,label:Ua(fo,jt,a),icon:Ua(go,jt,a),hideLabel:!0}]]],xt&&["div","delta",{class:"PinturaShapeControlsGroup"},[["Button","edit-text",{label:jt.shapeLabelInputText,onclick:Bi}]]]].filter(Boolean),o)):[]),65&t.$$.dirty[0]&&r(20,St=ne.filter(Ls).filter(H=>!io(H)).map(H=>({id:H.id,color:Ra(H)?H.color:ka(H)?H.strokeColor:H.backgroundColor,name:H.name||jt["shapeLabelTool"+n2(h4(H))]})))},[ne,Te,At,Ue,_t,at,jt,ba,Zr,vn,o,I,b,s,p,f,m,W,oi,In,St,vt,Vt,U,A,j,S,w,h,Ne,zr,k=>{const{origin:tt}=k.detail;lr=void 0,rn=void 0,Da=void 0,q=!1,za=void 0,clearTimeout(ln),ln=setTimeout(()=>r(120,oe=!0),250);const H=ur();!H||Oa(H)&&Ee(H,"pathClose")||fr(),ni=Pe(Fe(tt));const Ct=en(ni,Je,Jt=>Ls(Jt)),ft=Ct.length&&Ct.shift();if(a&&no(a)&&Ri(),!ft&&a&&no(a)&&sr(a),!!Me(tt)){if(ft&&To(ft))return q=!0,lr=ft,rn=wa(lr),void(Da=Ga(wa(lr),Dt));za=ft||void 0,!rt(k)&&ft&&(ba(ft),lr=ft,rn=wa(lr),Da=Ga(wa(lr),Dt))}},k=>{we(),ht(k)},k=>{const{translation:tt}=k.detail;if(lr)return!Il(lr)||no(lr)?void 0:Ma(lr,Da,tt);Zt(k)},k=>{we(),lr?no(lr)?Gn():k.detail.isTap&&q&&Ra(lr)&&Fs(lr)!==!1&&Ur(lr):mt(k)},k=>{const tt=za&&k.detail.isTap;if(k.detail.isTap&&mr({target:lr||za,position:ni}),lr)return Ht(lr),H=lr,Ct=rn,JSON.stringify(H)!==JSON.stringify(Ct)&&ee(lr),void(lr=void 0);var H,Ct;const ft=ra(),Jt=!ft||nr(ft,za||void 0);Jt&&zn({storePrevious:!1}),Se(k),Jt&&tt&&ba(za)},k=>{r(120,oe=!0),lr=a,Da=s},k=>{if(!lr)return void r(120,oe=!1);const{translation:tt,indexes:H,shiftKey:Ct}=k.detail;((ft,Jt,ie,$e,pe)=>{if(ka(ft)||Oa(ft)&&Ee(ft,"pathClose")){const[Nt]=ie,It=Ce.includes(16)?Yt:(Kt,ye)=>ye;let M,ut,kt;if(ka(ft))Nt===0?(M=()=>ko(Jt),ut=Kt=>It(Ro(Jt),Kt),kt=(Kt,ye)=>{Kt.x1=ye.x,Kt.y1=ye.y}):Nt===1&&(M=()=>Ro(Jt),ut=Kt=>It(ko(Jt),Kt),kt=(Kt,ye)=>{Kt.x2=ye.x,Kt.y2=ye.y});else{const Kt=Jt.points;M=()=>Kt[Nt],ut=ye=>{const Gt=Kt[Ld(Nt-1,Kt)],ue=Kt[Ld(Nt+1,Kt)];It(Gt,ye),It(ue,ye)},kt=(ye,Gt)=>ye.points[Nt]=Gt}const Ft=Fa(M(),$e);ut(Ft),kt(ft,Ft)}else if(cs(ft)||Ba(ft)||fd(ft)){let Nt,It,M=!1;if(Ba(ft))Nt=Dp(Jt);else if(cs(ft))Nt=Ds(Jt);else{M=!0,Nt=Ds(Jt);const Gt=Vi(Jt.text,Jt);Nt.height=Gt.height}ft.aspectRatio?It=ft.aspectRatio:pe.shiftKey&&!M&&(It=Nt.width/Nt.height);const ut=Ds(Nt),kt=Cr(ut),Ft=ft.rotation,Kt=$i(ut),ye=Za(ut,Ft);if(ie.length===1){let Gt=ie[0];ft.flipX&&(Gt=dr[Gt]),ft.flipY&&(Gt=wr[Gt]);const[ue,Oe,qe,Rr]=Kt,gr=rr(ye[Gt]);pa(gr,$e);const Qe=Pe(gr),qr=ot(Qe.x-ye[Gt].x,Qe.y-ye[Gt].y),pr=xn(Fe(qr),-Ft),aa=ot(Kt[Gt].x+pr.x,Kt[Gt].y+pr.y);let Ha;Gt===0&&(Ha=qe),Gt===1&&(Ha=Rr),Gt===2&&(Ha=ue),Gt===3&&(Ha=Oe);const dn=Sn([Ha,aa]);if(It){const{width:li,height:Tr}=Cn(dn,It),[qi,oa,Aa,Dr]=hs(dn);dn.width=li,dn.height=Tr,aa.y<Ha.y&&(dn.y=Aa-Tr),aa.x<Ha.x&&(dn.x=oa-li)}const si=Za(dn,Ft,kt),An=Kn(si),Yn=xn(si[0],-Ft,An),un=xn(si[2],-Ft,An),En=Sn([Yn,un]);nt(ft,Ba(ft)?l0(En):En,Dt)}else{ie=ie.map(Dr=>(ft.flipX&&(Dr=dr[Dr]),ft.flipY&&(Dr=wr[Dr]),Dr));const[Gt,ue]=ie.map(Dr=>ye[Dr]),Oe={x:Gt.x+.5*(ue.x-Gt.x),y:Gt.y+.5*(ue.y-Gt.y)},[qe,Rr]=ie.map(Dr=>Kt[Dr]),[gr,Qe]=ie.map(Dr=>{const sa=Dr+2;return sa<4?Kt[sa]:Kt[sa-4]}),qr={x:gr.x+.5*(Qe.x-gr.x),y:gr.y+.5*(Qe.y-gr.y)},pr=rr(Oe);pa(pr,$e);const aa=Pe(pr),Ha=ot(aa.x-Oe.x,aa.y-Oe.y),dn=xn(Fe(Ha),-Ft),si=ha(Fe(qe),Rr),An=qn(si,Dr=>1-Math.abs(Math.sign(Dr))),Yn=ot(dn.x*An.x,dn.y*An.y);pa(qe,Yn),pa(Rr,Yn);const un=Sn(Kt);if(It){let Dr=un.width,sa=un.height;An.y===0?sa=Dr/It:Dr=sa*It,un.width=Dr,un.height=sa,An.y===0?un.y=qr.y-.5*sa:un.x=qr.x-.5*Dr}const En=Za(un,Ft,kt),li=Kn(En),Tr=xn(En[0],-Ft,li),qi=xn(En[2],-Ft,li),oa=Sn([Tr,qi]);let Aa;Ba(ft)?Aa=l0(oa):cs(ft)?Aa=oa:M&&(Aa={x:oa.x,y:oa.y,width:oa.width}),nt(ft,Aa,Dt)}}Gr()})(lr,Da,H,tt,{shiftKey:Ct})},k=>{if(!lr)return void r(120,oe=!1);ba(lr);const{isTap:tt}=k.detail;tt&&Ht(lr),lr=void 0,r(120,oe=!1),ee(a)},k=>{tn=Lr(s).origin,r(120,oe=!0),lr=a,Da=s},k=>{if(!lr)return void r(120,oe=!1);const{translation:tt,shiftKey:H}=k.detail;((Ct,ft,Jt,ie)=>{const $e=fn(Ga(wa(Ct),Dt)),pe=Cr($e),Nt=Fa(tn,Jt);let It=Xc(Nt,pe)+Math.PI/2;if(ie.shiftKey){const M=Math.PI/16;It=M*Math.round(It/M)-K%M}nt(Ct,{rotation:It},Dt),Gr()})(lr,0,tt,{shiftKey:H})},()=>{lr?(ba(lr),lr=void 0,r(120,oe=!1),ee(a)):r(120,oe=!1)},k=>{const{key:tt}=k,H=/escape/i.test(tt);if(ai())return H?(k.preventDefault(),k.stopPropagation(),sr(a)):void(Z&&tt==="d"&&(k.metaKey||k.ctrlKey)&&(k.preventDefault(),k.stopPropagation(),ho()))},k=>{const tt=Fs(a,k);return tt===!0?k:tt},bn,k=>{const{target:tt,key:H}=k,Ct=tt.value||tt.innerText,ft=tt.selectionStart||0,Jt=tt.selectionEnd||Ct.length,ie=Ct.substring(0,ft)+H+Ct.substring(Jt);if(Fs(a,ie)!==ie)return k.preventDefault()},k=>Md(a)&&/enter/i.test(k.code)&&a.disableNewline!==!1?k.preventDefault():/arrow/i.test(k.code)?k.stopPropagation():/escape/i.test(k.key)?Gn():void 0,k=>{const{key:tt,ctrlKey:H,altKey:Ct}=k;if(/enter/i.test(tt)&&(H||Ct))return Ri()},Ri,Gn,to,k=>{const tt=sn();tt&&(no(tt)||Il(tt)&&(lr=tt,Da=Ga(wa(lr),Dt),Ma(lr,Da,k.detail)))},k=>{r(18,oi=!0)},({relatedTarget:k})=>{k&&k.classList.contains("shape-selector__button")||r(18,oi=!1)},k=>{if(k.pointerType==="touch")return;(oe||ln)&&Wi(void 0);const tt=qm(k,Ue),H=qn(Pe(tt),ft=>Math.round(ft));if(Mo(H,$o)||($o=Fe(H),r(122,Ti=tt),oe||ln)||(Le(tt,H),l))return;const[Ct]=en(H,0,Ls);Ct&&io(Ct)||Wi(Ct)},zt,pt,K,Xt,se,me,Ve,ke,Dt,Xe,he,rt,Zt,mt,Se,ht,Et,ee,re,Wt,Ht,fe,Le,mr,He,nr,ve,ae,xe,Ke,Me,Pe,rr,Ae,Je,or,Sr,(k,tt={})=>{let H,Ct,ft,Jt=Ba(k),ie=Ra(k),$e=tt.position==="relative";const pe=tt.inputMode==="step";if(Oa(k)){if(pe){let Nt=!1;const It=(M,ut)=>{const kt=ur(),Ft=M&&ot(pd(M.x,Dt.width),pd(M.y,Dt.height)),Kt=Ft&&rr(Ft);Ce.includes(16)&&Kt&&Yt(Kt,ut);const ye=Pe(ut),Gt=kt.points.length?kt.points[0]:ye,ue=ot(pd(Gt.x,Dt.width),pd(Gt.y,Dt.height)),Oe=rr(ue),qe=hi(Oe,ut);if(!Nt&&kt.points.length===1&&qe<36)return Kr();if(kt.points.length>2&&qe<=256){kt.pathClose=!0,ba(kt);const Qe=fr();return void Et(Qe)}const Rr=kt.strokeWidth&&kt.strokeColor&&(kt.strokeColor[3]===void 0||kt.strokeColor[3]>0),gr=hi(Kt,ut);if(Rr&&kt.points.length>1&&gr<256){kt.pathClose=!1,kt.backgroundColor=[0,0,0,0],ba(kt);const Qe=fr();Et(Qe)}else if(!(kt.points.length>0&&gr<100))return $e?Pl(ye,Dt):ye};return{start:M=>{const{origin:ut}=M.detail;Ct=4,H=Fe(ut),ft=Fe(ut);const kt=ur();if(kt){const Ft=kt.points[kt.points.length-1],Kt=It(Ft,H);return Kt&&(kt.points=[...kt.points,Kt]),Gr()}Nt=!0},update:M=>{if(!Nt)return;const ut=ur();if(!ut)return;const kt=ut.points[0],Ft=It(kt,ot(H.x+M.detail.translation.x,H.y+M.detail.translation.y));Ft&&(ut.points[1]=Ft,Gr())},release:M=>M.detail.preventInertia(),cancel:M=>Kr(),end:M=>{if(!Nt)return;const ut=Pe(H),kt=$e?Pl(ut,Dt):ut,{isTap:Ft}=M.detail;if(Ft&&en(ut,0,Ls).length)return Kr();gn(de(X({},k),{points:[kt]}))}}}return{start:Nt=>{const{origin:It}=Nt.detail;Ct=4,H=Fe(It),ft=Fe(It);const M=Pe(It),ut=$e?Pl(M,Dt):M;gn(de(X({},k),{points:[ut]}))},update:Nt=>{const It=ur(),{translation:M}=Nt.detail,ut=ot(H.x+M.x,H.y+M.y),kt=Vn(ft,ut);if(Ze(kt,5)<=Ct)return;const Ft=Xc(ut,ft),Kt=Ct-kt;ft.x+=Kt*Math.cos(Ft),ft.y+=Kt*Math.sin(Ft);const ye=Pe(ft),Gt=$e?Pl(ye,Dt):ye;It.points=It.points.concat(Gt),Gr()},release:Nt=>Nt.detail.preventInertia(),cancel:()=>{Kr()},end:Nt=>{if(Nt.detail.isTap)return Kr();const It=fr();Et(It)}}}return Jt||ie||fi(k)?{start:Nt=>{const{origin:It}=Nt.detail;H=Fe(It);const M=Pe(H),ut=$e?Pl(M,Dt):M,kt=-1*Qa(K,Xt,se),Ft=X(de(X({},k),{rotation:kt}),ut);Ft.flipX=Xt,Ft.flipY=se,delete Ft.position,Ft.opacity=0,(Jt?["rx","ry"]:["width","height"]).forEach(Kt=>{Ft[Kt]=$e?"0%":0}),gn(Ft)},update:Nt=>{const It=ur();It.opacity=1;const{aspectRatio:M}=It;let{translation:ut}=Nt.detail;if(M){const Qe=Math.abs(ut.x)*M;ut.x=ut.x,ut.y=Qe*Math.sign(ut.y)}const kt=ot(H.x+ut.x,H.y+ut.y),Ft=Pe(H),Kt=Pe(kt),ye={x:Ft.x+.5*(Kt.x-Ft.x),y:Ft.y+.5*(Kt.y-Ft.y)},Gt=Qa(K,Xt,se);xn(Ft,Gt,ye),xn(Kt,Gt,ye);const ue=Math.min(Ft.x,Kt.x),Oe=Math.min(Ft.y,Kt.y);let qe=Math.max(Ft.x,Kt.x)-ue,Rr=Math.max(Ft.y,Kt.y)-Oe,gr={};Jt?(gr.x=ue+.5*qe,gr.y=Oe+.5*Rr,gr.rx=.5*qe,gr.ry=.5*Rr):(gr.x=ue,gr.y=Oe,gr.width=qe,gr.height=Rr),nt(It,gr,Dt),Gr()},release:Nt=>{Nt.detail.preventInertia()},cancel:Nt=>{Kr()},end:Nt=>{const It=ur();if(Nt.detail.isTap){if(!Ra(It)||!Sr||za)return Kr();delete It.width,delete It.height,It.disableNewline!==!1&&delete It.textAlign;const M=Ga(X({},It),Dt),ut=Vi(It.text,M),kt=Pe({x:H.x,y:H.y-.5*ut.height}),Ft=Pe({x:H.x+ut.width,y:H.y+.5*ut.height}),Kt={x:kt.x+.5*(Ft.x-kt.x),y:kt.y+.5*(Ft.y-kt.y)},ye=Qa(K,Xt,se);xn(kt,ye,Kt),xn(Ft,ye,Kt);let Gt=Math.min(kt.x,Ft.x),ue=Math.min(kt.y,Ft.y);Gt<0&&(Gt=0),ue<0&&(ue=0),Gt+ut.width>Dt.width&&(Gt=Dt.width-ut.width),ue+ut.height>Dt.height&&(ue=Dt.height-ut.height),It.x=Be(It.x)?an(Gt,Dt.width):Gt,It.y=Be(It.y)?an(ue,Dt.height):ue}if(It.opacity=1,!Ra(It)){const M=fr();Et(M)}ba(It),Ra(It)&&Ur(It)}}:ka(k)?{start:Nt=>{const{origin:It}=Nt.detail,M=Pe(It),ut=qn(M,ql);H=Fe(It),gn(de(X({},k),{x1:$e?an(ut.x,Dt.width):ut.x,y1:$e?an(ut.y,Dt.height):ut.y,x2:$e?an(ut.x,Dt.width):ut.x,y2:$e?an(ut.y,Dt.height):ut.y,opacity:0}))},update:Nt=>{const It=ur(),{translation:M}=Nt.detail,ut=pa(Fe(H),M);if(Ce.includes(16)){const Ft=Vn(H,ut),Kt=Xc(H,ut),ye=Math.PI/4,Gt=ye*Math.round(Kt/ye);ut.x=H.x+Ft*Math.cos(Gt),ut.y=H.y+Ft*Math.sin(Gt)}const kt=Pe(ut);xa(It,{x2:$e?an(kt.x,Dt.width):kt.x,y2:$e?an(kt.y,Dt.height):kt.y,opacity:1}),Gr()},release:Nt=>Nt.detail.preventInertia(),cancel:Nt=>{Kr()},end:Nt=>{const It=ur();if(Nt.detail.isTap)return Kr();It.opacity=1;const M=fr();Et(M),ba(M)}}:void 0},()=>{let k,tt;const H=Ae*Ae,Ct=(ft,Jt,ie=!1)=>{const $e=hi(ft,Jt);if(!ie&&$e<2)return!1;const pe=ne.filter(It=>!It.disableErase);let Nt;return Nt=$e<H?en(Pe(Jt),Ae):On(pe,Pe(ft),Pe(Jt),Ae),Wr(Nt).forEach(Wt),!0};return{start:ft=>{k=ot(Math.round(ft.detail.origin.x),Math.round(ft.detail.origin.y)),Ct(k,k,!0),tt=k},update:ft=>{const{translation:Jt}=ft.detail,ie=ot(Math.round(k.x+Jt.x),Math.round(k.y+Jt.y));Ct(tt,ie)&&(tt=Fe(ie))},release:ft=>ft.detail.preventInertia(),end:()=>{}}},ur,Fn,gn,fr,Kr,(k={})=>X({id:bi()},k),Gr,Na,Pn,xa,Nn,(k,tt,H=!0)=>{ne.forEach(Ct=>Nn(Ct,k,tt,!1)),H&&Gr()},Pa,sn,ai,Sa,Jr,zn,sr,Ur,_r,Wr,Dn,fn,en,On,oe,Pr,Ti,l,xt,a,Q,ct,Z,P,lt,G,yt,z,bt,et,Y,qt,O,i,R,x,E,B,T,g,v,c,n,d,Lt,Ce,function(k){on.call(this,t,k)},k=>ba(ne[k]),function(k){xr[k?"unshift":"push"](()=>{Zr=k,r(8,Zr)})},function(){U=this.value,r(23,U),r(11,I),r(125,a),r(143,B),r(1,Te),r(0,ne)},function(k){xr[k?"unshift":"push"](()=>{Zr=k,r(8,Zr)})},()=>{In&&In.focus()},k=>r(9,vn=k.detail),function(k){xr[k?"unshift":"push"](()=>{In=k,r(19,In)})},k=>qm(k,Ue)]}class yR extends er{constructor(e){super(),tr(this,e,$R,fR,Ye,{uid:56,ui:55,disabled:1,markup:0,offset:2,contextRotation:57,contextFlipX:58,contextFlipY:59,contextZoom:60,active:61,opacity:62,parentRect:63,rootRect:3,utilRect:64,hoverColor:65,textInputMode:4,oninteractionstart:66,oninteractionupdate:67,oninteractionrelease:68,oninteractionend:69,oninteractioncancel:70,onaddshape:71,onupdateshape:72,onselectshape:73,onremoveshape:74,ontapshape:75,onhovershape:76,onhovercanvas:77,ontapcanvas:78,beforeSelectShape:79,beforeDeselectShape:80,beforeRemoveShape:81,beforeUpdateShape:82,willRenderShapeControls:83,willRenderShapeTextControls:84,willStartInteraction:85,mapEditorPointToImagePoint:86,mapImagePointToEditorPoint:87,eraseRadius:88,selectRadius:89,enableButtonFlipVertical:90,enableTapToAddText:91,enableTextStyleControls:5,locale:6,createShape:92,eraseShape:93,getMarkupItemDraft:94,getMarkupItemDraftIndex:95,addMarkupItemDraft:96,confirmMarkupItemDraft:97,discardMarkupItemDraft:98,createMarkupItem:99,syncShapes:100,addShape:101,removeMarkupShapeProps:102,updateMarkupShape:103,updateMarkupShapeProperty:104,updateMarkupItemsShapeProperty:105,updateMarkupShapeItems:106,getActiveMarkupItem:107,hasActiveMarkupItem:108,removeShape:109,removeActiveMarkupItem:110,blurShapes:111,selectShape:7,deselectMarkupItem:112,editMarkupItem:113,finishEditMarkupItem:114,removeMarkupItems:115,getTextShapeRect:116,getMarkupShapeRect:117,getShapesNearPosition:118,getShapesBetweenPoints:119},null,[-1,-1,-1,-1,-1,-1,-1,-1])}get createShape(){return this.$$.ctx[92]}get eraseShape(){return this.$$.ctx[93]}get getMarkupItemDraft(){return this.$$.ctx[94]}get getMarkupItemDraftIndex(){return this.$$.ctx[95]}get addMarkupItemDraft(){return this.$$.ctx[96]}get confirmMarkupItemDraft(){return this.$$.ctx[97]}get discardMarkupItemDraft(){return this.$$.ctx[98]}get createMarkupItem(){return this.$$.ctx[99]}get syncShapes(){return this.$$.ctx[100]}get addShape(){return this.$$.ctx[101]}get removeMarkupShapeProps(){return this.$$.ctx[102]}get updateMarkupShape(){return this.$$.ctx[103]}get updateMarkupShapeProperty(){return this.$$.ctx[104]}get updateMarkupItemsShapeProperty(){return this.$$.ctx[105]}get updateMarkupShapeItems(){return this.$$.ctx[106]}get getActiveMarkupItem(){return this.$$.ctx[107]}get hasActiveMarkupItem(){return this.$$.ctx[108]}get removeShape(){return this.$$.ctx[109]}get removeActiveMarkupItem(){return this.$$.ctx[110]}get blurShapes(){return this.$$.ctx[111]}get selectShape(){return this.$$.ctx[7]}get deselectMarkupItem(){return this.$$.ctx[112]}get editMarkupItem(){return this.$$.ctx[113]}get finishEditMarkupItem(){return this.$$.ctx[114]}get removeMarkupItems(){return this.$$.ctx[115]}get getTextShapeRect(){return this.$$.ctx[116]}get getMarkupShapeRect(){return this.$$.ctx[117]}get getShapesNearPosition(){return this.$$.ctx[118]}get getShapesBetweenPoints(){return this.$$.ctx[119]}}function bR(t){let e,r,a;return r=new Ji({props:{items:t[1]}}),{c(){e=gt("ul"),Ut(r.$$.fragment),C(e,"class","PinturaShapeStyleList")},m(n,i){st(n,e,i),Ot(r,e,null),a=!0},p(n,i){const o={};2&i&&(o.items=n[1]),r.$set(o)},i(n){a||(V(r.$$.fragment,n),a=!0)},o(n){_(r.$$.fragment,n),a=!1},d(n){n&&it(e),Bt(r)}}}function vR(t){let e,r,a;return r=new Ki({props:{class:"PinturaShapeStyles",elasticity:t[0],$$slots:{default:[bR]},$$scope:{ctx:t}}}),{c(){e=gt("div"),Ut(r.$$.fragment),C(e,"style",t[2])},m(n,i){st(n,e,i),Ot(r,e,null),a=!0},p(n,[i]){const o={};1&i&&(o.elasticity=n[0]),65538&i&&(o.$$scope={dirty:i,ctx:n}),r.$set(o),(!a||4&i)&&C(e,"style",n[2])},i(n){a||(V(r.$$.fragment,n),a=!0)},o(n){_(r.$$.fragment,n),a=!1},d(n){n&&it(e),Bt(r)}}}function xR(t,e,r){let a,n,i,o,s,l,{isActive:c=!1}=e,{controls:d=[]}=e,{locale:p}=e,{scrollElasticity:m}=e,{willRenderControls:h=Br}=e,{hideTitles:f=!1}=e;const g=ta("isAnimated");F(t,g,S=>r(15,l=S));const b=ta("redrawTrigger");F(t,b,S=>r(13,o=S));const w=ta("env");F(t,w,S=>r(12,i=S));const v=ir(0,{stiffness:.25,damping:.9});return F(t,v,S=>r(14,s=S)),t.$$set=S=>{"isActive"in S&&r(7,c=S.isActive),"controls"in S&&r(8,d=S.controls),"locale"in S&&r(9,p=S.locale),"scrollElasticity"in S&&r(0,m=S.scrollElasticity),"willRenderControls"in S&&r(10,h=S.willRenderControls),"hideTitles"in S&&r(11,f=S.hideTitles)},t.$$.update=()=>{32896&t.$$.dirty&&v.set(c?1:0,{hard:l===!1}),16512&t.$$.dirty&&r(2,a=`opacity:${s};${c?"":"pointer-events:none;"}${s<=0?"visibility:hidden":""}`),16128&t.$$.dirty&&r(1,n=o&&h(d.map(S=>["ShapeStyle",S.id,{title:S.componentProps.title,locale:p,hideTitle:f,items:[[S.component,S.id,S.componentProps]]}]),i,()=>b.set({})))},[m,n,a,g,b,w,v,c,d,p,h,f,i,o,s,l]}class wR extends er{constructor(e){super(),tr(this,e,xR,vR,Ye,{isActive:7,controls:8,locale:9,scrollElasticity:0,willRenderControls:10,hideTitles:11})}}function nb(t,e,r){const a=t.slice();return a[12]=e[r].key,a[3]=e[r].controls,a[13]=e[r].isActive,a}function ib(t,e){let r,a,n;return a=new wR({props:{isActive:e[13],controls:e[3],locale:e[1],scrollElasticity:e[2]}}),{key:t,first:null,c(){r=ia(),Ut(a.$$.fragment),this.first=r},m(i,o){st(i,r,o),Ot(a,i,o),n=!0},p(i,o){e=i;const s={};16&o&&(s.isActive=e[13]),16&o&&(s.controls=e[3]),2&o&&(s.locale=e[1]),4&o&&(s.scrollElasticity=e[2]),a.$set(s)},i(i){n||(V(a.$$.fragment,i),n=!0)},o(i){_(a.$$.fragment,i),n=!1},d(i){i&&it(r),Bt(a,i)}}}function SR(t){let e,r,a,n=[],i=new Map,o=t[4];const s=l=>l[12];for(let l=0;l<o.length;l+=1){let c=nb(t,o,l),d=s(c);i.set(d,n[l]=ib(d,c))}return{c(){e=gt("div");for(let l=0;l<n.length;l+=1)n[l].c();C(e,"class",r=ar(["PinturaShapeStyleEditor",t[0]]))},m(l,c){st(l,e,c);for(let d=0;d<n.length;d+=1)n[d].m(e,null);a=!0},p(l,[c]){22&c&&(o=l[4],ze(),n=Xi(n,c,s,1,l,o,i,e,_o,ib,null,nb),De()),(!a||1&c&&r!==(r=ar(["PinturaShapeStyleEditor",l[0]])))&&C(e,"class",r)},i(l){if(!a){for(let c=0;c<o.length;c+=1)V(n[c]);a=!0}},o(l){for(let c=0;c<n.length;c+=1)_(n[c]);a=!1},d(l){l&&it(e);for(let c=0;c<n.length;c+=1)n[c].d()}}}function CR(t,e,r){let a,n,i,{class:o}=e,{controls:s={}}=e,{shape:l}=e,{onchange:c}=e,{locale:d}=e,{scrollElasticity:p}=e;const m=[];return t.$$set=h=>{"class"in h&&r(0,o=h.class),"controls"in h&&r(3,s=h.controls),"shape"in h&&r(5,l=h.shape),"onchange"in h&&r(6,c=h.onchange),"locale"in h&&r(1,d=h.locale),"scrollElasticity"in h&&r(2,p=h.scrollElasticity)},t.$$.update=()=>{8&t.$$.dirty&&r(8,a=Object.keys(s).filter(h=>s[h])),288&t.$$.dirty&&r(7,n=l&&Object.keys(l).length&&a&&Cm(l)?(h=>a.filter(f=>f.split("_").every(g=>Ee(h,g)&&Cm(h,g))).map(f=>{const g=f.split("_"),b=g.length>1?g.map(T=>h[T]):h[f];let[w,v]=s[f];if(Be(w)&&s[w]){const T=X({},v);[w,v]=s[w],v=X(X({},v),T)}const S=Xr(v.options)?v.options(h):v.options;return{id:f,component:w,componentProps:de(X({},v),{options:S,locale:d,value:b,optionLabelClass:"PinturaButtonLabel",onchange:T=>{const B=gs(T)&&!ea(T)?T.value:T;v.onchange&&v.onchange(B,h);const I=g.length>1?g.reduce((O,R,E)=>de(X({},O),{[R]:Array.isArray(B)?B[E]:B}),{}):{[f]:B};c(I)}})}}).filter(Boolean))(l):[]),160&t.$$.dirty&&r(4,i=((h,f)=>{let g=m.find(b=>b.key===h);return g||(g={key:h,controls:f},m.push(g)),m.forEach(b=>b.isActive=!1),g.controls=f,g.isActive=!0,m})(l&&Object.keys(l).length?Object.keys(l).join("_"):"none",n||[]))},[o,d,p,s,i,l,c,n,a]}class q2 extends er{constructor(e){super(),tr(this,e,CR,SR,Ye,{class:0,controls:3,shape:5,onchange:6,locale:1,scrollElasticity:2})}}const{document:ob}=t2;function kR(t){let e,r,a,n;return{c(){e=ge(),r=gt("button"),C(r,"class","PinturaDragButton"),C(r,"type","button"),C(r,"title",t[1]),r.disabled=t[2]},m(i,o){st(i,e,o),st(i,r,o),r.innerHTML=t[0],t[11](r),a||(n=[Mt(ob.body,"load",t[5],!0),Mt(ob.body,"error",t[6],!0),Mt(r,"pointerdown",t[4])],a=!0)},p(i,[o]){1&o&&(r.innerHTML=i[0]),2&o&&C(r,"title",i[1]),4&o&&(r.disabled=i[2])},i:We,o:We,d(i){i&&it(e),i&&it(r),t[11](null),a=!1,Ar(n)}}}function RR(t,e,r){let a,{html:n}=e,{title:i}=e,{onclick:o}=e,{disabled:s=!1}=e,{ongrab:l=be}=e,{ondrag:c=be}=e,{ondrop:d=be}=e;const p=b=>hi(m,ot(b.pageX,b.pageY))<256;let m;const h=b=>{document.documentElement.removeEventListener("pointermove",f),document.documentElement.removeEventListener("pointerup",h);const w=ot(b.pageX,b.pageY);if(hi(m,w)<32)return o(b);p(b)||d(b)},f=b=>{p(b)||c(b)},g=b=>a&&a.contains(b)&&b.nodeName==="IMG";return t.$$set=b=>{"html"in b&&r(0,n=b.html),"title"in b&&r(1,i=b.title),"onclick"in b&&r(7,o=b.onclick),"disabled"in b&&r(2,s=b.disabled),"ongrab"in b&&r(8,l=b.ongrab),"ondrag"in b&&r(9,c=b.ondrag),"ondrop"in b&&r(10,d=b.ondrop)},t.$$.update=()=>{8&t.$$.dirty&&a&&a.querySelector("img")&&r(3,a.dataset.loader=!0,a)},[n,i,s,a,b=>{m=ot(b.pageX,b.pageY),l(b),document.documentElement.addEventListener("pointermove",f),document.documentElement.addEventListener("pointerup",h)},({target:b})=>{g(b)&&r(3,a.dataset.load=!0,a)},({target:b})=>{g(b)&&r(3,a.dataset.error=!0,a)},o,l,c,d,function(b){xr[b?"unshift":"push"](()=>{a=b,r(3,a)})}]}class TR extends er{constructor(e){super(),tr(this,e,RR,kR,Ye,{html:0,title:1,onclick:7,disabled:2,ongrab:8,ondrag:9,ondrop:10})}}function sb(t,e,r){const a=t.slice();return a[14]=e[r],a}function lb(t,e){let r,a,n,i,o,s,l;function c(){return e[10](e[14])}function d(...h){return e[11](e[14],...h)}function p(...h){return e[12](e[14],...h)}function m(...h){return e[13](e[14],...h)}return a=new TR({props:{onclick:c,ongrab:d,ondrag:p,ondrop:m,disabled:e[1]||e[14].disabled,title:e[14].title,html:e[14].thumb}}),{key:t,first:null,c(){r=gt("li"),Ut(a.$$.fragment),n=ge(),C(r,"class","PinturaShapePreset"),C(r,"style",e[6]),this.first=r},m(h,f){st(h,r,f),Ot(a,r,null),Pt(r,n),o=!0,s||(l=Ir(i=e[8].call(null,r,e[14])),s=!0)},p(h,f){e=h;const g={};5&f&&(g.onclick=c),9&f&&(g.ongrab=d),17&f&&(g.ondrag=p),33&f&&(g.ondrop=m),3&f&&(g.disabled=e[1]||e[14].disabled),1&f&&(g.title=e[14].title),1&f&&(g.html=e[14].thumb),a.$set(g),(!o||64&f)&&C(r,"style",e[6]),i&&Vr(i.update)&&1&f&&i.update.call(null,e[14])},i(h){o||(V(a.$$.fragment,h),o=!0)},o(h){_(a.$$.fragment,h),o=!1},d(h){h&&it(r),Bt(a),s=!1,l()}}}function MR(t){let e,r,a=[],n=new Map,i=t[0];const o=s=>s[14].id;for(let s=0;s<i.length;s+=1){let l=sb(t,i,s),c=o(l);n.set(c,a[s]=lb(c,l))}return{c(){e=gt("ul");for(let s=0;s<a.length;s+=1)a[s].c();C(e,"class","PinturaShapePresetsList")},m(s,l){st(s,e,l);for(let c=0;c<a.length;c+=1)a[c].m(e,null);r=!0},p(s,[l]){127&l&&(i=s[0],ze(),a=Xi(a,l,o,1,s,i,n,e,_o,lb,null,sb),De())},i(s){if(!r){for(let l=0;l<i.length;l+=1)V(a[l]);r=!0}},o(s){for(let l=0;l<a.length;l+=1)_(a[l]);r=!1},d(s){s&&it(e);for(let l=0;l<a.length;l+=1)a[l].d()}}}function PR(t,e,r){let a,n,{presets:i}=e,{disabled:o}=e,{onclickpreset:s}=e,{ongrabpreset:l}=e,{ondragpreset:c}=e,{ondroppreset:d}=e;const p=ir(0,{stiffness:.25,damping:.9});return F(t,p,m=>r(9,n=m)),Uo(()=>p.set(1)),t.$$set=m=>{"presets"in m&&r(0,i=m.presets),"disabled"in m&&r(1,o=m.disabled),"onclickpreset"in m&&r(2,s=m.onclickpreset),"ongrabpreset"in m&&r(3,l=m.ongrabpreset),"ondragpreset"in m&&r(4,c=m.ondragpreset),"ondroppreset"in m&&r(5,d=m.ondroppreset)},t.$$.update=()=>{512&t.$$.dirty&&r(6,a="opacity:"+n)},[i,o,s,l,c,d,a,p,(m,h)=>h.mount&&h.mount(m.firstChild,h),n,m=>s(m.id),(m,h)=>l&&l(m.id,h),(m,h)=>c&&c(m.id,h),(m,h)=>d&&d(m.id,h)]}class j2 extends er{constructor(e){super(),tr(this,e,PR,MR,Ye,{presets:0,disabled:1,onclickpreset:2,ongrabpreset:3,ondragpreset:4,ondroppreset:5})}}var H2=t=>/<svg /.test(t);function IR(t){let e,r;return e=new Ji({props:{items:t[10]}}),{c(){Ut(e.$$.fragment)},m(a,n){Ot(e,a,n),r=!0},p(a,n){const i={};1024&n&&(i.items=a[10]),e.$set(i)},i(a){r||(V(e.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),r=!1},d(a){Bt(e,a)}}}function AR(t){let e,r,a,n;const i=[VR,ER],o=[];function s(l,c){return l[8]?0:1}return e=s(t),r=o[e]=i[e](t),{c(){r.c(),a=ia()},m(l,c){o[e].m(l,c),st(l,a,c),n=!0},p(l,c){let d=e;e=s(l),e===d?o[e].p(l,c):(ze(),_(o[d],1,1,()=>{o[d]=null}),De(),r=o[e],r?r.p(l,c):(r=o[e]=i[e](l),r.c()),V(r,1),r.m(a.parentNode,a))},i(l){n||(V(r),n=!0)},o(l){_(r),n=!1},d(l){o[e].d(l),l&&it(a)}}}function ER(t){let e,r,a,n,i=t[10]&&cb(t);return a=new Ki({props:{scrollAutoCancel:t[9],elasticity:t[0],$$slots:{default:[LR]},$$scope:{ctx:t}}}),{c(){e=gt("div"),i&&i.c(),r=ge(),Ut(a.$$.fragment),C(e,"class","PinturaShapePresetsFlat")},m(o,s){st(o,e,s),i&&i.m(e,null),Pt(e,r),Ot(a,e,null),n=!0},p(o,s){o[10]?i?(i.p(o,s),1024&s&&V(i,1)):(i=cb(o),i.c(),V(i,1),i.m(e,r)):i&&(ze(),_(i,1,1,()=>{i=null}),De());const l={};512&s&&(l.scrollAutoCancel=o[9]),1&s&&(l.elasticity=o[0]),536871070&s&&(l.$$scope={dirty:s,ctx:o}),a.$set(l)},i(o){n||(V(i),V(a.$$.fragment,o),n=!0)},o(o){_(i),_(a.$$.fragment,o),n=!1},d(o){o&&it(e),i&&i.d(),Bt(a)}}}function VR(t){let e,r,a,n,i;r=new Ki({props:{elasticity:t[0],class:"PinturaShapePresetsGroups",$$slots:{default:[zR]},$$scope:{ctx:t}}});const o=[{class:"PinturaControlPanels"},{panelClass:"PinturaControlPanel"},{panels:t[11]},t[12]];let s={$$slots:{default:[OR,({panel:l,panelIsActive:c})=>({26:l,27:c}),({panel:l,panelIsActive:c})=>(l?67108864:0)|(c?134217728:0)]},$$scope:{ctx:t}};for(let l=0;l<o.length;l+=1)s=la(s,o[l]);return n=new jd({props:s}),{c(){e=gt("div"),Ut(r.$$.fragment),a=ge(),Ut(n.$$.fragment),C(e,"class","PinturaShapePresetsGrouped")},m(l,c){st(l,e,c),Ot(r,e,null),Pt(e,a),Ot(n,e,null),i=!0},p(l,c){const d={};1&c&&(d.elasticity=l[0]),536876128&c&&(d.$$scope={dirty:c,ctx:l}),r.$set(d);const p=6144&c?Ja(o,[o[0],o[1],2048&c&&{panels:l[11]},4096&c&&Mn(l[12])]):{};738206239&c&&(p.$$scope={dirty:c,ctx:l}),n.$set(p)},i(l){i||(V(r.$$.fragment,l),V(n.$$.fragment,l),i=!0)},o(l){_(r.$$.fragment,l),_(n.$$.fragment,l),i=!1},d(l){l&&it(e),Bt(r),Bt(n)}}}function cb(t){let e,r;return e=new Ji({props:{items:t[10]}}),{c(){Ut(e.$$.fragment)},m(a,n){Ot(e,a,n),r=!0},p(a,n){const i={};1024&n&&(i.items=a[10]),e.$set(i)},i(a){r||(V(e.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),r=!1},d(a){Bt(e,a)}}}function LR(t){let e,r;return e=new j2({props:{presets:t[7],onclickpreset:t[1],ongrabpreset:t[2],ondragpreset:t[3],ondroppreset:t[4]}}),{c(){Ut(e.$$.fragment)},m(a,n){Ot(e,a,n),r=!0},p(a,n){const i={};128&n&&(i.presets=a[7]),2&n&&(i.onclickpreset=a[1]),4&n&&(i.ongrabpreset=a[2]),8&n&&(i.ondragpreset=a[3]),16&n&&(i.ondroppreset=a[4]),e.$set(i)},i(a){r||(V(e.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),r=!1},d(a){Bt(e,a)}}}function db(t){let e,r;return e=new Ji({props:{items:t[10]}}),{c(){Ut(e.$$.fragment)},m(a,n){Ot(e,a,n),r=!0},p(a,n){const i={};1024&n&&(i.items=a[10]),e.$set(i)},i(a){r||(V(e.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),r=!1},d(a){Bt(e,a)}}}function ub(t){let e,r;return e=new ei({props:{$$slots:{default:[FR]},$$scope:{ctx:t}}}),{c(){Ut(e.$$.fragment)},m(a,n){Ot(e,a,n),r=!0},p(a,n){const i={};805306368&n&&(i.$$scope={dirty:n,ctx:a}),e.$set(i)},i(a){r||(V(e.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),r=!1},d(a){Bt(e,a)}}}function FR(t){let e,r=t[28].icon+"";return{c(){e=Xa("g")},m(a,n){st(a,e,n),e.innerHTML=r},p(a,n){268435456&n&&r!==(r=a[28].icon+"")&&(e.innerHTML=r)},d(a){a&&it(e)}}}function pb(t){let e,r,a=t[28].label+"";return{c(){e=gt("span"),r=Hr(a)},m(n,i){st(n,e,i),Pt(e,r)},p(n,i){268435456&i&&a!==(a=n[28].label+"")&&ca(r,a)},d(n){n&&it(e)}}}function NR(t){let e,r,a,n=t[28].icon&&ub(t),i=!t[28].hideLabel&&pb(t);return{c(){n&&n.c(),e=ge(),i&&i.c(),r=ia()},m(o,s){n&&n.m(o,s),st(o,e,s),i&&i.m(o,s),st(o,r,s),a=!0},p(o,s){o[28].icon?n?(n.p(o,s),268435456&s&&V(n,1)):(n=ub(o),n.c(),V(n,1),n.m(e.parentNode,e)):n&&(ze(),_(n,1,1,()=>{n=null}),De()),o[28].hideLabel?i&&(i.d(1),i=null):i?i.p(o,s):(i=pb(o),i.c(),i.m(r.parentNode,r))},i(o){a||(V(n),a=!0)},o(o){_(n),a=!1},d(o){n&&n.d(o),o&&it(e),i&&i.d(o),o&&it(r)}}}function zR(t){let e,r,a,n=t[10]&&db(t);const i=[{class:"PinturaControlList"},{tabs:t[5]},t[12],{layout:"compact"}];let o={$$slots:{default:[NR,({tab:s})=>({28:s}),({tab:s})=>s?268435456:0]},$$scope:{ctx:t}};for(let s=0;s<i.length;s+=1)o=la(o,i[s]);return r=new qd({props:o}),r.$on("select",t[18]),{c(){n&&n.c(),e=ge(),Ut(r.$$.fragment)},m(s,l){n&&n.m(s,l),st(s,e,l),Ot(r,s,l),a=!0},p(s,l){s[10]?n?(n.p(s,l),1024&l&&V(n,1)):(n=db(s),n.c(),V(n,1),n.m(e.parentNode,e)):n&&(ze(),_(n,1,1,()=>{n=null}),De());const c=4128&l?Ja(i,[i[0],32&l&&{tabs:s[5]},4096&l&&Mn(s[12]),i[3]]):{};805306368&l&&(c.$$scope={dirty:l,ctx:s}),r.$set(c)},i(s){a||(V(n),V(r.$$.fragment,s),a=!0)},o(s){_(n),_(r.$$.fragment,s),a=!1},d(s){n&&n.d(s),s&&it(e),Bt(r,s)}}}function DR(t){let e,r;return e=new j2({props:{presets:t[13][t[26]].items,disabled:t[13][t[26]].disabled,onclickpreset:t[1],ongrabpreset:t[2],ondragpreset:t[3],ondroppreset:t[4]}}),{c(){Ut(e.$$.fragment)},m(a,n){Ot(e,a,n),r=!0},p(a,n){const i={};67117056&n&&(i.presets=a[13][a[26]].items),67117056&n&&(i.disabled=a[13][a[26]].disabled),2&n&&(i.onclickpreset=a[1]),4&n&&(i.ongrabpreset=a[2]),8&n&&(i.ondragpreset=a[3]),16&n&&(i.ondroppreset=a[4]),e.$set(i)},i(a){r||(V(e.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),r=!1},d(a){Bt(e,a)}}}function OR(t){let e,r;return e=new Ki({props:{scroll:t[27]?{scrollOffset:0,animate:!1}:void 0,scrollAutoCancel:t[9],elasticity:t[0],$$slots:{default:[DR]},$$scope:{ctx:t}}}),{c(){Ut(e.$$.fragment)},m(a,n){Ot(e,a,n),r=!0},p(a,n){const i={};134217728&n&&(i.scroll=a[27]?{scrollOffset:0,animate:!1}:void 0),512&n&&(i.scrollAutoCancel=a[9]),1&n&&(i.elasticity=a[0]),603987998&n&&(i.$$scope={dirty:n,ctx:a}),e.$set(i)},i(a){r||(V(e.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),r=!1},d(a){Bt(e,a)}}}function BR(t){let e,r,a,n;const i=[AR,IR],o=[];function s(l,c){return l[9]?0:l[10]?1:-1}return~(r=s(t))&&(a=o[r]=i[r](t)),{c(){e=gt("div"),a&&a.c(),C(e,"class","PinturaShapePresetsPalette")},m(l,c){st(l,e,c),~r&&o[r].m(e,null),n=!0},p(l,[c]){let d=r;r=s(l),r===d?~r&&o[r].p(l,c):(a&&(ze(),_(o[d],1,1,()=>{o[d]=null}),De()),~r?(a=o[r],a?a.p(l,c):(a=o[r]=i[r](l),a.c()),V(a,1),a.m(e,null)):a=null)},i(l){n||(V(a),n=!0)},o(l){_(a),n=!1},d(l){l&&it(e),~r&&o[r].d()}}}function UR(t,e,r){let a,n,i,o,s,l,c,d,p,{locale:m}=e,{presets:h}=e,{scrollElasticity:f}=e,{enableSelectImage:g=!0}=e,{willRenderPresetToolbar:b=Br}=e,{onaddpreset:w=be}=e,{ongrabpreset:v}=e,{ondragpreset:S}=e,{ondroppreset:T}=e;const B="presets-"+bi(),I=(N,U="")=>H2(N)?N:Td(N)?Rv(N,U):`<img src="${N}" alt="${U}"/>`,O=N=>lv(jh(N)),R=["src","alt","thumb","shape","id","mount","disabled"],E=N=>N.map(U=>(x=>ea(x)&&Be(x[0])&&ea(x[1]))(U)?de(X({},U[2]),{id:`${B}-${U[0].toLowerCase()}`,label:U[0],items:E(U[1])}):(x=>{let j,A,P,G,Q,Z,ct,lt=x;return Be(x)?Td(x)?(j=x,Q=x,G=I(j,Q)):(j=x,Q=O(j),G=I(j,Q)):(j=x.src,Q=x.alt||(Be(j)?O(j):Be(x.thumb)?O(x.thumb):void 0),G=I(x.thumb||j,Q),A=x.shape,Z=x.mount,ct=x.disabled,P=Object.keys(x).reduce((xt,yt)=>(R.includes(yt)||(xt[yt]=x[yt]),xt),{})),{id:lt,src:j,thumb:G,shape:A,shapeProps:P,alt:Q,title:Q,mount:Z,disabled:ct}})(U));return t.$$set=N=>{"locale"in N&&r(14,m=N.locale),"presets"in N&&r(15,h=N.presets),"scrollElasticity"in N&&r(0,f=N.scrollElasticity),"enableSelectImage"in N&&r(16,g=N.enableSelectImage),"willRenderPresetToolbar"in N&&r(17,b=N.willRenderPresetToolbar),"onaddpreset"in N&&r(1,w=N.onaddpreset),"ongrabpreset"in N&&r(2,v=N.ongrabpreset),"ondragpreset"in N&&r(3,S=N.ondragpreset),"ondroppreset"in N&&r(4,T=N.ondroppreset)},t.$$.update=()=>{32768&t.$$.dirty&&r(7,a=E(h)),128&t.$$.dirty&&r(9,n=a.length),640&t.$$.dirty&&r(8,i=n&&a.some(N=>!!N.items)),384&t.$$.dirty&&r(5,o=i&&a),384&t.$$.dirty&&r(13,s=i&&a.reduce((N,U)=>(N[U.id]=U,N),{})),96&t.$$.dirty&&r(6,l=l||o&&(o.find(N=>!N.disabled)||{}).id),64&t.$$.dirty&&r(12,c={name:B,selected:l}),32&t.$$.dirty&&r(11,d=o&&o.map(N=>N.id)),212994&t.$$.dirty&&r(10,p=m&&b([g&&["Button","browse",{label:m.shapeLabelButtonSelectSticker,icon:m.shapeIconButtonSelectSticker,onclick:()=>{F2().then(N=>{N&&w(N)})}}]]))},[f,w,v,S,T,o,l,a,i,n,p,d,c,s,m,h,g,b,({detail:N})=>r(6,l=N)]}class G2 extends er{constructor(e){super(),tr(this,e,UR,BR,Ye,{locale:14,presets:15,scrollElasticity:0,enableSelectImage:16,willRenderPresetToolbar:17,onaddpreset:1,ongrabpreset:2,ondragpreset:3,ondroppreset:4})}}function mb(t){let e,r,a,n;const i=[{locale:t[4]},{uid:t[14]},{parentRect:t[29]},{rootRect:t[43]},{utilRect:t[30]},{offset:t[38]},{disabled:t[28]},{contextRotation:t[17]},{contextFlipX:t[18]},{contextFlipY:t[19]},{contextZoom:t[42]},{active:t[26]},{opacity:t[45]},{hoverColor:t[46]},{eraseRadius:t[37]},{selectRadius:t[6]},{enableButtonFlipVertical:t[9]},{mapEditorPointToImagePoint:t[15]},{mapImagePointToEditorPoint:t[16]},{enableTapToAddText:t[12]},{textInputMode:t[7]},{willStartInteraction:t[80]},{oninteractionstart:t[66]},{oninteractionupdate:t[67]},{oninteractionrelease:t[68]},{oninteractionend:t[70]},{oninteractioncancel:t[69]},{onhovershape:t[74]},{ontapcanvas:t[73]},{onaddshape:t[123]},{onselectshape:t[124]},{ontapshape:t[125]},{onupdateshape:t[126]},{onremoveshape:t[127]},t[32]];function o(c){t[129](c)}function s(c){t[130](c)}let l={};for(let c=0;c<i.length;c+=1)l=la(l,i[c]);return t[27]!==void 0&&(l.markup=t[27]),t[44]!==void 0&&(l.ui=t[44]),e=new yR({props:l}),t[128](e),xr.push(()=>hn(e,"markup",o)),xr.push(()=>hn(e,"ui",s)),{c(){Ut(e.$$.fragment)},m(c,d){Ot(e,c,d),n=!0},p(c,d){const p=1955582672&d[0]|55490&d[1]|793072&d[2]?Ja(i,[16&d[0]&&{locale:c[4]},16384&d[0]&&{uid:c[14]},536870912&d[0]&&{parentRect:c[29]},4096&d[1]&&{rootRect:c[43]},1073741824&d[0]&&{utilRect:c[30]},128&d[1]&&{offset:c[38]},268435456&d[0]&&{disabled:c[28]},131072&d[0]&&{contextRotation:c[17]},262144&d[0]&&{contextFlipX:c[18]},524288&d[0]&&{contextFlipY:c[19]},2048&d[1]&&{contextZoom:c[42]},67108864&d[0]&&{active:c[26]},16384&d[1]&&{opacity:c[45]},32768&d[1]&&{hoverColor:c[46]},64&d[1]&&{eraseRadius:c[37]},64&d[0]&&{selectRadius:c[6]},512&d[0]&&{enableButtonFlipVertical:c[9]},32768&d[0]&&{mapEditorPointToImagePoint:c[15]},65536&d[0]&&{mapImagePointToEditorPoint:c[16]},4096&d[0]&&{enableTapToAddText:c[12]},128&d[0]&&{textInputMode:c[7]},262144&d[2]&&{willStartInteraction:c[80]},16&d[2]&&{oninteractionstart:c[66]},32&d[2]&&{oninteractionupdate:c[67]},64&d[2]&&{oninteractionrelease:c[68]},256&d[2]&&{oninteractionend:c[70]},128&d[2]&&{oninteractioncancel:c[69]},4096&d[2]&&{onhovershape:c[74]},2048&d[2]&&{ontapcanvas:c[73]},8388608&d[0]|524288&d[2]&&{onaddshape:c[123]},8388608&d[0]&&{onselectshape:c[124]},8388608&d[0]&&{ontapshape:c[125]},8388608&d[0]|524288&d[2]&&{onupdateshape:c[126]},8388608&d[0]|524288&d[2]&&{onremoveshape:c[127]},2&d[1]&&Mn(c[32])]):{};!r&&134217728&d[0]&&(r=!0,p.markup=c[27],Rn(()=>r=!1)),!a&&8192&d[1]&&(a=!0,p.ui=c[44],Rn(()=>a=!1)),e.$set(p)},i(c){n||(V(e.$$.fragment,c),n=!0)},o(c){_(e.$$.fragment,c),n=!1},d(c){t[128](null),Bt(e,c)}}}function _R(t){let e,r,a,n,i,o=t[39]&&mb(t);return{c(){e=gt("div"),o&&o.c(),C(e,"slot","main"),C(e,"style",r="cursor:"+t[35])},m(s,l){st(s,e,l),o&&o.m(e,null),t[131](e),a=!0,n||(i=[Mt(e,"keydown",t[71]),Ir(v2.call(null,e)),Mt(e,"dropfiles",function(){Vr(t[11]?t[79]:be)&&(t[11]?t[79]:be).apply(this,arguments)}),Ir(qa.call(null,e)),Mt(e,"measure",t[121])],n=!0)},p(s,l){(t=s)[39]?o?(o.p(t,l),256&l[1]&&V(o,1)):(o=mb(t),o.c(),V(o,1),o.m(e,null)):o&&(ze(),_(o,1,1,()=>{o=null}),De()),(!a||16&l[1]&&r!==(r="cursor:"+t[35]))&&C(e,"style",r)},i(s){a||(V(o),a=!0)},o(s){_(o),a=!1},d(s){s&&it(e),o&&o.d(),t[131](null),n=!1,Ar(i)}}}function WR(t){let e,r;return e=new G2({props:{locale:t[4],presets:t[13],enableSelectImage:t[10],willRenderPresetToolbar:t[33],onaddpreset:t[78],ongrabpreset:t[75],ondragpreset:t[76],ondroppreset:t[77],scrollElasticity:t[34]}}),{c(){Ut(e.$$.fragment)},m(a,n){Ot(e,a,n),r=!0},p(a,n){const i={};16&n[0]&&(i.locale=a[4]),8192&n[0]&&(i.presets=a[13]),1024&n[0]&&(i.enableSelectImage=a[10]),4&n[1]&&(i.willRenderPresetToolbar=a[33]),8&n[1]&&(i.scrollElasticity=a[34]),e.$set(i)},i(a){r||(V(e.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),r=!1},d(a){Bt(e,a)}}}function qR(t){let e,r,a,n,i,o;const s=[HR,jR],l=[];function c(p,m){return p[36]?0:1}r=c(t),a=l[r]=s[r](t);let d=t[41]&&hb(t);return{c(){e=gt("div"),a.c(),n=ge(),d&&d.c(),i=ia(),C(e,"class","PinturaControlPanels")},m(p,m){st(p,e,m),l[r].m(e,null),st(p,n,m),d&&d.m(p,m),st(p,i,m),o=!0},p(p,m){let h=r;r=c(p),r===h?l[r].p(p,m):(ze(),_(l[h],1,1,()=>{l[h]=null}),De(),a=l[r],a?a.p(p,m):(a=l[r]=s[r](p),a.c()),V(a,1),a.m(e,null)),p[41]?d?(d.p(p,m),1024&m[1]&&V(d,1)):(d=hb(p),d.c(),V(d,1),d.m(i.parentNode,i)):d&&(ze(),_(d,1,1,()=>{d=null}),De())},i(p){o||(V(a),V(d),o=!0)},o(p){_(a),_(d),o=!1},d(p){p&&it(e),l[r].d(),p&&it(n),d&&d.d(p),p&&it(i)}}}function jR(t){let e,r,a;return r=new q2({props:{locale:t[4],shape:t[24],onchange:t[72],controls:t[8],scrollElasticity:t[34]}}),{c(){e=gt("div"),Ut(r.$$.fragment),C(e,"class","PinturaControlPanel")},m(n,i){st(n,e,i),Ot(r,e,null),a=!0},p(n,i){const o={};16&i[0]&&(o.locale=n[4]),16777216&i[0]&&(o.shape=n[24]),256&i[0]&&(o.controls=n[8]),8&i[1]&&(o.scrollElasticity=n[34]),r.$set(o)},i(n){a||(V(r.$$.fragment,n),a=!0)},o(n){_(r.$$.fragment,n),a=!1},d(n){n&&it(e),Bt(r)}}}function HR(t){let e,r,a;return r=new G2({props:{locale:t[4],presets:t[13],enableSelectImage:t[10],willRenderPresetToolbar:t[33],onaddpreset:t[78],ongrabpreset:t[75],ondragpreset:t[76],ondroppreset:t[77],scrollElasticity:t[34]}}),{c(){e=gt("div"),Ut(r.$$.fragment),C(e,"class","PinturaControlPanel")},m(n,i){st(n,e,i),Ot(r,e,null),a=!0},p(n,i){const o={};16&i[0]&&(o.locale=n[4]),8192&i[0]&&(o.presets=n[13]),1024&i[0]&&(o.enableSelectImage=n[10]),4&i[1]&&(o.willRenderPresetToolbar=n[33]),8&i[1]&&(o.scrollElasticity=n[34]),r.$set(o)},i(n){a||(V(r.$$.fragment,n),a=!0)},o(n){_(r.$$.fragment,n),a=!1},d(n){n&&it(e),Bt(r)}}}function hb(t){let e,r;return e=new Ki({props:{class:"PinturaControlListScroller",elasticity:t[34],$$slots:{default:[YR]},$$scope:{ctx:t}}}),{c(){Ut(e.$$.fragment)},m(a,n){Ot(e,a,n),r=!0},p(a,n){const i={};8&n[1]&&(i.elasticity=a[34]),33554449&n[0]|2048&n[5]&&(i.$$scope={dirty:n,ctx:a}),e.$set(i)},i(a){r||(V(e.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),r=!1},d(a){Bt(e,a)}}}function gb(t){let e,r;return e=new ei({props:{$$slots:{default:[GR]},$$scope:{ctx:t}}}),{c(){Ut(e.$$.fragment)},m(a,n){Ot(e,a,n),r=!0},p(a,n){const i={};16&n[0]|3072&n[5]&&(i.$$scope={dirty:n,ctx:a}),e.$set(i)},i(a){r||(V(e.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),r=!1},d(a){Bt(e,a)}}}function GR(t){let e,r=(Xr(t[165].icon)?t[165].icon(t[4]):t[165].icon)+"";return{c(){e=Xa("g")},m(a,n){st(a,e,n),e.innerHTML=r},p(a,n){16&n[0]|1024&n[5]&&r!==(r=(Xr(a[165].icon)?a[165].icon(a[4]):a[165].icon)+"")&&(e.innerHTML=r)},d(a){a&&it(e)}}}function ZR(t){let e,r,a,n,i,o=(Xr(t[165].label)?t[165].label(t[4]):t[165].label)+"",s=t[165].icon&&gb(t);return{c(){e=gt("div"),s&&s.c(),r=ge(),a=gt("span"),n=Hr(o),C(e,"slot","option")},m(l,c){st(l,e,c),s&&s.m(e,null),Pt(e,r),Pt(e,a),Pt(a,n),i=!0},p(l,c){l[165].icon?s?(s.p(l,c),1024&c[5]&&V(s,1)):(s=gb(l),s.c(),V(s,1),s.m(e,r)):s&&(ze(),_(s,1,1,()=>{s=null}),De()),(!i||16&c[0]|1024&c[5])&&o!==(o=(Xr(l[165].label)?l[165].label(l[4]):l[165].label)+"")&&ca(n,o)},i(l){i||(V(s),i=!0)},o(l){_(s),i=!1},d(l){l&&it(e),s&&s.d()}}}function YR(t){let e,r;return e=new jo({props:{locale:t[4],class:"PinturaControlList",optionClass:"PinturaControlListOption",layout:"row",options:t[25],selectedIndex:t[25].findIndex(t[122]),onchange:t[65],$$slots:{option:[ZR,({option:a})=>({165:a}),({option:a})=>[0,0,0,0,0,a?1024:0]]},$$scope:{ctx:t}}}),{c(){Ut(e.$$.fragment)},m(a,n){Ot(e,a,n),r=!0},p(a,n){const i={};16&n[0]&&(i.locale=a[4]),33554432&n[0]&&(i.options=a[25]),33554433&n[0]&&(i.selectedIndex=a[25].findIndex(a[122])),16&n[0]|3072&n[5]&&(i.$$scope={dirty:n,ctx:a}),e.$set(i)},i(a){r||(V(e.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),r=!1},d(a){Bt(e,a)}}}function XR(t){let e,r,a,n;const i=[qR,WR],o=[];function s(l,c){return l[40]?0:l[36]?1:-1}return~(r=s(t))&&(a=o[r]=i[r](t)),{c(){e=gt("div"),a&&a.c(),C(e,"slot","footer"),C(e,"style",t[31])},m(l,c){st(l,e,c),~r&&o[r].m(e,null),n=!0},p(l,c){let d=r;r=s(l),r===d?~r&&o[r].p(l,c):(a&&(ze(),_(o[d],1,1,()=>{o[d]=null}),De()),~r?(a=o[r],a?a.p(l,c):(a=o[r]=i[r](l),a.c()),V(a,1),a.m(e,null)):a=null),(!n||1&c[1])&&C(e,"style",l[31])},i(l){n||(V(a),n=!0)},o(l){_(a),n=!1},d(l){l&&it(e),~r&&o[r].d()}}}function KR(t){let e,r;return e=new $s({props:{$$slots:{footer:[XR],main:[_R]},$$scope:{ctx:t}}}),e.$on("measure",t[132]),{c(){Ut(e.$$.fragment)},m(a,n){Ot(e,a,n),r=!0},p(a,n){const i={};2146435025&n[0]|65535&n[1]|2048&n[5]&&(i.$$scope={dirty:n,ctx:a}),e.$set(i)},i(a){r||(V(e.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),r=!1},d(a){Bt(e,a)}}}function JR(t,e,r){let a,n,i,o,s,l,c,d,p,m,h,f,g,b,w,v,S,T,B,I,O,R,E,N,U,x,j,A,P,G,Q,Z,ct,lt,xt,yt,bt,qt,Y,et,Vt,z,vt,St,W,Lt,Ce,pt,zt,Te,ne,At,K=We,Xt=()=>(K(),K=pn(_t,q=>r(26,P=q)),_t),se=We,me=()=>(se(),se=pn(ht,q=>r(27,Q=q)),ht),Ve=We,ke=()=>(Ve(),Ve=pn(Yt,q=>r(29,z=q)),Yt),Dt=We,Ue=()=>(Dt(),Dt=pn(Zt,q=>r(119,Ce=q)),Zt),Xe=We,he=()=>(Xe(),Xe=pn(rt,q=>r(45,ne=q)),rt);t.$$.on_destroy.push(()=>K()),t.$$.on_destroy.push(()=>se()),t.$$.on_destroy.push(()=>Ve()),t.$$.on_destroy.push(()=>Dt()),t.$$.on_destroy.push(()=>Xe());let{isActive:_t}=e;Xt();let{isActiveFraction:rt}=e;he();let{isVisible:Zt}=e;Ue();let{stores:mt}=e,{locale:Se={}}=e,{shapes:ht}=e;me();let{toolbar:Et=[]}=e,{toolShapes:ee={}}=e,{toolActive:re}=e,{toolSelectRadius:Wt}=e,{toolRetainStyles:Ht=!1}=e,{textInputMode:fe}=e,{shapeControls:Le={}}=e,{enableButtonFlipVertical:mr=!1}=e,{enablePresetSelectImage:He=!0}=e,{enablePresetDropImage:nr=!0}=e,{enableSelectToolToAddShape:ve=!1}=e,{enableAutoSelectMoveTool:ae=["line","arrow","path","rectangle","ellipse","text"]}=e,{enableTapToAddText:xe=!1}=e,{enableMoveTool:Ke=!1}=e,{enableViewTool:Me=!1}=e,{enableToolShareStyles:Pe=!0}=e,{willRenderPresetToolbar:rr}=e,{willStartInteraction:Ae}=e,{shapePresets:Je=[]}=e,{utilKey:or}=e,{mapScreenPointToImagePoint:Sr}=e,{mapImagePointToScreenPoint:at}=e,{imageRotation:jt=0}=e,{imageFlipX:Ne=!1}=e,{imageFlipY:nt=!1}=e,{parentRect:Yt}=e;ke();let{hooks:te={}}=e;const Re=ta("isAnimated");F(t,Re,q=>r(112,G=q));const hr=ta("elasticityMultiplier");F(t,hr,q=>r(115,lt=q));const Ge=ta("ui");let zr;F(t,Ge,q=>r(141,W=q));const{env:Qa,history:Fa,rootRect:Ma,rootColorSecondary:dr,enablePanInput:wr,enablePanInputStatus:tn,enableZoomInput:ur,stageRect:Fn,utilRectPadded:gn,scrollElasticity:fr,imageOverlayMarkup:Kr,imagePreviewModifiers:Gr,imageCropRect:Na,shapePreprocessor:Pn,stageScalar:xa,imageSelectionRect:Nn,imageSelectionZoomCurrent:Pa,imageSelectionPan:sn,allowPan:ai,allowZoom:Sa,allowZoomControls:Jr,allowPlayPause:da}=mt;F(t,Qa,q=>r(113,Z=q)),F(t,Ma,q=>r(43,zt=q)),F(t,dr,q=>r(46,At=q)),F(t,tn,q=>r(28,et=q)),F(t,Fn,q=>r(116,xt=q)),F(t,gn,q=>r(30,Lt=q)),F(t,Kr,q=>r(44,Te=q)),F(t,Gr,q=>r(120,pt=q)),F(t,Na,q=>r(140,vt=q)),F(t,Pn,q=>r(118,St=q)),F(t,xa,q=>r(138,qt=q)),F(t,Nn,q=>r(139,Y=q)),F(t,Pa,q=>r(42,yt=q)),F(t,sn,q=>r(137,bt=q));const zn=ta("keysPressed");F(t,zn,q=>r(117,Vt=q));const ra=q=>{const[oe,we]=zr[q];let Ie,Lr,kr=we.position==="relative";const Pr=kr?"0%":0,$r=kr?"0%":0;fi(oe)||Ra(oe)?(Lr=kr?"20%":.2*z.width,Ie=wa(oe),Ie.x=Pr,Ie.y=$r,Fi(Ie,{width:Lr,height:Lr},z)):Ba(oe)?(Lr=kr?"10%":.1*z.width,Ie=wa(oe),Ie.x=Pr,Ie.y=$r,Fi(Ie,{rx:Lr,ry:Lr},z)):ka(oe)&&(Lr=kr?"10%":.1*z.width,Ie=wa(oe),Ie.x1=Pr,Ie.y1=$r,Ie.x2=Pr,Ie.y2=$r),Ie&&Promise.resolve().then(()=>{ni(en(Ie,void 0,Lr))})},ba=q=>Sr(qm(q,zt));let sr,Ur,_r={};const Wr=q=>{if(!(Oa(q)&&Ee(q,"pathClose")))return;const oe=[...q.strokeColor];oe[3]=1,sr.updateMarkupShape(q,{pathClose:!1,strokeColor:oe},!1),sr.removeMarkupShapeProps(q,["backgroundColor"],!1),sr.confirmMarkupItemDraft(),sr.selectShape(q)};let Dn,fn;const en=(q,oe,we)=>{let Ie=!1;oe||(Ie=!0,oe=S?Sr(Cr(xt)):Cr(vt)),oe.x-=z.x||0,oe.y-=z.y||0,(Ne||nt)&&(q.flipX=Ne,q.flipY=nt);const Lr=sr.getShapesNearPosition(oe);if(Ie&&Lr.length){const kr=.1*Math.min(vt.width,vt.height);oe.x+=Math.round(-kr+Math.random()*kr*2),oe.y+=Math.round(-kr+Math.random()*kr*2)}if(jt!==0&&(q.rotation=Ne&&nt?-jt:Ne||nt?jt:-jt),Ee(q,"width")&&Ee(q,"height")){const{width:kr,height:Pr}=js(q,["width","height"],z);Fi(q,{x:oe.x-.5*kr,y:oe.y-.5*Pr},z)}else if(Ba(q))Fi(q,{x:oe.x,y:oe.y},z);else if(ka(q)){const{x1:kr,y1:Pr,x2:$r,y2:ja}=js(q,["x1","y1","x2","y2"],z),Zr=Vn(ot(kr,Pr),ot($r,ja)),$n=Be(we)?Pd(we,z.width):Zr;Fi(q,{x1:oe.x-$n,y1:oe.y+$n,x2:oe.x+$n,y2:oe.y-$n},z)}else if(Oa(q)){const{points:kr}=js(q,["points"],z),Pr=Kn(kr);Fi(q,{points:kr.map($r=>({x:$r.x+oe.x-Pr.x,y:$r.y+oe.y-Pr.y}))},z)}return q},On=(q,oe)=>{const we=en(A0(q,vt),oe);return q.shape&&(Ee(q.shape,"x")&&(we.x=q.shape.x),Ee(q.shape,"y")&&(we.y=q.shape.y)),ni(we)},ni=q=>{const{beforeAddShape:oe=()=>!0}=te;if(oe(q))return sr.addShape(q),sr.selectShape(q),Fa.write(),E("addshape",q),q};let ln=!1;const za=()=>{Fa.write()};let lr;const rn=ta("redrawTrigger");F(t,rn,q=>r(114,ct=q));const Da=ir(G?20:0);return F(t,Da,q=>r(111,A=q)),t.$$set=q=>{"isActive"in q&&Xt(r(1,_t=q.isActive)),"isActiveFraction"in q&&he(r(2,rt=q.isActiveFraction)),"isVisible"in q&&Ue(r(3,Zt=q.isVisible)),"stores"in q&&r(84,mt=q.stores),"locale"in q&&r(4,Se=q.locale),"shapes"in q&&me(r(5,ht=q.shapes)),"toolbar"in q&&r(85,Et=q.toolbar),"toolShapes"in q&&r(86,ee=q.toolShapes),"toolActive"in q&&r(0,re=q.toolActive),"toolSelectRadius"in q&&r(6,Wt=q.toolSelectRadius),"toolRetainStyles"in q&&r(87,Ht=q.toolRetainStyles),"textInputMode"in q&&r(7,fe=q.textInputMode),"shapeControls"in q&&r(8,Le=q.shapeControls),"enableButtonFlipVertical"in q&&r(9,mr=q.enableButtonFlipVertical),"enablePresetSelectImage"in q&&r(10,He=q.enablePresetSelectImage),"enablePresetDropImage"in q&&r(11,nr=q.enablePresetDropImage),"enableSelectToolToAddShape"in q&&r(88,ve=q.enableSelectToolToAddShape),"enableAutoSelectMoveTool"in q&&r(89,ae=q.enableAutoSelectMoveTool),"enableTapToAddText"in q&&r(12,xe=q.enableTapToAddText),"enableMoveTool"in q&&r(90,Ke=q.enableMoveTool),"enableViewTool"in q&&r(91,Me=q.enableViewTool),"enableToolShareStyles"in q&&r(92,Pe=q.enableToolShareStyles),"willRenderPresetToolbar"in q&&r(93,rr=q.willRenderPresetToolbar),"willStartInteraction"in q&&r(94,Ae=q.willStartInteraction),"shapePresets"in q&&r(13,Je=q.shapePresets),"utilKey"in q&&r(14,or=q.utilKey),"mapScreenPointToImagePoint"in q&&r(15,Sr=q.mapScreenPointToImagePoint),"mapImagePointToScreenPoint"in q&&r(16,at=q.mapImagePointToScreenPoint),"imageRotation"in q&&r(17,jt=q.imageRotation),"imageFlipX"in q&&r(18,Ne=q.imageFlipX),"imageFlipY"in q&&r(19,nt=q.imageFlipY),"parentRect"in q&&ke(r(20,Yt=q.parentRect)),"hooks"in q&&r(95,te=q.hooks)},t.$$.update=()=>{var q,oe;if(16777216&t.$$.dirty[2]|8&t.$$.dirty[3]&&(zr&&ee===zr||r(96,zr=ee)),67108864&t.$$.dirty[0]&&ai.set(P),67108864&t.$$.dirty[0]&&Sa.set(P),67108864&t.$$.dirty[0]&&Jr.set(P),8192&t.$$.dirty[0]|813694976&t.$$.dirty[2]|1&t.$$.dirty[3]&&r(25,a=((we,{willRenderPresetToolbar:Ie,shapePresets:Lr,enableViewTool:kr,enableMoveTool:Pr})=>{let $r=Lr.length!==0||Ie?we:we.filter(ja=>ja[0]!=="preset");return $r=Pr?$r:$r.filter(ja=>ja[0]!=="move"),kr?$r:$r.filter(ja=>ja[0]!=="view")})(Et,{willRenderPresetToolbar:rr,shapePresets:Je,enableMoveTool:Ke,enableViewTool:Me})),256&t.$$.dirty[0]&&r(108,n=Object.keys(Le).length),33554432&t.$$.dirty[0]&&r(41,i=a.length>1),33554432&t.$$.dirty[0]&&r(109,o=!!a.length),33554433&t.$$.dirty[0]|65536&t.$$.dirty[3]&&o&&re===void 0&&r(0,re=a[0][0]),1&t.$$.dirty[0]&&r(110,s=re!==void 0),229376&t.$$.dirty[3]&&r(40,l=(!s||o)&&n),4194304&t.$$.dirty[0]&&r(23,E=lr&&(q=lr,(we,Ie)=>{q.dispatchEvent(Co(we,Ie))})),75497473&t.$$.dirty[0]&&P&&E&&E("selectcontrol",re),67125248&t.$$.dirty[0]|134217728&t.$$.dirty[3]&&(P?Rt(Gr,pt[or]={maskMarkupOpacity:.85},pt):delete pt[or]),2097153&t.$$.dirty[0]&&re&&sr){const we=sr.getMarkupItemDraft();we&&Wr(we)}1&t.$$.dirty[0]&&re&&sr&&re!=="move"&&sr.blurShapes(),67108864&t.$$.dirty[0]|67108864&t.$$.dirty[3]&&r(39,c=P&&Ce),1073741824&t.$$.dirty[0]|8388608&t.$$.dirty[3]&&r(38,d=Lt&&ot(xt.x-Lt.x,xt.y-Lt.y)),256&t.$$.dirty[0]&&r(107,p=Object.keys(Le)),201326592&t.$$.dirty[0]&&r(99,m=P&&Q.filter(To)[0]),201326592&t.$$.dirty[0]&&r(102,h=P&&Q.find(we=>jp(we))),67108865&t.$$.dirty[0]|8&t.$$.dirty[3]&&r(105,f=P&&zr[re]?Lv(wa(X(X({},zr[re][0]),W[or]?W[or][re]:{}))):{}),8&t.$$.dirty[3]&&zr&&r(97,_r={}),1&t.$$.dirty[0]|1073741824&t.$$.dirty[2]|20496&t.$$.dirty[3]&&r(106,g=f&&Object.keys(f).reduce((we,Ie)=>{const Lr=Ie==="disableStyle",kr=p.find($r=>$r.split("_").includes(Ie));if(!Lr&&!kr||f[Ie]===void 0||f.disableStyle===!0||f.disableStyle&&f.disableStyle.includes(Ie))return we;const Pr=Pe?_r:_r[re]||{};return we[Ie]=Ee(Pr,Ie)?Pr[Ie]:f[Ie],we},{})),16385&t.$$.dirty[0]|33554432&t.$$.dirty[2]|8192&t.$$.dirty[3]&&(Ht?((we,Ie,Lr)=>{const kr=W[we],Pr=kr?kr[Ie]:{};Ge.set(de(X({},W),{[we]:de(X({},kr),{[Ie]:X(X({},Pr),Lr)})}))})(or,re,g):(oe=or,Ge.set({[oe]:{}}))),67108864&t.$$.dirty[0]|8256&t.$$.dirty[3]&&r(24,b=P?m||g:void 0),16777216&t.$$.dirty[0]|33554432&t.$$.dirty[3]&&b&&b.lineEnd&&!St&&console.warn(`Set shapePreprocessor property to draw lineStart and lineEnd styles.
https://pqina.nl/pintura/docs/v8/api/exports/#createshapepreprocessor`),12288&t.$$.dirty[3]&&r(37,w=f&&Mr(f.eraseRadius)?(g||f).eraseRadius:void 0),9217&t.$$.dirty[0]|1&t.$$.dirty[3]&&r(36,v=re==="preset"&&(Je.length>0||He||rr)),536870912&t.$$.dirty[0]&&(S=!Ee(z,"x")&&!Ee(z,"y")),67108864&t.$$.dirty[0]|16777216&t.$$.dirty[3]&&r(103,T=P&&Vt&&Vt[0]===32),67108865&t.$$.dirty[0]&&r(104,B=P&&re==="view"),3072&t.$$.dirty[3]&&r(101,I=B||T),512&t.$$.dirty[3]&&r(100,O=!!h),67108864&t.$$.dirty[0]|384&t.$$.dirty[3]&&wr.set(!P||I&&!O),67108864&t.$$.dirty[0]|128&t.$$.dirty[3]&&ur.set(!P||!O),268435457&t.$$.dirty[0]|96&t.$$.dirty[3]&&r(35,R=((we,Ie,Lr,kr,Pr)=>{if(Lr)return kr?"grabbing":"grab";if(!we)return Pr==="move"?"default":"crosshair";let $r=we||Ie;return To($r)?jp($r)?fe==="modal"?"default":"text":Il($r)?"move":"default":"default"})(fn,m,et,!1,re)),4194304&t.$$.dirty[3]&&r(34,N=lt*fr),3145729&t.$$.dirty[3]&&r(33,U=ct&&rr?we=>jl(()=>rr(we,On,X({},Z),()=>rn.set({}))):Br),4&t.$$.dirty[3]&&r(32,x=Object.keys(te).reduce((we,Ie)=>(Ie==="beforeAddShape"||te[Ie]===void 0||(we[Ie]=te[Ie]),we),{})),67108864&t.$$.dirty[0]&&(we=>{ht&&ht.set(Q.map(Ie=>(Ie._prerender=!!we&&jp(Ie),Ie)))})(P),67108864&t.$$.dirty[0]|524288&t.$$.dirty[3]&&G&&Da.set(P?0:20),262144&t.$$.dirty[3]&&r(31,j=A?`transform: translateY(${A}px)`:void 0)},da.set(!1),[re,_t,rt,Zt,Se,ht,Wt,fe,Le,mr,He,nr,xe,Je,or,Sr,at,jt,Ne,nt,Yt,sr,lr,E,b,a,P,Q,et,z,Lt,j,x,U,N,R,v,w,d,c,l,i,yt,zt,Te,ne,At,Re,hr,Ge,Qa,Ma,dr,tn,Fn,gn,Kr,Gr,Na,Pn,xa,Nn,Pa,sn,zn,({value:q},oe)=>{r(0,re=q),(ve||/enter/i.test(oe.key))&&ra(q)},q=>{if(re==="eraser")Ur=sr.eraseShape();else if(re&&zr[re]){const[oe,we]=zr[re];Ur=sr.createShape(X(X({},oe),g),we)}else Ur=void 0;return!!Ur&&(Ur.start(q),!0)},q=>!!Ur&&(Ur.update(q),!0),q=>!!Ur&&(Ur.release(q),!0),q=>!!Ur&&(Ur.cancel(q),Ur=void 0,!0),q=>{if(!Ur)return!1;Ur.end(q),Ur=void 0;const oe=sr.getMarkupItemDraft(),we=Ke&&(ae===!0||Array.isArray(ae)&&ae.includes(re));return oe&&!oe.isEditing||!we||r(0,re="move"),!0},q=>{const{key:oe}=q,we=sr.getMarkupItemDraft();/escape/i.test(oe)&&we&&(q.preventDefault(),q.stopPropagation(),sr.discardMarkupItemDraft(),Ur=void 0),/enter/i.test(oe)&&we&&(q.preventDefault(),q.stopPropagation(),Wr(we),Ur=void 0)},function(q){Object.keys(q).forEach(oe=>{Pe?r(97,_r[oe]=q[oe],_r):(_r[re]||r(97,_r[re]={},_r),r(97,_r[re][oe]=q[oe],_r))}),E("selectstyle",q),m&&(sr.updateMarkupShape(m,q),clearTimeout(Dn),Dn=setTimeout(()=>{za()},200))},q=>E("markuptap",q),q=>r(98,fn=q),()=>{ln=!1},(q,oe)=>{if(ln)return;const{beforeAddShape:we=()=>!0}=te,Ie=ba(oe),Lr=sr.getMarkupItemDraft(),kr=kd(vt,{x:Ie.x+(z.x||0),y:Ie.y+(z.y||0)});if(Lr&&!kr&&sr.discardMarkupItemDraft(),kr){if(!Lr){const Pr=A0(q,vt),$r=en(Pr,Ie);return we($r)?(Vv($r),void sr.addShape($r)):(ln=!0,void oe.preventDefault())}fi(Lr)&&(Ie.x-=.5*Lr.width,Ie.y-=.5*Lr.height),q.shape&&(Ee(q.shape,"x")&&(Ie.x=q.shape.x),Ee(q.shape,"y")&&(Ie.y=q.shape.y)),sr.updateMarkupShape(Lr,Ie)}},(q,oe)=>{if(ln)return;const we=ba(oe);if(!kd(vt,{x:we.x+(z.x||0),y:we.y+(z.y||0)}))return void sr.discardMarkupItemDraft();const Ie=sr.confirmMarkupItemDraft();sr.selectShape(Ie),E("addshape",Ie),Fa.write()},q=>On(q),q=>{return oe=q.detail.resources,we=ba(q.detail.event),oe.forEach(Ie=>On(Ie,we));var oe,we},q=>{if(!Ae)return!0;const oe=rectClone(Y);return rectScale(oe,1/qt),rectTranslate(oe,bt),rectScale(oe,yt),Ae(q,de(X({},oe),{x:oe.x+xt.x,y:oe.y+xt.y}))},za,rn,Da,mt,Et,ee,Ht,ve,ae,Ke,Me,Pe,rr,Ae,te,zr,_r,fn,m,O,I,h,T,B,f,g,p,n,o,s,A,G,Z,ct,lt,xt,Vt,St,Ce,pt,function(q){on.call(this,t,q)},q=>q[0]===re,q=>{E("addshape",q),za()},q=>{E("selectshape",q)},q=>{E("tapshape",q)},q=>{E("updateshape",q),za()},q=>{E("removeshape",q),za()},function(q){xr[q?"unshift":"push"](()=>{sr=q,r(21,sr)})},function(q){Q=q,ht.set(Q)},function(q){Te=q,Kr.set(Te)},function(q){xr[q?"unshift":"push"](()=>{lr=q,r(22,lr)})},function(q){on.call(this,t,q)}]}class Xd extends er{constructor(e){super(),tr(this,e,JR,KR,Ye,{isActive:1,isActiveFraction:2,isVisible:3,stores:84,locale:4,shapes:5,toolbar:85,toolShapes:86,toolActive:0,toolSelectRadius:6,toolRetainStyles:87,textInputMode:7,shapeControls:8,enableButtonFlipVertical:9,enablePresetSelectImage:10,enablePresetDropImage:11,enableSelectToolToAddShape:88,enableAutoSelectMoveTool:89,enableTapToAddText:12,enableMoveTool:90,enableViewTool:91,enableToolShareStyles:92,willRenderPresetToolbar:93,willStartInteraction:94,shapePresets:13,utilKey:14,mapScreenPointToImagePoint:15,mapImagePointToScreenPoint:16,imageRotation:17,imageFlipX:18,imageFlipY:19,parentRect:20,hooks:95},null,[-1,-1,-1,-1,-1,-1])}get isActive(){return this.$$.ctx[1]}set isActive(e){this.$$set({isActive:e}),D()}get isActiveFraction(){return this.$$.ctx[2]}set isActiveFraction(e){this.$$set({isActiveFraction:e}),D()}get isVisible(){return this.$$.ctx[3]}set isVisible(e){this.$$set({isVisible:e}),D()}get stores(){return this.$$.ctx[84]}set stores(e){this.$$set({stores:e}),D()}get locale(){return this.$$.ctx[4]}set locale(e){this.$$set({locale:e}),D()}get shapes(){return this.$$.ctx[5]}set shapes(e){this.$$set({shapes:e}),D()}get toolbar(){return this.$$.ctx[85]}set toolbar(e){this.$$set({toolbar:e}),D()}get toolShapes(){return this.$$.ctx[86]}set toolShapes(e){this.$$set({toolShapes:e}),D()}get toolActive(){return this.$$.ctx[0]}set toolActive(e){this.$$set({toolActive:e}),D()}get toolSelectRadius(){return this.$$.ctx[6]}set toolSelectRadius(e){this.$$set({toolSelectRadius:e}),D()}get toolRetainStyles(){return this.$$.ctx[87]}set toolRetainStyles(e){this.$$set({toolRetainStyles:e}),D()}get textInputMode(){return this.$$.ctx[7]}set textInputMode(e){this.$$set({textInputMode:e}),D()}get shapeControls(){return this.$$.ctx[8]}set shapeControls(e){this.$$set({shapeControls:e}),D()}get enableButtonFlipVertical(){return this.$$.ctx[9]}set enableButtonFlipVertical(e){this.$$set({enableButtonFlipVertical:e}),D()}get enablePresetSelectImage(){return this.$$.ctx[10]}set enablePresetSelectImage(e){this.$$set({enablePresetSelectImage:e}),D()}get enablePresetDropImage(){return this.$$.ctx[11]}set enablePresetDropImage(e){this.$$set({enablePresetDropImage:e}),D()}get enableSelectToolToAddShape(){return this.$$.ctx[88]}set enableSelectToolToAddShape(e){this.$$set({enableSelectToolToAddShape:e}),D()}get enableAutoSelectMoveTool(){return this.$$.ctx[89]}set enableAutoSelectMoveTool(e){this.$$set({enableAutoSelectMoveTool:e}),D()}get enableTapToAddText(){return this.$$.ctx[12]}set enableTapToAddText(e){this.$$set({enableTapToAddText:e}),D()}get enableMoveTool(){return this.$$.ctx[90]}set enableMoveTool(e){this.$$set({enableMoveTool:e}),D()}get enableViewTool(){return this.$$.ctx[91]}set enableViewTool(e){this.$$set({enableViewTool:e}),D()}get enableToolShareStyles(){return this.$$.ctx[92]}set enableToolShareStyles(e){this.$$set({enableToolShareStyles:e}),D()}get willRenderPresetToolbar(){return this.$$.ctx[93]}set willRenderPresetToolbar(e){this.$$set({willRenderPresetToolbar:e}),D()}get willStartInteraction(){return this.$$.ctx[94]}set willStartInteraction(e){this.$$set({willStartInteraction:e}),D()}get shapePresets(){return this.$$.ctx[13]}set shapePresets(e){this.$$set({shapePresets:e}),D()}get utilKey(){return this.$$.ctx[14]}set utilKey(e){this.$$set({utilKey:e}),D()}get mapScreenPointToImagePoint(){return this.$$.ctx[15]}set mapScreenPointToImagePoint(e){this.$$set({mapScreenPointToImagePoint:e}),D()}get mapImagePointToScreenPoint(){return this.$$.ctx[16]}set mapImagePointToScreenPoint(e){this.$$set({mapImagePointToScreenPoint:e}),D()}get imageRotation(){return this.$$.ctx[17]}set imageRotation(e){this.$$set({imageRotation:e}),D()}get imageFlipX(){return this.$$.ctx[18]}set imageFlipX(e){this.$$set({imageFlipX:e}),D()}get imageFlipY(){return this.$$.ctx[19]}set imageFlipY(e){this.$$set({imageFlipY:e}),D()}get parentRect(){return this.$$.ctx[20]}set parentRect(e){this.$$set({parentRect:e}),D()}get hooks(){return this.$$.ctx[95]}set hooks(e){this.$$set({hooks:e}),D()}}var S1=(t,e,r,a,n,i,o,s,l)=>{const c=Fe(t),d=.5*r.width,p=.5*r.height,m=.5*e.width,h=.5*e.height,f=n.x+a.x,g=n.y+a.y;s&&(c.x=r.width-c.x),l&&(c.y=r.height-c.y);const b=Math.cos(i),w=Math.sin(i);c.x-=d,c.y-=p;const v=c.x*b-c.y*w,S=c.x*w+c.y*b;c.x=d+v,c.y=p+S,c.x*=o,c.y*=o,c.x+=m,c.y+=h,c.x+=f,c.y+=g,c.x-=d*o,c.y-=p*o;const T=(n.x-f)*o,B=(n.y-g)*o,I=T*b-B*w,O=T*w+B*b;return c.x+=I,c.y+=O,c},C1=(t,e,r,a,n,i,o,s,l)=>{const c=Fe(t),d=Zs(r),p=Zs(e),m=ot(n.x+a.x,n.y+a.y),h=Math.cos(i),f=Math.sin(i);c.x-=p.x,c.y-=p.y;const g=(n.x-m.x)*o,b=(n.y-m.y)*o,w=g*h-b*f,v=g*f+b*h;c.x-=w,c.y-=v,c.x-=m.x,c.y-=m.y,c.x/=o,c.y/=o;const S=c.x*h+c.y*f,T=c.x*f-c.y*h;return c.x=S,c.y=-T,c.x+=d.x,c.y+=d.y,s&&(c.x=r.width-c.x),l&&(c.y=r.height-c.y),c};function QR(t){let e,r,a;function n(o){t[53](o)}let i={utilKey:"annotate",stores:t[4],locale:t[5],isActive:t[1],isActiveFraction:t[2],isVisible:t[3],mapScreenPointToImagePoint:t[38],mapImagePointToScreenPoint:t[37],imageRotation:t[39],imageFlipX:t[36],imageFlipY:t[35],shapes:t[41],toolbar:t[14]||t[6],toolShapes:t[15]||t[7],toolRetainStyles:t[8],enableSelectToolToAddShape:t[24],enableTapToAddText:t[25],enableViewTool:t[23],enableMoveTool:t[27],enableAutoSelectMoveTool:t[26],enableToolShareStyles:t[12],shapeControls:t[16]||t[9],shapePresets:t[20],enableButtonFlipVertical:t[17],parentRect:t[42],enablePresetDropImage:t[19],enablePresetSelectImage:t[18],toolSelectRadius:t[10],textInputMode:t[11],willStartInteraction:t[22],willRenderPresetToolbar:t[21]||t[13],hooks:{willRenderShapeControls:t[28],willRenderShapeTextControls:t[29],beforeAddShape:t[30],beforeRemoveShape:t[31],beforeDeselectShape:t[32],beforeSelectShape:t[33],beforeUpdateShape:t[34]}};return t[0]!==void 0&&(i.toolActive=t[0]),e=new Xd({props:i}),xr.push(()=>hn(e,"toolActive",n)),e.$on("measure",t[54]),{c(){Ut(e.$$.fragment)},m(o,s){Ot(e,o,s),a=!0},p(o,s){const l={};16&s[0]&&(l.stores=o[4]),32&s[0]&&(l.locale=o[5]),2&s[0]&&(l.isActive=o[1]),4&s[0]&&(l.isActiveFraction=o[2]),8&s[0]&&(l.isVisible=o[3]),128&s[1]&&(l.mapScreenPointToImagePoint=o[38]),64&s[1]&&(l.mapImagePointToScreenPoint=o[37]),256&s[1]&&(l.imageRotation=o[39]),32&s[1]&&(l.imageFlipX=o[36]),16&s[1]&&(l.imageFlipY=o[35]),16448&s[0]&&(l.toolbar=o[14]||o[6]),32896&s[0]&&(l.toolShapes=o[15]||o[7]),256&s[0]&&(l.toolRetainStyles=o[8]),16777216&s[0]&&(l.enableSelectToolToAddShape=o[24]),33554432&s[0]&&(l.enableTapToAddText=o[25]),8388608&s[0]&&(l.enableViewTool=o[23]),134217728&s[0]&&(l.enableMoveTool=o[27]),67108864&s[0]&&(l.enableAutoSelectMoveTool=o[26]),4096&s[0]&&(l.enableToolShareStyles=o[12]),66048&s[0]&&(l.shapeControls=o[16]||o[9]),1048576&s[0]&&(l.shapePresets=o[20]),131072&s[0]&&(l.enableButtonFlipVertical=o[17]),524288&s[0]&&(l.enablePresetDropImage=o[19]),262144&s[0]&&(l.enablePresetSelectImage=o[18]),1024&s[0]&&(l.toolSelectRadius=o[10]),2048&s[0]&&(l.textInputMode=o[11]),4194304&s[0]&&(l.willStartInteraction=o[22]),2105344&s[0]&&(l.willRenderPresetToolbar=o[21]||o[13]),1879048192&s[0]|15&s[1]&&(l.hooks={willRenderShapeControls:o[28],willRenderShapeTextControls:o[29],beforeAddShape:o[30],beforeRemoveShape:o[31],beforeDeselectShape:o[32],beforeSelectShape:o[33],beforeUpdateShape:o[34]}),!r&&1&s[0]&&(r=!0,l.toolActive=o[0],Rn(()=>r=!1)),e.$set(l)},i(o){a||(V(e.$$.fragment,o),a=!0)},o(o){_(e.$$.fragment,o),a=!1},d(o){Bt(e,o)}}}function t6(t,e,r){let a,n,i,o,s,l,c,d,p,{isActive:m}=e,{isActiveFraction:h}=e,{isVisible:f}=e,{stores:g}=e,{locale:b={}}=e,{markupEditorToolbar:w}=e,{markupEditorToolStyles:v}=e,{markupEditorToolRetainStyles:S}=e,{markupEditorShapeStyleControls:T}=e,{markupEditorToolSelectRadius:B}=e,{markupEditorTextInputMode:I}=e,{markupEditorToolShareStyles:O}=e,{willRenderShapePresetToolbar:R}=e,{annotateTools:E}=e,{annotateToolShapes:N}=e,{annotateShapeControls:U}=e,{annotateActiveTool:x}=e,{annotateEnableButtonFlipVertical:j=!1}=e,{annotateEnableSelectImagePreset:A=!1}=e,{annotateEnableDropImagePreset:P=!0}=e,{annotatePresets:G=[]}=e,{annotateWillRenderShapePresetToolbar:Q}=e,{markupEditorWillStartInteraction:Z}=e,{enableViewTool:ct}=e,{enableSelectToolToAddShape:lt}=e,{enableTapToAddText:xt}=e,{enableAutoSelectMoveTool:yt}=e,{enableMoveTool:bt}=e,{willRenderShapeControls:qt}=e,{willRenderShapeTextControls:Y}=e,{beforeAddShape:et}=e,{beforeRemoveShape:Vt}=e,{beforeDeselectShape:z}=e,{beforeSelectShape:vt}=e,{beforeUpdateShape:St}=e;const{rootRect:W,imageAnnotation:Lt,imageSize:Ce,imageRotation:pt,imageFlipX:zt,imageFlipY:Te,imageTransforms:ne,imageTransformsInterpolated:At}=g;return F(t,W,K=>r(52,d=K)),F(t,Ce,K=>r(51,c=K)),F(t,pt,K=>r(39,p=K)),F(t,zt,K=>r(36,o=K)),F(t,Te,K=>r(35,i=K)),F(t,ne,K=>r(50,l=K)),F(t,At,K=>r(49,s=K)),t.$$set=K=>{"isActive"in K&&r(1,m=K.isActive),"isActiveFraction"in K&&r(2,h=K.isActiveFraction),"isVisible"in K&&r(3,f=K.isVisible),"stores"in K&&r(4,g=K.stores),"locale"in K&&r(5,b=K.locale),"markupEditorToolbar"in K&&r(6,w=K.markupEditorToolbar),"markupEditorToolStyles"in K&&r(7,v=K.markupEditorToolStyles),"markupEditorToolRetainStyles"in K&&r(8,S=K.markupEditorToolRetainStyles),"markupEditorShapeStyleControls"in K&&r(9,T=K.markupEditorShapeStyleControls),"markupEditorToolSelectRadius"in K&&r(10,B=K.markupEditorToolSelectRadius),"markupEditorTextInputMode"in K&&r(11,I=K.markupEditorTextInputMode),"markupEditorToolShareStyles"in K&&r(12,O=K.markupEditorToolShareStyles),"willRenderShapePresetToolbar"in K&&r(13,R=K.willRenderShapePresetToolbar),"annotateTools"in K&&r(14,E=K.annotateTools),"annotateToolShapes"in K&&r(15,N=K.annotateToolShapes),"annotateShapeControls"in K&&r(16,U=K.annotateShapeControls),"annotateActiveTool"in K&&r(0,x=K.annotateActiveTool),"annotateEnableButtonFlipVertical"in K&&r(17,j=K.annotateEnableButtonFlipVertical),"annotateEnableSelectImagePreset"in K&&r(18,A=K.annotateEnableSelectImagePreset),"annotateEnableDropImagePreset"in K&&r(19,P=K.annotateEnableDropImagePreset),"annotatePresets"in K&&r(20,G=K.annotatePresets),"annotateWillRenderShapePresetToolbar"in K&&r(21,Q=K.annotateWillRenderShapePresetToolbar),"markupEditorWillStartInteraction"in K&&r(22,Z=K.markupEditorWillStartInteraction),"enableViewTool"in K&&r(23,ct=K.enableViewTool),"enableSelectToolToAddShape"in K&&r(24,lt=K.enableSelectToolToAddShape),"enableTapToAddText"in K&&r(25,xt=K.enableTapToAddText),"enableAutoSelectMoveTool"in K&&r(26,yt=K.enableAutoSelectMoveTool),"enableMoveTool"in K&&r(27,bt=K.enableMoveTool),"willRenderShapeControls"in K&&r(28,qt=K.willRenderShapeControls),"willRenderShapeTextControls"in K&&r(29,Y=K.willRenderShapeTextControls),"beforeAddShape"in K&&r(30,et=K.beforeAddShape),"beforeRemoveShape"in K&&r(31,Vt=K.beforeRemoveShape),"beforeDeselectShape"in K&&r(32,z=K.beforeDeselectShape),"beforeSelectShape"in K&&r(33,vt=K.beforeSelectShape),"beforeUpdateShape"in K&&r(34,St=K.beforeUpdateShape)},t.$$.update=()=>{3932208&t.$$.dirty[1]&&r(38,a=K=>C1(K,d,c,s.origin,s.translation,l.rotation.z,s.scale,o,i)),3932208&t.$$.dirty[1]&&r(37,n=K=>S1(K,d,c,s.origin,s.translation,l.rotation.z,s.scale,o,i))},[x,m,h,f,g,b,w,v,S,T,B,I,O,R,E,N,U,j,A,P,G,Q,Z,ct,lt,xt,yt,bt,qt,Y,et,Vt,z,vt,St,i,o,n,a,p,W,Lt,Ce,pt,zt,Te,ne,At,"annotate",s,l,c,d,function(K){x=K,r(0,x)},function(K){on.call(this,t,K)}]}var e6={util:["annotate",class extends er{constructor(t){super(),tr(this,t,t6,QR,Ye,{name:48,isActive:1,isActiveFraction:2,isVisible:3,stores:4,locale:5,markupEditorToolbar:6,markupEditorToolStyles:7,markupEditorToolRetainStyles:8,markupEditorShapeStyleControls:9,markupEditorToolSelectRadius:10,markupEditorTextInputMode:11,markupEditorToolShareStyles:12,willRenderShapePresetToolbar:13,annotateTools:14,annotateToolShapes:15,annotateShapeControls:16,annotateActiveTool:0,annotateEnableButtonFlipVertical:17,annotateEnableSelectImagePreset:18,annotateEnableDropImagePreset:19,annotatePresets:20,annotateWillRenderShapePresetToolbar:21,markupEditorWillStartInteraction:22,enableViewTool:23,enableSelectToolToAddShape:24,enableTapToAddText:25,enableAutoSelectMoveTool:26,enableMoveTool:27,willRenderShapeControls:28,willRenderShapeTextControls:29,beforeAddShape:30,beforeRemoveShape:31,beforeDeselectShape:32,beforeSelectShape:33,beforeUpdateShape:34},null,[-1,-1])}get name(){return this.$$.ctx[48]}get isActive(){return this.$$.ctx[1]}set isActive(t){this.$$set({isActive:t}),D()}get isActiveFraction(){return this.$$.ctx[2]}set isActiveFraction(t){this.$$set({isActiveFraction:t}),D()}get isVisible(){return this.$$.ctx[3]}set isVisible(t){this.$$set({isVisible:t}),D()}get stores(){return this.$$.ctx[4]}set stores(t){this.$$set({stores:t}),D()}get locale(){return this.$$.ctx[5]}set locale(t){this.$$set({locale:t}),D()}get markupEditorToolbar(){return this.$$.ctx[6]}set markupEditorToolbar(t){this.$$set({markupEditorToolbar:t}),D()}get markupEditorToolStyles(){return this.$$.ctx[7]}set markupEditorToolStyles(t){this.$$set({markupEditorToolStyles:t}),D()}get markupEditorToolRetainStyles(){return this.$$.ctx[8]}set markupEditorToolRetainStyles(t){this.$$set({markupEditorToolRetainStyles:t}),D()}get markupEditorShapeStyleControls(){return this.$$.ctx[9]}set markupEditorShapeStyleControls(t){this.$$set({markupEditorShapeStyleControls:t}),D()}get markupEditorToolSelectRadius(){return this.$$.ctx[10]}set markupEditorToolSelectRadius(t){this.$$set({markupEditorToolSelectRadius:t}),D()}get markupEditorTextInputMode(){return this.$$.ctx[11]}set markupEditorTextInputMode(t){this.$$set({markupEditorTextInputMode:t}),D()}get markupEditorToolShareStyles(){return this.$$.ctx[12]}set markupEditorToolShareStyles(t){this.$$set({markupEditorToolShareStyles:t}),D()}get willRenderShapePresetToolbar(){return this.$$.ctx[13]}set willRenderShapePresetToolbar(t){this.$$set({willRenderShapePresetToolbar:t}),D()}get annotateTools(){return this.$$.ctx[14]}set annotateTools(t){this.$$set({annotateTools:t}),D()}get annotateToolShapes(){return this.$$.ctx[15]}set annotateToolShapes(t){this.$$set({annotateToolShapes:t}),D()}get annotateShapeControls(){return this.$$.ctx[16]}set annotateShapeControls(t){this.$$set({annotateShapeControls:t}),D()}get annotateActiveTool(){return this.$$.ctx[0]}set annotateActiveTool(t){this.$$set({annotateActiveTool:t}),D()}get annotateEnableButtonFlipVertical(){return this.$$.ctx[17]}set annotateEnableButtonFlipVertical(t){this.$$set({annotateEnableButtonFlipVertical:t}),D()}get annotateEnableSelectImagePreset(){return this.$$.ctx[18]}set annotateEnableSelectImagePreset(t){this.$$set({annotateEnableSelectImagePreset:t}),D()}get annotateEnableDropImagePreset(){return this.$$.ctx[19]}set annotateEnableDropImagePreset(t){this.$$set({annotateEnableDropImagePreset:t}),D()}get annotatePresets(){return this.$$.ctx[20]}set annotatePresets(t){this.$$set({annotatePresets:t}),D()}get annotateWillRenderShapePresetToolbar(){return this.$$.ctx[21]}set annotateWillRenderShapePresetToolbar(t){this.$$set({annotateWillRenderShapePresetToolbar:t}),D()}get markupEditorWillStartInteraction(){return this.$$.ctx[22]}set markupEditorWillStartInteraction(t){this.$$set({markupEditorWillStartInteraction:t}),D()}get enableViewTool(){return this.$$.ctx[23]}set enableViewTool(t){this.$$set({enableViewTool:t}),D()}get enableSelectToolToAddShape(){return this.$$.ctx[24]}set enableSelectToolToAddShape(t){this.$$set({enableSelectToolToAddShape:t}),D()}get enableTapToAddText(){return this.$$.ctx[25]}set enableTapToAddText(t){this.$$set({enableTapToAddText:t}),D()}get enableAutoSelectMoveTool(){return this.$$.ctx[26]}set enableAutoSelectMoveTool(t){this.$$set({enableAutoSelectMoveTool:t}),D()}get enableMoveTool(){return this.$$.ctx[27]}set enableMoveTool(t){this.$$set({enableMoveTool:t}),D()}get willRenderShapeControls(){return this.$$.ctx[28]}set willRenderShapeControls(t){this.$$set({willRenderShapeControls:t}),D()}get willRenderShapeTextControls(){return this.$$.ctx[29]}set willRenderShapeTextControls(t){this.$$set({willRenderShapeTextControls:t}),D()}get beforeAddShape(){return this.$$.ctx[30]}set beforeAddShape(t){this.$$set({beforeAddShape:t}),D()}get beforeRemoveShape(){return this.$$.ctx[31]}set beforeRemoveShape(t){this.$$set({beforeRemoveShape:t}),D()}get beforeDeselectShape(){return this.$$.ctx[32]}set beforeDeselectShape(t){this.$$set({beforeDeselectShape:t}),D()}get beforeSelectShape(){return this.$$.ctx[33]}set beforeSelectShape(t){this.$$set({beforeSelectShape:t}),D()}get beforeUpdateShape(){return this.$$.ctx[34]}set beforeUpdateShape(t){this.$$set({beforeUpdateShape:t}),D()}}]};function r6(t){let e,r,a;function n(o){t[45](o)}let i={stores:t[4],locale:t[5],isActive:t[1],isActiveFraction:t[2],isVisible:t[3],mapScreenPointToImagePoint:t[36],mapImagePointToScreenPoint:t[35],utilKey:"decorate",shapes:t[38],toolbar:t[14]||t[6],toolShapes:t[15]||t[7],toolRetainStyles:t[8],shapeControls:t[16]||t[9],shapePresets:t[20],enableSelectToolToAddShape:t[22],enableTapToAddText:t[23],enableViewTool:t[24],enableMoveTool:t[25],enableAutoSelectMoveTool:t[26],enableToolShareStyles:t[12],enablePresetSelectImage:t[18],enablePresetDropImage:t[19],enableButtonFlipVertical:t[17],parentRect:t[37],toolSelectRadius:t[10],textInputMode:t[11],willStartInteraction:t[34],willRenderPresetToolbar:t[21]||t[13],hooks:{willRenderShapeControls:t[27],willRenderShapeTextControls:t[28],beforeAddShape:t[29],beforeRemoveShape:t[30],beforeDeselectShape:t[31],beforeSelectShape:t[32],beforeUpdateShape:t[33]}};return t[0]!==void 0&&(i.toolActive=t[0]),e=new Xd({props:i}),xr.push(()=>hn(e,"toolActive",n)),e.$on("measure",t[46]),{c(){Ut(e.$$.fragment)},m(o,s){Ot(e,o,s),a=!0},p(o,s){const l={};16&s[0]&&(l.stores=o[4]),32&s[0]&&(l.locale=o[5]),2&s[0]&&(l.isActive=o[1]),4&s[0]&&(l.isActiveFraction=o[2]),8&s[0]&&(l.isVisible=o[3]),32&s[1]&&(l.mapScreenPointToImagePoint=o[36]),16&s[1]&&(l.mapImagePointToScreenPoint=o[35]),16448&s[0]&&(l.toolbar=o[14]||o[6]),32896&s[0]&&(l.toolShapes=o[15]||o[7]),256&s[0]&&(l.toolRetainStyles=o[8]),66048&s[0]&&(l.shapeControls=o[16]||o[9]),1048576&s[0]&&(l.shapePresets=o[20]),4194304&s[0]&&(l.enableSelectToolToAddShape=o[22]),8388608&s[0]&&(l.enableTapToAddText=o[23]),16777216&s[0]&&(l.enableViewTool=o[24]),33554432&s[0]&&(l.enableMoveTool=o[25]),67108864&s[0]&&(l.enableAutoSelectMoveTool=o[26]),4096&s[0]&&(l.enableToolShareStyles=o[12]),262144&s[0]&&(l.enablePresetSelectImage=o[18]),524288&s[0]&&(l.enablePresetDropImage=o[19]),131072&s[0]&&(l.enableButtonFlipVertical=o[17]),1024&s[0]&&(l.toolSelectRadius=o[10]),2048&s[0]&&(l.textInputMode=o[11]),8&s[1]&&(l.willStartInteraction=o[34]),2105344&s[0]&&(l.willRenderPresetToolbar=o[21]||o[13]),2013265920&s[0]|7&s[1]&&(l.hooks={willRenderShapeControls:o[27],willRenderShapeTextControls:o[28],beforeAddShape:o[29],beforeRemoveShape:o[30],beforeDeselectShape:o[31],beforeSelectShape:o[32],beforeUpdateShape:o[33]}),!r&&1&s[0]&&(r=!0,l.toolActive=o[0],Rn(()=>r=!1)),e.$set(l)},i(o){a||(V(e.$$.fragment,o),a=!0)},o(o){_(e.$$.fragment,o),a=!1},d(o){Bt(e,o)}}}function a6(t,e,r){let a,n,i,o,s,{isActive:l}=e,{isActiveFraction:c}=e,{isVisible:d}=e,{stores:p}=e,{locale:m={}}=e,{markupEditorToolbar:h}=e,{markupEditorToolStyles:f}=e,{markupEditorToolRetainStyles:g}=e,{markupEditorShapeStyleControls:b}=e,{markupEditorToolSelectRadius:w}=e,{markupEditorTextInputMode:v}=e,{markupEditorToolShareStyles:S}=e,{willRenderShapePresetToolbar:T}=e,{decorateTools:B}=e,{decorateToolShapes:I}=e,{decorateShapeControls:O}=e,{decorateActiveTool:R}=e,{decorateEnableButtonFlipVertical:E=!1}=e,{decorateEnableSelectImagePreset:N=!1}=e,{decorateEnableDropImagePreset:U=!0}=e,{decoratePresets:x=[]}=e,{decorateWillRenderShapePresetToolbar:j}=e,{enableSelectToolToAddShape:A}=e,{enableTapToAddText:P}=e,{enableViewTool:G}=e,{enableMoveTool:Q}=e,{enableAutoSelectMoveTool:Z}=e,{willRenderShapeControls:ct}=e,{willRenderShapeTextControls:lt}=e,{beforeAddShape:xt}=e,{beforeRemoveShape:yt}=e,{beforeDeselectShape:bt}=e,{beforeSelectShape:qt}=e,{beforeUpdateShape:Y}=e,{markupEditorWillStartInteraction:et}=e;const{imageCropRect:Vt,imageDecoration:z,imageSelectionRectPresentation:vt,imageTransformsInterpolated:St}=p;return F(t,vt,W=>r(43,o=W)),F(t,St,W=>r(44,s=W)),t.$$set=W=>{"isActive"in W&&r(1,l=W.isActive),"isActiveFraction"in W&&r(2,c=W.isActiveFraction),"isVisible"in W&&r(3,d=W.isVisible),"stores"in W&&r(4,p=W.stores),"locale"in W&&r(5,m=W.locale),"markupEditorToolbar"in W&&r(6,h=W.markupEditorToolbar),"markupEditorToolStyles"in W&&r(7,f=W.markupEditorToolStyles),"markupEditorToolRetainStyles"in W&&r(8,g=W.markupEditorToolRetainStyles),"markupEditorShapeStyleControls"in W&&r(9,b=W.markupEditorShapeStyleControls),"markupEditorToolSelectRadius"in W&&r(10,w=W.markupEditorToolSelectRadius),"markupEditorTextInputMode"in W&&r(11,v=W.markupEditorTextInputMode),"markupEditorToolShareStyles"in W&&r(12,S=W.markupEditorToolShareStyles),"willRenderShapePresetToolbar"in W&&r(13,T=W.willRenderShapePresetToolbar),"decorateTools"in W&&r(14,B=W.decorateTools),"decorateToolShapes"in W&&r(15,I=W.decorateToolShapes),"decorateShapeControls"in W&&r(16,O=W.decorateShapeControls),"decorateActiveTool"in W&&r(0,R=W.decorateActiveTool),"decorateEnableButtonFlipVertical"in W&&r(17,E=W.decorateEnableButtonFlipVertical),"decorateEnableSelectImagePreset"in W&&r(18,N=W.decorateEnableSelectImagePreset),"decorateEnableDropImagePreset"in W&&r(19,U=W.decorateEnableDropImagePreset),"decoratePresets"in W&&r(20,x=W.decoratePresets),"decorateWillRenderShapePresetToolbar"in W&&r(21,j=W.decorateWillRenderShapePresetToolbar),"enableSelectToolToAddShape"in W&&r(22,A=W.enableSelectToolToAddShape),"enableTapToAddText"in W&&r(23,P=W.enableTapToAddText),"enableViewTool"in W&&r(24,G=W.enableViewTool),"enableMoveTool"in W&&r(25,Q=W.enableMoveTool),"enableAutoSelectMoveTool"in W&&r(26,Z=W.enableAutoSelectMoveTool),"willRenderShapeControls"in W&&r(27,ct=W.willRenderShapeControls),"willRenderShapeTextControls"in W&&r(28,lt=W.willRenderShapeTextControls),"beforeAddShape"in W&&r(29,xt=W.beforeAddShape),"beforeRemoveShape"in W&&r(30,yt=W.beforeRemoveShape),"beforeDeselectShape"in W&&r(31,bt=W.beforeDeselectShape),"beforeSelectShape"in W&&r(32,qt=W.beforeSelectShape),"beforeUpdateShape"in W&&r(33,Y=W.beforeUpdateShape),"markupEditorWillStartInteraction"in W&&r(34,et=W.markupEditorWillStartInteraction)},t.$$.update=()=>{8192&t.$$.dirty[1]&&r(42,a=s?s.scale:1),6144&t.$$.dirty[1]&&r(36,n=W=>{const Lt=Fe(W);return Lt.x-=o.x,Lt.y-=o.y,Lt.x/=a,Lt.y/=a,Lt}),6144&t.$$.dirty[1]&&r(35,i=W=>{const Lt=Fe(W);return Lt.x*=a,Lt.y*=a,Lt.x+=o.x,Lt.y+=o.y,Lt})},[R,l,c,d,p,m,h,f,g,b,w,v,S,T,B,I,O,E,N,U,x,j,A,P,G,Q,Z,ct,lt,xt,yt,bt,qt,Y,et,i,n,Vt,z,vt,St,"decorate",a,o,s,function(W){R=W,r(0,R)},function(W){on.call(this,t,W)}]}var n6={util:["decorate",class extends er{constructor(t){super(),tr(this,t,a6,r6,Ye,{name:41,isActive:1,isActiveFraction:2,isVisible:3,stores:4,locale:5,markupEditorToolbar:6,markupEditorToolStyles:7,markupEditorToolRetainStyles:8,markupEditorShapeStyleControls:9,markupEditorToolSelectRadius:10,markupEditorTextInputMode:11,markupEditorToolShareStyles:12,willRenderShapePresetToolbar:13,decorateTools:14,decorateToolShapes:15,decorateShapeControls:16,decorateActiveTool:0,decorateEnableButtonFlipVertical:17,decorateEnableSelectImagePreset:18,decorateEnableDropImagePreset:19,decoratePresets:20,decorateWillRenderShapePresetToolbar:21,enableSelectToolToAddShape:22,enableTapToAddText:23,enableViewTool:24,enableMoveTool:25,enableAutoSelectMoveTool:26,willRenderShapeControls:27,willRenderShapeTextControls:28,beforeAddShape:29,beforeRemoveShape:30,beforeDeselectShape:31,beforeSelectShape:32,beforeUpdateShape:33,markupEditorWillStartInteraction:34},null,[-1,-1])}get name(){return this.$$.ctx[41]}get isActive(){return this.$$.ctx[1]}set isActive(t){this.$$set({isActive:t}),D()}get isActiveFraction(){return this.$$.ctx[2]}set isActiveFraction(t){this.$$set({isActiveFraction:t}),D()}get isVisible(){return this.$$.ctx[3]}set isVisible(t){this.$$set({isVisible:t}),D()}get stores(){return this.$$.ctx[4]}set stores(t){this.$$set({stores:t}),D()}get locale(){return this.$$.ctx[5]}set locale(t){this.$$set({locale:t}),D()}get markupEditorToolbar(){return this.$$.ctx[6]}set markupEditorToolbar(t){this.$$set({markupEditorToolbar:t}),D()}get markupEditorToolStyles(){return this.$$.ctx[7]}set markupEditorToolStyles(t){this.$$set({markupEditorToolStyles:t}),D()}get markupEditorToolRetainStyles(){return this.$$.ctx[8]}set markupEditorToolRetainStyles(t){this.$$set({markupEditorToolRetainStyles:t}),D()}get markupEditorShapeStyleControls(){return this.$$.ctx[9]}set markupEditorShapeStyleControls(t){this.$$set({markupEditorShapeStyleControls:t}),D()}get markupEditorToolSelectRadius(){return this.$$.ctx[10]}set markupEditorToolSelectRadius(t){this.$$set({markupEditorToolSelectRadius:t}),D()}get markupEditorTextInputMode(){return this.$$.ctx[11]}set markupEditorTextInputMode(t){this.$$set({markupEditorTextInputMode:t}),D()}get markupEditorToolShareStyles(){return this.$$.ctx[12]}set markupEditorToolShareStyles(t){this.$$set({markupEditorToolShareStyles:t}),D()}get willRenderShapePresetToolbar(){return this.$$.ctx[13]}set willRenderShapePresetToolbar(t){this.$$set({willRenderShapePresetToolbar:t}),D()}get decorateTools(){return this.$$.ctx[14]}set decorateTools(t){this.$$set({decorateTools:t}),D()}get decorateToolShapes(){return this.$$.ctx[15]}set decorateToolShapes(t){this.$$set({decorateToolShapes:t}),D()}get decorateShapeControls(){return this.$$.ctx[16]}set decorateShapeControls(t){this.$$set({decorateShapeControls:t}),D()}get decorateActiveTool(){return this.$$.ctx[0]}set decorateActiveTool(t){this.$$set({decorateActiveTool:t}),D()}get decorateEnableButtonFlipVertical(){return this.$$.ctx[17]}set decorateEnableButtonFlipVertical(t){this.$$set({decorateEnableButtonFlipVertical:t}),D()}get decorateEnableSelectImagePreset(){return this.$$.ctx[18]}set decorateEnableSelectImagePreset(t){this.$$set({decorateEnableSelectImagePreset:t}),D()}get decorateEnableDropImagePreset(){return this.$$.ctx[19]}set decorateEnableDropImagePreset(t){this.$$set({decorateEnableDropImagePreset:t}),D()}get decoratePresets(){return this.$$.ctx[20]}set decoratePresets(t){this.$$set({decoratePresets:t}),D()}get decorateWillRenderShapePresetToolbar(){return this.$$.ctx[21]}set decorateWillRenderShapePresetToolbar(t){this.$$set({decorateWillRenderShapePresetToolbar:t}),D()}get enableSelectToolToAddShape(){return this.$$.ctx[22]}set enableSelectToolToAddShape(t){this.$$set({enableSelectToolToAddShape:t}),D()}get enableTapToAddText(){return this.$$.ctx[23]}set enableTapToAddText(t){this.$$set({enableTapToAddText:t}),D()}get enableViewTool(){return this.$$.ctx[24]}set enableViewTool(t){this.$$set({enableViewTool:t}),D()}get enableMoveTool(){return this.$$.ctx[25]}set enableMoveTool(t){this.$$set({enableMoveTool:t}),D()}get enableAutoSelectMoveTool(){return this.$$.ctx[26]}set enableAutoSelectMoveTool(t){this.$$set({enableAutoSelectMoveTool:t}),D()}get willRenderShapeControls(){return this.$$.ctx[27]}set willRenderShapeControls(t){this.$$set({willRenderShapeControls:t}),D()}get willRenderShapeTextControls(){return this.$$.ctx[28]}set willRenderShapeTextControls(t){this.$$set({willRenderShapeTextControls:t}),D()}get beforeAddShape(){return this.$$.ctx[29]}set beforeAddShape(t){this.$$set({beforeAddShape:t}),D()}get beforeRemoveShape(){return this.$$.ctx[30]}set beforeRemoveShape(t){this.$$set({beforeRemoveShape:t}),D()}get beforeDeselectShape(){return this.$$.ctx[31]}set beforeDeselectShape(t){this.$$set({beforeDeselectShape:t}),D()}get beforeSelectShape(){return this.$$.ctx[32]}set beforeSelectShape(t){this.$$set({beforeSelectShape:t}),D()}get beforeUpdateShape(){return this.$$.ctx[33]}set beforeUpdateShape(t){this.$$set({beforeUpdateShape:t}),D()}get markupEditorWillStartInteraction(){return this.$$.ctx[34]}set markupEditorWillStartInteraction(t){this.$$set({markupEditorWillStartInteraction:t}),D()}}]};function i6(t){let e,r;return e=new Xd({props:{stores:t[3],locale:t[4],isActive:t[0],isActiveFraction:t[1],isVisible:t[2],mapScreenPointToImagePoint:t[25],mapImagePointToScreenPoint:t[24],utilKey:"sticker",shapePresets:t[5],shapes:t[6]?t[31]:t[32],toolActive:"preset",imageFlipX:!!t[6]&&t[23],imageFlipY:!!t[6]&&t[22],imageRotation:t[6]?t[27]:0,parentRect:t[6]?t[33]:t[29],enablePresetDropImage:t[7],enablePresetSelectImage:t[26],enableButtonFlipVertical:t[10]||t[8],toolSelectRadius:t[14],willStartInteraction:t[21],willRenderPresetToolbar:t[11]||t[9]||t[15],hooks:{willRenderShapeControls:t[12],willRenderShapeTextControls:t[13],beforeAddShape:t[16],beforeRemoveShape:t[17],beforeDeselectShape:t[18],beforeSelectShape:t[19],beforeUpdateShape:t[20]}}}),e.$on("measure",t[48]),{c(){Ut(e.$$.fragment)},m(a,n){Ot(e,a,n),r=!0},p(a,n){const i={};8&n[0]&&(i.stores=a[3]),16&n[0]&&(i.locale=a[4]),1&n[0]&&(i.isActive=a[0]),2&n[0]&&(i.isActiveFraction=a[1]),4&n[0]&&(i.isVisible=a[2]),33554432&n[0]&&(i.mapScreenPointToImagePoint=a[25]),16777216&n[0]&&(i.mapImagePointToScreenPoint=a[24]),32&n[0]&&(i.shapePresets=a[5]),64&n[0]&&(i.shapes=a[6]?a[31]:a[32]),8388672&n[0]&&(i.imageFlipX=!!a[6]&&a[23]),4194368&n[0]&&(i.imageFlipY=!!a[6]&&a[22]),134217792&n[0]&&(i.imageRotation=a[6]?a[27]:0),64&n[0]&&(i.parentRect=a[6]?a[33]:a[29]),128&n[0]&&(i.enablePresetDropImage=a[7]),67108864&n[0]&&(i.enablePresetSelectImage=a[26]),1280&n[0]&&(i.enableButtonFlipVertical=a[10]||a[8]),16384&n[0]&&(i.toolSelectRadius=a[14]),2097152&n[0]&&(i.willStartInteraction=a[21]),35328&n[0]&&(i.willRenderPresetToolbar=a[11]||a[9]||a[15]),2043904&n[0]&&(i.hooks={willRenderShapeControls:a[12],willRenderShapeTextControls:a[13],beforeAddShape:a[16],beforeRemoveShape:a[17],beforeDeselectShape:a[18],beforeSelectShape:a[19],beforeUpdateShape:a[20]}),e.$set(i)},i(a){r||(V(e.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),r=!1},d(a){Bt(e,a)}}}function o6(t,e,r){let a,n,i,o,s,l,c,d,p,m,h,f,{isActive:g}=e,{isActiveFraction:b}=e,{isVisible:w}=e,{stores:v}=e,{locale:S={}}=e,{stickers:T=[]}=e,{stickerStickToImage:B=!1}=e,{stickerEnableSelectImagePreset:I=!0}=e,{stickerEnableDropImagePreset:O=!0}=e,{stickerEnableButtonFlipVertical:R=!1}=e,{stickerWillRenderShapePresetToolbar:E}=e,{stickerEnableSelectImage:N=!0}=e,{stickersEnableButtonFlipVertical:U=!1}=e,{stickersWillRenderShapePresetToolbar:x}=e,{willRenderShapeControls:j}=e,{willRenderShapeTextControls:A}=e,{markupEditorToolSelectRadius:P}=e,{willRenderShapePresetToolbar:G}=e,{beforeAddShape:Q}=e,{beforeRemoveShape:Z}=e,{beforeDeselectShape:ct}=e,{beforeSelectShape:lt}=e,{beforeUpdateShape:xt}=e,{markupEditorWillStartInteraction:yt}=e;const{rootRect:bt,imageCropRect:qt,imageSelectionRectPresentation:Y,imageAnnotation:et,imageDecoration:Vt,imageSize:z,imageTransforms:vt,imageTransformsInterpolated:St,imageRotation:W,imageFlipX:Lt,imageFlipY:Ce}=v;return F(t,bt,pt=>r(47,h=pt)),F(t,Y,pt=>r(43,s=pt)),F(t,z,pt=>r(46,m=pt)),F(t,vt,pt=>r(45,p=pt)),F(t,St,pt=>r(44,d=pt)),F(t,W,pt=>r(27,f=pt)),F(t,Lt,pt=>r(23,c=pt)),F(t,Ce,pt=>r(22,l=pt)),t.$$set=pt=>{"isActive"in pt&&r(0,g=pt.isActive),"isActiveFraction"in pt&&r(1,b=pt.isActiveFraction),"isVisible"in pt&&r(2,w=pt.isVisible),"stores"in pt&&r(3,v=pt.stores),"locale"in pt&&r(4,S=pt.locale),"stickers"in pt&&r(5,T=pt.stickers),"stickerStickToImage"in pt&&r(6,B=pt.stickerStickToImage),"stickerEnableSelectImagePreset"in pt&&r(40,I=pt.stickerEnableSelectImagePreset),"stickerEnableDropImagePreset"in pt&&r(7,O=pt.stickerEnableDropImagePreset),"stickerEnableButtonFlipVertical"in pt&&r(8,R=pt.stickerEnableButtonFlipVertical),"stickerWillRenderShapePresetToolbar"in pt&&r(9,E=pt.stickerWillRenderShapePresetToolbar),"stickerEnableSelectImage"in pt&&r(41,N=pt.stickerEnableSelectImage),"stickersEnableButtonFlipVertical"in pt&&r(10,U=pt.stickersEnableButtonFlipVertical),"stickersWillRenderShapePresetToolbar"in pt&&r(11,x=pt.stickersWillRenderShapePresetToolbar),"willRenderShapeControls"in pt&&r(12,j=pt.willRenderShapeControls),"willRenderShapeTextControls"in pt&&r(13,A=pt.willRenderShapeTextControls),"markupEditorToolSelectRadius"in pt&&r(14,P=pt.markupEditorToolSelectRadius),"willRenderShapePresetToolbar"in pt&&r(15,G=pt.willRenderShapePresetToolbar),"beforeAddShape"in pt&&r(16,Q=pt.beforeAddShape),"beforeRemoveShape"in pt&&r(17,Z=pt.beforeRemoveShape),"beforeDeselectShape"in pt&&r(18,ct=pt.beforeDeselectShape),"beforeSelectShape"in pt&&r(19,lt=pt.beforeSelectShape),"beforeUpdateShape"in pt&&r(20,xt=pt.beforeUpdateShape),"markupEditorWillStartInteraction"in pt&&r(21,yt=pt.markupEditorWillStartInteraction)},t.$$.update=()=>{8192&t.$$.dirty[1]&&r(42,a=d?d.scale:1),1536&t.$$.dirty[1]&&r(26,n=I!==!1&&N),12582976&t.$$.dirty[0]|129024&t.$$.dirty[1]&&r(25,i=B?pt=>C1(pt,h,m,d.origin,d.translation,p.rotation.z,d.scale,c,l):pt=>{const zt=Fe(pt);return zt.x-=s.x,zt.y-=s.y,zt.x/=a,zt.y/=a,zt}),12582976&t.$$.dirty[0]|129024&t.$$.dirty[1]&&r(24,o=B?pt=>S1(pt,h,m,d.origin,d.translation,p.rotation.z,d.scale,c,l):pt=>{const zt=Fe(pt);return zt.x*=a,zt.y*=a,zt.x+=s.x,zt.y+=s.y,zt})},[g,b,w,v,S,T,B,O,R,E,U,x,j,A,P,G,Q,Z,ct,lt,xt,yt,l,c,o,i,n,f,bt,qt,Y,et,Vt,z,vt,St,W,Lt,Ce,"sticker",I,N,a,s,d,p,m,h,function(pt){on.call(this,t,pt)}]}var s6={util:["sticker",class extends er{constructor(t){super(),tr(this,t,o6,i6,Ye,{name:39,isActive:0,isActiveFraction:1,isVisible:2,stores:3,locale:4,stickers:5,stickerStickToImage:6,stickerEnableSelectImagePreset:40,stickerEnableDropImagePreset:7,stickerEnableButtonFlipVertical:8,stickerWillRenderShapePresetToolbar:9,stickerEnableSelectImage:41,stickersEnableButtonFlipVertical:10,stickersWillRenderShapePresetToolbar:11,willRenderShapeControls:12,willRenderShapeTextControls:13,markupEditorToolSelectRadius:14,willRenderShapePresetToolbar:15,beforeAddShape:16,beforeRemoveShape:17,beforeDeselectShape:18,beforeSelectShape:19,beforeUpdateShape:20,markupEditorWillStartInteraction:21},null,[-1,-1])}get name(){return this.$$.ctx[39]}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$$set({isActive:t}),D()}get isActiveFraction(){return this.$$.ctx[1]}set isActiveFraction(t){this.$$set({isActiveFraction:t}),D()}get isVisible(){return this.$$.ctx[2]}set isVisible(t){this.$$set({isVisible:t}),D()}get stores(){return this.$$.ctx[3]}set stores(t){this.$$set({stores:t}),D()}get locale(){return this.$$.ctx[4]}set locale(t){this.$$set({locale:t}),D()}get stickers(){return this.$$.ctx[5]}set stickers(t){this.$$set({stickers:t}),D()}get stickerStickToImage(){return this.$$.ctx[6]}set stickerStickToImage(t){this.$$set({stickerStickToImage:t}),D()}get stickerEnableSelectImagePreset(){return this.$$.ctx[40]}set stickerEnableSelectImagePreset(t){this.$$set({stickerEnableSelectImagePreset:t}),D()}get stickerEnableDropImagePreset(){return this.$$.ctx[7]}set stickerEnableDropImagePreset(t){this.$$set({stickerEnableDropImagePreset:t}),D()}get stickerEnableButtonFlipVertical(){return this.$$.ctx[8]}set stickerEnableButtonFlipVertical(t){this.$$set({stickerEnableButtonFlipVertical:t}),D()}get stickerWillRenderShapePresetToolbar(){return this.$$.ctx[9]}set stickerWillRenderShapePresetToolbar(t){this.$$set({stickerWillRenderShapePresetToolbar:t}),D()}get stickerEnableSelectImage(){return this.$$.ctx[41]}set stickerEnableSelectImage(t){this.$$set({stickerEnableSelectImage:t}),D()}get stickersEnableButtonFlipVertical(){return this.$$.ctx[10]}set stickersEnableButtonFlipVertical(t){this.$$set({stickersEnableButtonFlipVertical:t}),D()}get stickersWillRenderShapePresetToolbar(){return this.$$.ctx[11]}set stickersWillRenderShapePresetToolbar(t){this.$$set({stickersWillRenderShapePresetToolbar:t}),D()}get willRenderShapeControls(){return this.$$.ctx[12]}set willRenderShapeControls(t){this.$$set({willRenderShapeControls:t}),D()}get willRenderShapeTextControls(){return this.$$.ctx[13]}set willRenderShapeTextControls(t){this.$$set({willRenderShapeTextControls:t}),D()}get markupEditorToolSelectRadius(){return this.$$.ctx[14]}set markupEditorToolSelectRadius(t){this.$$set({markupEditorToolSelectRadius:t}),D()}get willRenderShapePresetToolbar(){return this.$$.ctx[15]}set willRenderShapePresetToolbar(t){this.$$set({willRenderShapePresetToolbar:t}),D()}get beforeAddShape(){return this.$$.ctx[16]}set beforeAddShape(t){this.$$set({beforeAddShape:t}),D()}get beforeRemoveShape(){return this.$$.ctx[17]}set beforeRemoveShape(t){this.$$set({beforeRemoveShape:t}),D()}get beforeDeselectShape(){return this.$$.ctx[18]}set beforeDeselectShape(t){this.$$set({beforeDeselectShape:t}),D()}get beforeSelectShape(){return this.$$.ctx[19]}set beforeSelectShape(t){this.$$set({beforeSelectShape:t}),D()}get beforeUpdateShape(){return this.$$.ctx[20]}set beforeUpdateShape(t){this.$$set({beforeUpdateShape:t}),D()}get markupEditorWillStartInteraction(){return this.$$.ctx[21]}set markupEditorWillStartInteraction(t){this.$$set({markupEditorWillStartInteraction:t}),D()}},({stickers:t,stickerEnableSelectImagePreset:e,stickerEnableDropImagePreset:r})=>t&&t.length||e||r]};function l6(t){let e,r,a,n,i,o=(t[14](t[34].value)||"")+"",s=(Xr(t[34].label)?t[34].label(t[1]):t[34].label)+"";return{c(){e=gt("div"),r=new _d(!1),a=ge(),n=gt("span"),i=Hr(s),r.a=a,C(e,"slot","option")},m(l,c){st(l,e,c),r.m(o,e),Pt(e,a),Pt(e,n),Pt(n,i)},p(l,c){8&c[1]&&o!==(o=(l[14](l[34].value)||"")+"")&&r.p(o),2&c[0]|8&c[1]&&s!==(s=(Xr(l[34].label)?l[34].label(l[1]):l[34].label)+"")&&ca(i,s)},d(l){l&&it(e)}}}function c6(t){let e,r;return e=new jo({props:{locale:t[1],class:"PinturaControlList",layout:"row",options:t[2],selectedIndex:t[6],onchange:t[12],$$slots:{option:[l6,({option:a})=>({34:a}),({option:a})=>[0,a?8:0]]},$$scope:{ctx:t}}}),{c(){Ut(e.$$.fragment)},m(a,n){Ot(e,a,n),r=!0},p(a,n){const i={};2&n[0]&&(i.locale=a[1]),4&n[0]&&(i.options=a[2]),64&n[0]&&(i.selectedIndex=a[6]),2&n[0]|24&n[1]&&(i.$$scope={dirty:n,ctx:a}),e.$set(i)},i(a){r||(V(e.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),r=!1},d(a){Bt(e,a)}}}function d6(t){let e,r,a,n,i;return r=new q2({props:{locale:t[1],class:"PinturaControlPanels",shape:t[4],onchange:t[13],controls:t[3],scrollElasticity:t[7]}}),n=new Ki({props:{elasticity:t[10],$$slots:{default:[c6]},$$scope:{ctx:t}}}),{c(){e=gt("div"),Ut(r.$$.fragment),a=ge(),Ut(n.$$.fragment),C(e,"slot","footer"),C(e,"style",t[5])},m(o,s){st(o,e,s),Ot(r,e,null),Pt(e,a),Ot(n,e,null),i=!0},p(o,s){const l={};2&s[0]&&(l.locale=o[1]),16&s[0]&&(l.shape=o[4]),8&s[0]&&(l.controls=o[3]),128&s[0]&&(l.scrollElasticity=o[7]),r.$set(l);const c={};70&s[0]|16&s[1]&&(c.$$scope={dirty:s,ctx:o}),n.$set(c),(!i||32&s[0])&&C(e,"style",o[5])},i(o){i||(V(r.$$.fragment,o),V(n.$$.fragment,o),i=!0)},o(o){_(r.$$.fragment,o),_(n.$$.fragment,o),i=!1},d(o){o&&it(e),Bt(r),Bt(n)}}}function u6(t){let e,r;return e=new $s({props:{$$slots:{footer:[d6]},$$scope:{ctx:t}}}),e.$on("measure",t[23]),{c(){Ut(e.$$.fragment)},m(a,n){Ot(e,a,n),r=!0},p(a,n){const i={};254&n[0]|16&n[1]&&(i.$$scope={dirty:n,ctx:a}),e.$set(i)},i(a){r||(V(e.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),r=!1},d(a){Bt(e,a)}}}function p6(t,e,r){let a,n,i,o,s,l,c,d,p=We,m=()=>(p(),p=pn(h,P=>r(20,s=P)),h);t.$$.on_destroy.push(()=>p());let{isActive:h}=e;m();let{stores:f}=e,{locale:g={}}=e,{frameStyles:b={}}=e,{frameOptions:w=[]}=e,{markupEditorShapeStyleControls:v}=e;const S=ta("elasticityMultiplier");F(t,S,P=>r(22,d=P));const{history:T,animation:B,scrollElasticity:I,imageFrame:O,allowPan:R,allowZoom:E,allowZoomControls:N,allowPlayPause:U}=f;F(t,B,P=>r(21,l=P)),F(t,O,P=>r(4,c=P));let x={},j;const A=ir(l?20:0);return F(t,A,P=>r(19,o=P)),t.$$set=P=>{"isActive"in P&&m(r(0,h=P.isActive)),"stores"in P&&r(17,f=P.stores),"locale"in P&&r(1,g=P.locale),"frameStyles"in P&&r(18,b=P.frameStyles),"frameOptions"in P&&r(2,w=P.frameOptions),"markupEditorShapeStyleControls"in P&&r(3,v=P.markupEditorShapeStyleControls)},t.$$.update=()=>{1048576&t.$$.dirty[0]&&R.set(s),1048576&t.$$.dirty[0]&&E.set(s),1048576&t.$$.dirty[0]&&N.set(s),1048576&t.$$.dirty[0]&&s&&U.set(!0),4194304&t.$$.dirty[0]&&r(7,a=d*I),20&t.$$.dirty[0]&&r(6,n=c?w.findIndex(([P])=>P===c.id):0),3145728&t.$$.dirty[0]&&l&&A.set(s?0:20),524288&t.$$.dirty[0]&&r(5,i=o?`transform: translateY(${o}px)`:void 0)},[h,g,w,v,c,i,n,a,S,B,I,O,({value:P})=>{const G=b[P];if(!G||!G.shape)return O.set(void 0),void T.write();const{shape:Q}=G,Z=X(X({id:P},wa(Q)),Object.keys(x).reduce((ct,lt)=>(Q[lt]&&(ct[lt]=x[lt]),ct),{}));O.set(Z),T.write()},function(P){Ee(P,"frameColor")&&(x.frameColor=P.frameColor),c&&(Fi(c,P),O.set(c),clearTimeout(j),j=setTimeout(()=>{T.write()},200))},P=>{const G=b[P];var Q;if(G&&G.thumb)return Q=G.thumb,/div/i.test(Q)||H2(Q)?Q:/rect|path|circle|line|<g>/i.test(Q)?`<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" stroke-width="1" stroke="currentColor" fill="none" aria-hidden="true" focusable="false" stroke-linecap="round" stroke-linejoin="round">${Q}</svg>`:`<img src="${Q}" alt=""/>`},A,"frame",f,b,o,s,l,d,function(P){on.call(this,t,P)}]}var m6={util:["frame",class extends er{constructor(t){super(),tr(this,t,p6,u6,Ye,{name:16,isActive:0,stores:17,locale:1,frameStyles:18,frameOptions:2,markupEditorShapeStyleControls:3},null,[-1,-1])}get name(){return this.$$.ctx[16]}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$$set({isActive:t}),D()}get stores(){return this.$$.ctx[17]}set stores(t){this.$$set({stores:t}),D()}get locale(){return this.$$.ctx[1]}set locale(t){this.$$set({locale:t}),D()}get frameStyles(){return this.$$.ctx[18]}set frameStyles(t){this.$$set({frameStyles:t}),D()}get frameOptions(){return this.$$.ctx[2]}set frameOptions(t){this.$$set({frameOptions:t}),D()}get markupEditorShapeStyleControls(){return this.$$.ctx[3]}set markupEditorShapeStyleControls(t){this.$$set({markupEditorShapeStyleControls:t}),D()}},({src:t})=>t&&!rl(t)]};function h6(t){let e,r,a,n,i,o,s,l;return{c(){e=gt("div"),r=gt("input"),n=ge(),i=gt("label"),o=Hr(t[1]),C(r,"id",t[0]),C(r,"type","number"),C(r,"min","1"),C(r,"inputmode","numeric"),C(r,"pattern","[0-9]*"),C(r,"data-state",t[3]),C(r,"autocomplete","off"),C(r,"placeholder",t[4]),r.value=a=t[5]===void 0?"":t[7](t[5]+""),C(i,"for",t[0]),C(i,"title",t[2]),C(i,"aria-label",t[2]),C(e,"class","PinturaInputDimension")},m(c,d){st(c,e,d),Pt(e,r),Pt(e,n),Pt(e,i),Pt(i,o),s||(l=Mt(r,"input",t[8]),s=!0)},p(c,[d]){1&d&&C(r,"id",c[0]),8&d&&C(r,"data-state",c[3]),16&d&&C(r,"placeholder",c[4]),160&d&&a!==(a=c[5]===void 0?"":c[7](c[5]+""))&&r.value!==a&&(r.value=a),2&d&&ca(o,c[1]),1&d&&C(i,"for",c[0]),4&d&&C(i,"title",c[2]),4&d&&C(i,"aria-label",c[2])},i:We,o:We,d(c){c&&it(e),s=!1,l()}}}function g6(t,e,r){let{id:a}=e,{label:n}=e,{title:i}=e,{state:o}=e,{placeholder:s}=e,{value:l}=e,{onchange:c}=e,{format:d=p=>p.replace(/\D/g,"")}=e;return t.$$set=p=>{"id"in p&&r(0,a=p.id),"label"in p&&r(1,n=p.label),"title"in p&&r(2,i=p.title),"state"in p&&r(3,o=p.state),"placeholder"in p&&r(4,s=p.placeholder),"value"in p&&r(5,l=p.value),"onchange"in p&&r(6,c=p.onchange),"format"in p&&r(7,d=p.format)},[a,n,i,o,s,l,c,d,p=>c(d(p.currentTarget.value))]}class fb extends er{constructor(e){super(),tr(this,e,g6,h6,Ye,{id:0,label:1,title:2,state:3,placeholder:4,value:5,onchange:6,format:7})}}function f6(t){let e;return{c(){e=Xa("g")},m(r,a){st(r,e,a),e.innerHTML=t[2]},p(r,a){4&a&&(e.innerHTML=r[2])},d(r){r&&it(e)}}}function $6(t){let e,r,a,n,i,o,s,l;return i=new ei({props:{$$slots:{default:[f6]},$$scope:{ctx:t}}}),{c(){e=gt("div"),r=gt("input"),a=ge(),n=gt("label"),Ut(i.$$.fragment),C(r,"id",t[0]),C(r,"class","implicit"),C(r,"type","checkbox"),r.checked=t[1],C(n,"for",t[0]),C(n,"title",t[3])},m(c,d){st(c,e,d),Pt(e,r),Pt(e,a),Pt(e,n),Ot(i,n,null),o=!0,s||(l=Mt(r,"change",t[5]),s=!0)},p(c,[d]){(!o||1&d)&&C(r,"id",c[0]),(!o||2&d)&&(r.checked=c[1]);const p={};68&d&&(p.$$scope={dirty:d,ctx:c}),i.$set(p),(!o||1&d)&&C(n,"for",c[0]),(!o||8&d)&&C(n,"title",c[3])},i(c){o||(V(i.$$.fragment,c),o=!0)},o(c){_(i.$$.fragment,c),o=!1},d(c){c&&it(e),Bt(i),s=!1,l()}}}function y6(t,e,r){let{id:a}=e,{locked:n}=e,{icon:i}=e,{title:o}=e,{onchange:s}=e;return t.$$set=l=>{"id"in l&&r(0,a=l.id),"locked"in l&&r(1,n=l.locked),"icon"in l&&r(2,i=l.icon),"title"in l&&r(3,o=l.title),"onchange"in l&&r(4,s=l.onchange)},[a,n,i,o,s,l=>s(l.currentTarget.checked)]}class b6 extends er{constructor(e){super(),tr(this,e,y6,$6,Ye,{id:0,locked:1,icon:2,title:3,onchange:4})}}function v6(t){let e;return{c(){e=Hr("Save")},m(r,a){st(r,e,a)},d(r){r&&it(e)}}}function x6(t){let e,r,a,n,i,o,s,l,c,d,p,m,h,f=t[1].resizeLabelFormCaption+"";return l=new Ji({props:{items:t[4]}}),d=new Bo({props:{type:"submit",class:"implicit",$$slots:{default:[v6]},$$scope:{ctx:t}}}),{c(){e=gt("form"),r=gt("div"),a=gt("fieldset"),n=gt("legend"),i=Hr(f),o=ge(),s=gt("div"),Ut(l.$$.fragment),c=ge(),Ut(d.$$.fragment),C(n,"class","implicit"),C(s,"class","PinturaFieldsetInner"),C(r,"class","PinturaFormInner"),C(e,"slot","footer"),C(e,"style",t[3])},m(g,b){st(g,e,b),Pt(e,r),Pt(r,a),Pt(a,n),Pt(n,i),Pt(a,o),Pt(a,s),Ot(l,s,null),t[65](s),Pt(r,c),Ot(d,r,null),p=!0,m||(h=[Mt(s,"focusin",t[15]),Mt(s,"focusout",t[16]),Mt(e,"submit",T4(t[17]))],m=!0)},p(g,b){(!p||2&b[0])&&f!==(f=g[1].resizeLabelFormCaption+"")&&ca(i,f);const w={};16&b[0]&&(w.items=g[4]),l.$set(w);const v={};16&b[3]&&(v.$$scope={dirty:b,ctx:g}),d.$set(v),(!p||8&b[0])&&C(e,"style",g[3])},i(g){p||(V(l.$$.fragment,g),V(d.$$.fragment,g),p=!0)},o(g){_(l.$$.fragment,g),_(d.$$.fragment,g),p=!1},d(g){g&&it(e),Bt(l),t[65](null),Bt(d),m=!1,Ar(h)}}}function w6(t){let e,r;return e=new $s({props:{$$slots:{footer:[x6]},$$scope:{ctx:t}}}),e.$on("measure",t[66]),{c(){Ut(e.$$.fragment)},m(a,n){Ot(e,a,n),r=!0},p(a,n){const i={};30&n[0]|16&n[3]&&(i.$$scope={dirty:n,ctx:a}),e.$set(i)},i(a){r||(V(e.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),r=!1},d(a){Bt(e,a)}}}function S6(t,e,r){let a,n,i,o,s,l,c,d,p,m,h,f,g,b,w,v,S,T,B,I,O,R,E,N,U,x,j,A,P,G,Q=We,Z=()=>(Q(),Q=pn(lt,at=>r(49,h=at)),lt);t.$$.on_destroy.push(()=>Q());const ct=(at,jt=0,Ne=9999)=>{if(Be(at)&&!(at=at.replace(/\D/g,"")).length)return;const nt=Math.round(at);return Number.isNaN(nt)?void 0:Nr(nt,jt,Ne)};let{isActive:lt}=e;Z();let{stores:xt}=e,{locale:yt={}}=e,{resizeMinSize:bt=ma(1,1)}=e,{resizeMaxSize:qt=ma(9999,9999)}=e,{resizeAspectRatioLocked:Y=!1}=e,{resizeEnableButtonLockAspectRatio:et=!0}=e,{resizeSizePresetOptions:Vt}=e,{resizeWidthPresetOptions:z}=e,{resizeHeightPresetOptions:vt}=e,{resizeWillRenderFooter:St=Br}=e;const W=ir(0,{stiffness:.15,damping:.3});F(t,W,at=>r(54,v=at));const{animation:Lt,imageSize:Ce,imageCropRect:pt,imageCropRectAspectRatio:zt,imageCropAspectRatio:Te,imageOutputSize:ne,imageSelectionZoom:At,imageSelectionPan:K,history:Xt,env:se,allowPan:me,allowZoom:Ve,allowZoomControls:ke,allowPlayPause:Dt}=xt;F(t,Lt,at=>r(50,f=at)),F(t,Ce,at=>r(73,A=at)),F(t,pt,at=>r(52,b=at)),F(t,zt,at=>r(53,w=at)),F(t,Te,at=>r(72,N=at)),F(t,ne,at=>r(61,E=at)),F(t,At,at=>r(74,P=at)),F(t,K,at=>r(75,G=at)),F(t,se,at=>r(51,g=at));const Ue=bi();let Xe,he,_t,rt,Zt,mt,Se=Or();const ht=(at,jt,Ne,nt,Yt)=>at!=null&&Ne!==jt?at>=nt[jt]&&at<=Yt[jt]?"valid":"invalid":"undetermined",Et=(at,jt,Ne)=>Math.round(at!=null?at/jt:Ne.height),ee=()=>{Y&&he&&_t&&(rt==="width"?r(39,_t=Math.round(he/w)):rt==="height"?r(38,he=Math.round(_t*w)):(Zt==="width"?r(39,_t=Math.round(he/w)):Zt==="height"&&r(38,he=Math.round(_t*w)),re()))},re=at=>{let jt=ct(he),Ne=ct(_t),nt=jt,Yt=Ne,te=nt&&Yt,Re=at||w;if(!nt&&!Yt)return;nt&&!Yt?Yt=Math.round(nt/Re):Yt&&!nt&&(nt=Math.round(Yt*Re)),Re=at||te?pi(nt,Yt):w;let hr=ma(nt,Yt);Cd(qt,hr)||(hr=Cn(qt,Re)),Cd(hr,bt)||(hr=uo(bt,Re)),r(38,he=jt!=null?Math.round(hr.width):void 0),r(39,_t=Ne!=null?Math.round(hr.height):void 0)},Wt=()=>{re();const{width:at,height:jt}=E||{};at===he&&jt===_t||(he||_t?(he&&_t&&Rt(Te,N=he/_t,N),Rt(ne,E=ma(he,_t),E)):(Rt(Te,N=A.width/A.height,N),Rt(Te,N=void 0,N),Rt(ne,E=void 0,E)),Xt.write())},Ht=ne.subscribe(at=>{if(!at)return r(38,he=void 0),void r(39,_t=void 0);r(38,he=at.width),r(39,_t=at.height),re()}),fe=Te.subscribe(at=>{(he||_t)&&at&&(he&&_t&&pi(he,_t)!==at?(r(39,_t=he/at),re(at)):re())}),Le=at=>Be(at[0])?(at[1]=at[1].map(Le),at):Mr(at)?[at,""+at]:at,mr=at=>{if(Be(at[0]))return at[1]=at[1].map(mr),at;let[jt,Ne]=at;if(Mr(jt)&&Mr(Ne)){const[nt,Yt]=[jt,Ne];Ne=`${nt} &times; ${Yt}`,jt=[nt,Yt]}return[jt,Ne]},He=le();F(t,He,at=>r(60,R=at));const nr=le();F(t,nr,at=>r(64,j=at));const ve=le();F(t,ve,at=>r(58,I=at));const ae=le();F(t,ae,at=>r(63,x=at));const xe=le();F(t,xe,at=>r(56,T=at));const Ke=le();F(t,Ke,at=>r(62,U=at));const Me=vr([ne,nr],([at,jt],Ne)=>{if(!jt)return Ne(-1);const nt=jt.findIndex(([Yt])=>{if(!Yt&&!at)return!0;if(!Yt)return!1;const[te,Re]=Yt;return at.width===te&&at.height===Re});Ne(nt<0?0:nt)});F(t,Me,at=>r(59,O=at));const Pe=vr([ne,ae],([at,jt],Ne)=>{if(!jt)return Ne(-1);const nt=jt.findIndex(([Yt])=>!Yt&&!at||!!Yt&&at.width===Yt);Ne(nt<0?0:nt)});F(t,Pe,at=>r(57,B=at));const rr=vr([ne,Ke],([at,jt],Ne)=>{if(!jt)return Ne(-1);const nt=jt.findIndex(([Yt])=>!Yt&&!at||!!Yt&&at.height===Yt);Ne(nt<0?0:nt)});F(t,rr,at=>r(55,S=at));let Ae,Je;const or=ta("redrawTrigger"),Sr=ir(f?20:0);return F(t,Sr,at=>r(48,m=at)),ri(()=>{Ht(),fe()}),t.$$set=at=>{"isActive"in at&&Z(r(0,lt=at.isActive)),"stores"in at&&r(30,xt=at.stores),"locale"in at&&r(1,yt=at.locale),"resizeMinSize"in at&&r(31,bt=at.resizeMinSize),"resizeMaxSize"in at&&r(32,qt=at.resizeMaxSize),"resizeAspectRatioLocked"in at&&r(28,Y=at.resizeAspectRatioLocked),"resizeEnableButtonLockAspectRatio"in at&&r(33,et=at.resizeEnableButtonLockAspectRatio),"resizeSizePresetOptions"in at&&r(34,Vt=at.resizeSizePresetOptions),"resizeWidthPresetOptions"in at&&r(35,z=at.resizeWidthPresetOptions),"resizeHeightPresetOptions"in at&&r(36,vt=at.resizeHeightPresetOptions),"resizeWillRenderFooter"in at&&r(37,St=at.resizeWillRenderFooter)},t.$$.update=()=>{var at;262144&t.$$.dirty[1]&&me.set(!h),262144&t.$$.dirty[1]&&Ve.set(!h),262144&t.$$.dirty[1]&&ke.set(!h),262144&t.$$.dirty[1]&&h&&Dt.set(!0),536870920&t.$$.dirty[1]&&Vt&&(Rt(He,R=Vt.map(mr),R),Rt(nr,j=Vo(R),j)),536870912&t.$$.dirty[1]&&r(47,o=!!R),268435456&t.$$.dirty[1]|4&t.$$.dirty[2]&&r(46,a=O>-1&&j[O][1]),134217744&t.$$.dirty[1]&&z&&(Rt(ve,I=z.map(Le),I),Rt(ae,x=Vo(I),x)),134283264&t.$$.dirty[1]&&r(44,s=!o&&I),67108864&t.$$.dirty[1]|2&t.$$.dirty[2]&&r(45,n=B>-1&&x[B][1]),33554464&t.$$.dirty[1]&&vt&&(Rt(xe,T=vt.map(Le),T),Rt(Ke,U=Vo(T),U)),33619968&t.$$.dirty[1]&&r(43,l=!o&&T),16777216&t.$$.dirty[1]|1&t.$$.dirty[2]&&r(42,i=S>-1&&U[S][1]),77824&t.$$.dirty[1]&&r(41,c=!o&&!s&&!l),268435458&t.$$.dirty[0]|1072824263&t.$$.dirty[1]&&r(4,d=or&&jl(()=>{return St([o&&["Dropdown","size-presets",{label:a,options:R,onchange:Yt=>{return(te=Yt.value)&&!Ae&&(Ae=X({},b),Je=N),te?(Rt(Te,N=pi(te[0],te[1]),N),Rt(ne,E=cv(te),E)):(Rt(pt,b=Ae,b),Rt(Te,N=Je,N),Rt(ne,E=void 0,E),Ae=void 0,Je=void 0),void Xt.write();var te},selectedIndex:O}],s&&["Dropdown","width-presets",{label:n,options:I,onchange:Yt=>{r(38,he=Yt.value),Wt()},selectedIndex:B}],s&&l&&["span","times",{class:"PinturaResizeLabel",innerHTML:"&times;"}],l&&["Dropdown","height-presets",{label:i,options:T,onchange:Yt=>{r(39,_t=Yt.value),Wt()},selectedIndex:S}],c&&[fb,"width-input",{id:"width-"+Ue,title:yt.resizeTitleInputWidth,label:yt.resizeLabelInputWidth,placeholder:(jt=ct(_t),Ne=w,nt=b,Math.round(jt!=null?jt*Ne:nt.width)),value:he,state:ht(ct(he),"width",rt,bt,qt),onchange:Yt=>{r(38,he=Yt),ee()}}],c&&et&&[b6,"aspect-ratio-lock",{id:"aspect-ratio-lock-"+Ue,title:yt.resizeTitleButtonMaintainAspectRatio,icon:Be(yt.resizeIconButtonMaintainAspectRatio)?yt.resizeIconButtonMaintainAspectRatio:yt.resizeIconButtonMaintainAspectRatio(Y,v),locked:Y,onchange:Yt=>{r(28,Y=Yt),ee()}}],c&&[fb,"height-input",{id:"height-"+Ue,title:yt.resizeTitleInputHeight,label:yt.resizeLabelInputHeight,placeholder:Et(ct(he),w,b),value:_t,state:ht(ct(_t),"height",rt,bt,qt),onchange:Yt=>{r(39,_t=Yt),ee()}}]].filter(Boolean),X({},g),()=>or.set({}));var jt,Ne,nt}).filter(Boolean)),268435456&t.$$.dirty[0]&&W.set(Y?1:0),512&t.$$.dirty[1]&&rt&&(Zt=rt),262144&t.$$.dirty[1]&&h&&(Se=G,mt=P),1074003968&t.$$.dirty[1]&&(h?(at=E,Rt(K,G=Or(),G),Rt(At,P=at&&b?at.width/b.width||at.height/b.height:1,P)):(Rt(K,G=Se,G),Rt(At,P=mt,P))),786432&t.$$.dirty[1]&&f&&Sr.set(h?0:20),131072&t.$$.dirty[1]&&r(3,p=m?`transform: translateY(${m}px)`:void 0)},[lt,yt,Xe,p,d,W,Lt,Ce,pt,zt,Te,ne,At,K,se,at=>{const jt=at.target.id;/width/.test(jt)?r(40,rt="width"):/height/.test(jt)?r(40,rt="height"):/aspectRatio/i.test(jt)?r(40,rt="lock"):r(40,rt=void 0)},at=>{Xe.contains(at.relatedTarget)||Wt(),r(40,rt=void 0)},Wt,He,nr,ve,ae,xe,Ke,Me,Pe,rr,Sr,Y,"resize",xt,bt,qt,et,Vt,z,vt,St,he,_t,rt,c,i,l,s,n,a,o,m,h,f,g,b,w,v,S,T,B,I,O,R,E,U,x,j,function(at){xr[at?"unshift":"push"](()=>{Xe=at,r(2,Xe)})},function(at){on.call(this,t,at)}]}var C6={util:["resize",class extends er{constructor(t){super(),tr(this,t,S6,w6,Ye,{name:29,isActive:0,stores:30,locale:1,resizeMinSize:31,resizeMaxSize:32,resizeAspectRatioLocked:28,resizeEnableButtonLockAspectRatio:33,resizeSizePresetOptions:34,resizeWidthPresetOptions:35,resizeHeightPresetOptions:36,resizeWillRenderFooter:37},null,[-1,-1,-1,-1])}get name(){return this.$$.ctx[29]}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$$set({isActive:t}),D()}get stores(){return this.$$.ctx[30]}set stores(t){this.$$set({stores:t}),D()}get locale(){return this.$$.ctx[1]}set locale(t){this.$$set({locale:t}),D()}get resizeMinSize(){return this.$$.ctx[31]}set resizeMinSize(t){this.$$set({resizeMinSize:t}),D()}get resizeMaxSize(){return this.$$.ctx[32]}set resizeMaxSize(t){this.$$set({resizeMaxSize:t}),D()}get resizeAspectRatioLocked(){return this.$$.ctx[28]}set resizeAspectRatioLocked(t){this.$$set({resizeAspectRatioLocked:t}),D()}get resizeEnableButtonLockAspectRatio(){return this.$$.ctx[33]}set resizeEnableButtonLockAspectRatio(t){this.$$set({resizeEnableButtonLockAspectRatio:t}),D()}get resizeSizePresetOptions(){return this.$$.ctx[34]}set resizeSizePresetOptions(t){this.$$set({resizeSizePresetOptions:t}),D()}get resizeWidthPresetOptions(){return this.$$.ctx[35]}set resizeWidthPresetOptions(t){this.$$set({resizeWidthPresetOptions:t}),D()}get resizeHeightPresetOptions(){return this.$$.ctx[36]}set resizeHeightPresetOptions(t){this.$$set({resizeHeightPresetOptions:t}),D()}get resizeWillRenderFooter(){return this.$$.ctx[37]}set resizeWillRenderFooter(t){this.$$set({resizeWillRenderFooter:t}),D()}},({src:t})=>t&&!rl(t)]};function k6(t){let e,r;return e=new Xd({props:{stores:t[3],locale:t[4],isActive:t[0],isActiveFraction:t[1],isVisible:t[2],mapScreenPointToImagePoint:t[9],mapImagePointToScreenPoint:t[8],utilKey:"redact",imageRotation:t[10],imageFlipX:t[7],imageFlipY:t[6],shapes:t[11],toolbar:["rect"],toolShapes:{rectangle:[{x:0,y:0,width:0,height:0}]},toolActive:"rectangle",parentRect:t[13],enablePresetDropImage:!1,enablePresetSelectImage:!1,willStartInteraction:t[5],hooks:{willRenderShapeControls:t[24]}}}),e.$on("measure",t[25]),{c(){Ut(e.$$.fragment)},m(a,n){Ot(e,a,n),r=!0},p(a,[n]){const i={};8&n&&(i.stores=a[3]),16&n&&(i.locale=a[4]),1&n&&(i.isActive=a[0]),2&n&&(i.isActiveFraction=a[1]),4&n&&(i.isVisible=a[2]),512&n&&(i.mapScreenPointToImagePoint=a[9]),256&n&&(i.mapImagePointToScreenPoint=a[8]),1024&n&&(i.imageRotation=a[10]),128&n&&(i.imageFlipX=a[7]),64&n&&(i.imageFlipY=a[6]),32&n&&(i.willStartInteraction=a[5]),e.$set(i)},i(a){r||(V(e.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),r=!1},d(a){Bt(e,a)}}}function R6(t,e,r){let a,n,i,o,s,l,c,d,p,{isActive:m}=e,{isActiveFraction:h}=e,{isVisible:f}=e,{stores:g}=e,{locale:b={}}=e,{markupEditorWillStartInteraction:w}=e;const{imageRedaction:v,rootRect:S,imageSize:T,imageRotation:B,imageFlipX:I,imageFlipY:O,imageTransforms:R,imageTransformsInterpolated:E}=g;return F(t,S,N=>r(23,d=N)),F(t,T,N=>r(22,c=N)),F(t,B,N=>r(10,p=N)),F(t,I,N=>r(7,o=N)),F(t,O,N=>r(6,i=N)),F(t,R,N=>r(21,l=N)),F(t,E,N=>r(20,s=N)),t.$$set=N=>{"isActive"in N&&r(0,m=N.isActive),"isActiveFraction"in N&&r(1,h=N.isActiveFraction),"isVisible"in N&&r(2,f=N.isVisible),"stores"in N&&r(3,g=N.stores),"locale"in N&&r(4,b=N.locale),"markupEditorWillStartInteraction"in N&&r(5,w=N.markupEditorWillStartInteraction)},t.$$.update=()=>{15728832&t.$$.dirty&&r(9,a=N=>C1(N,d,c,s.origin,s.translation,l.rotation.z,s.scale,o,i)),15728832&t.$$.dirty&&r(8,n=N=>S1(N,d,c,s.origin,s.translation,l.rotation.z,s.scale,o,i))},[m,h,f,g,b,w,i,o,n,a,p,v,S,T,B,I,O,R,E,"redact",s,l,c,d,N=>{const U=Um(N[0]);return KC("to-front",U),N},function(N){on.call(this,t,N)}]}var T6={util:["redact",class extends er{constructor(t){super(),tr(this,t,R6,k6,Ye,{name:19,isActive:0,isActiveFraction:1,isVisible:2,stores:3,locale:4,markupEditorWillStartInteraction:5})}get name(){return this.$$.ctx[19]}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$$set({isActive:t}),D()}get isActiveFraction(){return this.$$.ctx[1]}set isActiveFraction(t){this.$$set({isActiveFraction:t}),D()}get isVisible(){return this.$$.ctx[2]}set isVisible(t){this.$$set({isVisible:t}),D()}get stores(){return this.$$.ctx[3]}set stores(t){this.$$set({stores:t}),D()}get locale(){return this.$$.ctx[4]}set locale(t){this.$$set({locale:t}),D()}get markupEditorWillStartInteraction(){return this.$$.ctx[5]}set markupEditorWillStartInteraction(t){this.$$set({markupEditorWillStartInteraction:t}),D()}},({src:t})=>t&&!rl(t)]};function $b(t){let e,r,a=(Xr(t[32].label)?t[32].label(t[1]):t[32].label)+"";return{c(){e=gt("span"),r=Hr(a)},m(n,i){st(n,e,i),Pt(e,r)},p(n,i){2&i[0]|2&i[1]&&a!==(a=(Xr(n[32].label)?n[32].label(n[1]):n[32].label)+"")&&ca(r,a)},d(n){n&&it(e)}}}function M6(t){let e,r,a,n=(t[11](t[32].value)||"")+"",i=t[32].label&&$b(t);return{c(){e=gt("div"),r=new _d(!1),a=ge(),i&&i.c(),r.a=a,C(e,"slot","option")},m(o,s){st(o,e,s),r.m(n,e),Pt(e,a),i&&i.m(e,null)},p(o,s){2&s[1]&&n!==(n=(o[11](o[32].value)||"")+"")&&r.p(n),o[32].label?i?i.p(o,s):(i=$b(o),i.c(),i.m(e,null)):i&&(i.d(1),i=null)},d(o){o&&it(e),i&&i.d()}}}function P6(t){let e,r;return e=new jo({props:{locale:t[1],class:"PinturaControlList",layout:"row",options:t[2],selectedIndex:t[4],onchange:t[10],$$slots:{option:[M6,({option:a})=>({32:a}),({option:a})=>[0,a?2:0]]},$$scope:{ctx:t}}}),{c(){Ut(e.$$.fragment)},m(a,n){Ot(e,a,n),r=!0},p(a,n){const i={};2&n[0]&&(i.locale=a[1]),4&n[0]&&(i.options=a[2]),16&n[0]&&(i.selectedIndex=a[4]),2&n[0]|6&n[1]&&(i.$$scope={dirty:n,ctx:a}),e.$set(i)},i(a){r||(V(e.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),r=!1},d(a){Bt(e,a)}}}function I6(t){let e,r,a;return r=new Ki({props:{elasticity:t[5],$$slots:{default:[P6]},$$scope:{ctx:t}}}),{c(){e=gt("div"),Ut(r.$$.fragment),C(e,"slot","footer"),C(e,"style",t[3])},m(n,i){st(n,e,i),Ot(r,e,null),a=!0},p(n,i){const o={};32&i[0]&&(o.elasticity=n[5]),22&i[0]|4&i[1]&&(o.$$scope={dirty:i,ctx:n}),r.$set(o),(!a||8&i[0])&&C(e,"style",n[3])},i(n){a||(V(r.$$.fragment,n),a=!0)},o(n){_(r.$$.fragment,n),a=!1},d(n){n&&it(e),Bt(r)}}}function A6(t){let e,r;return e=new $s({props:{$$slots:{footer:[I6]},$$scope:{ctx:t}}}),e.$on("measure",t[22]),{c(){Ut(e.$$.fragment)},m(a,n){Ot(e,a,n),r=!0},p(a,n){const i={};62&n[0]|4&n[1]&&(i.$$scope={dirty:n,ctx:a}),e.$set(i)},i(a){r||(V(e.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),r=!1},d(a){Bt(e,a)}}}function E6(t,e,r){let a,n,i,o,s,l,c,d,p,m,h=We,f=()=>(h(),h=pn(g,P=>r(17,l=P)),g);t.$$.on_destroy.push(()=>h());let{isActive:g}=e;f();let{stores:b}=e,{locale:w={}}=e,{fillOptions:v=[]}=e;const S=P=>P.map(G=>(Q=>ea(Q)&&Be(Q[0])&&ea(Q[1]))(G)?[G[0],S(G[1]),G[2]]:(Q=>[Array.isArray(Q)&&Q.length===3?[...Q,1]:Q,void 0,{disabled:!1}])(G)),T=ta("elasticityMultiplier");F(t,T,P=>r(21,m=P));const{history:B,animation:I,scrollElasticity:O,imageBackgroundColor:R,imageBackgroundImage:E,allowPan:N,allowZoom:U,allowZoomControls:x,allowPlayPause:j}=b;F(t,I,P=>r(18,c=P)),F(t,R,P=>r(20,p=P)),F(t,E,P=>r(19,d=P));const A=ir(c?20:0);return F(t,A,P=>r(16,s=P)),t.$$set=P=>{"isActive"in P&&f(r(0,g=P.isActive)),"stores"in P&&r(14,b=P.stores),"locale"in P&&r(1,w=P.locale),"fillOptions"in P&&r(15,v=P.fillOptions)},t.$$.update=()=>{32768&t.$$.dirty[0]&&r(2,a=S(v)),131072&t.$$.dirty[0]&&N.set(l),131072&t.$$.dirty[0]&&U.set(l),131072&t.$$.dirty[0]&&x.set(l),131072&t.$$.dirty[0]&&l&&j.set(!0),2097152&t.$$.dirty[0]&&r(5,n=m*O),1572868&t.$$.dirty[0]&&r(4,i=a.findIndex(([P])=>d?P===d:Array.isArray(P)?mo(P,p):void 0)||0),393216&t.$$.dirty[0]&&c&&A.set(l?0:20),65536&t.$$.dirty[0]&&r(3,o=s?`transform: translateY(${s}px)`:void 0)},[g,w,a,o,i,n,T,I,R,E,({value:P})=>{Be(P)&&(Rt(R,p=void 0,p),Rt(E,d=P,d)),ea(P)&&(Rt(R,p=P,p),Rt(E,d=void 0,d)),B.write()},P=>{if(Be(P))return`<div class="PinturaFillTile"><img src="${P}" alt="" width="48" height="64"/></div>`;if(ea(P)){const[G,Q,Z,ct]=P.map((lt,xt)=>xt<3?Math.round(255*lt):lt);return`<div class="PinturaFillTile" data-transparent="${ct<1}"><div style="background-color:rgba(${G},${Q},${Z},${ct})"></div></div>`}return"<div></div>"},A,"fill",b,v,s,l,c,d,p,m,function(P){on.call(this,t,P)}]}var V6={util:["fill",class extends er{constructor(t){super(),tr(this,t,E6,A6,Ye,{name:13,isActive:0,stores:14,locale:1,fillOptions:15},null,[-1,-1])}get name(){return this.$$.ctx[13]}get isActive(){return this.$$.ctx[0]}set isActive(t){this.$$set({isActive:t}),D()}get stores(){return this.$$.ctx[14]}set stores(t){this.$$set({stores:t}),D()}get locale(){return this.$$.ctx[1]}set locale(t){this.$$set({locale:t}),D()}get fillOptions(){return this.$$.ctx[15]}set fillOptions(t){this.$$set({fillOptions:t}),D()}},({src:t,fillOptions:e})=>t&&!rl(t)&&e&&e.length]};const yb='<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M18 6L6 18M6 6l12 12"></path></path></g>',fm='<path fill="none" d="M9 15 L12 9 L15 15 M10 13.5 h3" stroke="currentColor" stroke-width=".125em"/>';var L6={labelReset:"Reset",labelDefault:"Default",labelAuto:"Auto",labelNone:"None",labelEdit:"Edit",labelClose:"Close",labelSupportError:t=>t.join(", ")+" not supported on this browser",labelColor:"Color",labelWidth:"Width",labelSize:"Size",labelOffset:"Offset",labelAmount:"Amount",labelInset:"Inset",labelRadius:"Radius",labelColorPalette:"Color palette",labelSizeExtraSmall:"Extra small",labelSizeSmall:"Small",labelSizeMediumSmall:"Medium small",labelSizeMedium:"Medium",labelSizeMediumLarge:"Medium large",labelSizeLarge:"Large",labelSizeExtraLarge:"Extra large",labelButtonCancel:"Cancel",labelButtonUndo:"Undo",labelButtonRedo:"Redo",labelButtonRevert:"Revert",labelButtonExport:"Done",labelZoomIn:"Zoom in",labelZoomOut:"Zoom out",labelZoomFit:"Fit to view",labelZoomActual:"Actual size",iconZoomIn:'<path stroke="currentColor" stroke-width=".125em" d="M8 12 h8 M12 8 v8" />',iconZoomOut:'<path stroke="currentColor" stroke-width=".125em" d="M9 12 h6" />',iconSupportError:'<g fill="none" stroke="currentColor" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><g><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></g>',iconButtonClose:yb,iconButtonRevert:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M7.388 18.538a8 8 0 10-2.992-9.03"/><path fill="currentColor" d="M2.794 11.696L2.37 6.714l5.088 3.18z"/><path d="M12 8v4M12 12l4 2"/></g>',iconButtonUndo:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M10 8h4c2.485 0 5 2 5 5s-2.515 5-5 5h-4"/><path fill="currentColor" d="M5 8l4-3v6z"/></g>',iconButtonRedo:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M14 8h-4c-2.485 0-5 2-5 5s2.515 5 5 5h4"/><path fill="currentColor" d="M19 8l-4-3v6z"/></g>',iconButtonExport:'<polyline points="20 6 9 17 4 12" fill="none" stroke="currentColor" stroke-width=".125em"></polyline>',statusLabelButtonClose:"Close",statusIconButtonClose:yb,statusLabelLoadImage:t=>t&&t.task?t.error?t.error.code==="IMAGE_TOO_SMALL"?"Minimum image size is {minWidth} &times; {minHeight}":"Error loading image":t.task==="blob-to-bitmap"?"Preparing image&hellip;":"Loading image&hellip;":"Waiting for image",statusLabelProcessImage:t=>{if(t&&t.task)return t.task==="store"?t.error?"Error uploading image":"Uploading image&hellip;":t.error?"Error processing image":"Processing image&hellip;"}};const F6={shapeLabelButtonSelectSticker:"Select image",shapeIconButtonSelectSticker:'<g fill="none" stroke="currentColor" stroke-width="0.0625em"><path d="M8 21 L15 11 L19 15"/><path d="M15 2 v5 h5"/><path d="M8 2 h8 l4 4 v12 q0 4 -4 4 h-8 q-4 0 -4 -4 v-12 q0 -4 4 -4z"/></g><circle fill="currentColor" cx="10" cy="8" r="1.5"/>',shapeIconButtonFlipHorizontal:'<g stroke="currentColor" stroke-width=".125em"><path fill="none" d="M6 6.5h5v11H6z"/><path fill="currentColor" d="M15 6.5h3v11h-3z"/><path d="M11 4v16" fill="currentColor"/></g>',shapeIconButtonFlipVertical:'<g stroke="currentColor" stroke-width=".125em"><rect x="7" y="8" width="11" height="5" fill="none"/><rect x="7" y="17" width="11" height="2" fill="currentColor"/><line x1="5" y1="13" x2="20" y2="13"/></g>',shapeIconButtonRemove:'<g fill="none" fill-rule="evenodd"><path stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M7.5 7h9z"/><path d="M7.916 9h8.168a1 1 0 01.99 1.14l-.972 6.862a2 2 0 01-1.473 1.653c-.877.23-1.753.345-2.629.345-.876 0-1.752-.115-2.628-.345a2 2 0 01-1.473-1.653l-.973-6.862A1 1 0 017.916 9z" fill="currentColor"/><rect fill="currentColor" x="10" y="5" width="4" height="3" rx="1"/></g>',shapeIconButtonDuplicate:'<g fill="none" fill-rule="evenodd"><path d="M15 13.994V16a2 2 0 01-2 2H8a2 2 0 01-2-2v-5a2 2 0 012-2h2.142" stroke="currentColor" stroke-width=".125em"/><path d="M15 9V8a1 1 0 00-2 0v1h-1a1 1 0 000 2h1v1a1 1 0 002 0v-1h1a1 1 0 000-2h-1zm-4-4h6a2 2 0 012 2v6a2 2 0 01-2 2h-6a2 2 0 01-2-2V7a2 2 0 012-2z" fill="currentColor"/></g>',shapeIconButtonMoveToFront:'<g fill="none" fill-rule="evenodd"><rect fill="currentColor" x="11" y="13" width="8" height="2" rx="1"/><rect fill="currentColor" x="9" y="17" width="10" height="2" rx="1"/><path d="M11.364 8H10a5 5 0 000 10M12 6.5L14.5 8 12 9.5z" stroke="currentColor" stroke-width=".125em" stroke-linecap="round"/></g>',shapeIconButtonTextLayoutAutoWidth:""+fm,shapeIconButtonTextLayoutAutoHeight:'<g fill="currentColor"><circle cx="4" cy="12" r="1.5"/><circle cx="20" cy="12" r="1.5"/></g>'+fm,shapeIconButtonTextLayoutFixedSize:'<g fill="currentColor"><circle cx="5" cy="6" r="1.5"/><circle cx="19" cy="6" r="1.5"/><circle cx="19" cy="19" r="1.5"/><circle cx="5" cy="19" r="1.5"/></g>'+fm,shapeTitleButtonTextLayoutAutoWidth:"Auto width",shapeTitleButtonTextLayoutAutoHeight:"Auto height",shapeTitleButtonTextLayoutFixedSize:"Fixed size",shapeTitleButtonFlipHorizontal:"Flip Horizontal",shapeTitleButtonFlipVertical:"Flip Vertical",shapeTitleButtonRemove:"Remove",shapeTitleButtonDuplicate:"Duplicate",shapeTitleButtonMoveToFront:"Move to front",shapeLabelInputText:"Edit text",shapeIconInputCancel:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M18 6L6 18M6 6l12 12"/></g>',shapeIconInputConfirm:'<g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><polyline points="20 6 9 17 4 12"/></g>',shapeLabelInputCancel:"Cancel",shapeLabelInputConfirm:"Confirm",shapeLabelStrokeNone:"No outline",shapeLabelFontStyleNormal:"Normal",shapeLabelFontStyleBold:"Bold",shapeLabelFontStyleItalic:"Italic",shapeLabelFontStyleItalicBold:"Bold Italic",shapeTitleBackgroundColor:"Fill color",shapeTitleCornerRadius:"Corner radius",shapeTitleFontFamily:"Font",shapeTitleFontSize:"Font size",shapeTitleFontStyle:"Font style",shapeTitleLineHeight:"Line height",shapeTitleLineStart:"Start",shapeTitleLineEnd:"End",shapeTitleStrokeWidth:"Line width",shapeTitleStrokeColor:"Line color",shapeTitleLineDecorationBar:"Bar",shapeTitleLineDecorationCircle:"Circle",shapeTitleLineDecorationSquare:"Square",shapeTitleLineDecorationArrow:"Arrow",shapeTitleLineDecorationCircleSolid:"Circle solid",shapeTitleLineDecorationSquareSolid:"Square solid",shapeTitleLineDecorationArrowSolid:"Arrow solid",shapeIconLineDecorationBar:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H16"/><path d="M16,8 V16"/></g>',shapeIconLineDecorationCircle:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><circle fill="none" stroke-width=".125em" cx="16" cy="12" r="4"/></g>',shapeIconLineDecorationSquare:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><rect fill="none" stroke-width=".125em" x="12" y="8" width="8" height="8"/></g>',shapeIconLineDecorationArrow:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H16 M13,7 l6,5 l-6,5" fill="none"/></g>',shapeIconLineDecorationCircleSolid:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><circle fill="currentColor" cx="16" cy="12" r="4"/></g>',shapeIconLineDecorationSquareSolid:'<g stroke="currentColor" stroke-linecap="round"><path stroke-width=".125em" d="M5,12 H12"/><rect fill="currentColor" x="12" y="8" width="8" height="8"/></g>',shapeIconLineDecorationArrowSolid:'<g stroke="currentColor" stroke-linecap="round" stroke-width=".125em"><path d="M5,12 H16"/><path d="M13,7 l6,5 l-6,5z" fill="currentColor"/></g>',shapeTitleColorTransparent:"Transparent",shapeTitleColorWhite:"White",shapeTitleColorSilver:"Silver",shapeTitleColorGray:"Gray",shapeTitleColorBlack:"Black",shapeTitleColorNavy:"Navy",shapeTitleColorBlue:"Blue",shapeTitleColorAqua:"Aqua",shapeTitleColorTeal:"Teal",shapeTitleColorOlive:"Olive",shapeTitleColorGreen:"Green",shapeTitleColorYellow:"Yellow",shapeTitleColorOrange:"Orange",shapeTitleColorRed:"Red",shapeTitleColorMaroon:"Maroon",shapeTitleColorFuchsia:"Fuchsia",shapeTitleColorPurple:"Purple",shapeTitleTextColor:"Font color",shapeTitleTextAlign:"Text align",shapeTitleTextAlignLeft:"Left align text",shapeTitleTextAlignCenter:"Center align text",shapeTitleTextAlignRight:"Right align text",shapeIconTextAlignLeft:'<g stroke-width=".125em" stroke="currentColor"><line x1="5" y1="8" x2="15" y2="8"/><line x1="5" y1="12" x2="19" y2="12"/><line x1="5" y1="16" x2="14" y2="16"/></g>',shapeIconTextAlignCenter:'<g stroke-width=".125em" stroke="currentColor"><line x1="7" y1="8" x2="17" y2="8"/><line x1="5" y1="12" x2="19" y2="12"/><line x1="8" y1="16" x2="16" y2="16"/></g>',shapeIconTextAlignRight:'<g stroke-width=".125em" stroke="currentColor"><line x1="9" y1="8" x2="19" y2="8"/><line x1="5" y1="12" x2="19" y2="12"/><line x1="11" y1="16" x2="19" y2="16"/></g>',shapeLabelToolMove:"Move",shapeLabelToolView:"View",shapeLabelToolSharpie:"Sharpie",shapeLabelToolEraser:"Eraser",shapeLabelToolPath:"Path",shapeLabelToolRectangle:"Rectangle",shapeLabelToolEllipse:"Ellipse",shapeLabelToolArrow:"Arrow",shapeLabelToolLine:"Line",shapeLabelToolText:"Text",shapeLabelToolPreset:"Stickers",shapeIconToolView:'<g stroke-width=".125em" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path d="M10.98 9.703V2.567c0-1.19 1.19-1.785 1.784-1.785.595 0 1.784.595 1.784 1.785v3.568"/><path d="M14.548 9.703V4.35c0-1.19 1.19-1.784 1.784-1.784.595 0 1.784.594 1.784 1.784v2.973"/><path d="M18.116 10.244V7.271c0-1.19 1.19-1.784 1.784-1.784.595 0 1.785.595 1.785 1.784 0 1.19 0 8.92-1.19 12.488-1.19 3.569-10.704 4.758-13.678 0-2.973-4.757-2.973-4.757-4.163-6.541-1.189-1.784-1.153-2.974-.594-3.568.558-.595 1.784-1.19 2.973.594 1.277 1.916 2.07 2.907 2.379 2.974V5.487c0-1.19 1.19-1.784 1.784-1.784.595 0 1.784.595 1.784 1.784V8.46"/></g>',shapeIconToolMove:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M6 2 L6 19 L18 13 Z M13 18 L16 24" stroke="currentColor" stroke-width=".125em" fill="none" fill-rule="evenodd" stroke-linejoin="round"/></g>',shapeIconToolSharpie:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M2.025 5c5.616-2.732 8.833-3.857 9.65-3.374C12.903 2.351.518 12.666 2.026 14 3.534 15.334 16.536.566 17.73 2.566 18.924 4.566 3.98 17.187 4.831 18c.851.813 9.848-6 11.643-6 1.087 0-2.53 5.11-2.92 7-.086.41 3.323-1.498 4.773-1 .494.17.64 2.317 1.319 3 .439.443 1.332.776 2.679 1" stroke="currentColor" stroke-width=".125em" fill="none" fill-rule="evenodd" stroke-linejoin="round"/></g>',shapeIconToolEraser:'<g stroke-width=".125em" stroke="currentColor" stroke-linecap="round" fill="none"><g transform="translate(3, 15) rotate(-45)"><rect x="0" y="0" width="18" height="10" rx="3"/></g><line x1="11" y1="21" x2="18" y2="21"/><line x1="20" y1="21" x2="22" y2="21"/></g>',shapeIconToolPath:'<g stroke-width=".125em" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" fill="none"><circle cx="21" cy="3" r="2"/><circle cx="9" cy="9" r="2"/><circle cx="3" cy="21" r="2"/><path d="M19 4 11 8 M8 11 4 19"/></g>',shapeIconToolRectangle:'<g stroke-width=".125em" stroke="currentColor" fill="none"><rect x="2" y="2" width="20" height="20" rx="3"/></g>',shapeIconToolEllipse:'<g stroke-width=".125em" stroke="currentColor" fill="none"><circle cx="12" cy="12" r="11"/></g>',shapeIconToolArrow:'<g stroke-width=".125em" stroke="currentColor" fill="none"><line x1="20" y1="3" x2="6" y2="21"/><path d="m10 6 L21.5 1 L20 13.5" fill="currentColor" stroke="none"/></g>',shapeIconToolLine:'<g stroke-width=".125em" stroke="currentColor" fill="none"><line x1="20" y1="3" x2="6" y2="21"/></g>',shapeIconToolText:'<g stroke="none" fill="currentColor" transform="translate(6,0)"><path d="M8.14 20.085c.459 0 .901-.034 1.329-.102a8.597 8.597 0 001.015-.21v1.984c-.281.135-.695.247-1.242.336a9.328 9.328 0 01-1.477.133c-3.312 0-4.968-1.745-4.968-5.235V6.804H.344v-1.25l2.453-1.078L3.89.819h1.5v3.97h4.97v2.015H5.39v10.078c0 1.031.245 1.823.735 2.375s1.161.828 2.015.828z"/>',shapeIconToolPreset:'<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M12 22c2.773 0 1.189-5.177 3-7 1.796-1.808 7-.25 7-3 0-5.523-4.477-10-10-10S2 6.477 2 12s4.477 10 10 10z"></path><path d="M20 17c-3 3-5 5-8 5"></path></g>'};var N6={cropLabel:"Crop",cropIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M23 17H9a2 2 0 0 1-2-2v-5m0-3V1 M1 7h14a2 2 0 0 1 2 2v7m0 4v3"/></g>',cropIconButtonRecenter:'<path stroke="currentColor" fill="none" stroke-width="2" stroke-linejoin="bevel" d="M1.5 7.5v-6h6M1.5 16.5v6h6M22.5 16.5v6h-6M22.5 7.5v-6h-6"/><circle cx="12" cy="12" r="3.5" fill="currentColor" stroke="none"/>',cropIconButtonRotateLeft:'<g stroke="none" fill="currentColor"><path fill="none" d="M-1-1h582v402H-1z"/><rect x="3" rx="1" height="12" width="12" y="9"/><path d="M15 5h-1a5 5 0 015 5 1 1 0 002 0 7 7 0 00-7-7h-1.374l.747-.747A1 1 0 0011.958.84L9.603 3.194a1 1 0 000 1.415l2.355 2.355a1 1 0 001.415-1.414l-.55-.55H15z"/></g>',cropIconButtonRotateRight:'<g stroke="none" fill="currentColor"><path fill="none" d="M-1-1h582v402H-1z"/><path d="M11.177 5H10a5 5 0 00-5 5 1 1 0 01-2 0 7 7 0 017-7h1.374l-.747-.747A1 1 0 0112.042.84l2.355 2.355a1 1 0 010 1.415l-2.355 2.354a1 1 0 01-1.415-1.414l.55-.55z"/><rect rx="1" height="12" width="12" y="9" x="9"/></g>',cropIconButtonFlipVertical:'<g stroke="none" fill="currentColor"><path d="M19.993 12.143H7a1 1 0 0 1-1-1V5.994a1 1 0 0 1 1.368-.93l12.993 5.15a1 1 0 0 1-.368 1.93z"/><path d="M19.993 14a1 1 0 0 1 .368 1.93L7.368 21.078A1 1 0 0 1 6 20.148V15a1 1 0 0 1 1-1h12.993z" opacity=".6"/></g>',cropIconButtonFlipHorizontal:'<g stroke="none" fill="currentColor"><path d="M11.93 7.007V20a1 1 0 0 1-1 1H5.78a1 1 0 0 1-.93-1.368l5.15-12.993a1 1 0 0 1 1.929.368z"/><path d="M14 7.007V20a1 1 0 0 0 1 1h5.149a1 1 0 0 0 .93-1.368l-5.15-12.993A1 1 0 0 0 14 7.007z" opacity=".6"/></g>',cropIconSelectPreset:(t,e)=>{const[r,a,n]=e?[e<1?1:.3,e===1?.85:.5,e>1?1:.3]:[.2,.3,.4];return`<g fill="currentColor">
            <rect opacity="${r}" x="2" y="4" width="10" height="18" rx="1"/>
            <rect opacity="${a}" x="4" y="8" width="14" height="14" rx="1"/>
            <rect opacity="${n}" x="6" y="12" width="17" height="10" rx="1"/>
        </g>`},cropIconCropBoundary:(t,e)=>{const[r,a,n,i]=e?[.3,1,0,0]:[0,0,.3,1];return`<g fill="currentColor">
            <rect opacity="${r}" x="2" y="3" width="20" height="20" rx="1"/>
            <rect opacity="${a}" x="7" y="8" width="10" height="10" rx="1"/>
            <rect opacity="${n}" x="4" y="8" width="14" height="14" rx="1"/>
            <rect opacity="${i}" x="12" y="4" width="10" height="10" rx="1"/>
        </g>`},cropLabelButtonRecenter:"Recenter",cropLabelButtonRotateLeft:"Rotate left",cropLabelButtonRotateRight:"Rotate right",cropLabelButtonFlipHorizontal:"Flip horizontal",cropLabelButtonFlipVertical:"Flip vertical",cropLabelSelectPreset:"Crop shape",cropLabelCropBoundary:"Crop boundary",cropLabelCropBoundaryEdge:"Edge of image",cropLabelCropBoundaryNone:"None",cropLabelTabRotation:"Rotation",cropLabelTabZoom:"Scale"},z6={fillLabel:"Fill",fillIcon:`
    <g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em">
        <g transform="rotate(60, 12, 12)">
            <rect x="4" y="4" width="14" height="16" rx="3"/>
        </g>
        <path d="M21 13 L21 21"></path>
        <path d="M4.5 12.5 L19 12.5"></path>
    </g>
    `},D6={frameLabel:"Frame",frameIcon:`<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em">
            <rect x="2" y="2" width="20" height="20" rx="4"/>
            <rect x="6" y="6" width="12" height="12" rx="1"/>
        </g>`,frameLabelMatSharp:"Mat",frameLabelMatRound:"Bevel",frameLabelLineSingle:"Line",frameLabelLineMultiple:"Zebra",frameLabelEdgeSeparate:"Inset",frameLabelEdgeOverlap:"Plus",frameLabelEdgeCross:"Lumber",frameLabelCornerHooks:"Hook",frameLabelPolaroid:"Polaroid"},O6={redactLabel:"Redact",redactIcon:'<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M 4 5 l 1 -1"/><path d="M 4 10 l 6 -6"/><path d="M 4 15 l 11 -11"/><path d="M 4 20 l 16 -16"/><path d="M 9 20 l 11 -11"/><path d="M 14 20 l 6 -6"/><path d="M 19 20 l 1 -1"/></g>'},jm=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t);Object.keys(r).forEach(a=>{r[a].get?Object.defineProperty(e,a,{get:()=>t[a],set:n=>t[a]=n}):e[a]=t[a]})},Z2=t=>{const e={},{sub:r,pub:a}=co();Ka()&&document.doctype!==null||console.warn("Browser is in quirks mode, add <!DOCTYPE html> to page to fix render issues");const n=l2();jm(n,e);const i=((c,d)=>{const p={},m=new Cy({target:c,props:{stores:d,pluginComponents:Array.from(Bm)}});let h=!1;const f=()=>{h||(Ka()&&window.removeEventListener("pagehide",f),m&&(h=!0,m.$destroy()))};um||(um=new Set(g1(Cy).filter(b=>!HC.includes(b)))),um.forEach(b=>{Object.defineProperty(p,b,{get:()=>m[b],set:GC.includes(b)?w=>{m[b]=X(X({},m[b]),w)}:w=>m[b]=w})}),Object.defineProperty(p,"previewImageData",{get:()=>m.imagePreviewCurrent}),N2.forEach(b=>{const w=vd[b],v=w[0];Object.defineProperty(p,b,{get:()=>m.pluginInterface[v][b],set:S=>{const T=w.reduce((B,I)=>(B[I]=de(X({},m.pluginOptions[I]),{[b]:S}),B),{});m.pluginOptions=X(X({},m.pluginOptions),T)}})}),Object.defineProperty(p,"element",{get:()=>m.root,set:()=>{}});const g=m.history;return Ed(p,{on:(b,w)=>{if(h)return()=>{};if(/undo|redo|revert|writehistory/.test(b))return g.on(b,w);const v=[m.sub(b,w),m.$on(b,S=>w(S instanceof CustomEvent&&!S.detail?void 0:S))].filter(Boolean);return()=>v.forEach(S=>S())},updateImagePreview:b=>{m.imagePreviewSrc=b},close:()=>!h&&m.pub("close"),destroy:f}),Object.defineProperty(p,"history",{get:()=>({undo:()=>g.undo(),redo:()=>g.redo(),revert:()=>g.revert(),get:()=>g.get(),getCollapsed:()=>g.get().splice(0,g.index+1),set:b=>g.set(b),write:b=>g.write(b),get length(){return g.length()},get index(){return g.index},set index(b){g.index=b}})}),Ka()&&window.addEventListener("pagehide",f),p})(t,n.stores);jm(i,e);const o=["loadImage","processImage","abortProcessImage","abortLoadImage"].map(c=>i.on(c,d=>{const p=n[c](d&&d.detail);p instanceof Promise&&p.catch(be)})),s=(c,d)=>{const p=r(c,d),m=n.on(c,d),h=i.on(c,d);return()=>{p(),m(),h()}};e.handleEvent=be;const l=z2.map(c=>s(c,d=>e.handleEvent(c,d)));return Ed(e,{on:s,updateImage:c=>new Promise((d,p)=>{const m=e.history.get(),h=e.history.index,f=e.imageState;n.loadImage(c).then(g=>{e.history.set(m),e.history.index=h,e.imageState=f,d(g)}).catch(p)}),close:()=>{a("close")},destroy:()=>{[...o,...l].forEach(c=>c()),i.destroy(),n.destroy(),a("destroy")}}),setTimeout(()=>a("init",e),0),e};Ka()&&class extends HTMLElement{constructor(){super(),this._editor=void 0,this._unsubs=void 0}static get observedAttributes(){return["src"]}attributeChangedCallback(t,e,r){this[t]=r}connectedCallback(){this._editor=Z2(this),jm(this._editor,this),this._editor.src=this.getAttribute("src"),this._unsubs=D2(this._editor,this)}disconnectedCallback(){this._editor.destroy(),this._unsubs.forEach(t=>t())}};var B6=(t,e={})=>{const r=Be(t)?document.querySelector(t):t;if(!Ys(r))return;e.class=e.class?"pintura-editor "+e.class:"pintura-editor";const a=Z2(r);return Object.assign(a,e)};const bb=(t,e,r,a)=>{const n=ot(e.x-t.x,e.y-t.y),i=jn(n),o=5*r;let s;s=a?.5*o:Math.ceil(.5*(o-1));const l=mn(Fe(i),s);return{anchor:Fe(t),offset:l,normal:i,solid:a,size:o,sizeHalf:s}},U6=({anchor:t,solid:e,normal:r,offset:a,size:n,sizeHalf:i,strokeWidth:o,strokeColor:s},l)=>{const c=t.x,d=t.y,p=mn(Fe(r),n),m=ot(c+p.x,d+p.y);if(mn(p,.55),e){pa(l,a);const h=mn(Fe(r),.5*i);return[{points:[ot(c-h.x,d-h.y),ot(m.x-p.y,m.y+p.x),ot(m.x+p.y,m.y-p.x)],pathClose:!0,backgroundColor:s}]}{const h=mn((b=>{const w=b.x;return b.x=-b.y,b.y=w,b})(Fe(r)),.5),f=ot(c-h.x,d-h.y),g=ot(c+h.x,d+h.y);return[{points:[ot(m.x+p.y,m.y-p.x),f,ot(c,d),g,ot(m.x-p.y,m.y+p.x)],pathClose:!1,strokeWidth:o,strokeColor:s}]}},_6=({anchor:t,solid:e,offset:r,normal:a,sizeHalf:n,strokeWidth:i,strokeColor:o},s)=>(pa(s,r),e&&pa(s,_s(Fe(a))),[{x:t.x,y:t.y,rx:n,ry:n,backgroundColor:e?o:void 0,strokeWidth:e?void 0:i,strokeColor:e?void 0:o}]),W6=({anchor:t,offset:e,strokeWidth:r,strokeColor:a})=>[{points:[ot(t.x-e.y,t.y+e.x),ot(t.x+e.y,t.y-e.x)],strokeWidth:r,strokeColor:a}],q6=({anchor:t,solid:e,offset:r,normal:a,sizeHalf:n,strokeWidth:i,strokeColor:o},s)=>{return pa(s,r),[{x:t.x-n,y:t.y-n,width:2*n,height:2*n,rotation:(l=a,Math.atan2(l.y,l.x)),backgroundColor:e?o:void 0,strokeWidth:e?void 0:i,strokeColor:e?void 0:o}];var l},j6=(t={})=>e=>{if(!Ee(e,"lineStart")&&!Ee(e,"lineEnd"))return;const r=[],{lineStart:a,lineEnd:n,strokeWidth:i,strokeColor:o}=e,s=ot(e.x1,e.y1),l=ot(e.x2,e.y2),c=[s,l];if(a){const[d,p]=a.split("-"),m=t[d];if(m){const h=bb(s,l,i,!!p);r.push(...m(de(X({},h),{strokeColor:o,strokeWidth:i}),s))}}if(n){const[d,p]=n.split("-"),m=t[d];if(m){const h=bb(l,s,i,!!p);r.push(...m(de(X({},h),{strokeColor:o,strokeWidth:i}),l))}}return[{points:c,strokeWidth:i,strokeColor:o},...r]},H6=()=>({arrow:U6,circle:_6,square:q6,bar:W6}),Hm=(t,e)=>{const r=parseFloat(t)*e;return Be(t)?r+"%":r},yi=(t,e)=>Be(t)?Pd(t,e):t,G6=t=>[de(X({},t),{frameStyle:"line",frameInset:0,frameOffset:0,frameSize:t.frameSize?Hm(t.frameSize,2):"2.5%",frameRadius:t.frameRound?Hm(t.frameSize,2):0})],Z6=({width:t,height:e,frameImage:r,frameSize:a="15%",frameOutset:n=0,frameSlices:i={x1:.15,y1:.15,x2:.85,y2:.85}},{isPreview:o})=>{if(!r)return[];const s=Math.sqrt(t*e),l=yi(a,s),c=o?l:Math.round(l),d=c,p=yi(n,s),m=2*p,{x1:h,x2:f,y1:g,y2:b}=i,w={x0:0,y0:0,x1:c,y1:d,x2:t-c,y2:e-d,x3:t,y3:e,cw:c,ch:d,ew:t-c-c,eh:e-d-d},v=o?1:0,S=2*v,T=p>0,B={expandsCanvas:T,width:w.cw,height:w.ch,backgroundImage:r};return[{expandsCanvas:T,x:w.x1-v-p,y:w.y0-p,width:w.ew+S+m,height:w.ch,backgroundCorners:[{x:h,y:0},{x:f,y:0},{x:f,y:g},{x:h,y:g}],backgroundImage:r},{expandsCanvas:T,x:w.x1-v-p,y:w.y2+p,width:w.ew+S+m,height:w.ch,backgroundCorners:[{x:h,y:b},{x:f,y:b},{x:f,y:1},{x:h,y:1}],backgroundImage:r},{expandsCanvas:T,x:w.x0-p,y:w.y1-v-p,width:w.cw,height:w.eh+S+m,backgroundCorners:[{x:0,y:g},{x:h,y:g},{x:h,y:b},{x:0,y:b}],backgroundImage:r},{expandsCanvas:T,x:w.x2+p,y:w.y1-v-p,width:w.cw,height:w.eh+S+m,backgroundCorners:[{x:f,y:g},{x:1,y:g},{x:1,y:b},{x:f,y:b}],backgroundImage:r},de(X({},B),{x:w.x0-p,y:w.y0-p,backgroundCorners:[{x:0,y:0},{x:h,y:0},{x:h,y:g},{x:0,y:g}]}),de(X({},B),{x:w.x2+p,y:w.y0-p,backgroundCorners:[{x:f,y:0},{x:1,y:0},{x:1,y:g},{x:f,y:g}]}),de(X({},B),{x:w.x2+p,y:w.y2+p,backgroundCorners:[{x:f,y:b},{x:1,y:b},{x:1,y:1},{x:f,y:1}]}),de(X({},B),{x:w.x0-p,y:w.y2+p,backgroundCorners:[{x:0,y:b},{x:h,y:b},{x:h,y:1},{x:0,y:1}]})]},Y6=({x:t,y:e,width:r,height:a,frameInset:n="3.5%",frameSize:i=".25%",frameColor:o=[1,1,1],frameOffset:s="5%",frameAmount:l=1,frameRadius:c=0,expandsCanvas:d=!1},{isPreview:p})=>{const m=Math.sqrt(r*a);let h=yi(i,m);const f=yi(n,m),g=yi(s,m);let b=0;p||(h=Math.max(1,Math.round(h)),b=h%2==0?0:.5);const w=yi(Hm(c,l),m);return new Array(l).fill(void 0).map((v,S)=>{const T=g*S;let B=t+f+T,I=e+f+T,O=t+r-f-T,R=e+a-f-T;return p||(B=Math.round(B),I=Math.round(I),O=Math.round(O),R=Math.round(R)),{x:B+b,y:I+b,width:O-B,height:R-I,cornerRadius:w>0?w-T:0,strokeWidth:h,strokeColor:o,expandsCanvas:d}})},X6=({x:t,y:e,width:r,height:a,frameSize:n=".25%",frameOffset:i=0,frameInset:o="2.5%",frameColor:s=[1,1,1]},{isPreview:l})=>{const c=Math.sqrt(r*a);let d=yi(n,c),p=yi(o,c),m=yi(i,c),h=0;l||(d=Math.max(1,Math.round(d)),p=Math.round(p),m=Math.round(m),h=d%2==0?0:.5);const f=m-p,g=t+p+h,b=e+p+h,w=t+r-p-h,v=e+a-p-h;return[{points:[ot(g+f,b),ot(w-f,b)]},{points:[ot(w,b+f),ot(w,v-f)]},{points:[ot(w-f,v),ot(g+f,v)]},{points:[ot(g,v-f),ot(g,b+f)]}].map(S=>(S.strokeWidth=d,S.strokeColor=s,S))},K6=({x:t,y:e,width:r,height:a,frameSize:n=".25%",frameInset:i="2.5%",frameLength:o="2.5%",frameColor:s=[1,1,1]},{isPreview:l})=>{const c=Math.sqrt(r*a);let d=yi(n,c),p=yi(i,c),m=yi(o,c),h=0;l||(d=Math.max(1,Math.round(d)),p=Math.round(p),m=Math.round(m),h=d%2==0?0:.5);const f=t+p+h,g=e+p+h,b=t+r-p-h,w=e+a-p-h;return[{points:[ot(f,g+m),ot(f,g),ot(f+m,g)]},{points:[ot(b-m,g),ot(b,g),ot(b,g+m)]},{points:[ot(b,w-m),ot(b,w),ot(b-m,w)]},{points:[ot(f+m,w),ot(f,w),ot(f,w-m)]}].map(v=>(v.strokeWidth=d,v.strokeColor=s,v))},J6=({x:t,y:e,width:r,height:a,frameColor:n=[1,1,1]},{isPreview:i})=>{const o=Math.sqrt(r*a),s=.1*o;let l=.2*o,c=0;const d=.5*s;return i?c=1:l=Math.ceil(l),n.length=3,[{id:"border",x:t-d+c,y:e-d+c,width:r+s-2*c,height:a+l-2*c,frameStyle:"line",frameInset:0,frameOffset:0,frameSize:s,frameColor:n,expandsCanvas:!0},{id:"chin",x:t-d,y:a-c,width:r+s,height:l,backgroundColor:n,expandsCanvas:!0}].filter(Boolean)},Q6=(t={})=>(e,r)=>{if(!Ee(e,"frameStyle"))return;const a=e.frameStyle,n=t[a];if(!n)return;const s=e,{frameStyle:i}=s,o=Gc(s,["frameStyle"]);return n(o,r)},tT=()=>({solid:G6,hook:K6,line:Y6,edge:X6,polaroid:J6,nine:Z6}),eT=t=>{const e=(r,a={isPreview:!0})=>{const n=t.map(i=>{const o=i(r,a);if(o)return o.map(s=>e(s,a))}).filter(Boolean).flat();return n.length?n.flat():r};return e};typeof window!="undefined"&&(t=>{if(!t)return;const[e,r,a,n]=[[108,111,99,97,116,105,111,110],[82,101,103,69,120,112],[116,101,115,116],[112,113,105,110,97,92,46,110,108]].map(i=>i.map(o=>String.fromCharCode(o)).join(""));t._h0af2t5=new t[r](n)[a](t[e])})(window);const rT=$2,vb=y2,aT=()=>({read:ES,apply:rv}),nT=(t={})=>{const{blurAmount:e,dataSizeScalar:r,scrambleAmount:a,backgroundColor:n}=t;return(i,o)=>(async(s,l={})=>{if(!s)return;const{width:c,height:d}=s,{dataSize:p=96,dataSizeScalar:m=1,scrambleAmount:h=4,blurAmount:f=6,outputFormat:g="canvas",backgroundColor:b=[0,0,0]}=l,w=Math.round(p*m),v=Math.min(w/c,w/d),S=Math.floor(c*v),T=Math.floor(d*v),B=Yr("canvas",{width:S,height:T}),I=B.getContext("2d",{willReadFrequently:!0});if(b.length=3,I.fillStyle=kn(b),I.fillRect(0,0,S,T),Gs(s)){const N=Yr("canvas",{width:c,height:d});N.getContext("2d",{willReadFrequently:!0}).putImageData(s,0,0),I.drawImage(N,0,0,S,T),Wa(N)}else I.drawImage(s,0,0,S,T);const O=I.getImageData(0,0,S,T),R=[];if(h>0&&R.push([v3,{amount:h}]),f>0)for(let N=0;N<f;N++)R.push([kv,{matrix:x3}]);let E;if(R.length){const N=(j,A)=>`(err, imageData) => {
(${j[A][0].toString()})(Object.assign({ imageData: imageData }, filterInstructions[${A}]), 
${j[A+1]?N(j,A+1):"done"})
}`,U=`function (options, done) {
const filterInstructions = options.filterInstructions;
const imageData = options.imageData;
(${N(R,0)})(null, imageData)
}`,x=await Gl(U,[{imageData:O,filterInstructions:R.map(j=>j[1])}],[O.data.buffer]);E=Xh(x)}else E=O;return g==="canvas"?(I.putImageData(E,0,0),B):E})(i,de(X({blurAmount:e,scrambleAmount:a,backgroundColor:n},o),{dataSizeScalar:r||o.dataSizeScalar}))},iT=U2,oT={markupEditorToolbar:Lk(),markupEditorToolStyles:Vk(),markupEditorShapeStyleControls:U2()},sT=_8,lT=Z8,cT=eR,dT=e6,uT=n6,pT=s6,mT=m6,hT=T6,gT=C6,fT=V6,$T=xk,yT=pk,bT=Ak,vT=L6,xT=F6,wT=N6,ST=z6,CT={filterLabel:"Filter",filterIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M18.347 9.907a6.5 6.5 0 1 0-1.872 3.306M3.26 11.574a6.5 6.5 0 1 0 2.815-1.417 M10.15 17.897A6.503 6.503 0 0 0 16.5 23a6.5 6.5 0 1 0-6.183-8.51"/></g>',filterLabelChrome:"Chrome",filterLabelFade:"Fade",filterLabelCold:"Cold",filterLabelWarm:"Warm",filterLabelPastel:"Pastel",filterLabelMonoDefault:"Mono",filterLabelMonoNoir:"Noir",filterLabelMonoWash:"Wash",filterLabelMonoStark:"Stark",filterLabelSepiaDefault:"Sepia",filterLabelSepiaBlues:"Blues",filterLabelSepiaRust:"Rust",filterLabelSepiaColor:"Color"},kT={finetuneLabel:"Finetune",finetuneIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M4 1v5.5m0 3.503V23M12 1v10.5m0 3.5v8M20 1v15.5m0 3.5v3M2 7h4M10 12h4M18 17h4"/></g>',finetuneLabelBrightness:"Brightness",finetuneLabelContrast:"Contrast",finetuneLabelSaturation:"Saturation",finetuneLabelExposure:"Exposure",finetuneLabelTemperature:"Temperature",finetuneLabelGamma:"Gamma",finetuneLabelClarity:"Clarity",finetuneLabelVignette:"Vignette"},RT={resizeLabel:"Resize",resizeIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><rect x="2" y="12" width="10" height="10" rx="2"/><path d="M4 11.5V4a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-5.5"/><path d="M14 10l3.365-3.365M14 6h4v4"/></g>',resizeLabelFormCaption:"Image output size",resizeLabelInputWidth:"w",resizeTitleInputWidth:"Width",resizeLabelInputHeight:"h",resizeTitleInputHeight:"Height",resizeTitleButtonMaintainAspectRatio:"Maintain aspectratio",resizeIconButtonMaintainAspectRatio:(t,e)=>`<defs><mask id="mask1" x="0" y="0" width="24" height="24" ><rect x="0" y="0" width="24" height="10" fill="#fff" stroke="none"/></mask></defs><g fill="none" fill-rule="evenodd"><g  mask="url(#mask1)"><path transform="translate(0 ${3*(e-1)})" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" d="M9.401 10.205v-.804a2.599 2.599 0 0 1 5.198 0V17"/></g><rect fill="currentColor" x="7" y="10" width="10" height="7" rx="1.5"/></g>`},TT={decorateLabel:"Decorate",decorateIcon:'<g fill="none" fill-rule="evenodd"><path stroke="currentColor" stroke-width=".125em" stroke-linecap="round" stroke-linejoin="round" d="M12 18.5l-6.466 3.4 1.235-7.2-5.23-5.1 7.228-1.05L12 2l3.233 6.55 7.229 1.05-5.231 5.1 1.235 7.2z"/></g>'},MT={annotateLabel:"Annotate",annotateIcon:'<g stroke-width=".125em" stroke="currentColor" fill="none"><path d="M17.086 2.914a2.828 2.828 0 1 1 4 4l-14.5 14.5-5.5 1.5 1.5-5.5 14.5-14.5z"/></g>'},PT={stickerLabel:"Sticker",stickerIcon:'<g fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor" stroke-width=".125em"><path d="M12 22c2.773 0 1.189-5.177 3-7 1.796-1.808 7-.25 7-3 0-5.523-4.477-10-10-10S2 6.477 2 12s4.477 10 10 10z"/><path d="M20 17c-3 3-5 5-8 5"/></g>'},IT=D6,AT=O6,ET=B6,VT=(t=[])=>eT([Q6(tT()),j6(H6()),...t]),LT=(t={})=>{let e,r;Array.isArray(t.imageReader)||(r=t.imageReader,delete t.imageReader),Array.isArray(t.imageWriter)?e=vb():(e=Xr(t.imageWriter)?t.imageWriter:vb(t.imageWriter),delete t.imageWriter);let a;return Xr(t.imageScrambler)||(a=t.imageScrambler,delete t.imageScrambler),{imageReader:rT(r),imageWriter:e,imageOrienter:aT(),imageScrambler:nT(a)}},FT=(t={})=>{ZC(sT,lT,cT,dT,uT,pT,mT,hT,gT,fT);const e=LT(t),r=X(X(X(X(X(X(X(X(X(X(X(X(X({},vT),xT),wT),ST),CT),kT),IT),AT),RT),TT),MT),PT),t.locale);delete t.locale;const a=typeof t.shapePreprocessor=="function"?t.shapePreprocessor:VT(t.shapePreprocessor);return delete t.shapePreprocessor,t.markupEditorShapeStyleControls&&Object.entries(t.markupEditorShapeStyleControls).every(([n,i])=>/Options$/.test(n)||!Array.isArray(i))&&(t.markupEditorShapeStyleControls=iT(X({},t.markupEditorShapeStyleControls))),r2([de(X(X(X(X(de(X({},e),{shapePreprocessor:a,utils:["trim","crop","filter","finetune","annotate","decorate","sticker","fill","frame","redact","resize"]}),$T),yT),bT),oT),{stickerStickToImage:!0,locale:r}),t])};var NT={mounted(){this.editor=ET(this.$refs.elementRef,Object.assign({},this.$attrs)),this.unsubs=D2(this.editor,this.$refs.elementRef)},beforeUpdate(){Object.assign(this.editor,Object.assign({},this.$attrs))},beforeUnmount(){!this.editor||(this.editor.destroy(),this.unsubs.forEach(t=>t()),this.unsubs=[],this.editor=void 0)},render(){return u.h("div",{className:"PinturaRootWrapper",ref:"elementRef"})}};const k1={name:"ImageEditorModal",components:{Modal:Ci,PinturaEditor:NT},props:{src:[String,Object],modelValue:Boolean},methods:{handleLoad:function(){},handleProcess:function(t){const e=new FileReader;e.onload=()=>{this.$emit("save",e.result),this.modal=!1},e.readAsDataURL(t.detail.dest)}},data(){return{props:FT(),modal:!1}},watch:{modal(t){this.$emit("update:modelValue",t)},modelValue(t){this.modal=t}}};function zT(t,e,r,a,n,i,o,s){const l=u.resolveComponent("modal"),c=u.resolveComponent("PinturaEditor");e(y.ssrRenderComponent(l,u.mergeProps({modelValue:o.modal,"onUpdate:modelValue":d=>o.modal=d},a),{default:u.withCtx((d,p,m,h)=>{if(p)p(`<div style="${y.ssrRenderStyle({height:"400px"})}"${h}>`),p(y.ssrRenderComponent(c,u.mergeProps(o.props,{src:n.src}),null,m,h)),p("</div>");else return[u.createVNode("div",{style:{height:"400px"}},[u.createVNode(c,u.mergeProps(o.props,{src:n.src,"onPintura:load":f=>s.handleLoad(f),"onPintura:process":f=>s.handleProcess(f)}),null,16,["src","onPintura:load","onPintura:process"])])]}),_:1},r))}const xb=k1.setup;k1.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/components/partials/ImageEditorModal.vue"),xb?xb(t,e):void 0};var DT=br(k1,[["ssrRender",zT]]);const R1={name:"CategoriesTree",props:{modelValue:Object,categories:Array,parentId:[Number,String],close:Function},data(){return{category:this.modelValue}},watch:{modelValue(t){this.category=t},category(t){this.$emit("update:modelValue",t)}},methods:{selectCategory(t){this.category=t,this.close()}}};function OT(t,e,r,a,n,i,o,s){const l=u.resolveComponent("categories-tree",!0);e("<!--[-->"),y.ssrRenderList(n.categories,(c,d)=>{e(`<div class="${y.ssrRenderClass([{"child-el":n.parentId},"position-relative pt-1"])}" data-v-48cc99a0><div class="input-group input-group-el" data-v-48cc99a0><div class="input-group-prepend" data-v-48cc99a0>`),c.children.length>0?(e('<button class="btn btn-arrow btn-light" type="button" data-v-48cc99a0>'),c.open?e('<i class="la la-angle-down" data-v-48cc99a0></i>'):e('<i class="la la-angle-right" data-v-48cc99a0></i>'),e("</button>")):e("<!---->"),e(`</div><button type="button" class="btn form-control-plaintext btn-light text-left" data-v-48cc99a0>${y.ssrInterpolate(c.name)}</button></div>`),c.children.length>0&&c.open?(e('<div class="child" data-v-48cc99a0>'),e(y.ssrRenderComponent(l,{categories:c.children,"onUpdate:categories":p=>c.children=p,modelValue:o.category,"onUpdate:modelValue":p=>o.category=p,"parent-id":c.id,close:n.close},null,r)),e("</div>")):e("<!---->"),e("</div>")}),e("<!--]-->")}const wb=R1.setup;R1.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/components/partials/category-select/CategoriesTree.vue"),wb?wb(t,e):void 0};var Y2=br(R1,[["ssrRender",OT],["__scopeId","data-v-48cc99a0"]]);const T1={name:"StoreCategorySelectModal",components:{CategoriesTree:Y2,Modal:Ci},props:{category:Object,modelValue:Boolean},emits:["update:category","update:modelValue"],computed:{categoriesTree(){return this.$store.getters.store.categories}},data(){return{modals:{categoriesTree:this.modelValue},cat:this.category}},watch:{modelValue(t){this.modals.categoriesTree=t},"modals.categoriesTree"(t){this.$emit("update:modelValue",t)},category(t){this.cat=t},cat(t){this.$emit("update:category",t)}},methods:{close(){this.modals.categoriesTree=!1}}};function BT(t,e,r,a,n,i,o,s){const l=u.resolveComponent("modal"),c=u.resolveComponent("categories-tree");e(y.ssrRenderComponent(l,u.mergeProps({modelValue:o.modals.categoriesTree,"onUpdate:modelValue":d=>o.modals.categoriesTree=d,"modal-title":t.$lang.app.selectCategory,"disable-backdrop-close":""},a),{default:u.withCtx((d,p,m,h)=>{if(p)p(y.ssrRenderComponent(c,{modelValue:o.cat,"onUpdate:modelValue":f=>o.cat=f,categories:s.categoriesTree,close:s.close},null,m,h));else return[u.createVNode(c,{modelValue:o.cat,"onUpdate:modelValue":f=>o.cat=f,categories:s.categoriesTree,close:s.close},null,8,["modelValue","onUpdate:modelValue","categories","close"])]}),_:1},r))}const Sb=T1.setup;T1.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/components/partials/store-category-select/StoreCategorySelectModal.vue"),Sb?Sb(t,e):void 0};var UT=br(T1,[["ssrRender",BT]]);const M1={name:"StoreCategorySelect",components:{StoreCategorySelectModal:UT},props:{modelValue:[Number,String],matchCategory:Object,required:Boolean},emits:["change","update:modelValue"],data(){return{modals:{categoriesTree:!1},category:this.matchCategory||{},categoryId:this.modelValue}},watch:{category(t){this.$emit("update:modelValue",t.id),this.$emit("change",t.id)},matchCategory(t){this.category=t}}};function _T(t,e,r,a,n,i,o,s){const l=u.resolveComponent("store-category-select-modal");e(`<!--[--><div class="input-group"><input${y.ssrRenderAttr("value",o.category.name)} type="text" class="form-control"${y.ssrIncludeBooleanAttr(n.required)?" required":""}${y.ssrRenderAttr("placeholder",t.$lang.app.selectACategory)}><div class="input-group-append"><button type="button" class="btn btn-secondary">${y.ssrInterpolate(t.$lang.app.select)}</button></div></div>`),e(y.ssrRenderComponent(l,{modelValue:o.modals.categoriesTree,"onUpdate:modelValue":c=>o.modals.categoriesTree=c,category:o.category,"onUpdate:category":c=>o.category=c},null,r)),e("<!--]-->")}const Cb=M1.setup;M1.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/components/partials/store-category-select/StoreCategorySelect.vue"),Cb?Cb(t,e):void 0};var WT=br(M1,[["ssrRender",_T]]);const P1={name:"Field",props:{modelValue:[Number,String,Object],properties:Object},emits:["update:modelValue"],data(){return{val:this.modelValue||""}},watch:{val(t){this.$emit("update:modelValue",t)},modelValue(t){this.val=t}}};function qT(t,e,r,a,n,i,o,s){e(`<!--[--><label class="form-label">${y.ssrInterpolate(n.properties.name)}`),n.properties.required?e('<span class="text-danger">*</span>'):e("<!---->"),e('</label><div class="input-group">'),n.properties.type==="text"?e(`<input type="text"${y.ssrRenderAttr("value",o.val)} class="form-control"${y.ssrIncludeBooleanAttr(n.properties.required)?" required":""}>`):n.properties.type==="number"?e(`<input min="0" type="number"${y.ssrRenderAttr("value",o.val)} class="form-control"${y.ssrIncludeBooleanAttr(n.properties.required)?" required":""}>`):n.properties.type==="float"?e(`<input min="0" step="0.01" type="number"${y.ssrRenderAttr("value",o.val)} class="form-control"${y.ssrIncludeBooleanAttr(n.properties.required)?" required":""}>`):n.properties.type==="select"?(e(`<select class="form-control"${y.ssrIncludeBooleanAttr(n.properties.required)?" required":""}><!--[-->`),y.ssrRenderList(n.properties.options,(l,c)=>{e(`<option${y.ssrRenderAttr("value",l.id||l)}>${y.ssrInterpolate(l.title||l)}</option>`)}),e("<!--]--></select>")):e("<!---->"),n.properties.addon?e(`<div class="input-group-append"><span class="input-group-text">${y.ssrInterpolate(n.properties.addon)}</span></div>`):e("<!---->"),e("</div><!--]-->")}const kb=P1.setup;P1.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/components/partials/Field.vue"),kb?kb(t,e):void 0};var Rb=br(P1,[["ssrRender",qT]]);const I1={name:"BrandSelect",components:{Modal:Ci,VSelect:Kb},props:{brands:Object,brandId:[Number,String],modelId:[Number,String],categoryId:Number,storeId:Number,required:Boolean},emits:["update:brandId","update:modelId"],data(){return{brandsList:[],modal:!1,value:"",brand:"",model:"",subModel:"",modelsList:[]}},watch:{brands(t){this.brandsList=t},brand(t){t?(this.$emit("update:brandId",t.id),this.fetchModels(t.id)):(this.modelsList=[],this.$emit("update:brandId",""))},model(t){t&&t.children.length===0?this.$emit("update:modelId",t.id):this.$emit("update:modelId",""),this.subModel=""},subModel(t){!t&&this.model&&this.model.children.length>0?this.$emit("update:modelId",""):t&&this.$emit("update:modelId",t.id)}},created(){this.brandsList=this.brands},methods:{fetchModels(t){return this.axios.get(this.$urls.storeCategoryBrandModels.replace(":storeId",this.storeId).replace(":categoryId",this.categoryId),{params:{brandId:t}}).then(e=>{this.modelsList=e.data})},save(){this.value=this.brand.name+", "+this.model.title+(this.subModel?", "+this.subModel.title:""),this.modal=!1}}};function jT(t,e,r,a,n,i,o,s){const l=u.resolveComponent("modal"),c=u.resolveComponent("v-select");e(`<!--[--><div class="input-group"><input${y.ssrRenderAttr("value",o.value)} type="text" class="form-control"${y.ssrIncludeBooleanAttr(n.required)?" required":""}><div class="input-group-append"><button type="button" class="btn btn-secondary">${y.ssrInterpolate(t.$lang.app.select)}</button></div></div>`),e(y.ssrRenderComponent(l,{modelValue:o.modal,"onUpdate:modelValue":d=>o.modal=d,"disable-backdrop-close":""},{default:u.withCtx((d,p,m,h)=>{if(p)p(`<form class="p-4"${h}><div class="form-group"${h}><label class="form-label"${h}>${y.ssrInterpolate(t.$lang.app.brand)}<span class="text-danger"${h}>*</span></label>`),p(y.ssrRenderComponent(c,{options:o.brandsList,label:"name",required:"",modelValue:o.brand,"onUpdate:modelValue":f=>o.brand=f},null,m,h)),p(`</div><div class="form-group"${h}><label class="form-label"${h}>${y.ssrInterpolate(t.$lang.app.seriesOrModel)}<span class="text-danger"${h}>*</span></label>`),p(y.ssrRenderComponent(c,{options:o.modelsList,label:"title",required:"",modelValue:o.model,"onUpdate:modelValue":f=>o.model=f},null,m,h)),p("</div>"),o.model&&o.model.children.length>0?(p(`<div class="form-group"${h}><label class="form-label"${h}>${y.ssrInterpolate(t.$lang.app.model)}<span class="text-danger"${h}>*</span></label>`),p(y.ssrRenderComponent(c,{options:o.model.children,label:"title",modelValue:o.subModel,"onUpdate:modelValue":f=>o.subModel=f,required:""},null,m,h)),p("</div>")):p("<!---->"),p(`<div class="d-flex justify-content-end"${h}><button type="submit" class="btn btn-success"${h}>Ready</button><button type="button" class="btn btn-outline-gray"${h}>Cancel</button></div></form>`);else return[u.createVNode("form",{class:"p-4",onSubmit:u.withModifiers(s.save,["prevent"])},[u.createVNode("div",{class:"form-group"},[u.createVNode("label",{class:"form-label"},[u.createTextVNode(u.toDisplayString(t.$lang.app.brand),1),u.createVNode("span",{class:"text-danger"},"*")]),u.createVNode(c,{options:o.brandsList,label:"name",required:"",modelValue:o.brand,"onUpdate:modelValue":f=>o.brand=f},null,8,["options","modelValue","onUpdate:modelValue"])]),u.createVNode("div",{class:"form-group"},[u.createVNode("label",{class:"form-label"},[u.createTextVNode(u.toDisplayString(t.$lang.app.seriesOrModel),1),u.createVNode("span",{class:"text-danger"},"*")]),u.createVNode(c,{options:o.modelsList,label:"title",required:"",modelValue:o.model,"onUpdate:modelValue":f=>o.model=f},null,8,["options","modelValue","onUpdate:modelValue"])]),o.model&&o.model.children.length>0?(u.openBlock(),u.createBlock("div",{key:0,class:"form-group"},[u.createVNode("label",{class:"form-label"},[u.createTextVNode(u.toDisplayString(t.$lang.app.model),1),u.createVNode("span",{class:"text-danger"},"*")]),u.createVNode(c,{options:o.model.children,label:"title",modelValue:o.subModel,"onUpdate:modelValue":f=>o.subModel=f,required:""},null,8,["options","modelValue","onUpdate:modelValue"])])):u.createCommentVNode("",!0),u.createVNode("div",{class:"d-flex justify-content-end"},[u.createVNode("button",{type:"submit",class:"btn btn-success"},"Ready"),u.createVNode("button",{onClick:f=>o.modal=!1,type:"button",class:"btn btn-outline-gray"},"Cancel",8,["onClick"])])],40,["onSubmit"])]}),_:1},r)),e("<!--]-->")}const Tb=I1.setup;I1.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/components/partials/BrandSelect.vue"),Tb?Tb(t,e):void 0};var HT=br(I1,[["ssrRender",jT]]);const A1={__ssrInlineRender:!0,setup(t){const e=Hn(),r=Tn.useStore().getters.store;La.useRouter();const a=[{label:e.app.stores,route:{name:"stores.index"}},{label:r.name,route:{name:"stores.show",params:{store:r.slug}}},{label:e.app.addProduct}],n=u.reactive({imageEditorModal:!1}),i=u.reactive({files:[],fields:{},groups:{},brandId:"",modelId:"",price:"",currencyTypeId:r.defaultCurrencyType?r.defaultCurrencyType.id:"",title:"",description:""}),o=u.reactive({currentImageIndex:null,tab:0,categoryId:null,fields:[],groups:[],brands:[],currencyTypes:[]});return(s,l,c,d)=>{l("<!--[-->"),l(y.ssrRenderComponent(Ln,{breadcrumbs:a,title:u.unref(e).app.addProduct},null,c)),l(`<div class="container-fluid" data-v-c7af4e9a><ul class="nav nav-pills" id="tabs-5" role="tablist" data-v-c7af4e9a><li class="nav-item" data-v-c7af4e9a><a href="#" class="${y.ssrRenderClass([{active:u.unref(o).tab===0},"nav-link"])}" data-v-c7af4e9a>Images</a></li><li class="nav-item" data-v-c7af4e9a><a href="#" class="${y.ssrRenderClass([{disabled:u.unref(o).tab<1,active:u.unref(o).tab===1},"nav-link"])}" data-v-c7af4e9a>Details</a></li></ul><div class="tab-content" id="tab-content-5" data-v-c7af4e9a><div class="${y.ssrRenderClass([{"active show":u.unref(o).tab===0},"tab-pane fade"])}" data-v-c7af4e9a><form data-v-c7af4e9a><button type="button" class="btn btn-secondary" data-v-c7af4e9a>Choose</button><button type="submit" class="btn btn-success" data-v-c7af4e9a>Next</button><div class="row" data-v-c7af4e9a><!--[-->`),y.ssrRenderList(u.unref(i).files,(p,m)=>{l(`<div class="col-md-2 up-image" data-v-c7af4e9a><a class="up-img-content" href="#" data-v-c7af4e9a> Edit </a><a class="up-img-hover" href="#" data-v-c7af4e9a><img${y.ssrRenderAttr("src",p)} alt="image" data-v-c7af4e9a></a></div>`)}),l('<!--]--></div><input multiple class="d-none" type="file" alt="alt" data-v-c7af4e9a>'),l(y.ssrRenderComponent(DT,{modelValue:u.unref(n).imageEditorModal,"onUpdate:modelValue":p=>u.unref(n).imageEditorModal=p,src:u.unref(i).files[u.unref(o).currentImageIndex]},null,c)),l(`</form></div><div class="${y.ssrRenderClass([{"active show":u.unref(o).tab===1},"tab-pane fade"])}" data-v-c7af4e9a><form data-v-c7af4e9a><button type="button" class="btn btn-primary" data-v-c7af4e9a>Back</button><button type="submit" class="btn btn-success" data-v-c7af4e9a>Save</button><div class="row" data-v-c7af4e9a><div class="col-md-6" data-v-c7af4e9a><div class="form-group" data-v-c7af4e9a><label class="form-label" data-v-c7af4e9a>${y.ssrInterpolate(u.unref(e).app.category)}<span class="text-danger" data-v-c7af4e9a>*</span></label>`),l(y.ssrRenderComponent(WT,{modelValue:u.unref(i).storeCategoryId,"onUpdate:modelValue":p=>u.unref(i).storeCategoryId=p,required:""},null,c)),l("</div></div>"),u.unref(i).storeCategoryId?(l(`<!--[--><div class="col-md-6" data-v-c7af4e9a><div class="form-group" data-v-c7af4e9a><label class="form-label" data-v-c7af4e9a>${y.ssrInterpolate(u.unref(e).app.brandAndModel)}<span class="text-danger" data-v-c7af4e9a>*</span></label>`),l(y.ssrRenderComponent(HT,{brands:u.unref(o).brands,"category-id":u.unref(i).storeCategoryId,"store-id":u.unref(r).id,"brand-id":u.unref(i).brandId,"onUpdate:brand-id":p=>u.unref(i).brandId=p,"model-id":u.unref(i).modelId,"onUpdate:model-id":p=>u.unref(i).modelId=p,required:""},null,c)),l(`</div></div><div class="col-md-6" data-v-c7af4e9a><div class="form-group" data-v-c7af4e9a><label class="form-label" data-v-c7af4e9a>${y.ssrInterpolate(u.unref(e).app.title)}<span class="text-danger" data-v-c7af4e9a>*</span></label><input${y.ssrRenderAttr("value",u.unref(i).title)} type="text" required class="form-control" data-v-c7af4e9a></div></div><div class="col-md-6" data-v-c7af4e9a><div class="form-group" data-v-c7af4e9a><label class="form-label" data-v-c7af4e9a>${y.ssrInterpolate(u.unref(e).app.description)}<span class="text-danger" data-v-c7af4e9a>*</span></label>`),l(y.ssrRenderComponent(Sh,{modelValue:u.unref(i).description,"onUpdate:modelValue":p=>u.unref(i).description=p,required:""},null,c)),l(`</div></div><div class="col-md-6" data-v-c7af4e9a><div class="form-group" data-v-c7af4e9a><label class="form-label" data-v-c7af4e9a>${y.ssrInterpolate(u.unref(e).app.price)}<span class="text-danger" data-v-c7af4e9a>*</span></label><div class="input-group" data-v-c7af4e9a><div class="input-group-prepend" data-v-c7af4e9a><select required class="form-control" data-v-c7af4e9a><option value="" disabled data-v-c7af4e9a>${y.ssrInterpolate(u.unref(e).app.selectCurrency)}</option><!--[-->`),y.ssrRenderList(u.unref(o).currencyTypes,(p,m)=>{l(`<option${y.ssrRenderAttr("value",p.id)} data-v-c7af4e9a>${y.ssrInterpolate(p.title)}</option>`)}),l(`<!--]--></select></div><input type="number" min="0" step="0.01"${y.ssrRenderAttr("value",u.unref(i).price)} required class="form-control" data-v-c7af4e9a></div></div></div>`),u.unref(o).fields.length>0?(l("<!--[-->"),y.ssrRenderList(u.unref(o).fields,(p,m)=>{l('<div class="col-md-6" data-v-c7af4e9a><div class="form-group" data-v-c7af4e9a>'),l(y.ssrRenderComponent(Rb,{modelValue:u.unref(i).fields[p.id],"onUpdate:modelValue":h=>u.unref(i).fields[p.id]=h,properties:p},null,c)),l("</div></div>")}),l("<!--]-->")):l("<!---->"),l("<!--]-->")):l("<!---->"),l("</div>"),u.unref(o).groups.length>0?(l("<!--[-->"),y.ssrRenderList(u.unref(o).groups,(p,m)=>{l(`<div class="row" data-v-c7af4e9a><div class="col-md-12" data-v-c7af4e9a><h2 class="title" data-v-c7af4e9a>${y.ssrInterpolate(p.name)}</h2></div><!--[-->`),y.ssrRenderList(p.fields,(h,f)=>{l('<div class="col-md-6" data-v-c7af4e9a><div class="form-group" data-v-c7af4e9a>'),l(y.ssrRenderComponent(Rb,{modelValue:u.unref(i).groups[p.id].fields[h.id],"onUpdate:modelValue":g=>u.unref(i).groups[p.id].fields[h.id]=g,properties:h},null,c)),l("</div></div>")}),l("<!--]--></div>")}),l("<!--]-->")):l("<!---->"),l('<button type="submit" class="btn btn-success" data-v-c7af4e9a>Save</button></form></div></div></div><!--]-->')}}},Mb=A1.setup;A1.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/pages/stores/products/Create.vue"),Mb?Mb(t,e):void 0};var GT=br(A1,[["__scopeId","data-v-c7af4e9a"]]),ZT=Object.freeze(Object.defineProperty({__proto__:null,default:GT},Symbol.toStringTag,{value:"Module"}));const E1={name:"Index"};function YT(t,e,r,a,n,i,o,s){}const Pb=E1.setup;E1.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/pages/stores/settings/Index.vue"),Pb?Pb(t,e):void 0};var XT=br(E1,[["ssrRender",YT]]),KT=Object.freeze(Object.defineProperty({__proto__:null,default:XT},Symbol.toStringTag,{value:"Module"}));const V1={name:"Show"};function JT(t,e,r,a,n,i,o,s){}const Ib=V1.setup;V1.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/pages/stores/settings/categories/Show.vue"),Ib?Ib(t,e):void 0};var QT=br(V1,[["ssrRender",JT]]),tM=Object.freeze(Object.defineProperty({__proto__:null,default:QT},Symbol.toStringTag,{value:"Module"}));const L1={name:"StoreCategoryTree",props:{categories:Array,showActionModal:Function,selfDropped:Boolean,dragging:Boolean,parent:Object,showFieldsModal:Function},emits:["update:categories","update:selfDropped","update:dragging"],data:function(){return{categoryId:null,iconRefs:[],childRefs:[]}},watch:{selfDropped(t){this.$emit("update:selfDropped",t)},dragging(t){this.$emit("update:dragging",t)}},methods:{dragStart(t,e){this.categoryId=e.id,t.dataTransfer.setData("category",JSON.stringify(e)),t.dataTransfer.setData(`category-id-${e.id}`,e.id),this.$emit("update:dragging",!0)},dragEnd(t){t.dataTransfer.dropEffect==="move"&&!this.selfDropped&&this.$emit("update:categories",this.categories.filter(e=>e.id!==this.categoryId)),this.categoryId=null,this.$emit("update:selfDropped",!1),this.$emit("update:dragging",!1)},drop(t,e,r){try{const a=JSON.parse(t.dataTransfer.getData("category"));let n=this.categories,i=!1;t.preventDefault(),this.categories.filter(o=>o.id===a.id).length>0&&(a.id!==parseInt(t.target.getAttribute("data-category-id"))&&this.categories.findIndex(o=>o.id===a.id)+1!==e?(n.findIndex(o=>o.id===a.id)<e&&e--,n=n.filter(o=>o.id!==a.id)):i=!0,this.$emit("update:selfDropped",!0)),i||(a.parentId=r,n=[...n.slice(0,e),a,...n.slice(e)],this.axios.post(this.$urls.storeSettingsCategoriesSort,{sort:n.map(o=>({id:o.id,parentId:o.parentId}))})),this.$emit("update:categories",n)}catch(a){console.log(a)}t.target.classList.remove("dragging")},innerDrop(t,e){const r=JSON.parse(t.dataTransfer.getData("category"));e.children.filter(a=>a.id===r.id).length===0&&e.id!==r.id?(r.parentId=e.id,e.children.splice(0,0,r),this.axios.post(this.$urls.storeSettingsCategoriesSort,{sort:e.children.map(a=>({id:a.id,parentId:a.parentId}))})):this.$emit("update:selfDropped",!0),t.preventDefault()},dragEnter(t){t.dataTransfer.types.includes("category")&&t.target.classList.add("dragging")},dragLeave(t){t.target.classList.remove("dragging")},deleteItem(t){this.$snotify.confirm(t.children.length>0?this.$lang.app.deleteCatWithInnerConfirmMsg:this.$lang.app.deleteConfirmMsg,this.$lang.app.warning,{closeOnClick:!1,backdrop:.5,timeout:0,buttons:[{text:this.$lang.app.yes,action:e=>{this.axios.delete(this.$urls.storeSettingsCategory.replace(":storeId",this.$store.getters.store.id).replace(":categoryId",t.id)).then(r=>{this.$emit("update:categories",this.categories.filter(a=>a.id!==r.data.id)),this.$snotify.remove(e.id),this.$snotify.success(this.$lang.app.deleteSuccessMsg)})},bold:!0},{text:this.$lang.app.no,action:e=>this.$snotify.remove(e.id)}]})}}};function eM(t,e,r,a,n,i,o,s){const l=u.resolveComponent("store-category-tree",!0);e(`<div${y.ssrRenderAttrs(u.mergeProps({class:"position-relative"},a))} data-v-9ff0382a><!--[-->`),y.ssrRenderList(n.categories,(c,d)=>{e(`<div class="${y.ssrRenderClass([{"child-el":c.parentId},"position-relative"])}" data-v-9ff0382a><div class="w-100 p-2"${y.ssrRenderAttr("data-category-id",c.id)} data-v-9ff0382a></div><div class="input-group input-group-el" data-v-9ff0382a><div class="input-group-prepend" data-v-9ff0382a>`),c.children.length>0?(e('<button class="btn btn-arrow btn-light" type="button" data-v-9ff0382a>'),c.open?e('<i class="la la-angle-down" data-v-9ff0382a></i>'):e('<i class="la la-angle-right" data-v-9ff0382a></i>'),e("</button>")):e("<!---->"),e(`</div><button type="button"${y.ssrRenderAttr("data-category-id",c.id)} draggable="true" class="btn form-control-plaintext btn-light text-left" data-v-9ff0382a><i class="la la-arrows-alt" data-v-9ff0382a></i> ${y.ssrInterpolate(c.name)}</button><div class="input-group-append" data-v-9ff0382a><button${y.ssrRenderAttr("title",t.$lang.app.add)} class="btn btn-arrow btn-light" type="button" data-v-9ff0382a><i class="la la-plus" data-v-9ff0382a></i></button><button${y.ssrRenderAttr("title",t.$lang.app.edit)} class="btn btn-arrow btn-light" type="button" data-v-9ff0382a><i class="la la-pencil" data-v-9ff0382a></i></button><button${y.ssrRenderAttr("title",t.$lang.app.fields)} class="btn btn-arrow btn-light" type="button" data-v-9ff0382a><i class="la la-list" data-v-9ff0382a></i></button><button${y.ssrRenderAttr("title",t.$lang.app.delete)} class="btn btn-arrow btn-light" type="button" data-v-9ff0382a><i class="la la-trash" data-v-9ff0382a></i></button></div></div>`),c.children.length>0&&c.open?(e('<div class="child" data-v-9ff0382a>'),e(y.ssrRenderComponent(l,{categories:c.children,"onUpdate:categories":p=>c.children=p,"show-action-modal":n.showActionModal,"show-fields-modal":n.showFieldsModal,"self-dropped":n.selfDropped,"onUpdate:self-dropped":p=>n.selfDropped=p,dragging:n.dragging,"onUpdate:dragging":p=>n.dragging=p,parent:c},null,r)),e("</div>")):e("<!---->"),e("</div>")}),e("<!--]-->"),n.dragging?e('<div class="w-100 p-2" data-v-9ff0382a></div>'):e("<!---->"),e("</div>")}const Ab=L1.setup;L1.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/components/stores/settings/StoreCategoryTree.vue"),Ab?Ab(t,e):void 0};var rM=br(L1,[["ssrRender",eM],["__scopeId","data-v-9ff0382a"]]);const F1={name:"CategorySelectModal",components:{CategoriesTree:Y2,Modal:Ci},props:{category:Object,modelValue:Boolean},emits:["update:category","update:modelValue"],computed:{categoriesTree(){return this.$store.getters.categoriesTree}},data(){return{modals:{categoriesTree:this.modelValue},cat:this.category}},watch:{modelValue(t){this.modals.categoriesTree=t},"modals.categoriesTree"(t){this.$emit("update:modelValue",t)},category(t){this.cat=t},cat(t){this.$emit("update:category",t)}},methods:{close(){this.modals.categoriesTree=!1}}};function aM(t,e,r,a,n,i,o,s){const l=u.resolveComponent("modal"),c=u.resolveComponent("categories-tree");e(y.ssrRenderComponent(l,u.mergeProps({modelValue:o.modals.categoriesTree,"onUpdate:modelValue":d=>o.modals.categoriesTree=d,"modal-title":t.$lang.app.selectCategory,"disable-backdrop-close":""},a),{default:u.withCtx((d,p,m,h)=>{if(p)p(y.ssrRenderComponent(c,{modelValue:o.cat,"onUpdate:modelValue":f=>o.cat=f,categories:s.categoriesTree,close:s.close},null,m,h));else return[u.createVNode(c,{modelValue:o.cat,"onUpdate:modelValue":f=>o.cat=f,categories:s.categoriesTree,close:s.close},null,8,["modelValue","onUpdate:modelValue","categories","close"])]}),_:1},r))}const Eb=F1.setup;F1.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/components/partials/category-select/CategorySelectModal.vue"),Eb?Eb(t,e):void 0};var nM=br(F1,[["ssrRender",aM]]);const N1={name:"CategorySelect",components:{CategorySelectModal:nM},props:{modelValue:[Number,String],matchCategory:Object},data(){return{modals:{categoriesTree:!1},category:this.matchCategory||{},categoryId:this.modelValue}},watch:{category(t){this.$emit("update:modelValue",t.id)},matchCategory(t){this.category=t}}};function iM(t,e,r,a,n,i,o,s){const l=u.resolveComponent("category-select-modal");e(`<!--[--><div class="input-group"><input${y.ssrRenderAttr("value",o.category.name)} type="text" class="form-control" readonly><div class="input-group-append"><button type="button" class="btn btn-secondary">${y.ssrInterpolate(t.$lang.app.select)}</button></div></div>`),e(y.ssrRenderComponent(l,{modelValue:o.modals.categoriesTree,"onUpdate:modelValue":c=>o.modals.categoriesTree=c,category:o.category,"onUpdate:category":c=>o.category=c},null,r)),e("<!--]-->")}const Vb=N1.setup;N1.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/components/partials/category-select/CategorySelect.vue"),Vb?Vb(t,e):void 0};var oM=br(N1,[["ssrRender",iM]]);const z1={name:"SizeSelect",components:{Modal:Ci,VSelect:Ob.default},props:{modelValue:[Number,String],storeCategoryId:Number},data(){return{hasSize:!!this.modelValue,modal:!1,fields:[],fieldId:this.modelValue}},created(){this.fetchFields()},watch:{hasSize(t){t||(this.$emit("update:modelValue",null),this.fieldId=null),setTimeout(()=>{this.modelValue||(this.hasSize=!1)},100)}},methods:{fetchFields(){return this.axios.get(this.$urls.fields,{params:{code:"size"}}).then(t=>{this.fields=t.data}).catch(()=>{this.hasSize=!1})},save(){this.$emit("update:modelValue",this.fieldId),this.modal=!1,this.hasSize=!0},showModal(){setTimeout(()=>{this.hasSize&&(this.modal=!0)},100)}}};function sM(t,e,r,a,n,i,o,s){const l=u.resolveComponent("modal"),c=u.resolveComponent("v-select");e(`<div${y.ssrRenderAttrs(u.mergeProps({class:"form-group"},a))} data-v-abb5f680><div class="form-check" data-v-abb5f680><input${y.ssrIncludeBooleanAttr(Array.isArray(o.hasSize)?y.ssrLooseContain(o.hasSize,null):o.hasSize)?" checked":""} class="form-check-input" type="checkbox" id="has-size" data-v-abb5f680><label class="form-check-label" for="has-size" data-v-abb5f680>${y.ssrInterpolate(t.$lang.app.hasSize)}</label>`),o.fieldId&&o.fields.length>0?e(`<span data-v-abb5f680> (${y.ssrInterpolate(o.fields.filter(d=>d.id===o.fieldId)[0].name)})</span>`):e("<!---->"),e("</div>"),e(y.ssrRenderComponent(l,{modelValue:o.modal,"onUpdate:modelValue":d=>o.modal=d,"modal-title":t.$lang.app.selectSizeField,"disable-backdrop-close":""},{default:u.withCtx((d,p,m,h)=>{if(p)p(`<div class="p-2" data-v-abb5f680${h}>`),p(y.ssrRenderComponent(c,{modelValue:o.fieldId,"onUpdate:modelValue":f=>o.fieldId=f,options:o.fields,label:"name",reduce:f=>f.id,placeholder:`-- ${t.$lang.app.select} --`},null,m,h)),p("</div>");else return[u.createVNode("div",{class:"p-2"},[u.createVNode(c,{modelValue:o.fieldId,"onUpdate:modelValue":f=>o.fieldId=f,options:o.fields,label:"name",reduce:f=>f.id,placeholder:`-- ${t.$lang.app.select} --`,onInput:s.save},null,8,["modelValue","onUpdate:modelValue","options","reduce","placeholder","onInput"])])]}),_:1},r)),e("</div>")}const Lb=z1.setup;z1.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/components/stores/settings/SizeSelect.vue"),Lb?Lb(t,e):void 0};var lM=br(z1,[["ssrRender",sM],["__scopeId","data-v-abb5f680"]]);const D1={name:"StoreCategoryModal",components:{SizeSelect:lM,CategorySelect:oM,Modal:Ci},props:{modelValue:Boolean,category:[Object,null],parentId:[Number,null]},watch:{modelValue(t){this.modals.action=t},"modals.action"(t){this.$emit("update:modelValue",t)}},data(){return{modals:{action:!1},form:{id:this.category?this.category.id:"",parentId:this.parentId||"",icon:{id:"",fullPath:"",type:"",file:null},fields:[],name:this.category?this.category.name:"",maxPrice:this.category?this.category.maxPrice:"",active:this.category?this.category.active:!0,matchCategoryId:"",hasColor:this.category?this.category.hasColor:!1,sizeFieldId:this.category&&this.category.sizeFieldId||""},matchCategory:null}},created(){this.category&&this.fetchCategory(this.category.id),this.modals.action=this.modelValue},methods:{save(){return this.form.id?this.axios.put(this.$urls.storeSettingsCategory.replace(":storeId",this.$store.getters.store.id).replace(":categoryId",this.form.id),this.form).then(t=>{this.$emit("save",t.data),this.modals.action=!1,this.$snotify.success(this.$lang.app.saveSuccessMsg)}):this.axios.post(this.$urls.storeSettingsCategories.replace(":storeId",this.$store.getters.store.id),this.form).then(t=>{this.$emit("save",t.data),this.modals.action=!1,this.$snotify.success(this.$lang.app.saveSuccessMsg)})},fetchCategory(t){return this.axios.get(this.$urls.storeSettingsCategoriesEdit.replace(":storeId",this.$store.getters.store.id).replace(":categoryId",t)).then(e=>{this.form.fields=e.data.fields,this.form.matchCategoryId=e.data.matchCategory.id,this.matchCategory=e.data.matchCategory,e.data.icon&&(this.form.icon.id=e.data.icon.id,this.form.icon.fullPath=e.data.icon.fullPath,this.form.icon.type=e.data.icon.type)})}}};function cM(t,e,r,a,n,i,o,s){const l=u.resolveComponent("modal"),c=u.resolveComponent("category-select"),d=u.resolveComponent("size-select");o.modals.action?e(y.ssrRenderComponent(l,u.mergeProps({modelValue:o.modals.action,"onUpdate:modelValue":p=>o.modals.action=p,"modal-title":n.category?t.$lang.app.categoryEditing:t.$lang.app.categoryAdding,"disable-backdrop-close":""},a),{default:u.withCtx((p,m,h,f)=>{if(m)m(`<form class="p-4" data-v-adb67ad8${f}><div class="form-group" data-v-adb67ad8${f}><label class="form-label" data-v-adb67ad8${f}>${y.ssrInterpolate(t.$lang.app.name)}<span class="text-danger" data-v-adb67ad8${f}>*</span></label><input required type="text" class="form-control"${y.ssrRenderAttr("value",o.form.name)} data-v-adb67ad8${f}></div><div class="form-group" data-v-adb67ad8${f}><label class="form-label" data-v-adb67ad8${f}>${y.ssrInterpolate(t.$lang.app.matchCategoryId)}<span class="text-danger" data-v-adb67ad8${f}>*</span></label>`),m(y.ssrRenderComponent(c,{modelValue:o.form.matchCategoryId,"onUpdate:modelValue":g=>o.form.matchCategoryId=g,"match-category":o.matchCategory},null,h,f)),m(`</div><div class="form-group" data-v-adb67ad8${f}><div class="form-check" data-v-adb67ad8${f}><input${y.ssrIncludeBooleanAttr(Array.isArray(o.form.hasColor)?y.ssrLooseContain(o.form.hasColor,null):o.form.hasColor)?" checked":""} class="form-check-input" type="checkbox" id="has-color" data-v-adb67ad8${f}><label class="form-check-label" for="has-color" data-v-adb67ad8${f}>${y.ssrInterpolate(t.$lang.app.hasColor)}</label></div></div>`),m(y.ssrRenderComponent(d,{modelValue:o.form.sizeFieldId,"onUpdate:modelValue":g=>o.form.sizeFieldId=g},null,h,f)),m(`<div class="form-group" data-v-adb67ad8${f}><div class="form-check" data-v-adb67ad8${f}><input${y.ssrIncludeBooleanAttr(Array.isArray(o.form.active)?y.ssrLooseContain(o.form.active,null):o.form.active)?" checked":""} class="form-check-input" type="checkbox" id="active" data-v-adb67ad8${f}><label class="form-check-label" for="active" data-v-adb67ad8${f}>${y.ssrInterpolate(t.$lang.app.active)}</label></div></div><div class="text-right w-100" data-v-adb67ad8${f}><button type="submit" class="btn btn-success" data-v-adb67ad8${f}>${y.ssrInterpolate(t.$lang.app.save)}</button><button type="button" class="btn btn-light" data-v-adb67ad8${f}>${y.ssrInterpolate(t.$lang.app.cancel)}</button></div></form>`);else return[u.createVNode("form",{onSubmit:u.withModifiers(s.save,["prevent"]),class:"p-4"},[u.createVNode("div",{class:"form-group"},[u.createVNode("label",{class:"form-label"},[u.createTextVNode(u.toDisplayString(t.$lang.app.name),1),u.createVNode("span",{class:"text-danger"},"*")]),u.withDirectives(u.createVNode("input",{required:"",type:"text",class:"form-control","onUpdate:modelValue":g=>o.form.name=g},null,8,["onUpdate:modelValue"]),[[u.vModelText,o.form.name]])]),u.createVNode("div",{class:"form-group"},[u.createVNode("label",{class:"form-label"},[u.createTextVNode(u.toDisplayString(t.$lang.app.matchCategoryId),1),u.createVNode("span",{class:"text-danger"},"*")]),u.createVNode(c,{modelValue:o.form.matchCategoryId,"onUpdate:modelValue":g=>o.form.matchCategoryId=g,"match-category":o.matchCategory},null,8,["modelValue","onUpdate:modelValue","match-category"])]),u.createVNode("div",{class:"form-group"},[u.createVNode("div",{class:"form-check"},[u.withDirectives(u.createVNode("input",{"onUpdate:modelValue":g=>o.form.hasColor=g,class:"form-check-input",type:"checkbox",id:"has-color"},null,8,["onUpdate:modelValue"]),[[u.vModelCheckbox,o.form.hasColor]]),u.createVNode("label",{class:"form-check-label",for:"has-color"},u.toDisplayString(t.$lang.app.hasColor),1)])]),u.createVNode(d,{modelValue:o.form.sizeFieldId,"onUpdate:modelValue":g=>o.form.sizeFieldId=g},null,8,["modelValue","onUpdate:modelValue"]),u.createVNode("div",{class:"form-group"},[u.createVNode("div",{class:"form-check"},[u.withDirectives(u.createVNode("input",{"onUpdate:modelValue":g=>o.form.active=g,class:"form-check-input",type:"checkbox",id:"active"},null,8,["onUpdate:modelValue"]),[[u.vModelCheckbox,o.form.active]]),u.createVNode("label",{class:"form-check-label",for:"active"},u.toDisplayString(t.$lang.app.active),1)])]),u.createVNode("div",{class:"text-right w-100"},[u.createVNode("button",{type:"submit",class:"btn btn-success"},u.toDisplayString(t.$lang.app.save),1),u.createVNode("button",{type:"button",onClick:g=>o.modals.action=!1,class:"btn btn-light"},u.toDisplayString(t.$lang.app.cancel),9,["onClick"])])],40,["onSubmit"])]}),_:1},r)):e("<!---->")}const Fb=D1.setup;D1.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/components/stores/settings/StoreCategoryModal.vue"),Fb?Fb(t,e):void 0};var dM=br(D1,[["ssrRender",cM],["__scopeId","data-v-adb67ad8"]]);const O1={name:"FieldsModal",components:{Modal:Ci},props:{modelValue:Boolean,category:Object},data(){return{modals:{action:!1,field:!1,group:!1},groups:[],fields:[],groupForm:{name:"",nameEn:"",fields:[]},fieldForm:{name:"",nameEn:"",options:[],groupIndex:null,storeCategoryFieldGroupId:"",type:"",filter:!1,fieldId:"",addon:"",required:""}}},computed:{storeItem(){return this.$store.getters.store}},watch:{"modals.action"(t){this.$emit("update:modelValue",t)},modelValue(t){this.modals.action=t}},created(){this.modals.action=this.modelValue,this.fetchGroups(),this.fetchFields()},methods:{fetchGroups(){return this.axios.get(this.$urls.storeSettingsCategoriesGroups.replace(":storeId",this.storeItem.id).replace(":categoryId",this.category.id)).then(t=>{this.groups=t.data})},fetchFields(){return this.axios.get(this.$urls.storeSettingsCategoriesFields.replace(":storeId",this.storeItem.id).replace(":categoryId",this.category.id)).then(t=>{this.fields=t.data})},saveGroup(){this.axios.post(this.$urls.storeSettingsCategoriesGroups.replace(":storeId",this.storeItem.id).replace(":categoryId",this.category.id),this.groupForm).then(t=>{this.groups.push(t.data),this.modals.group=!1,this.resetGroupForm()})},saveField(){this.fieldForm.groupIndex!==null&&(this.fieldForm.storeCategoryFieldGroupId=this.groups[this.fieldForm.groupIndex].id),this.axios.post(this.$urls.storeSettingsCategoriesFields.replace(":storeId",this.storeItem.id).replace(":categoryId",this.category.id),this.fieldForm).then(t=>{this.fieldForm.storeCategoryFieldGroupId?this.groups[this.fieldForm.groupIndex].fields.push(X({},t.data)):this.fields.push(X({},t.data)),this.modals.field=!1,this.resetFieldForm()})},resetGroupForm(){this.groupForm.name="",this.groupForm.nameEn=""},resetFieldForm(){this.groupForm.name="",this.groupForm.nameEn="",this.groupForm.options=[],this.groupForm.groupIndex=null,this.groupForm.storeCategoryFieldGroupId="",this.groupForm.type="",this.groupForm.filter=!1},addOption(){this.fieldForm.options.push({id:"",title:"",titleEn:""})},removeOption(t){this.fieldForm.options.splice(t,1)}}};function uM(t,e,r,a,n,i,o,s){const l=u.resolveComponent("modal");e("<!--[-->"),e(y.ssrRenderComponent(l,{modelValue:o.modals.action,"onUpdate:modelValue":c=>o.modals.action=c,"modal-title":n.category.name+": "+t.$lang.app.fieldsSettings},{default:u.withCtx((c,d,p,m)=>{if(d)d(`<div class="p-3"${m}><button type="button" class="btn btn-success"${m}><i class="la la-plus"${m}></i> ${y.ssrInterpolate(t.$lang.app.addField)}</button>`),o.groups.length>0?d(`<div class="font-weight-bold"${m}>Groups</div>`):d("<!---->"),d(`<div class="list-group mt-1"${m}><!--[-->`),y.ssrRenderList(o.groups,(h,f)=>{d(`<div class="list-group-item"${m}><div class="d-flex justify-content-between"${m}><span${m}>${y.ssrInterpolate(h.name)}</span><div class="d-inline-block"${m}><button type="button" class="btn btn-sm btn-success"${m}><i class="la la-plus"${m}></i> ${y.ssrInterpolate(t.$lang.app.addField)}</button></div></div><div class="ml-2"${m}>`),h.fields.length>0?d(`<div class="font-weight-bold"${m}>Fields</div>`):d("<!---->"),d(`<div class="list-group mt-1"${m}><!--[-->`),y.ssrRenderList(h.fields,(g,b)=>{d(`<div class="list-group-item"${m}><span${m}>${y.ssrInterpolate(g.name)}</span></div>`)}),d("<!--]--></div></div></div>")}),d("<!--]--></div>"),o.fields.length>0?d(`<div class="font-weight-bold"${m}>Fields</div>`):d("<!---->"),d(`<div class="list-group mt-1"${m}><!--[-->`),y.ssrRenderList(o.fields,(h,f)=>{d(`<div class="list-group-item"${m}><span${m}>${y.ssrInterpolate(h.name)}</span></div>`)}),d("<!--]--></div></div>");else return[u.createVNode("div",{class:"p-3"},[u.createVNode("button",{onClick:h=>{o.fieldForm.groupIndex=null,o.modals.field=!0},type:"button",class:"btn btn-success"},[u.createVNode("i",{class:"la la-plus"}),u.createTextVNode(" "+u.toDisplayString(t.$lang.app.addField),1)],8,["onClick"]),o.groups.length>0?(u.openBlock(),u.createBlock("div",{key:0,class:"font-weight-bold"},"Groups")):u.createCommentVNode("",!0),u.createVNode("div",{class:"list-group mt-1"},[(u.openBlock(!0),u.createBlock(u.Fragment,null,u.renderList(o.groups,(h,f)=>(u.openBlock(),u.createBlock("div",{key:f,class:"list-group-item"},[u.createVNode("div",{class:"d-flex justify-content-between"},[u.createVNode("span",null,u.toDisplayString(h.name),1),u.createVNode("div",{class:"d-inline-block"},[u.createVNode("button",{onClick:g=>{o.fieldForm.groupIndex=f,o.modals.field=!0},type:"button",class:"btn btn-sm btn-success"},[u.createVNode("i",{class:"la la-plus"}),u.createTextVNode(" "+u.toDisplayString(t.$lang.app.addField),1)],8,["onClick"])])]),u.createVNode("div",{class:"ml-2"},[h.fields.length>0?(u.openBlock(),u.createBlock("div",{key:0,class:"font-weight-bold"},"Fields")):u.createCommentVNode("",!0),u.createVNode("div",{class:"list-group mt-1"},[(u.openBlock(!0),u.createBlock(u.Fragment,null,u.renderList(h.fields,(g,b)=>(u.openBlock(),u.createBlock("div",{key:b,class:"list-group-item"},[u.createVNode("span",null,u.toDisplayString(g.name),1)]))),128))])])]))),128))]),o.fields.length>0?(u.openBlock(),u.createBlock("div",{key:1,class:"font-weight-bold"},"Fields")):u.createCommentVNode("",!0),u.createVNode("div",{class:"list-group mt-1"},[(u.openBlock(!0),u.createBlock(u.Fragment,null,u.renderList(o.fields,(h,f)=>(u.openBlock(),u.createBlock("div",{key:f,class:"list-group-item"},[u.createVNode("span",null,u.toDisplayString(h.name),1)]))),128))])])]}),_:1},r)),e(y.ssrRenderComponent(l,{modelValue:o.modals.field,"onUpdate:modelValue":c=>o.modals.field=c,"modal-title":t.$lang.app.addingField},{default:u.withCtx((c,d,p,m)=>{if(d)d(`<form class="p-3"${m}><div class="form-group"${m}><label class="form-label"${m}>${y.ssrInterpolate(t.$lang.app.type)} <span class="required"${m}>*</span></label><select class="form-control" required${m}><option value="" disabled${m}>${y.ssrInterpolate(t.$lang.app.select)}</option><option value="number"${m}>NUMBER</option><option value="float"${m}>FLOAT/DOUBLE</option><option value="text"${m}>TEXT</option><option value="select"${m}>SELECTION/LIST</option><option value="boolean"${m}>YES/NO</option></select></div><div class="form-group"${m}><label class="form-label"${m}>${y.ssrInterpolate(t.$lang.app.name)}[RU] <span class="required"${m}>*</span></label><input${y.ssrRenderAttr("value",o.fieldForm.name)} type="text" class="form-control" required${m}></div><div class="form-group"${m}><label class="form-label"${m}>${y.ssrInterpolate(t.$lang.app.name)}[EN] <span class="required"${m}>*</span></label><input${y.ssrRenderAttr("value",o.fieldForm.nameEn)} type="text" class="form-control" required${m}></div><div class="form-group"${m}><label class="form-label"${m}>${y.ssrInterpolate(t.$lang.app.addon)}</label><input${y.ssrRenderAttr("value",o.fieldForm.addon)} type="text" class="form-control"${m}></div>`),o.fieldForm.type==="select"?(d(`<div class="form-group"${m}><label class="form-label"${m}>${y.ssrInterpolate(t.$lang.app.options)}</label><button type="button" class="btn btn-sm btn-outline-success ml-1"${m}><i class="icon icon-plus"${m}></i></button><!--[-->`),y.ssrRenderList(o.fieldForm.options,(h,f)=>{d(`<div${m}><div class="row"${m}><div class="col"${m}><div class="input-group"${m}><div class="input-group-prepend"${m}><label class="input-group-text"${m}>[RU]</label></div><input required${y.ssrRenderAttr("value",o.fieldForm.options[f].title)} type="text" class="form-control"${m}></div></div><div class="col"${m}><div class="input-group"${m}><div class="input-group-prepend"${m}><label class="input-group-text"${m}>[EN]</label></div><input required${y.ssrRenderAttr("value",o.fieldForm.options[f].titleEn)} type="text" class="form-control"${m}></div></div><div class="col-1"${m}><button type="button" class="btn btn-round btn-danger"${m}><i class="icon icon-close"${m}></i></button></div></div></div>`)}),d("<!--]--></div>")):d("<!---->"),d(`<div class="form-group"${m}><label class="form-label"${m}>${y.ssrInterpolate(t.$lang.app.settings)}</label><div class="custom-control custom-checkbox"${m}><input${y.ssrIncludeBooleanAttr(Array.isArray(o.fieldForm.filter)?y.ssrLooseContain(o.fieldForm.filter,null):o.fieldForm.filter)?" checked":""} type="checkbox" class="custom-control-input" id="checkout-create-acc"${m}><label class="custom-control-label" for="checkout-create-acc"${m}>${y.ssrInterpolate(t.$lang.app.appearanceOnFiltering)}</label></div><div class="custom-control custom-checkbox"${m}><input${y.ssrIncludeBooleanAttr(Array.isArray(o.fieldForm.required)?y.ssrLooseContain(o.fieldForm.required,null):o.fieldForm.required)?" checked":""} type="checkbox" class="custom-control-input" id="checkout-create-acc-req"${m}><label class="custom-control-label" for="checkout-create-acc-req"${m}>${y.ssrInterpolate(t.$lang.app.isRequiredField)}</label></div></div><button type="submit" class="btn btn-primary"${m}>${y.ssrInterpolate(t.$lang.app.save)}</button><button type="button" class="btn btn-light"${m}>${y.ssrInterpolate(t.$lang.app.cancel)}</button></form>`);else return[u.createVNode("form",{class:"p-3",onSubmit:u.withModifiers(s.saveField,["prevent"])},[u.createVNode("div",{class:"form-group"},[u.createVNode("label",{class:"form-label"},[u.createTextVNode(u.toDisplayString(t.$lang.app.type)+" ",1),u.createVNode("span",{class:"required"},"*")]),u.withDirectives(u.createVNode("select",{"onUpdate:modelValue":h=>o.fieldForm.type=h,class:"form-control",required:""},[u.createVNode("option",{value:"",disabled:""},u.toDisplayString(t.$lang.app.select),1),u.createVNode("option",{value:"number"},"NUMBER"),u.createVNode("option",{value:"float"},"FLOAT/DOUBLE"),u.createVNode("option",{value:"text"},"TEXT"),u.createVNode("option",{value:"select"},"SELECTION/LIST"),u.createVNode("option",{value:"boolean"},"YES/NO")],8,["onUpdate:modelValue"]),[[u.vModelSelect,o.fieldForm.type]])]),u.createVNode("div",{class:"form-group"},[u.createVNode("label",{class:"form-label"},[u.createTextVNode(u.toDisplayString(t.$lang.app.name)+"[RU] ",1),u.createVNode("span",{class:"required"},"*")]),u.withDirectives(u.createVNode("input",{"onUpdate:modelValue":h=>o.fieldForm.name=h,type:"text",class:"form-control",required:""},null,8,["onUpdate:modelValue"]),[[u.vModelText,o.fieldForm.name]])]),u.createVNode("div",{class:"form-group"},[u.createVNode("label",{class:"form-label"},[u.createTextVNode(u.toDisplayString(t.$lang.app.name)+"[EN] ",1),u.createVNode("span",{class:"required"},"*")]),u.withDirectives(u.createVNode("input",{"onUpdate:modelValue":h=>o.fieldForm.nameEn=h,type:"text",class:"form-control",required:""},null,8,["onUpdate:modelValue"]),[[u.vModelText,o.fieldForm.nameEn]])]),u.createVNode("div",{class:"form-group"},[u.createVNode("label",{class:"form-label"},u.toDisplayString(t.$lang.app.addon),1),u.withDirectives(u.createVNode("input",{"onUpdate:modelValue":h=>o.fieldForm.addon=h,type:"text",class:"form-control"},null,8,["onUpdate:modelValue"]),[[u.vModelText,o.fieldForm.addon]])]),o.fieldForm.type==="select"?(u.openBlock(),u.createBlock("div",{key:0,class:"form-group"},[u.createVNode("label",{class:"form-label"},u.toDisplayString(t.$lang.app.options),1),u.createVNode("button",{onClick:s.addOption,type:"button",class:"btn btn-sm btn-outline-success ml-1"},[u.createVNode("i",{class:"icon icon-plus"})],8,["onClick"]),(u.openBlock(!0),u.createBlock(u.Fragment,null,u.renderList(o.fieldForm.options,(h,f)=>(u.openBlock(),u.createBlock("div",{key:f},[u.createVNode("div",{class:"row"},[u.createVNode("div",{class:"col"},[u.createVNode("div",{class:"input-group"},[u.createVNode("div",{class:"input-group-prepend"},[u.createVNode("label",{class:"input-group-text"},"[RU]")]),u.withDirectives(u.createVNode("input",{required:"","onUpdate:modelValue":g=>o.fieldForm.options[f].title=g,type:"text",class:"form-control"},null,8,["onUpdate:modelValue"]),[[u.vModelText,o.fieldForm.options[f].title]])])]),u.createVNode("div",{class:"col"},[u.createVNode("div",{class:"input-group"},[u.createVNode("div",{class:"input-group-prepend"},[u.createVNode("label",{class:"input-group-text"},"[EN]")]),u.withDirectives(u.createVNode("input",{required:"","onUpdate:modelValue":g=>o.fieldForm.options[f].titleEn=g,type:"text",class:"form-control"},null,8,["onUpdate:modelValue"]),[[u.vModelText,o.fieldForm.options[f].titleEn]])])]),u.createVNode("div",{class:"col-1"},[u.createVNode("button",{onClick:g=>s.removeOption(f),type:"button",class:"btn btn-round btn-danger"},[u.createVNode("i",{class:"icon icon-close"})],8,["onClick"])])])]))),128))])):u.createCommentVNode("",!0),u.createVNode("div",{class:"form-group"},[u.createVNode("label",{class:"form-label"},u.toDisplayString(t.$lang.app.settings),1),u.createVNode("div",{class:"custom-control custom-checkbox"},[u.withDirectives(u.createVNode("input",{"onUpdate:modelValue":h=>o.fieldForm.filter=h,type:"checkbox",class:"custom-control-input",id:"checkout-create-acc"},null,8,["onUpdate:modelValue"]),[[u.vModelCheckbox,o.fieldForm.filter]]),u.createVNode("label",{class:"custom-control-label",for:"checkout-create-acc"},u.toDisplayString(t.$lang.app.appearanceOnFiltering),1)]),u.createVNode("div",{class:"custom-control custom-checkbox"},[u.withDirectives(u.createVNode("input",{"onUpdate:modelValue":h=>o.fieldForm.required=h,type:"checkbox",class:"custom-control-input",id:"checkout-create-acc-req"},null,8,["onUpdate:modelValue"]),[[u.vModelCheckbox,o.fieldForm.required]]),u.createVNode("label",{class:"custom-control-label",for:"checkout-create-acc-req"},u.toDisplayString(t.$lang.app.isRequiredField),1)])]),u.createVNode("button",{type:"submit",class:"btn btn-primary"},u.toDisplayString(t.$lang.app.save),1),u.createVNode("button",{onClick:h=>o.modals.field=!1,type:"button",class:"btn btn-light"},u.toDisplayString(t.$lang.app.cancel),9,["onClick"])],40,["onSubmit"])]}),_:1},r)),e(y.ssrRenderComponent(l,{modelValue:o.modals.group,"onUpdate:modelValue":c=>o.modals.group=c,"modal-title":t.$lang.app.addingGroup},{default:u.withCtx((c,d,p,m)=>{if(d)d(`<form class="p-3"${m}><div class="form-group"${m}><label class="form-label"${m}>${y.ssrInterpolate(t.$lang.app.name)}[RU] <span class="required"${m}>*</span></label><input${y.ssrRenderAttr("value",o.groupForm.name)} type="text" class="form-control" required${m}></div><div class="form-group"${m}><label class="form-label"${m}>${y.ssrInterpolate(t.$lang.app.name)}[EN] <span class="required"${m}>*</span></label><input${y.ssrRenderAttr("value",o.groupForm.nameEn)} type="text" class="form-control" required${m}></div><button type="submit" class="btn btn-primary"${m}>${y.ssrInterpolate(t.$lang.app.save)}</button><button type="button" class="btn btn-light"${m}>${y.ssrInterpolate(t.$lang.app.cancel)}</button></form>`);else return[u.createVNode("form",{class:"p-3",onSubmit:u.withModifiers(s.saveGroup,["prevent"])},[u.createVNode("div",{class:"form-group"},[u.createVNode("label",{class:"form-label"},[u.createTextVNode(u.toDisplayString(t.$lang.app.name)+"[RU] ",1),u.createVNode("span",{class:"required"},"*")]),u.withDirectives(u.createVNode("input",{"onUpdate:modelValue":h=>o.groupForm.name=h,type:"text",class:"form-control",required:""},null,8,["onUpdate:modelValue"]),[[u.vModelText,o.groupForm.name]])]),u.createVNode("div",{class:"form-group"},[u.createVNode("label",{class:"form-label"},[u.createTextVNode(u.toDisplayString(t.$lang.app.name)+"[EN] ",1),u.createVNode("span",{class:"required"},"*")]),u.withDirectives(u.createVNode("input",{"onUpdate:modelValue":h=>o.groupForm.nameEn=h,type:"text",class:"form-control",required:""},null,8,["onUpdate:modelValue"]),[[u.vModelText,o.groupForm.nameEn]])]),u.createVNode("button",{type:"submit",class:"btn btn-primary"},u.toDisplayString(t.$lang.app.save),1),u.createVNode("button",{onClick:h=>o.modals.group=!1,type:"button",class:"btn btn-light"},u.toDisplayString(t.$lang.app.cancel),9,["onClick"])],40,["onSubmit"])]}),_:1},r)),e("<!--]-->")}const Nb=O1.setup;O1.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/components/stores/settings/FieldsModal.vue"),Nb?Nb(t,e):void 0};var pM=br(O1,[["ssrRender",uM]]);const B1={name:"StoreCategories",components:{FieldsModal:pM,StoreCategoryModal:dM,StoreCategoryTree:rM},computed:{store(){return this.$store.getters.store}},data(){return{open:null,modals:{action:!1,fields:!1},parent:null,category:null,categories:[],selfDropped:!1,dragging:!1}},created(){this.fetchCategories()},methods:{fetchCategories(){return this.axios.get(this.$urls.storeSettingsCategories.replace(":storeId",this.store.id)).then(t=>{this.categories=t.data})},saved(t){if(this.parent){const e=this.parent.children.findIndex(r=>r.id===t.id);e>-1?this.parent.children.splice(e,1,t):this.parent.children.push(t)}else{const e=this.categories.findIndex(r=>r.id===t.id);e>-1?this.categories.splice(e,1,t):this.categories.push(t)}},showActionModal(t,e){this.parent=t||null,this.category=e,this.modals.action=!0},showFieldsModal(t){this.category=t,this.modals.fields=!0}}};function mM(t,e,r,a,n,i,o,s){const l=u.resolveComponent("store-category-tree"),c=u.resolveComponent("store-category-modal"),d=u.resolveComponent("fields-modal");e(`<!--[--><div class="widget"><div class="widget-title"><button class="btn btn-success" type="button">${y.ssrInterpolate(t.$lang.app.add)}</button></div><div class="widget-body position-relative">`),e(y.ssrRenderComponent(l,{categories:o.categories,"onUpdate:categories":p=>o.categories=p,"show-action-modal":s.showActionModal,"show-fields-modal":s.showFieldsModal,"self-dropped":o.selfDropped,"onUpdate:self-dropped":p=>o.selfDropped=p,dragging:o.dragging,"onUpdate:dragging":p=>o.dragging=p},null,r)),e("</div></div>"),o.modals.action?e(y.ssrRenderComponent(c,u.mergeProps({modelValue:o.modals.action,"onUpdate:modelValue":p=>o.modals.action=p,"parent-id":o.parent?o.parent.id:null,category:o.category},a),null,r)):e("<!---->"),o.modals.fields?e(y.ssrRenderComponent(d,u.mergeProps({modelValue:o.modals.fields,"onUpdate:modelValue":p=>o.modals.fields=p,category:o.category},a),null,r)):e("<!---->"),e("<!--]-->")}const zb=B1.setup;B1.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/components/stores/settings/StoreCategories.vue"),zb?zb(t,e):void 0};var hM=br(B1,[["ssrRender",mM]]);const U1={__ssrInlineRender:!0,async setup(t){let e,r;const a=Tn.useStore(),n=La.useRoute(),i=([e,r]=u.withAsyncContext(()=>a.dispatch("fetchStore",n.params.store)),e=await e,r(),e),o=Hn(),s=[{label:o.app.stores,route:{name:"stores.index"}},{label:i.name,route:{name:"stores.show",params:{store:i.slug}}},{label:o.app.settings,route:{name:"stores.settings.index",params:{store:i.slug}}},{label:o.app.categories}];return(l,c,d,p)=>{c("<!--[-->"),c(y.ssrRenderComponent(Ln,{breadcrumbs:s,"is-store":""},null,d)),c('<div class="container-fluid"><div class="row"><div class="col-xxl-4">'),c(y.ssrRenderComponent(hM,null,null,d)),c("</div></div></div><!--]-->")}}},Db=U1.setup;U1.setup=(t,e)=>{const r=u.useSSRContext();return(r.modules||(r.modules=new Set)).add("src/pages/stores/settings/categories/Index.vue"),Db?Db(t,e):void 0};var gM=Object.freeze(Object.defineProperty({__proto__:null,default:U1},Symbol.toStringTag,{value:"Module"}));exports.render=sw;
