var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(t,e,o)=>e in t?__defProp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,__spreadValues=(t,e)=>{for(var o in e||(e={}))__hasOwnProp.call(e,o)&&__defNormalProp(t,o,e[o]);if(__getOwnPropSymbols)for(var o of __getOwnPropSymbols(e))__propIsEnum.call(e,o)&&__defNormalProp(t,o,e[o]);return t},__spreadProps=(t,e)=>__defProps(t,__getOwnPropDescs(e)),__publicField=(t,e,o)=>(__defNormalProp(t,"symbol"!=typeof e?e+"":e,o),o);!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("vue")):"function"==typeof define&&define.amd?define(["vue"],e):(t="undefined"!=typeof globalThis?globalThis:t||self)["vue3-snotify"]=e(t.Vue)}(this,(function(t){"use strict";var e,o;(o=e||(e={})).leftTop="leftTop",o.leftCenter="leftCenter",o.leftBottom="leftBottom",o.rightTop="rightTop",o.rightCenter="rightCenter",o.rightBottom="rightBottom",o.centerTop="centerTop",o.centerCenter="centerCenter",o.centerBottom="centerBottom";const i="simple",n="success",s="error",a="warning",r="info",c="async",l="confirm",h="prompt";var p=(t,e)=>{for(const[o,i]of e)t[o]=i;return t};const m=t.defineComponent({props:["toast"],data:()=>({isPromptFocused:!1}),methods:{valueChanged(t){this.toast.value=t.target.value,this.toast.eventEmitter.emit("input")}}}),f=["id"],d=["for"],u={class:"snotifyToast__input__labelContent"};var g=p(m,[["render",function(e,o,i,n,s,a){return t.openBlock(),t.createElementBlock("span",{class:t.normalizeClass(["snotifyToast__input",{"snotifyToast__input--filled":e.isPromptFocused}])},[t.createElementVNode("input",{onInput:o[0]||(o[0]=(...t)=>e.valueChanged&&e.valueChanged(...t)),class:"snotifyToast__input__field",type:"text",id:e.toast.id,onFocus:o[1]||(o[1]=t=>e.isPromptFocused=!0),onBlur:o[2]||(o[2]=t=>e.isPromptFocused=!!e.toast.value.length)},null,40,f),t.createElementVNode("label",{class:"snotifyToast__input__label",for:e.toast.id},[t.createElementVNode("span",u,t.toDisplayString(e.toast.config.placeholder),1)],8,d)],2)}]]);const y=t.defineComponent({props:["toast"],methods:{remove(){this.$snotify.remove(this.toast.id)}}}),_={class:"snotifyToast__buttons"},b=["onClick"];var v=p(y,[["render",function(e,o,i,n,s,a){return t.openBlock(),t.createElementBlock("div",_,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(e.toast.config.buttons,((o,i)=>(t.openBlock(),t.createElementBlock("button",{type:"button",key:i,class:t.normalizeClass([{"snotifyToast__buttons--bold":o.bold},o.className]),onClick:t.withModifiers((t=>o.action?o.action(e.toast):e.remove()),["prevent","stop"])},t.toDisplayString(o.text),11,b)))),128))])}]]);const k=t.defineComponent({components:{SnotifyPrompt:g,SnotifyButton:v},props:["toastData"],emits:["stateChanged"],data(){return{toast:this.toastData,animationFrame:0,state:{paused:!1,progress:0,animation:"",isDestroying:!1,promptType:h}}},computed:{toastTitle(){const t=this.toast.title;return t.length>this.toast.config.titleMaxLength?t.slice(0,this.toast.config.titleMaxLength):t},toastBody(){const t=this.toast.body;return t.length>this.toast.config.bodyMaxLength?t.slice(0,this.toast.config.bodyMaxLength):t}},methods:{initToast(){this.toast.config.timeout>0&&this.startTimeout(0)},onClick(){this.toast.eventEmitter.emit("click"),this.toast.config.closeOnClick&&this.$snotify.remove(this.toast.id)},onMouseEnter(){this.toast.eventEmitter.emit("mouseenter"),this.toast.config.pauseOnHover&&(this.state.paused=!0)},onMouseLeave(){this.toast.config.pauseOnHover&&this.toast.config.timeout&&(this.state.paused=!1,this.startTimeout(this.toast.config.timeout*this.state.progress)),this.toast.eventEmitter.emit("mouseleave")},onExitTransitionEnd(){this.state.isDestroying||(this.initToast(),this.toast.eventEmitter.emit("shown"))},startTimeout(t=0){const e=performance.now(),o=()=>{this.animationFrame=requestAnimationFrame((i=>{const n=i+t-e,s=Math.min(n/this.toast.config.timeout,1);this.state.paused?cancelAnimationFrame(this.animationFrame):n<this.toast.config.timeout?(this.state.progress=s,o()):(this.state.progress=1,cancelAnimationFrame(this.animationFrame),this.$snotify.emitter.emit("remove",this.toast.id))}))};o()},onRemove(){this.state.isDestroying=!0,this.$emit("stateChanged","beforeHide"),this.toast.eventEmitter.emit("beforeHide"),this.state.animation=this.toast.config.animation.exit,setTimeout((()=>{this.$emit("stateChanged","hidden"),this.state.animation="snotifyToast--out",this.toast.eventEmitter.emit("hidden"),setTimeout((()=>this.$snotify.remove(this.toast.id,!0)),this.toast.config.animation.time/2)}),this.toast.config.animation.time/2)}},created(){this.$snotify.emitter.on("remove",(t=>{this.toast.id===t&&this.onRemove()}))},mounted(){this.$nextTick((()=>{this.toast.eventEmitter.emit("mounted"),this.state.animation="snotifyToast--in",this.$nextTick((()=>{setTimeout((()=>{this.$emit("stateChanged","beforeShow"),this.toast.eventEmitter.emit("beforeShow"),this.state.animation=this.toast.config.animation.enter}),this.toast.config.animation.time/5)}))}))},unmounted(){cancelAnimationFrame(this.animationFrame),this.toast.eventEmitter.emit("destroyed")}}),B={key:0,class:"snotifyToast__progressBar"},T={key:0,class:"snotifyToast__title"},C={key:1,class:"snotifyToast__body"},E={key:4},w=["src"],O=["innerHTML"];var P=p(k,[["render",function(e,o,i,n,s,a){const r=t.resolveComponent("snotify-prompt"),c=t.resolveComponent("snotify-button");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(["snotifyToast animated",["snotify-"+e.toast.config.type,e.state.animation,void 0===e.toast.valid?"":e.toast.valid?"snotifyToast--valid":"snotifyToast--invalid"]]),style:t.normalizeStyle({"-webkit-animation-duration":e.toast.config.animation.time+"ms","animation-duration":e.toast.config.animation.time+"ms","-webkit-transition":e.toast.config.animation.time+"ms",transition:e.toast.config.animation.time+"ms"}),onClick:o[0]||(o[0]=(...t)=>e.onClick&&e.onClick(...t)),onMouseenter:o[1]||(o[1]=(...t)=>e.onMouseEnter&&e.onMouseEnter(...t)),onMouseleave:o[2]||(o[2]=(...t)=>e.onMouseLeave&&e.onMouseLeave(...t)),onAnimationend:o[3]||(o[3]=(...t)=>e.onExitTransitionEnd&&e.onExitTransitionEnd(...t))},[e.toast.config.showProgressBar&&e.toast.config.timeout>0?(t.openBlock(),t.createElementBlock("div",B,[t.createElementVNode("span",{class:"snotifyToast__progressBar__percentage",style:t.normalizeStyle({width:100*e.state.progress+"%"})},null,4)])):t.createCommentVNode("",!0),e.toast.config.html?(t.openBlock(),t.createElementBlock("div",{key:2,class:"snotifyToast__inner",innerHTML:e.toast.config.html},null,8,O)):(t.openBlock(),t.createElementBlock("div",{key:1,class:t.normalizeClass(["snotifyToast__inner",{snotifyToast__noIcon:!1===e.toast.config.icon}])},[e.toast.title?(t.openBlock(),t.createElementBlock("div",T,t.toDisplayString(e.toastTitle),1)):t.createCommentVNode("",!0),e.toast.body?(t.openBlock(),t.createElementBlock("div",C,t.toDisplayString(e.toastBody),1)):t.createCommentVNode("",!0),e.toast.config.type===e.state.promptType?(t.openBlock(),t.createBlock(r,{key:2,toast:e.toast},null,8,["toast"])):t.createCommentVNode("",!0),void 0===e.toast.config.icon?(t.openBlock(),t.createElementBlock("div",{key:3,class:t.normalizeClass(["snotify-icon","snotify-icon--"+e.toast.config.type])},null,2)):!1!==e.toast.config.icon?(t.openBlock(),t.createElementBlock("div",E,[t.createElementVNode("img",{class:"snotify-icon",src:e.toast.config.icon},null,8,w)])):t.createCommentVNode("",!0)],2)),e.toast.config.buttons?(t.openBlock(),t.createBlock(c,{key:3,toast:e.toast},null,8,["toast"])):t.createCommentVNode("",!0)],38)}]]);var S=p(t.defineComponent({components:{Toast:P},data:()=>({notifications:{left_top:[],left_center:[],left_bottom:[],right_top:[],right_center:[],right_bottom:[],center_top:[],center_center:[],center_bottom:[]},dockSize_a:0,dockSize_b:0,blockSize_a:0,blockSize_b:0,backdrop:-1,withBackdrop:[]}),methods:{getNotificationsForPos(t){return this.notifications[t].slice(this.blockSize_a,this.blockSize_b)},setOptions(t){var e,o;if(this.$snotify.config.global){const i=null==(e=this.$snotify.config.global)?void 0:e.maxOnScreen,n=null==(o=this.$snotify.config.global)?void 0:o.maxAtPosition;this.$snotify.config.global.newOnTop?(i&&(this.dockSize_a=-i),this.dockSize_b=void 0,n&&(this.blockSize_a=-n),this.blockSize_b=void 0,this.withBackdrop=t.filter((t=>t.config.backdrop>=0))):(this.dockSize_a=0,i&&(this.dockSize_b=i),this.blockSize_a=0,n&&(this.blockSize_b=n),this.withBackdrop=t.filter((t=>t.config.backdrop>=0)).reverse())}this.notifications=this.splitToasts(t.slice(this.dockSize_a,this.dockSize_b)),this.stateChanged("mounted")},stateChanged(t){if(this.withBackdrop.length)switch(t){case"mounted":this.backdrop<0&&(this.backdrop=0);break;case"beforeShow":const t=this.withBackdrop[this.withBackdrop.length-1].config.backdrop;t&&(this.backdrop=t);break;case"beforeHide":1===this.withBackdrop.length&&(this.backdrop=0);break;case"hidden":1===this.withBackdrop.length&&(this.backdrop=-1)}else this.backdrop>=0&&(this.backdrop=-1)},splitToasts(t){const o={};for(const i in e)e.hasOwnProperty(i)&&(o[e[i]]=[]);return t.forEach((t=>{o[t.config.position].push(t)})),o}},created(){this.$snotify.emitter.on("snotify",(t=>{this.setOptions(t)}))}}),[["render",function(e,o,i,n,s,a){const r=t.resolveComponent("toast");return t.openBlock(),t.createElementBlock("div",null,[e.backdrop>=0?(t.openBlock(),t.createElementBlock("div",{key:0,class:"snotify-backdrop",style:t.normalizeStyle({opacity:e.backdrop})},null,4)):t.createCommentVNode("",!0),(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(e.notifications,((o,i)=>(t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(["snotify","snotify-"+i]),key:i},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(e.getNotificationsForPos(i),(o=>(t.openBlock(),t.createBlock(r,{toastData:o,key:o.id,onStateChanged:e.stateChanged},null,8,["toastData","onStateChanged"])))),128))],2)))),128))])}]]);function x(t){return{all:t=t||new Map,on:function(e,o){var i=t.get(e);i?i.push(o):t.set(e,[o])},off:function(e,o){var i=t.get(e);i&&(o?i.splice(i.indexOf(o)>>>0,1):t.set(e,[]))},emit:function(e,o){var i=t.get(e);i&&i.slice().map((function(t){t(o)})),(i=t.get("*"))&&i.slice().map((function(t){t(e,o)}))}}}class F{constructor(t,e,o,i){__publicField(this,"eventEmitter",x()),__publicField(this,"_eventsHolder",[]),__publicField(this,"value",""),__publicField(this,"valid"),this.id=t,this.title=e,this.body=o,this.config=i,this.config.type===h&&(this.value=""),this.on("hidden",(()=>{this._eventsHolder.forEach((t=>{this.eventEmitter.off(t.event,t.action)}))}))}on(t,e){return this._eventsHolder.push({event:t,action:e}),this.eventEmitter.on(t,(()=>e(this))),this}}const z={global:{newOnTop:!0,maxOnScreen:8,maxAtPosition:8,oneAtTime:!1,preventDuplicates:!1},toast:{timeout:2e3,showProgressBar:!0,type:i,closeOnClick:!0,pauseOnHover:!0,titleMaxLength:16,bodyMaxLength:150,backdrop:-1,icon:void 0,animation:{enter:"fadeIn",exit:"fadeOut",time:400},html:void 0,position:e.rightBottom},type:{[h]:{timeout:0,closeOnClick:!1,buttons:[{text:"Ok",bold:!0},{text:"Cancel",bold:!1}],placeholder:"Enter answer here...",type:h},[l]:{timeout:0,closeOnClick:!1,buttons:[{text:"Ok",bold:!0},{text:"Cancel",bold:!1}],type:l},[i]:{type:i},[n]:{type:n},[s]:{type:s},[a]:{type:a},[r]:{type:r},[c]:{pauseOnHover:!1,closeOnClick:!1,timeout:0,showProgressBar:!1,type:c}}};function M(t){return t&&"object"==typeof t&&!Array.isArray(t)&&null!==t}function D(...t){const e={};if(!t.length)return e;for(;t.length>0;){const o=t.shift();if(M(o))for(const t in o)M(o[t])?e[t]=D(e[t],o[t]):Object.assign(e,{[t]:o[t]})}return e}function N(t,e,o){return{value:function(...t){return t[0].config=__spreadProps(__spreadValues({},t[0].config),{type:e}),o.value.apply(this,t)}}}function $(t,e,o){return e===c?{value:function(...t){let e;return e=2===t.length?{title:null,body:t[0],config:null,action:t[1]}:3===t.length?"string"==typeof t[1]?{title:t[1],body:t[0],config:null,action:t[2]}:{title:null,body:t[0],config:t[2],action:t[1]}:{title:t[1],body:t[0],config:t[3],action:t[2]},o.value.apply(this,[e])}}:{value:function(...t){let e;return e=1===t.length?{title:null,body:t[0],config:null}:3===t.length?{title:t[1],body:t[0],config:t[2]}:{title:null,config:null,body:t[0],["string"==typeof t[1]?"title":"config"]:t[1]},o.value.apply(this,[e])}}}var V=Object.defineProperty,L=Object.getOwnPropertyDescriptor,H=(t,e,o,i)=>{for(var n,s=i>1?void 0:i?L(e,o):e,a=t.length-1;a>=0;a--)(n=t[a])&&(s=(i?n(e,o,s):n(s))||s);return i&&s&&V(e,o,s),s};class j{constructor(){__publicField(this,"emitter",x()),__publicField(this,"notifications",[]),__publicField(this,"config",z)}emit(){this.emitter.emit("snotify",this.notifications.slice())}get(t){return this.notifications.find((e=>e.id===t))}add(t){var e;(null==(e=this.config.global)?void 0:e.newOnTop)?this.notifications.unshift(t):this.notifications.push(t),this.emit()}remove(t,e){return t?e?(this.notifications=this.notifications.filter((e=>e.id!==t)),this.emit()):void this.emitter.emit("remove",t):this.clear()}clear(){this.notifications=[],this.emit()}button(t,e=!0,o,i=!1){return{text:t,action:e?t=>{o&&o(t),this.remove(t.id)}:o,bold:i}}create(t){var e,o,i,n,s;if((null==(o=null==(e=this.config)?void 0:e.global)?void 0:o.oneAtTime)&&0!==this.notifications.length)return;if((null==(n=null==(i=this.config)?void 0:i.global)?void 0:n.preventDuplicates)&&1===this.notifications.filter((e=>{var o;return e.config.type===(null==(o=null==t?void 0:t.config)?void 0:o.type)})).length)return;const a=D(this.config.toast,this.config.type?[null==(s=t.config)?void 0:s.type]:null,t.config),r=new F(a.id?a.id:Math.floor(Math.random()*(Date.now()-1))+1,t.title?t.title:"",t.body?t.body:"",a);return this.add(r),r}setDefaults(t){return this.config=D(this.config,t)}simple(t){return this.create(t)}success(t){return this.create(t)}error(t){return this.create(t)}info(t){return this.create(t)}warning(t){return this.create(t)}confirm(t){return this.create(t)}prompt(t){return this.create(t)}}H([$,N],j.prototype,"simple",1),H([$,N],j.prototype,"success",1),H([$,N],j.prototype,"error",1),H([$,N],j.prototype,"info",1),H([$,N],j.prototype,"warning",1),H([$,N],j.prototype,"confirm",1),H([$,N],j.prototype,"prompt",1);return{install:(t,e={})=>{const o=new j;o.setDefaults(e),t.config.globalProperties.$snotify=o,t.component("vue-snotify",S)}}}));
